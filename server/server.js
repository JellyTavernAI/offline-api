"use strict";var h2=Object.create;var PS=Object.defineProperty;var p2=Object.getOwnPropertyDescriptor;var m2=Object.getOwnPropertyNames;var y2=Object.getPrototypeOf,g2=Object.prototype.hasOwnProperty;var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var b2=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of m2(e))!g2.call(t,s)&&s!==r&&PS(t,s,{get:()=>e[s],enumerable:!(i=p2(e,s))||i.enumerable});return t};var kt=(t,e,r)=>(r=t!=null?h2(y2(t)):{},b2(e||!t||!t.__esModule?PS(r,"default",{value:t,enumerable:!0}):r,t));var CS=_((uue,AS)=>{"use strict";function x2(t){var e=new t,r=e;function i(){var n=e;return n.next?e=n.next:(e=new t,r=e),n.next=null,n}function s(n){r.next=n,r=n}return{get:i,release:s}}AS.exports=x2});var gp=_((fue,yp)=>{"use strict";var R2=CS();function OS(t,e,r){if(typeof t=="function"&&(r=e,e=t,t=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var i=R2(T2),s=null,n=null,o=0,a=null,l={push:m,drain:Rr,saturated:Rr,pause:u,paused:!1,get concurrency(){return r},set concurrency(E){if(!(E>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=E,!l.paused)for(;s&&o<r;)o++,g()},running:c,resume:d,idle:h,length:f,getQueue:p,unshift:v,empty:Rr,kill:w,killAndDrain:b,error:y};return l;function c(){return o}function u(){l.paused=!0}function f(){for(var E=s,x=0;E;)E=E.next,x++;return x}function p(){for(var E=s,x=[];E;)x.push(E.value),E=E.next;return x}function d(){if(l.paused){if(l.paused=!1,s===null){o++,g();return}for(;s&&o<r;)o++,g()}}function h(){return o===0&&l.length()===0}function m(E,x){var S=i.get();S.context=t,S.release=g,S.value=E,S.callback=x||Rr,S.errorHandler=a,o>=r||l.paused?n?(n.next=S,n=S):(s=S,n=S,l.saturated()):(o++,e.call(t,S.value,S.worked))}function v(E,x){var S=i.get();S.context=t,S.release=g,S.value=E,S.callback=x||Rr,S.errorHandler=a,o>=r||l.paused?s?(S.next=s,s=S):(s=S,n=S,l.saturated()):(o++,e.call(t,S.value,S.worked))}function g(E){E&&i.release(E);var x=s;x&&o<=r?l.paused?o--:(n===s&&(n=null),s=x.next,x.next=null,e.call(t,x.value,x.worked),n===null&&l.empty()):--o===0&&l.drain()}function w(){s=null,n=null,l.drain=Rr}function b(){s=null,n=null,l.drain(),l.drain=Rr}function y(E){a=E}}function Rr(){}function T2(){this.value=null,this.callback=Rr,this.next=null,this.release=Rr,this.context=null,this.errorHandler=null;var t=this;this.worked=function(r,i){var s=t.callback,n=t.errorHandler,o=t.value;t.value=null,t.callback=Rr,t.errorHandler&&n(r,o),s.call(t.context,r,i),t.release(t)}}function P2(t,e,r){typeof t=="function"&&(r=e,e=t,t=null);function i(u,f){e.call(this,u).then(function(p){f(null,p)},f)}var s=OS(t,i,r),n=s.push,o=s.unshift;return s.push=a,s.unshift=l,s.drained=c,s;function a(u){var f=new Promise(function(p,d){n(u,function(h,m){if(h){d(h);return}p(m)})});return f.catch(Rr),f}function l(u){var f=new Promise(function(p,d){o(u,function(h,m){if(h){d(h);return}p(m)})});return f.catch(Rr),f}function c(){var u=new Promise(function(f){process.nextTick(function(){if(s.idle())f();else{var p=s.drain;s.drain=function(){typeof p=="function"&&p(),f(),s.drain=p}}})});return u}}yp.exports=OS;yp.exports.promise=P2});var Vc=_((due,Hc)=>{"use strict";var{format:A2}=require("node:util");function C2(){return`${this.name} [${this.code}]: ${this.message}`}function bp(t,e,r=500,i=Error){if(!t)throw new Error("Fastify error code must not be empty");if(!e)throw new Error("Fastify error message must not be empty");t=t.toUpperCase(),!r&&(r=void 0);function s(...n){if(!new.target)return new s(...n);this.code=t,this.name="FastifyError",this.statusCode=r;let o=n.length-1;o!==-1&&n[o]&&typeof n[o]=="object"&&"cause"in n[o]&&(this.cause=n.pop().cause),this.message=A2(e,...n),Error.stackTraceLimit!==0&&Error.captureStackTrace(this,s)}return s.prototype=Object.create(i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),s.prototype[Symbol.toStringTag]="Error",s.prototype.toString=C2,s}Hc.exports=bp;Hc.exports.default=bp;Hc.exports.createError=bp});var Gc=_((hue,IS)=>{"use strict";var{createError:as}=Vc();IS.exports={AVV_ERR_EXPOSE_ALREADY_DEFINED:as("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' is already defined, specify an expose option for '%s'"),AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:as("AVV_ERR_ATTRIBUTE_ALREADY_DEFINED","'%s' is already defined"),AVV_ERR_CALLBACK_NOT_FN:as("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:as("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:as("AVV_ERR_ROOT_PLG_BOOTED","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:as("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:as("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise"),AVV_ERR_PLUGIN_EXEC_TIMEOUT:as("AVV_ERR_PLUGIN_EXEC_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var Hn=_((pue,$S)=>{"use strict";var O2=Symbol("avvio.Boot"),I2=Symbol("isOnCloseHandler"),$2=Symbol("avvio.ThenifyDoNotWrap"),N2=Symbol("avvio.TimeTree.untrackNode"),k2=Symbol("avvio.TimeTree.trackNode"),q2=Symbol("avvio.TimeTree.getParent"),L2=Symbol("avvio.TimeTree.getNode"),j2=Symbol("avvio.TimeTree.addNode"),D2=Symbol.for("plugin-meta");$S.exports={kAvvio:O2,kIsOnCloseHandler:I2,kThenifyDoNotWrap:$2,kUntrackNode:N2,kTrackNode:k2,kGetParent:q2,kGetNode:L2,kAddNode:j2,kPluginMeta:D2}});var FS=_((mue,DS)=>{"use strict";var{kUntrackNode:NS,kTrackNode:vp,kGetParent:kS,kGetNode:qS,kAddNode:LS}=Hn(),wp=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[vp](e){this.tableId.set(e.id,e),this.tableLabel.has(e.label)?this.tableLabel.get(e.label).push(e):this.tableLabel.set(e.label,[e])}[NS](e){this.tableId.delete(e.id);let r=this.tableLabel.get(e.label);r.pop(),r.length===0&&this.tableLabel.delete(e.label)}[kS](e){if(e===null)return null;if(this.tableLabel.has(e)){let r=this.tableLabel.get(e);return r[r.length-1]}else return null}[qS](e){return this.tableId.get(e)}[LS](e,r,i){let s=this[kS](e);if(s===null)return this.root={parent:null,id:"root",label:r,nodes:[],start:i,stop:null,diff:-1},this[vp](this.root),this.root.id;let o=`${r}-${Math.random()}`,a={parent:e,id:o,label:r,nodes:[],start:i,stop:null,diff:-1};return s.nodes.push(a),this[vp](a),o}start(e,r,i=Date.now()){return this[LS](e,r,i)}stop(e,r=Date.now()){let i=this[qS](e);i&&(i.stop=r,i.diff=i.stop-i.start||0,this[NS](i))}toJSON(){return Object.assign({},this.root)}prettyPrint(){return jS(this.toJSON())}};function jS(t,e=""){let r=e,i=t.nodes.length,s=i-1;r+=`${t.label} ${t.diff} ms
`;for(let n=0;n<i;++n){let o=t.nodes[n],a=e+(n===s?"  ":"\u2502 ");r+=e,r+=n===s?"\u2514\u2500":"\u251C\u2500",r+=o.nodes.length===0?"\u2500 ":"\u252C ",r+=jS(o,a).slice(e.length+2)}return r}DS.exports={TimeTree:wp}});var Kc=_((yue,MS)=>{"use strict";var{debuglog:F2}=require("node:util"),M2=F2("avvio");MS.exports={debug:M2}});var BS=_((gue,zS)=>{"use strict";function z2(){let t={resolve:null,reject:null,promise:null};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}zS.exports={createPromise:z2}});var HS=_((bue,US)=>{"use strict";var{kPluginMeta:_p}=Hn();function B2(t,e){return t[_p]&&t[_p].name?t[_p].name:e&&e.name?e.name:t.name?t.name:t.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}US.exports={getPluginName:B2}});var Wc=_((vue,VS)=>{"use strict";function U2(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}VS.exports={isPromiseLike:U2}});var KS=_((wue,GS)=>{"use strict";var{EventEmitter:H2}=require("node:events"),{inherits:V2}=require("node:util"),{debug:St}=Kc(),{createPromise:G2}=BS(),{AVV_ERR_PLUGIN_EXEC_TIMEOUT:K2}=Gc(),{getPluginName:W2}=HS(),{isPromiseLike:J2}=Wc();function Vn(t,e,r,i,s){this.queue=t,this.func=e,this.options=r,this.isAfter=i,this.timeout=s,this.started=!1,this.name=W2(e,r),this.queue.pause(),this._error=null,this.loaded=!1,this._promise=null,this.startTime=null}V2(Vn,H2);Vn.prototype.exec=function(t,e){St("exec",this.name),this.server=t;let r=this.func,i=this.name,s=!1;this.options=typeof this.options=="function"?this.options(this.server):this.options;let n=null,o=l=>{if(s){St("loading complete",i);return}this._error=l,St(l?"exec errored":"exec completed",i),s=!0,n&&clearTimeout(n),e(l)};this.timeout>0&&(St("setting up timeout",i,this.timeout),n=setTimeout(function(){St("timed out",i),n=null;let l=new K2(i);l.fn=r,o(l)},this.timeout)),this.started=!0,this.startTime=Date.now(),this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.options,o);J2(a)?(St("exec: resolving promise",i),a.then(()=>process.nextTick(o),l=>process.nextTick(o,l))):r.length<3&&o()};Vn.prototype.loadedSoFar=function(){if(St("loadedSoFar",this.name),this.loaded)return Promise.resolve();let t=()=>{this.server.after((r,i)=>{this._error=r,this.queue.pause(),this._promise&&(r?(St("rejecting promise",this.name,r),this._promise.reject(r)):(St("resolving promise",this.name),this._promise.resolve()),this._promise=null),process.nextTick(i,r)}),this.queue.resume()},e;return this._promise?e=Promise.resolve():(this._promise=G2(),e=this._promise.promise,this.server?t():this.on("start",t)),e};Vn.prototype.enqueue=function(t,e){St("enqueue",this.name,t.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.queue.push(t,e)};Vn.prototype.finish=function(t,e){St("finish",this.name,t);let r=()=>{this.loaded||(St("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,e(t))};if(t){this._promise&&(this._promise.reject(t),this._promise=null),r();return}let i=()=>{if(St("check",this.name,this.queue.length(),this.queue.running(),this._promise),this.queue.length()===0&&this.queue.running()===0)if(this._promise){let s=()=>{St("wrap"),queueMicrotask(i)};this._promise.resolve(),this._promise.promise.then(s,s),this._promise=null}else r();else St("delayed",this.name),this.queue.drain=()=>{St("drain",this.name),this.queue.drain=Q2,queueMicrotask(i)}};queueMicrotask(i),this.queue.resume()};function Q2(){}GS.exports={Plugin:Vn}});var JS=_((_ue,WS)=>{"use strict";var{AVV_ERR_PLUGIN_NOT_VALID:Sp}=Gc();function Y2(t){if(!(t&&(typeof t=="function"||typeof t.then=="function")))throw Array.isArray(t)?new Sp("array"):t===null?new Sp("null"):new Sp(typeof t)}WS.exports={validatePlugin:Y2}});var YS=_((Sue,QS)=>{"use strict";function X2(t){return t!==null&&typeof t=="object"&&typeof t.default=="function"}QS.exports={isBundledOrTypescriptPlugin:X2}});var eE=_((Eue,ZS)=>{"use strict";var{debug:XS}=Kc(),{kThenifyDoNotWrap:Ep}=Hn();function Z2(){if(this.booted){XS("thenify returning undefined because we are already booted");return}if(this[Ep]){this[Ep]=!1;return}return XS("thenify"),(t,e)=>this._loadRegistered().then(()=>(this[Ep]=!0,t(this._server)),e)}ZS.exports={thenify:Z2}});var rE=_((xue,tE)=>{"use strict";var{isPromiseLike:ez}=Wc(),{kAvvio:tz}=Hn();function rz(t,e,r){let i=t.apply(t,e);ez(i)&&!i[tz]?i.then(()=>process.nextTick(r),s=>process.nextTick(r,s)):r&&process.nextTick(r)}tE.exports={executeWithThenable:rz}});var fE=_((Rue,uE)=>{"use strict";var Jc=gp(),iz=require("node:events").EventEmitter,sz=require("node:util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:da,AVV_ERR_CALLBACK_NOT_FN:Gn,AVV_ERR_ROOT_PLG_BOOTED:nz,AVV_ERR_READY_TIMEOUT:oz,AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:az}=Gc(),{kAvvio:nE,kIsOnCloseHandler:oE}=Hn(),{TimeTree:lz}=FS(),{Plugin:aE}=KS(),{debug:Kn}=Kc(),{validatePlugin:cz}=JS(),{isBundledOrTypescriptPlugin:uz}=YS(),{isPromiseLike:fz}=Wc(),{thenify:lE}=eE(),{executeWithThenable:iE}=rE();function it(t,e,r){if(typeof t=="function"&&arguments.length===1&&(r=t,e={},t=null),typeof e=="function"&&(r=e,e={}),e=e||{},e.autostart=e.autostart!==!1,e.timeout=Number(e.timeout)||0,e.expose=e.expose||{},!new.target)return new it(t,e,r);this._server=t||this,this._opts=e,t&&this._expose(),this._current=[],this._error=null,this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new lz,this._readyQ=Jc(this,cE,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=sE},this._closeQ=Jc(this,hz,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=sE},this._doStart=null;let i=this;this._root=new aE(Jc(this,this._loadPluginNextTick,1),function(n,o,a){i._doStart=a,o.autostart&&i.start()},e,!1,0),this._trackPluginLoading(this._root),this._loadPlugin(this._root,s=>{Kn("root plugin ready");try{this.emit("preReady"),this._root=null}catch(n){s=s||this._error||n}if(s){if(this._error=s,this._readyQ.length()===0)throw s}else this.booted=!0;this._readyQ.resume()})}sz(it,iz);it.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};it.prototype.override=function(t,e,r){return t};it.prototype[nE]=!0;it.prototype.use=function(t,e){return this._lastUsed=this._addPlugin(t,e,!1),this};it.prototype._loadRegistered=function(){let t=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.queue.resume()),t?t.loadedSoFar():Promise.resolve()};Object.defineProperty(it.prototype,"then",{get:lE});it.prototype._addPlugin=function(t,e,r){if(uz(t)&&(t=t.default),cz(t),e=e||{},this.booted)throw new nz;let i=this._current[0],s=this._opts.timeout;if(!i.loaded&&i.timeout>0){let o=Date.now()-i.startTime;s=i.timeout-(o+3)}let n=new aE(Jc(this,this._loadPluginNextTick,1),t,e,r,s);if(this._trackPluginLoading(n),i.loaded)throw new Error(n.name,i.name);return i.enqueue(n,o=>{o&&(this._error=o)}),n};it.prototype._expose=function(){let e=this,r=e._server,{use:i="use",after:s="after",ready:n="ready",onClose:o="onClose",close:a="close"}=this._opts.expose;if(r[i])throw new da(i,"use");if(r[i]=function(l,c){return e.use(l,c),this},r[s])throw new da(s,"after");if(r[s]=function(l){return typeof l!="function"?e._loadRegistered():(e.after(xp(l,this)),this)},r[n])throw new da(n,"ready");if(r[n]=function(l){if(l&&typeof l!="function")throw new Gn(n,typeof l);return e.ready(l?xp(l,this):void 0)},r[o])throw new da(o,"onClose");if(r[o]=function(l){if(typeof l!="function")throw new Gn(o,typeof l);return e.onClose(pz(l,this)),this},r[a])throw new da(a,"close");if(r[a]=function(l){if(l&&typeof l!="function")throw new Gn(a,typeof l);return l?(e.close(xp(l,this)),this):e.close()},r.then)throw new az("then");Object.defineProperty(r,"then",{get:lE.bind(e)}),r[nE]=!0};it.prototype.after=function(t){if(!t)return this._loadRegistered();this._addPlugin(e.bind(this),{},!0);function e(r,i,s){cE.call(this,t,s)}return this};it.prototype.onClose=function(t){if(typeof t!="function")throw new Gn("onClose",typeof t);return t[oE]=!0,this._closeQ.unshift(t,e=>{e&&(this._error=e)}),this};it.prototype.close=function(t){let e;if(t){if(typeof t!="function")throw new Gn("close",typeof t)}else e=new Promise(function(r,i){t=function(s){if(s)return i(s);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(t),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),e};it.prototype.ready=function(t){if(t){if(typeof t!="function")throw new Gn("ready",typeof t);this._readyQ.push(t),queueMicrotask(this.start.bind(this));return}return new Promise((e,r)=>{this._readyQ.push(s),this.start();let i=this._current[0].server;function s(n,o,a){n?r(n):e(i),process.nextTick(a)}})};it.prototype._trackPluginLoading=function(t){let e=this._current[0]?.name||null;t.once("start",(r,i,s)=>{let n=this.pluginTree.start(e||null,i,s);t.once("loaded",(o,a,l)=>{this.pluginTree.stop(n,l)})})};it.prototype.prettyPrint=function(){return this.pluginTree.prettyPrint()};it.prototype.toJSON=function(){return this.pluginTree.toJSON()};it.prototype._loadPlugin=function(t,e){let r=this;if(fz(t.func)){t.func.then(o=>{typeof o.default=="function"&&(o=o.default),t.func=o,this._loadPlugin(t,e)},e);return}let i=r._current[0];if(r._current.unshift(t),r._error&&!t.isAfter){Kn("skipping loading of plugin as instance errored and it is not an after",t.name),process.nextTick(n);return}let s=i&&i.server||r._server;if(!t.isAfter)try{s=r.override(s,t.func,t.options)}catch(o){return Kn("override errored",t.name),n(o)}t.exec(s,n);function n(o){t.finish(o,a=>{r._current.shift(),e(a)})}};it.prototype._loadPluginNextTick=function(t,e){process.nextTick(this._loadPlugin.bind(this),t,e)};function sE(){}function cE(t,e){let r=this._server,i=this._error;if(this._error=null,t.length===0)this._error=i,iE(t,[],e);else if(t.length===1)iE(t,[i],e);else if(this._opts.timeout===0){let s=n=>{this._error=n,e(this._error)};t.length===2?t(i,s):t(i,r,s)}else dz.call(this,t,i,r,e)}function dz(t,e,r,i){let s=t.unwrappedName??t.name;Kn("setting up ready timeout",s,this._opts.timeout);let n=setTimeout(()=>{Kn("timed out",s),n=null;let a=new oz(s);a.fn=t,this._error=a,i(a)},this._opts.timeout);t.length===2?t(e,o.bind(this)):t(e,r,o.bind(this));function o(a){n&&(clearTimeout(n),this._error=a,i(this._error))}}function hz(t,e){let r=this._server,i=t[oE];if(t.length===0||t.length===1){let s;i?s=t(r):s=t(this._error),s&&typeof s.then=="function"?(Kn("resolving close/onClose promise"),s.then(()=>process.nextTick(e),n=>process.nextTick(e,n))):process.nextTick(e)}else t.length===2?t(i?r:this._error,e):i?t(r,e):t(this._error,r,e)}function pz(t,e){return r.bind(e);function r(i,s){let n;t.length===0?(n=t(),n&&n.then?n.then(function(){process.nextTick(s)},s):process.nextTick(s)):t.length===1?(n=t(this),n&&n.then?n.then(function(){process.nextTick(s)},s):process.nextTick(s)):t(this,s)}}function xp(t,e){let r=i.bind(e);return r.unwrappedName=t.name,r;function i(s,n){let o;t?t.length===0?(o=t(),o&&o.then?o.then(function(){process.nextTick(n,s)},n):process.nextTick(n,s)):t.length===1?(o=t(s),o&&o.then?o.then(function(){process.nextTick(n)},n):process.nextTick(n)):t.length===2?t(s,n):t(s,this,n):process.nextTick(n)}}uE.exports=it});var pt=_((Tue,dE)=>{"use strict";var mz={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kSupportedHTTPMethods:Symbol("fastify.acceptedHTTPMethods"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kGenReqId:Symbol("fastify.genReqId"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};dE.exports=mz});var Et=_((Pue,Qc)=>{"use strict";var M=Vc(),Vs={FST_ERR_NOT_FOUND:M("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:M("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:M("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:M("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:M("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:M("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:M("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VALIDATION:M("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:M("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_ERROR_HANDLER_NOT_FN:M("FST_ERR_ERROR_HANDLER_NOT_FN","Error Handler must be a function",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:M("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:M("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:M("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:M("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:M("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:M("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:M("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:M("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:M("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:M("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:M("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:M("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:M("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:M("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_DEC_REFERENCE_TYPE:M("FST_ERR_DEC_REFERENCE_TYPE","The decorator '%s' of type '%s' is a reference type. Use the { getter, setter } interface instead."),FST_ERR_HOOK_INVALID_TYPE:M("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:M("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:M("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:M("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:M("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:M("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook%s timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:M("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:M("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_INSTANCE:M("FST_ERR_LOG_INVALID_LOGGER_INSTANCE","loggerInstance only accepts a logger instance.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_CONFIG:M("FST_ERR_LOG_INVALID_LOGGER_CONFIG","logger options only accepts a configuration object.",500,TypeError),FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:M("FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED","You cannot provide both logger and loggerInstance. Please provide only one.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:M("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_RESPONSE_BODY_CONSUMED:M("FST_ERR_REP_RESPONSE_BODY_CONSUMED","Response.body is already consumed."),FST_ERR_REP_READABLE_STREAM_LOCKED:M("FST_ERR_REP_READABLE_STREAM_LOCKED","ReadableStream was locked. You should call releaseLock() method on reader before sending."),FST_ERR_REP_ALREADY_SENT:M("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:M("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:M("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:M("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:M("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:M("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:M("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:M("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:M("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:M("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:M("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:M("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:M("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:M("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:M("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:M("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:M("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:M("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_HTTP2_INVALID_VERSION:M("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:M("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:M("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:M("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:M("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:M("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_INVALID_URL:M("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:M("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:M("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:M("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:M("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:M("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:M("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:M("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:M("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:M("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:M("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:M("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:M("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:M("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:M("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:M("FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER","The %s plugin being registered mixes async and callback styles. Async plugin should not mix async and callback style.",500,TypeError),FST_ERR_PLUGIN_CALLBACK_NOT_FN:M("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:M("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:M("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:M("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:M("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function yz(t,e){return e.cause=t,e}Qc.exports=Vs;Qc.exports.appendStackTrace=yz;Qc.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:Vs.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:Vs.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:Vs.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:Vs.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:Vs.FST_ERR_PLUGIN_TIMEOUT,AVV_ERR_PLUGIN_EXEC_TIMEOUT:Vs.FST_ERR_PLUGIN_TIMEOUT}});var ls=_((Aue,_E)=>{"use strict";var gz=["onRoute","onRegister","onReady","onListen","preClose","onClose"],yE=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],bz=yE.concat(gz),{FST_ERR_HOOK_INVALID_TYPE:vz,FST_ERR_HOOK_INVALID_HANDLER:wz,FST_ERR_SEND_UNDEFINED_ERR:Yc,FST_ERR_HOOK_TIMEOUT:_z,FST_ERR_HOOK_NOT_SUPPORTED:Sz,AVVIO_ERRORS_MAP:hE,appendStackTrace:pE}=Et(),{kChildren:ha,kHooks:gE,kRequestPayloadStream:mE}=pt();function pa(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}pa.prototype=Object.create(null);pa.prototype.validate=function(t,e){if(typeof t!="string")throw new vz;if(Array.isArray(this[t])===!1)throw new Sz(t);if(typeof e!="function")throw new wz(t,Object.prototype.toString.call(e))};pa.prototype.add=function(t,e){this.validate(t,e),this[t].push(e)};function Ez(t){let e=new pa;return e.onRequest=t.onRequest.slice(),e.preParsing=t.preParsing.slice(),e.preValidation=t.preValidation.slice(),e.preSerialization=t.preSerialization.slice(),e.preHandler=t.preHandler.slice(),e.onSend=t.onSend.slice(),e.onResponse=t.onResponse.slice(),e.onError=t.onError.slice(),e.onRoute=t.onRoute.slice(),e.onRegister=t.onRegister.slice(),e.onTimeout=t.onTimeout.slice(),e.onRequestAbort=t.onRequestAbort.slice(),e.onReady=[],e.onListen=[],e.preClose=[],e}function bE(t,e,r,i){let s=r[gE][t],n=0,o=0;l();function a(u){let f=s[n-1]?.name,p=f?` "${f}"`:"";if(u){u.code==="AVV_ERR_READY_TIMEOUT"?u=pE(u,new _z(t,p)):u=hE[u.code]!=null?pE(u,new hE[u.code](u.message)):u,i(u);return}i()}function l(u){if(u){a(u);return}if(n===s.length&&o===r[ha].length){n===0&&o===0?a():e(function(p,d){a(p),d(p)});return}if(n===s.length&&o<r[ha].length){let f=r[ha][o++];bE(t,e,f,l);return}e(c(s[n++],r)),l()}function c(u,f){return function(p,d){if(p){d(p);return}if(u.length===1){try{u.call(f,d)}catch(h){d(h)}return}try{let h=u.call(f);if(h&&typeof h.then=="function"){h.then(d,d);return}}catch(h){p=h}d(p)}}}function vE(t){let e=t[gE].onListen,r=e.length,i=0,s=0;n();function n(a){if(a&&t.log.error(a),i===r){for(;s<t[ha].length;){let l=t[ha][s++];vE(l)}return}o(e[i++],t,n)}async function o(a,l,c){if(a.length===1){try{a.call(l,c)}catch(u){c(u)}return}try{let u=a.call(l);if(u&&typeof u.then=="function"){u.then(c,c);return}c()}catch(u){c(u)}}}function Wn(t){return function(r,i,s,n){let o=0;function a(u){if(u||o===r.length){n(u,i,s);return}let f;try{f=t(r[o++],i,s,a)}catch(p){n(p,i,s);return}f&&typeof f.then=="function"&&f.then(l,c)}function l(){a()}function c(u){u||(u=new Yc),n(u,i,s)}a()}}function xz(t,e,r,i){return t(e,r,i)}var Rz=Wn(xz),Tz=Wn(ma),Pz=Wn(ma),Az=Wn(ma),Cz=Wn(ma);function wE(t,e,r,i,s){let n=0;function o(c,u){if(c){s(c,e,r,i);return}if(u!==void 0&&(i=u),n===t.length){s(null,e,r,i);return}let f;try{f=t[n++](e,r,i,o)}catch(p){s(p,e,r);return}f&&typeof f.then=="function"&&f.then(a,l)}function a(c){o(null,c)}function l(c){c||(c=new Yc),s(c,e,r,i)}o()}var Oz=wE;function Iz(t,e,r,i){let s=0;function n(l,c){if(r.sent)return;if(c!==void 0&&(e[mE]=c),l||s===t.length){i(l,e,r);return}let u;try{u=t[s++](e,r,e[mE],n)}catch(f){i(f,e,r);return}u&&typeof u.then=="function"&&u.then(o,a)}function o(l){n(null,l)}function a(l){l||(l=new Yc),i(l,e,r)}n()}function $z(t,e,r){let i=0;function s(a){if(a||i===t.length){r(a,e);return}let l;try{l=t[i++](e,s)}catch(c){r(c,e);return}l&&typeof l.then=="function"&&l.then(n,o)}function n(){s()}function o(a){a||(a=new Yc),r(a,e)}s()}function ma(t,e,r,i){if(r.sent!==!0)return t(e,r,i)}_E.exports={Hooks:pa,buildHooks:Ez,hookRunnerGenerator:Wn,preParsingHookRunner:Iz,onResponseHookRunner:Rz,onSendHookRunner:wE,preSerializationHookRunner:Oz,onRequestAbortHookRunner:$z,hookIterator:ma,hookRunnerApplication:bE,onListenHookRunner:vE,preHandlerHookRunner:Pz,preValidationHookRunner:Tz,onRequestHookRunner:Cz,onTimeoutHookRunner:Az,lifecycleHooks:yE,supportedHooks:bz}});var IE=_((Cue,OE)=>{"use strict";var Nz=require("node:http"),kz=require("node:https"),qz=require("node:dns"),Lz=require("node:os"),{kState:qt,kOptions:jz,kServerBindings:Dz}=pt(),{onListenHookRunner:Xc}=ls(),{FST_ERR_HTTP2_INVALID_VERSION:Fz,FST_ERR_REOPENED_CLOSE_SERVER:xE,FST_ERR_REOPENED_SERVER:RE,FST_ERR_LISTEN_OPTIONS_INVALID:Mz}=Et();OE.exports.createServer=zz;function TE(t){return`Server listening at ${t}`}function zz(t,e){let r=AE(t,e);function i(s={port:0,host:"localhost"},n=void 0){if(typeof n=="function"&&(s.cb=n),s.signal){if(typeof s.signal.on!="function"&&typeof s.signal.addEventListener!="function")throw new Mz("Invalid options.signal");if(s.signal.aborted)this.close();else{let a=()=>{this.close()};s.signal.addEventListener("abort",a,{once:!0})}}let o;if(s.path==null?o=s.host??"localhost":o=s.host,(!Object.hasOwn(s,"host")||s.host==null)&&(s.host=o),o==="localhost"?s.cb=(a,l)=>{if(a){n(a,l);return}SE.call(this,r,e,t,s,()=>{this[qt].listening=!0,n(null,l),Xc(this)})}:s.cb=(a,l)=>{if(a){n(a,l);return}this[qt].listening=!0,n(null,l),Xc(this)},n===void 0)return Bz.call(this,r,s).then(l=>new Promise((c,u)=>{o==="localhost"?SE.call(this,r,e,t,s,()=>{this[qt].listening=!0,c(l),Xc(this)}):(c(l),Xc(this))}));this.ready(PE.call(this,r,s))}return{server:r,listen:i}}function SE(t,e,r,i,s){this[qt].listening=!1,qz.lookup(i.host,{all:!0},(n,o)=>{if(n){s();return}let a=t.listening&&r.serverFactory,l=0,c=0;if(!a){let f=t.address();for(let p of o)if(p.address!==f.address){l++;let d=Object.assign({},i,{host:p.address,port:f.port,cb:v=>{c++,v||this[Dz].push(h),c===l&&s()}}),h=AE(r,e),m=()=>{h.close(()=>{}),typeof h.closeAllConnections=="function"&&r.forceCloseConnections===!0&&h.closeAllConnections()};h.on("upgrade",t.emit.bind(t,"upgrade")),t.on("unref",m),t.on("close",m),t.on("error",m),this[qt].listening=!1,PE.call(this,h,d)()}}if(l===0){s();return}let u=t.unref;t.unref=function(){u.call(t),t.emit("unref")}})}function PE(t,e){let r=i=>{if(t.removeListener("error",r),t.removeListener("listening",r),i)this[qt].listening=!1,e.cb(i,null);else{let s=CE.call(this,t,e.listenTextResolver||TE);e.cb(null,s)}};return i=>{if(i!=null)return e.cb(i);if(this[qt].listening&&this[qt].closing)return e.cb(new xE,null);if(this[qt].listening)return e.cb(new RE,null);t.once("error",r),this[qt].closing||(t.once("listening",r),t.listen(e),this[qt].listening=!0)}}function Bz(t,e){return this[qt].listening&&this[qt].closing?Promise.reject(new xE):this[qt].listening?Promise.reject(new RE):this.ready().then(()=>{let r,i;function s(){t.removeListener("error",r),t.removeListener("listening",i)}let n=new Promise((a,l)=>{r=c=>{s(),this[qt].listening=!1,l(c)},t.once("error",r)}),o=new Promise((a,l)=>{i=()=>{s(),this[qt].listening=!0,a(CE.call(this,t,e.listenTextResolver||TE))},t.once("listening",i)});return t.listen(e),Promise.race([n,o])})}function AE(t,e){let r=null,i=t.https===!0?{}:t.https;return t.serverFactory?r=t.serverFactory(e,t):t.http2?(typeof i=="object"?r=EE().createSecureServer(i,e):r=EE().createServer(e),r.on("session",Hz(t.http2SessionTimeout))):(i?r=kz.createServer(i,e):r=Nz.createServer(t.http,e),r.keepAliveTimeout=t.keepAliveTimeout,r.requestTimeout=t.requestTimeout,t.maxRequestsPerSocket>0&&(r.maxRequestsPerSocket=t.maxRequestsPerSocket)),t.serverFactory||r.setTimeout(t.connectionTimeout),r}function Uz(t){return t.address==="0.0.0.0"?Object.values(Lz.networkInterfaces()).flatMap(e=>e.filter(r=>r.family==="IPv4")).sort(e=>e.internal?-1:1).map(e=>e.address):[t.address]}function CE(t,e){let r;typeof t.address()=="string"?r=[t.address()]:(t.address().address.indexOf(":")===-1?r=Uz(t.address()).map(s=>s+":"+t.address().port):r=["["+t.address().address+"]:"+t.address().port],r=r.map(s=>"http"+(this[jz].https?"s":"")+"://"+s));for(let s of r)this.log.info(e(s));return r[0]}function EE(){try{return require("node:http2")}catch{throw new Fz}}function Hz(t){return function(e){e.setTimeout(t,Vz)}}function Vz(){this.close()}});var Pp=_((Oue,Zc)=>{"use strict";var{format:Rp}=require("node:util");function Gz(t){return $E({...t,name:"DeprecationWarning"})}function $E({name:t,code:e,message:r,unlimited:i=!1}={}){if(!t)throw new Error("Warning name must not be empty");if(!e)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof i!="boolean")throw new Error("Warning opts.unlimited must be a boolean");e=e.toUpperCase();let s={[t]:function(o,a,l){n.emitted===!0&&n.unlimited!==!0||(n.emitted=!0,process.emitWarning(n.format(o,a,l),n.name,n.code))}};i&&(s={[t]:function(o,a,l){n.emitted=!0,process.emitWarning(n.format(o,a,l),n.name,n.code)}});let n=s[t];return n.emitted=!1,n.message=r,n.unlimited=i,n.code=e,n.format=function(o,a,l){let c;return o&&a&&l?c=Rp(r,o,a,l):o&&a?c=Rp(r,o,a):o?c=Rp(r,o):c=r,c},n}var Tp={createWarning:$E,createDeprecation:Gz};Zc.exports=Tp;Zc.exports.default=Tp;Zc.exports.processWarning=Tp});var Ap=_((Iue,kE)=>{"use strict";var{createWarning:NE}=Pp(),Kz=NE({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),Wz=NE({name:"FastifySecurity",code:"FSTSEC001",message:'You are using /%s/ Content-Type which may be vulnerable to CORS attack. Please make sure your RegExp start with "^" or include ";?" to proper detection of the essence MIME type.',unlimited:!0});kE.exports={FSTWRN001:Kz,FSTSEC001:Wz}});var Ip=_(($ue,LE)=>{"use strict";var{kSchemaHeaders:ru,kSchemaParams:Cp,kSchemaQuerystring:Op,kSchemaBody:Gs,kSchemaResponse:qE}=pt(),Jz=/^[1-5](?:\d{2}|xx)$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:Qz}=Et(),{FSTWRN001:eu}=Ap();function Yz(t,e){if(!t.schema||!t.schema.response)return;let{method:r,url:i}=t.config||{};t[qE]=Object.keys(t.schema.response).reduce(function(s,n){let o=t.schema.response[n];if(n=n.toLowerCase(),!Jz.test(n))throw new Qz;if(o.content){let a={};for(let l of Object.keys(o.content)){let c=o.content[l].schema;a[l]=e({schema:c,url:i,method:r,httpStatus:n,contentType:l})}s[n]=a}else s[n]=e({schema:o,url:i,method:r,httpStatus:n});return s},{})}function Xz(t,e,r){let{schema:i}=t;if(!i)return;let{method:s,url:n}=t.config||{},o=i.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))t[ru]=e({schema:o,method:s,url:n,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(l=>{a[l]=o[l]}),a.required instanceof Array&&(a.required=a.required.map(l=>l.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(l=>{a.properties[l.toLowerCase()]=o.properties[l]})),t[ru]=e({schema:a,method:s,url:n,httpPart:"headers"})}else Object.hasOwn(i,"headers")&&eu("headers",s,n);if(i.body){let a=i.body.content;if(a){let l={};for(let c of Object.keys(a)){let u=a[c].schema;l[c]=e({schema:u,method:s,url:n,httpPart:"body",contentType:c})}t[Gs]=l}else t[Gs]=e({schema:i.body,method:s,url:n,httpPart:"body"})}else Object.hasOwn(i,"body")&&eu("body",s,n);i.querystring?t[Op]=e({schema:i.querystring,method:s,url:n,httpPart:"querystring"}):Object.hasOwn(i,"querystring")&&eu("querystring",s,n),i.params?t[Cp]=e({schema:i.params,method:s,url:n,httpPart:"params"}):Object.hasOwn(i,"params")&&eu("params",s,n)}function tu(t,e,r){let i=e[r]===void 0,s=t&&t(i?null:e[r]);if(s?.then)return s.then(o=>n(o)).catch(o=>o);return n(s);function n(o){return o===!1?t.errors:o&&o.error?o.error:(o&&o.value&&(e[r]=o.value),!1)}}function iu(t,e,r){let i=r===void 0;if(i||!r.skipParams){let n=tu(t[Cp],e,"params");if(n)return typeof n.then!="function"?cs(n,"params",t.schemaErrorFormatter):Zz(n,t,e)}if(i||!r.skipBody){let n=null;if(typeof t[Gs]=="function")n=t[Gs];else if(t[Gs]){let a=e.headers["content-type"]?.split(";",1)[0],l=t[Gs][a];l&&(n=l)}let o=tu(n,e,"body");if(o)return typeof o.then!="function"?cs(o,"body",t.schemaErrorFormatter):eB(o,t,e)}if(i||!r.skipQuery){let n=tu(t[Op],e,"query");if(n)return typeof n.then!="function"?cs(n,"querystring",t.schemaErrorFormatter):tB(n,t,e)}let s=tu(t[ru],e,"headers");return s?typeof s.then!="function"?cs(s,"headers",t.schemaErrorFormatter):rB(s,t,e):!1}function Zz(t,e,r){return t.then(i=>i?cs(i,"params",e.schemaErrorFormatter):iu(e,r,{skipParams:!0}))}function eB(t,e,r){return t.then(i=>i?cs(i,"body",e.schemaErrorFormatter):iu(e,r,{skipParams:!0,skipBody:!0}))}function tB(t,e,r){return t.then(i=>i?cs(i,"querystring",e.schemaErrorFormatter):iu(e,r,{skipParams:!0,skipBody:!0,skipQuery:!0}))}function rB(t,e,r){return t.then(i=>i?cs(i,"headers",e.schemaErrorFormatter):!1)}function cs(t,e,r){if(t instanceof Error)return t.statusCode=t.statusCode||400,t.code=t.code||"FST_ERR_VALIDATION",t.validationContext=t.validationContext||e,t;let i=r(t,e);return i.statusCode=i.statusCode||400,i.code=i.code||"FST_ERR_VALIDATION",i.validation=t,i.validationContext=e,i}LE.exports={symbols:{bodySchema:Gs,querystringSchema:Op,responseSchema:qE,paramsSchema:Cp,headersSchema:ru},compileSchemasForValidation:Xz,compileSchemasForSerialization:Yz,validate:iu}});var $p=_((Nue,DE)=>{"use strict";var{kReplyIsError:jE,kReplyHijacked:iB}=pt(),sB=require("node:diagnostics_channel"),ya=sB.tracingChannel("fastify.request.handler");function nB(t,e,r){r&&(r.async=!0),t.then(function(i){if(e[iB]!==!0){r&&ya.asyncStart.publish(r);try{if(i!==void 0||e.sent===!1&&e.raw.headersSent===!1&&e.request.raw.aborted===!1)try{e.send(i)}catch(s){e[jE]=!0,e.send(s)}}finally{r&&ya.asyncEnd.publish(r)}}},function(i){r&&(r.error=i,ya.error.publish(r),ya.asyncStart.publish(r));try{if(e.sent===!0){e.log.error({err:i},"Promise errored, but reply.sent = true was set");return}e[jE]=!0,e.send(i)}catch(s){e.send(s)}finally{r&&ya.asyncEnd.publish(r)}})}DE.exports=nB});var Lp=_((kue,qp)=>{"use strict";var oB=require("node:diagnostics_channel"),{validate:aB}=Ip(),{preValidationHookRunner:lB,preHandlerHookRunner:cB}=ls(),uB=$p(),{kReplyIsError:su,kRouteContext:ji,kFourOhFourContext:fB,kSupportedHTTPMethods:FE}=pt(),ga=oB.tracingChannel("fastify.request.handler");function dB(t,e,r){if(r.sent===!0)return;if(t!=null){r[su]=!0,r.send(t);return}let i=e.raw.method,s=e.headers,n=e[ji];if(this[FE].bodyless.has(i)){Ks(e,r);return}if(this[FE].bodywith.has(i)){let o=s["content-type"],a=s["content-length"],l=s["transfer-encoding"];if(o===void 0)(a===void 0||a==="0")&&l===void 0?Ks(e,r):n.contentTypeParser.run("",Ks,e,r);else{if(a===void 0&&l===void 0&&i==="OPTIONS"){Ks(e,r);return}n.contentTypeParser.run(o,Ks,e,r)}return}Ks(e,r)}function Ks(t,e){try{t[ji].preValidation!==null?lB(t[ji].preValidation,t,e,Np):Np(null,t,e)}catch(r){Np(r,t,e)}}function Np(t,e,r){if(r.sent===!0)return;if(t!=null){r[su]=!0,r.send(t);return}let i=aB(r[ji],e);if(i&&typeof i.then=="function"||!1){let n=ME.bind(null,e,r);i.then(n,n)}else ME(e,r,i)}function ME(t,e,r){if(r){if(e[ji].attachValidation===!1){e.send(r);return}e.request.validationError=r}t[ji].preHandler!==null?cB(t[ji].preHandler,t,e,kp):kp(null,t,e)}function kp(t,e,r){if(r.sent)return;let i=e[ji];if(!ga.hasSubscribers||i[fB]===null)zE(t,e,r);else{let s={request:e,reply:r,async:!1,route:{url:i.config.url,method:i.config.method}};ga.start.runStores(s,zE,void 0,t,e,r,s)}}function zE(t,e,r,i){let s=e[ji];try{if(t!=null){r[su]=!0,r.send(t),i&&(i.error=t,ga.error.publish(i));return}let n;try{n=s.handler(e,r)}catch(o){i&&(i.error=o,ga.error.publish(i)),r[su]=!0,r.send(o);return}n!==void 0&&(n!==null&&typeof n.then=="function"?uB(n,r,i):r.send(n))}finally{i&&ga.end.publish(i)}}qp.exports=dB;qp.exports[Symbol.for("internals")]={handler:Ks,preHandlerCallback:kp}});var UE=_((que,BE)=>{"use strict";function Jn(){}var hB={fatal:Jn,error:Jn,warn:Jn,info:Jn,debug:Jn,trace:Jn};Object.defineProperty(BE,"exports",{get(){return Object.create(hB)}})});var Dp=_((Lue,GE)=>{"use strict";var ba=t=>t&&typeof t.message=="string",jp=t=>{if(!t)return;let e=t.cause;if(typeof e=="function"){let r=t.cause();return ba(r)?r:void 0}else return ba(e)?e:void 0},HE=(t,e)=>{if(!ba(t))return"";let r=t.stack||"";if(e.has(t))return r+`
causes have become circular...`;let i=jp(t);return i?(e.add(t),r+`
caused by: `+HE(i,e)):r},pB=t=>HE(t,new Set),VE=(t,e,r)=>{if(!ba(t))return"";let i=r?"":t.message||"";if(e.has(t))return i+": ...";let s=jp(t);if(s){e.add(t);let n=typeof t.cause=="function";return i+(n?"":": ")+VE(s,e,n)}else return i},mB=t=>VE(t,new Set);GE.exports={isErrorLike:ba,getErrorCause:jp,stackWithCauses:pB,messageWithCauses:mB}});var Fp=_((jue,WE)=>{"use strict";var yB=Symbol("circular-ref-tag"),nu=Symbol("pino-raw-err-ref"),KE=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[nu]},set:function(t){this[nu]=t}}});Object.defineProperty(KE,nu,{writable:!0,value:{}});WE.exports={pinoErrProto:KE,pinoErrorSymbols:{seen:yB,rawSymbol:nu}}});var YE=_((Due,QE)=>{"use strict";QE.exports=zp;var{messageWithCauses:gB,stackWithCauses:bB,isErrorLike:JE}=Dp(),{pinoErrProto:vB,pinoErrorSymbols:wB}=Fp(),{seen:Mp}=wB,{toString:_B}=Object.prototype;function zp(t){if(!JE(t))return t;t[Mp]=void 0;let e=Object.create(vB);e.type=_B.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=gB(t),e.stack=bB(t),Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>zp(r)));for(let r in t)if(e[r]===void 0){let i=t[r];JE(i)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(i,Mp)&&(e[r]=zp(i)):e[r]=i}return delete t[Mp],e.raw=t,e}});var ZE=_((Fue,XE)=>{"use strict";XE.exports=au;var{isErrorLike:Bp}=Dp(),{pinoErrProto:SB,pinoErrorSymbols:EB}=Fp(),{seen:ou}=EB,{toString:xB}=Object.prototype;function au(t){if(!Bp(t))return t;t[ou]=void 0;let e=Object.create(SB);e.type=xB.call(t.constructor)==="[object Function]"?t.constructor.name:t.name,e.message=t.message,e.stack=t.stack,Array.isArray(t.errors)&&(e.aggregateErrors=t.errors.map(r=>au(r))),Bp(t.cause)&&!Object.prototype.hasOwnProperty.call(t.cause,ou)&&(e.cause=au(t.cause));for(let r in t)if(e[r]===void 0){let i=t[r];Bp(i)?Object.prototype.hasOwnProperty.call(i,ou)||(e[r]=au(i)):e[r]=i}return delete t[ou],e.raw=t,e}});var ix=_((Mue,rx)=>{"use strict";rx.exports={mapHttpRequest:RB,reqSerializer:tx};var Up=Symbol("pino-raw-req-ref"),ex=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Up]},set:function(t){this[Up]=t}}});Object.defineProperty(ex,Up,{writable:!0,value:{}});function tx(t){let e=t.info||t.socket,r=Object.create(ex);if(r.id=typeof t.id=="function"?t.id():t.id||(t.info?t.info.id:void 0),r.method=t.method,t.originalUrl)r.url=t.originalUrl;else{let i=t.path;r.url=typeof i=="string"?i:t.url?t.url.path||t.url:void 0}return t.query&&(r.query=t.query),t.params&&(r.params=t.params),r.headers=t.headers,r.remoteAddress=e&&e.remoteAddress,r.remotePort=e&&e.remotePort,r.raw=t.raw||t,r}function RB(t){return{req:tx(t)}}});var ax=_((zue,ox)=>{"use strict";ox.exports={mapHttpResponse:TB,resSerializer:nx};var Hp=Symbol("pino-raw-res-ref"),sx=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Hp]},set:function(t){this[Hp]=t}}});Object.defineProperty(sx,Hp,{writable:!0,value:{}});function nx(t){let e=Object.create(sx);return e.statusCode=t.headersSent?t.statusCode:null,e.headers=t.getHeaders?t.getHeaders():t._headers,e.raw=t,e}function TB(t){return{res:nx(t)}}});var Gp=_((Bue,lx)=>{"use strict";var Vp=YE(),PB=ZE(),lu=ix(),cu=ax();lx.exports={err:Vp,errWithCause:PB,mapHttpRequest:lu.mapHttpRequest,mapHttpResponse:cu.mapHttpResponse,req:lu.reqSerializer,res:cu.resSerializer,wrapErrorSerializer:function(e){return e===Vp?e:function(i){return e(Vp(i))}},wrapRequestSerializer:function(e){return e===lu.reqSerializer?e:function(i){return e(lu.reqSerializer(i))}},wrapResponseSerializer:function(e){return e===cu.resSerializer?e:function(i){return e(cu.resSerializer(i))}}}});var Kp=_((Uue,cx)=>{"use strict";function AB(t,e){return e}cx.exports=function(){let e=Error.prepareStackTrace;Error.prepareStackTrace=AB;let r=new Error().stack;if(Error.prepareStackTrace=e,!Array.isArray(r))return;let i=r.slice(2),s=[];for(let n of i)n&&s.push(n.getFileName());return s}});var fx=_((Hue,ux)=>{"use strict";ux.exports=CB;function CB(t={}){let{ERR_PATHS_MUST_BE_STRINGS:e=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=i=>`fast-redact \u2013 Invalid path (${i})`}=t;return function({paths:s}){s.forEach(n=>{if(typeof n!="string")throw Error(e());try{if(/〇/.test(n))throw Error();let o=(n[0]==="["?"":".")+n.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(o)||/\/\*/.test(o))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${o}
            if ([o${o}].length !== 1) throw Error()`)()}catch{throw Error(r(n))}})}}});var uu=_((Vue,dx)=>{"use strict";dx.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var px=_((Gue,hx)=>{"use strict";var OB=uu();hx.exports=IB;function IB({paths:t}){let e=[];var r=0;let i=t.reduce(function(s,n,o){var a=n.match(OB).map(u=>u.replace(/'|"|`/g,""));let l=n[0]==="[";a=a.map(u=>u[0]==="["?u.substr(1,u.length-2):u);let c=a.indexOf("*");if(c>-1){let u=a.slice(0,c),f=u.join("."),p=a.slice(c+1,a.length),d=p.length>0;r++,e.push({before:u,beforeStr:f,after:p,nested:d})}else s[n]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(n),leadingBracket:l};return s},{});return{wildcards:e,wcLen:r,secret:i}}});var yx=_((Kue,mx)=>{"use strict";var $B=uu();mx.exports=NB;function NB({secret:t,serialize:e,wcLen:r,strict:i,isCensorFct:s,censorFctTakesPath:n},o){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${jB(i,e)}
    }
    const { censor, secret } = this
    const originalSecret = {}
    const secretKeys = Object.keys(secret)
    for (var i = 0; i < secretKeys.length; i++) {
      originalSecret[secretKeys[i]] = secret[secretKeys[i]]
    }

    ${kB(t,s,n)}
    this.compileRestore()
    ${qB(r>0,s,n)}
    this.secret = originalSecret
    ${LB(e)}
  `).bind(o);return a.state=o,e===!1&&(a.restore=l=>o.restore(l)),a}function kB(t,e,r){return Object.keys(t).map(i=>{let{escPath:s,leadingBracket:n,path:o}=t[i],a=n?1:0,l=n?"":".",c=[];for(var u;(u=$B.exec(i))!==null;){let[,h]=u,{index:m,input:v}=u;m>a&&c.push(v.substring(0,m-(h?0:1)))}var f=c.map(h=>`o${l}${h}`).join(" && ");f.length===0?f+=`o${l}${i} != null`:f+=` && o${l}${i} != null`;let p=`
      switch (true) {
        ${c.reverse().map(h=>`
          case o${l}${h} === censor:
            secret[${s}].circle = ${JSON.stringify(h)}
            break
        `).join(`
`)}
      }
    `,d=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${f}) {
        const val = o${l}${i}
        if (val === censor) {
          secret[${s}].precensored = true
        } else {
          secret[${s}].val = val
          o${l}${i} = ${e?`censor(${d})`:"censor"}
          ${p}
        }
      }
    `}).join(`
`)}function qB(t,e,r){return t===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${e}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${e}, ${r})
      }
    }
  `:""}function LB(t){return t===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function jB(t,e){return t===!0?"throw Error('fast-redact: primitives cannot be redacted')":e===!1?"return o":"return this.serialize(o)"}});var Jp=_((Wue,vx)=>{"use strict";vx.exports={groupRedact:FB,groupRestore:DB,nestedRedact:zB,nestedRestore:MB};function DB({keys:t,values:e,target:r}){if(r==null||typeof r=="string")return;let i=t.length;for(var s=0;s<i;s++){let n=t[s];r[n]=e[s]}}function FB(t,e,r,i,s){let n=gx(t,e);if(n==null||typeof n=="string")return{keys:null,values:null,target:n,flat:!0};let o=Object.keys(n),a=o.length,l=e.length,c=s?[...e]:void 0,u=new Array(a);for(var f=0;f<a;f++){let p=o[f];u[f]=n[p],s?(c[l]=p,n[p]=r(n[p],c)):i?n[p]=r(n[p]):n[p]=r}return{keys:o,values:u,target:n,flat:!0}}function MB(t){for(let e=0;e<t.length;e++){let{target:r,path:i,value:s}=t[e],n=r;for(let o=i.length-1;o>0;o--)n=n[i[o]];n[i[0]]=s}}function zB(t,e,r,i,s,n,o){let a=gx(e,r);if(a==null)return;let l=Object.keys(a),c=l.length;for(var u=0;u<c;u++){let f=l[u];BB(t,a,f,r,i,s,n,o)}return t}function Wp(t,e){return t!=null?"hasOwn"in Object?Object.hasOwn(t,e):Object.prototype.hasOwnProperty.call(t,e):!1}function BB(t,e,r,i,s,n,o,a){let l=s.length,c=l-1,u=r;var f=-1,p,d,h,m=null,v=null,g,w,b=!1,y=0,E=0,x=UB();if(h=p=e[r],typeof p=="object"){for(;p!=null&&++f<l&&(E+=1,r=s[f],m=h,!(r!=="*"&&!v&&!(typeof p=="object"&&r in p)));)if(!(r==="*"&&(v==="*"&&(b=!0),v=r,f!==c))){if(v){let R=Object.keys(p);for(var S=0;S<R.length;S++){let T=R[S];if(w=p[T],g=r==="*",b)x=Di(x,T,E),y=f,h=bx(w,y-1,r,i,s,n,o,a,u,p,d,h,g,T,f,c,x,t,e[u],E+1);else if(g||typeof w=="object"&&w!==null&&r in w){if(g?h=w:h=w[r],d=f!==c?h:o?a?n(h,[...i,u,...s]):n(h):n,g){let C=va(Di(x,T,E),h,e[u]);t.push(C),p[T]=d}else if(w[r]!==d)if(d===void 0&&n!==void 0||Wp(w,r)&&d===h)x=Di(x,T,E);else{x=Di(x,T,E);let C=va(Di(x,r,E+1),h,e[u]);t.push(C),w[r]=d}}}v=null}else{if(h=p[r],x=Di(x,r,E),d=f!==c?h:o?a?n(h,[...i,u,...s]):n(h):n,!(Wp(p,r)&&d===h||d===void 0&&n!==void 0)){let R=va(x,h,e[u]);t.push(R),p[r]=d}p=p[r]}if(typeof p!="object")break}}}function gx(t,e){for(var r=-1,i=e.length,s=t;s!=null&&++r<i;)s=s[e[r]];return s}function bx(t,e,r,i,s,n,o,a,l,c,u,f,p,d,h,m,v,g,w,b){if(e===0&&(p||typeof t=="object"&&t!==null&&r in t)){if(p?f=t:f=t[r],u=h!==m?f:o?a?n(f,[...i,l,...s]):n(f):n,p){let y=va(v,f,w);g.push(y),c[d]=u}else if(t[r]!==u){if(!(u===void 0&&n!==void 0||Wp(t,r)&&u===f)){let y=va(Di(v,r,b+1),f,w);g.push(y),t[r]=u}}}for(let y in t)typeof t[y]=="object"&&(v=Di(v,y,b),bx(t[y],e-1,r,i,s,n,o,a,l,c,u,f,p,d,h,m,v,g,w,b+1))}function UB(){return{parent:null,key:null,children:[],depth:0}}function Di(t,e,r){if(t.depth===r)return Di(t.parent,e,r);var i={parent:t,key:e,depth:r,children:[]};return t.children.push(i),i}function va(t,e,r){let i=t,s=[];do s.push(i.key),i=i.parent;while(i.parent!=null);return{path:s,value:e,target:r}}});var _x=_((Jue,wx)=>{"use strict";var{groupRestore:HB,nestedRestore:VB}=Jp();wx.exports=GB;function GB(){return function(){if(this.restore){this.restore.state.secret=this.secret;return}let{secret:e,wcLen:r}=this,i=Object.keys(e),s=KB(e,i),n=r>0,o=n?{secret:e,groupRestore:HB,nestedRestore:VB}:{secret:e};this.restore=Function("o",WB(s,i,n)).bind(o),this.restore.state=o}}function KB(t,e){return e.map(r=>{let{circle:i,escPath:s,leadingBracket:n}=t[r],a=i?`o.${i} = secret[${s}].val`:`o${n?"":"."}${r} = secret[${s}].val`,l=`secret[${s}].val = undefined`;return`
      if (secret[${s}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${l}
      }
    `}).join("")}function WB(t,e,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${e.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o) {
        if (o.flat === true) this.groupRestore(o)
        else this.nestedRestore(o)
        secret[k] = null
      }
    }
  `:""}
    ${t}
    return o
  `}});var Ex=_((Que,Sx)=>{"use strict";Sx.exports=JB;function JB(t){let{secret:e,censor:r,compileRestore:i,serialize:s,groupRedact:n,nestedRedact:o,wildcards:a,wcLen:l}=t,c=[{secret:e,censor:r,compileRestore:i}];return s!==!1&&c.push({serialize:s}),l>0&&c.push({groupRedact:n,nestedRedact:o,wildcards:a,wcLen:l}),Object.assign(...c)}});var Tx=_((Yue,Rx)=>{"use strict";var xx=fx(),QB=px(),YB=yx(),XB=_x(),{groupRedact:ZB,nestedRedact:e4}=Jp(),t4=Ex(),r4=uu(),i4=xx(),Qp=t=>t;Qp.restore=Qp;var s4="[REDACTED]";Yp.rx=r4;Yp.validator=xx;Rx.exports=Yp;function Yp(t={}){let e=Array.from(new Set(t.paths||[])),r="serialize"in t&&(t.serialize===!1||typeof t.serialize=="function")?t.serialize:JSON.stringify,i=t.remove;if(i===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let s=i===!0?void 0:"censor"in t?t.censor:s4,n=typeof s=="function",o=n&&s.length>1;if(e.length===0)return r||Qp;i4({paths:e,serialize:r,censor:s});let{wildcards:a,wcLen:l,secret:c}=QB({paths:e,censor:s}),u=XB(),f="strict"in t?t.strict:!0;return YB({secret:c,wcLen:l,serialize:r,strict:f,isCensorFct:n,censorFctTakesPath:o},t4({secret:c,censor:s,compileRestore:u,serialize:r,groupRedact:ZB,nestedRedact:e4,wildcards:a,wcLen:l}))}});var Qn=_((Xue,Px)=>{"use strict";var n4=Symbol("pino.setLevel"),o4=Symbol("pino.getLevel"),a4=Symbol("pino.levelVal"),l4=Symbol("pino.levelComp"),c4=Symbol("pino.useLevelLabels"),u4=Symbol("pino.useOnlyCustomLevels"),f4=Symbol("pino.mixin"),d4=Symbol("pino.lsCache"),h4=Symbol("pino.chindings"),p4=Symbol("pino.asJson"),m4=Symbol("pino.write"),y4=Symbol("pino.redactFmt"),g4=Symbol("pino.time"),b4=Symbol("pino.timeSliceIndex"),v4=Symbol("pino.stream"),w4=Symbol("pino.stringify"),_4=Symbol("pino.stringifySafe"),S4=Symbol("pino.stringifiers"),E4=Symbol("pino.end"),x4=Symbol("pino.formatOpts"),R4=Symbol("pino.messageKey"),T4=Symbol("pino.errorKey"),P4=Symbol("pino.nestedKey"),A4=Symbol("pino.nestedKeyStr"),C4=Symbol("pino.mixinMergeStrategy"),O4=Symbol("pino.msgPrefix"),I4=Symbol("pino.wildcardFirst"),$4=Symbol.for("pino.serializers"),N4=Symbol.for("pino.formatters"),k4=Symbol.for("pino.hooks"),q4=Symbol.for("pino.metadata");Px.exports={setLevelSym:n4,getLevelSym:o4,levelValSym:a4,levelCompSym:l4,useLevelLabelsSym:c4,mixinSym:f4,lsCacheSym:d4,chindingsSym:h4,asJsonSym:p4,writeSym:m4,serializersSym:$4,redactFmtSym:y4,timeSym:g4,timeSliceIndexSym:b4,streamSym:v4,stringifySym:w4,stringifySafeSym:_4,stringifiersSym:S4,endSym:E4,formatOptsSym:x4,messageKeySym:R4,errorKeySym:T4,nestedKeySym:P4,wildcardFirstSym:I4,needsMetadataGsym:q4,useOnlyCustomLevelsSym:u4,formattersSym:N4,hooksSym:k4,nestedKeyStrSym:A4,mixinMergeStrategySym:C4,msgPrefixSym:O4}});var em=_((Zue,Ix)=>{"use strict";var Zp=Tx(),{redactFmtSym:L4,wildcardFirstSym:fu}=Qn(),{rx:Xp,validator:j4}=Zp,Ax=j4({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:t=>`pino \u2013 redact paths array contains an invalid path (${t})`}),Cx="[Redacted]",Ox=!1;function D4(t,e){let{paths:r,censor:i}=F4(t),s=r.reduce((a,l)=>{Xp.lastIndex=0;let c=Xp.exec(l),u=Xp.exec(l),f=c[1]!==void 0?c[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):c[0];if(f==="*"&&(f=fu),u===null)return a[f]=null,a;if(a[f]===null)return a;let{index:p}=u,d=`${l.substr(p,l.length-1)}`;return a[f]=a[f]||[],f!==fu&&a[f].length===0&&a[f].push(...a[fu]||[]),f===fu&&Object.keys(a).forEach(function(h){a[h]&&a[h].push(d)}),a[f].push(d),a},{}),n={[L4]:Zp({paths:r,censor:i,serialize:e,strict:Ox})},o=(...a)=>e(typeof i=="function"?i(...a):i);return[...Object.keys(s),...Object.getOwnPropertySymbols(s)].reduce((a,l)=>{if(s[l]===null)a[l]=c=>o(c,[l]);else{let c=typeof i=="function"?(u,f)=>i(u,[l,...f]):i;a[l]=Zp({paths:s[l],censor:c,serialize:e,strict:Ox})}return a},n)}function F4(t){if(Array.isArray(t))return t={paths:t,censor:Cx},Ax(t),t;let{paths:e,censor:r=Cx,remove:i}=t;if(Array.isArray(e)===!1)throw Error("pino \u2013 redact must contain an array of strings");return i===!0&&(r=void 0),Ax({paths:e,censor:r}),{paths:e,censor:r}}Ix.exports=D4});var Nx=_((efe,$x)=>{"use strict";var M4=()=>"",z4=()=>`,"time":${Date.now()}`,B4=()=>`,"time":${Math.round(Date.now()/1e3)}`,U4=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;$x.exports={nullTime:M4,epochTime:z4,unixTime:B4,isoTime:U4}});var qx=_((tfe,kx)=>{"use strict";function H4(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}kx.exports=V4;function V4(t,e,r){var i=r&&r.stringify||H4,s=1;if(typeof t=="object"&&t!==null){var n=e.length+s;if(n===1)return t;var o=new Array(n);o[0]=i(t);for(var a=1;a<n;a++)o[a]=i(e[a]);return o.join(" ")}if(typeof t!="string")return t;var l=e.length;if(l===0)return t;for(var c="",u=1-s,f=-1,p=t&&t.length||0,d=0;d<p;){if(t.charCodeAt(d)===37&&d+1<p){switch(f=f>-1?f:0,t.charCodeAt(d+1)){case 100:case 102:if(u>=l||e[u]==null)break;f<d&&(c+=t.slice(f,d)),c+=Number(e[u]),f=d+2,d++;break;case 105:if(u>=l||e[u]==null)break;f<d&&(c+=t.slice(f,d)),c+=Math.floor(Number(e[u])),f=d+2,d++;break;case 79:case 111:case 106:if(u>=l||e[u]===void 0)break;f<d&&(c+=t.slice(f,d));var h=typeof e[u];if(h==="string"){c+="'"+e[u]+"'",f=d+2,d++;break}if(h==="function"){c+=e[u].name||"<anonymous>",f=d+2,d++;break}c+=i(e[u]),f=d+2,d++;break;case 115:if(u>=l)break;f<d&&(c+=t.slice(f,d)),c+=String(e[u]),f=d+2,d++;break;case 37:f<d&&(c+=t.slice(f,d)),c+="%",f=d+2,d++,u--;break}++u}++d}return f===-1?t:(f<p&&(c+=t.slice(f)),c)}});var rm=_((rfe,tm)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let e=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(t,0,0,Number(r))},t=new Int32Array(new SharedArrayBuffer(4));tm.exports=e}else{let t=function(e){if((e>0&&e<1/0)===!1)throw typeof e!="number"&&typeof e!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let i=Date.now()+Number(e);for(;i>Date.now(););};tm.exports=t}});var Ux=_((ife,Bx)=>{"use strict";var Qe=require("fs"),G4=require("events"),K4=require("util").inherits,Lx=require("path"),sm=rm(),W4=require("assert"),du=100,hu=Buffer.allocUnsafe(0),J4=16*1024,jx="buffer",Dx="utf8",[Q4,Y4]=(process.versions.node||"0.0").split(".").map(Number),X4=Q4>=22&&Y4>=7;function Fx(t,e){e._opening=!0,e._writing=!0,e._asyncDrainScheduled=!1;function r(n,o){if(n){e._reopening=!1,e._writing=!1,e._opening=!1,e.sync?process.nextTick(()=>{e.listenerCount("error")>0&&e.emit("error",n)}):e.emit("error",n);return}let a=e._reopening;e.fd=o,e.file=t,e._reopening=!1,e._opening=!1,e._writing=!1,e.sync?process.nextTick(()=>e.emit("ready")):e.emit("ready"),!e.destroyed&&(!e._writing&&e._len>e.minLength||e._flushPending?e._actualWrite():a&&process.nextTick(()=>e.emit("drain")))}let i=e.append?"a":"w",s=e.mode;if(e.sync)try{e.mkdir&&Qe.mkdirSync(Lx.dirname(t),{recursive:!0});let n=Qe.openSync(t,i,s);r(null,n)}catch(n){throw r(n),n}else e.mkdir?Qe.mkdir(Lx.dirname(t),{recursive:!0},n=>{if(n)return r(n);Qe.open(t,i,s,r)}):Qe.open(t,i,s,r)}function Vr(t){if(!(this instanceof Vr))return new Vr(t);let{fd:e,dest:r,minLength:i,maxLength:s,maxWrite:n,periodicFlush:o,sync:a,append:l=!0,mkdir:c,retryEAGAIN:u,fsync:f,contentMode:p,mode:d}=t||{};e=e||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(i||0,16387),this.file=null,this.destroyed=!1,this.minLength=i||0,this.maxLength=s||0,this.maxWrite=n||J4,this._periodicFlush=o||0,this._periodicFlushTimer=void 0,this.sync=a||!1,this.writable=!0,this._fsync=f||!1,this.append=l||!1,this.mode=d,this.retryEAGAIN=u||(()=>!0),this.mkdir=c||!1;let h,m;if(p===jx)this._writingBuf=hu,this.write=tU,this.flush=iU,this.flushSync=nU,this._actualWrite=aU,h=()=>Qe.writeSync(this.fd,this._writingBuf),m=()=>Qe.write(this.fd,this._writingBuf,this.release);else if(p===void 0||p===Dx)this._writingBuf="",this.write=eU,this.flush=rU,this.flushSync=sU,this._actualWrite=oU,h=()=>Qe.writeSync(this.fd,this._writingBuf,"utf8"),m=()=>Qe.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${Dx}" and "${jx}", but passed ${p}`);if(typeof e=="number")this.fd=e,process.nextTick(()=>this.emit("ready"));else if(typeof e=="string")Fx(e,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(v,g)=>{if(v){if((v.code==="EAGAIN"||v.code==="EBUSY")&&this.retryEAGAIN(v,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{sm(du),this.release(void 0,0)}catch(y){this.release(y)}else setTimeout(m,du);else this._writing=!1,this.emit("error",v);return}this.emit("write",g);let w=im(this._writingBuf,this._len,g);if(this._len=w.len,this._writingBuf=w.writingBuf,this._writingBuf.length){if(!this.sync){m();return}try{do{let y=h(),E=im(this._writingBuf,this._len,y);this._len=E.len,this._writingBuf=E.writingBuf}while(this._writingBuf.length)}catch(y){this.release(y);return}}this._fsync&&Qe.fsyncSync(this.fd);let b=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):b>this.minLength?this._actualWrite():this._ending?b>0?this._actualWrite():(this._writing=!1,pu(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(Z4,this)):this.emit("drain"))},this.on("newListener",function(v){v==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function im(t,e,r){return typeof t=="string"&&Buffer.byteLength(t)!==r&&(r=Buffer.from(t).subarray(0,r).toString().length),e=Math.max(e-r,0),t=t.slice(r),{writingBuf:t,len:e}}function Z4(t){t.listenerCount("drain")>0&&(t._asyncDrainScheduled=!1,t.emit("drain"))}K4(Vr,G4);function Mx(t,e){return t.length===0?hu:t.length===1?t[0]:Buffer.concat(t,e)}function eU(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||r[r.length-1].length+t.length>this.maxWrite?r.push(""+t):r[r.length-1]+=t,this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function tU(t){if(this.destroyed)throw new Error("SonicBoom destroyed");let e=this._len+t.length,r=this._bufs,i=this._lens;return this.maxLength&&e>this.maxLength?(this.emit("drop",t),this._len<this._hwm):(r.length===0||i[i.length-1]+t.length>this.maxWrite?(r.push([t]),i.push(t.length)):(r[r.length-1].push(t),i[i.length-1]+=t.length),this._len=e,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function zx(t){this._flushPending=!0;let e=()=>{if(this._fsync)this._flushPending=!1,t();else try{Qe.fsync(this.fd,i=>{this._flushPending=!1,t(i)})}catch(i){t(i)}this.off("error",r)},r=i=>{this._flushPending=!1,t(i),this.off("drain",e)};this.once("drain",e),this.once("error",r)}function rU(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&zx.call(this,t),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function iU(t){if(t!=null&&typeof t!="function")throw new Error("flush cb must be a function");if(this.destroyed){let e=new Error("SonicBoom destroyed");if(t){t(e);return}throw e}if(this.minLength<=0){t?.();return}t&&zx.call(this,t),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}Vr.prototype.reopen=function(t){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(t)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(t&&(this.file=t),this._reopening=!0,this._writing)return;let e=this.fd;this.once("ready",()=>{e!==this.fd&&Qe.close(e,r=>{if(r)return this.emit("error",r)})}),Fx(this.file,this)};Vr.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():pu(this)))};function sU(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let t="";for(;this._bufs.length||t;){t.length<=0&&(t=this._bufs[0]);try{let e=Qe.writeSync(this.fd,t,"utf8"),r=im(t,this._len,e);t=r.writingBuf,this._len=r.len,t.length<=0&&this._bufs.shift()}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;sm(du)}}try{Qe.fsyncSync(this.fd)}catch{}}function nU(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=hu);let t=hu;for(;this._bufs.length||t.length;){t.length<=0&&(t=Mx(this._bufs[0],this._lens[0]));try{let e=Qe.writeSync(this.fd,t);t=t.subarray(e),this._len=Math.max(this._len-e,0),t.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(e){if((e.code==="EAGAIN"||e.code==="EBUSY")&&!this.retryEAGAIN(e,t.length,this._len-t.length))throw e;sm(du)}}}Vr.prototype.destroy=function(){this.destroyed||pu(this)};function oU(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let e=Qe.writeSync(this.fd,this._writingBuf,"utf8");t(null,e)}catch(e){t(e)}else Qe.write(this.fd,this._writingBuf,"utf8",t)}function aU(){let t=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:Mx(this._bufs.shift(),this._lens.shift()),this.sync)try{let e=Qe.writeSync(this.fd,this._writingBuf);t(null,e)}catch(e){t(e)}else X4&&(this._writingBuf=Buffer.from(this._writingBuf)),Qe.write(this.fd,this._writingBuf,t)}function pu(t){if(t.fd===-1){t.once("ready",pu.bind(null,t));return}t._periodicFlushTimer!==void 0&&clearInterval(t._periodicFlushTimer),t.destroyed=!0,t._bufs=[],t._lens=[],W4(typeof t.fd=="number",`sonic.fd must be a number, got ${typeof t.fd}`);try{Qe.fsync(t.fd,e)}catch{}function e(){t.fd!==1&&t.fd!==2?Qe.close(t.fd,r):r()}function r(i){if(i){t.emit("error",i);return}t._ending&&!t._writing&&t.emit("finish"),t.emit("close")}}Vr.SonicBoom=Vr;Vr.default=Vr;Bx.exports=Vr});var nm=_((sfe,Wx)=>{"use strict";var Gr={exit:[],beforeExit:[]},Hx={exit:uU,beforeExit:fU},Yn;function lU(){Yn===void 0&&(Yn=new FinalizationRegistry(dU))}function cU(t){Gr[t].length>0||process.on(t,Hx[t])}function Vx(t){Gr[t].length>0||(process.removeListener(t,Hx[t]),Gr.exit.length===0&&Gr.beforeExit.length===0&&(Yn=void 0))}function uU(){Gx("exit")}function fU(){Gx("beforeExit")}function Gx(t){for(let e of Gr[t]){let r=e.deref(),i=e.fn;r!==void 0&&i(r,t)}Gr[t]=[]}function dU(t){for(let e of["exit","beforeExit"]){let r=Gr[e].indexOf(t);Gr[e].splice(r,r+1),Vx(e)}}function Kx(t,e,r){if(e===void 0)throw new Error("the object can't be undefined");cU(t);let i=new WeakRef(e);i.fn=r,lU(),Yn.register(e,i),Gr[t].push(i)}function hU(t,e){Kx("exit",t,e)}function pU(t,e){Kx("beforeExit",t,e)}function mU(t){if(Yn!==void 0){Yn.unregister(t);for(let e of["exit","beforeExit"])Gr[e]=Gr[e].filter(r=>{let i=r.deref();return i&&i!==t}),Vx(e)}}Wx.exports={register:hU,registerBeforeExit:pU,unregister:mU}});var Jx=_((nfe,yU)=>{yU.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var Yx=_((ofe,Qx)=>{"use strict";function gU(t,e,r,i,s){let n=Date.now()+i,o=Atomics.load(t,e);if(o===r){s(null,"ok");return}let a=o,l=c=>{Date.now()>n?s(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(t,e),o===a?l(c>=1e3?1e3:c*2):o===r?s(null,"ok"):s(null,"not-equal")},c)};l(1)}function bU(t,e,r,i,s){let n=Date.now()+i,o=Atomics.load(t,e);if(o!==r){s(null,"ok");return}let a=l=>{Date.now()>n?s(null,"timed-out"):setTimeout(()=>{o=Atomics.load(t,e),o!==r?s(null,"ok"):a(l>=1e3?1e3:l*2)},l)};a(1)}Qx.exports={wait:gU,waitDiff:bU}});var Zx=_((afe,Xx)=>{"use strict";Xx.exports={WRITE_INDEX:4,READ_INDEX:8}});var sR=_((lfe,iR)=>{"use strict";var{version:vU}=Jx(),{EventEmitter:wU}=require("events"),{Worker:_U}=require("worker_threads"),{join:SU}=require("path"),{pathToFileURL:EU}=require("url"),{wait:xU}=Yx(),{WRITE_INDEX:nr,READ_INDEX:ai}=Zx(),RU=require("buffer"),TU=require("assert"),N=Symbol("kImpl"),PU=RU.constants.MAX_STRING_LENGTH,wa=class{constructor(e){this._value=e}deref(){return this._value}},yu=class{register(){}unregister(){}},AU=process.env.NODE_V8_COVERAGE?yu:global.FinalizationRegistry||yu,CU=process.env.NODE_V8_COVERAGE?wa:global.WeakRef||wa,eR=new AU(t=>{t.exited||t.terminate()});function OU(t,e){let{filename:r,workerData:i}=e,n=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||SU(__dirname,"lib","worker.js"),o=new _U(n,{...e.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:EU(r).href,dataBuf:t[N].dataBuf,stateBuf:t[N].stateBuf,workerData:{$context:{threadStreamVersion:vU},...i}}});return o.stream=new wa(t),o.on("message",IU),o.on("exit",rR),eR.register(t,o),o}function tR(t){TU(!t[N].sync),t[N].needDrain&&(t[N].needDrain=!1,t.emit("drain"))}function mu(t){let e=Atomics.load(t[N].state,nr),r=t[N].data.length-e;if(r>0){if(t[N].buf.length===0){t[N].flushing=!1,t[N].ending?um(t):t[N].needDrain&&process.nextTick(tR,t);return}let i=t[N].buf.slice(0,r),s=Buffer.byteLength(i);s<=r?(t[N].buf=t[N].buf.slice(r),gu(t,i,mu.bind(null,t))):t.flush(()=>{if(!t.destroyed){for(Atomics.store(t[N].state,ai,0),Atomics.store(t[N].state,nr,0);s>t[N].data.length;)r=r/2,i=t[N].buf.slice(0,r),s=Buffer.byteLength(i);t[N].buf=t[N].buf.slice(r),gu(t,i,mu.bind(null,t))}})}else if(r===0){if(e===0&&t[N].buf.length===0)return;t.flush(()=>{Atomics.store(t[N].state,ai,0),Atomics.store(t[N].state,nr,0),mu(t)})}else li(t,new Error("overwritten"))}function IU(t){let e=this.stream.deref();if(e===void 0){this.exited=!0,this.terminate();return}switch(t.code){case"READY":this.stream=new CU(e),e.flush(()=>{e[N].ready=!0,e.emit("ready")});break;case"ERROR":li(e,t.err);break;case"EVENT":Array.isArray(t.args)?e.emit(t.name,...t.args):e.emit(t.name,t.args);break;case"WARNING":process.emitWarning(t.err);break;default:li(e,new Error("this should not happen: "+t.code))}}function rR(t){let e=this.stream.deref();e!==void 0&&(eR.unregister(e),e.worker.exited=!0,e.worker.off("exit",rR),li(e,t!==0?new Error("the worker thread exited"):null))}var am=class extends wU{constructor(e={}){if(super(),e.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[N]={},this[N].stateBuf=new SharedArrayBuffer(128),this[N].state=new Int32Array(this[N].stateBuf),this[N].dataBuf=new SharedArrayBuffer(e.bufferSize||4*1024*1024),this[N].data=Buffer.from(this[N].dataBuf),this[N].sync=e.sync||!1,this[N].ending=!1,this[N].ended=!1,this[N].needDrain=!1,this[N].destroyed=!1,this[N].flushing=!1,this[N].ready=!1,this[N].finished=!1,this[N].errored=null,this[N].closed=!1,this[N].buf="",this.worker=OU(this,e),this.on("message",(r,i)=>{this.worker.postMessage(r,i)})}write(e){if(this[N].destroyed)return lm(this,new Error("the worker has exited")),!1;if(this[N].ending)return lm(this,new Error("the worker is ending")),!1;if(this[N].flushing&&this[N].buf.length+e.length>=PU)try{om(this),this[N].flushing=!0}catch(r){return li(this,r),!1}if(this[N].buf+=e,this[N].sync)try{return om(this),!0}catch(r){return li(this,r),!1}return this[N].flushing||(this[N].flushing=!0,setImmediate(mu,this)),this[N].needDrain=this[N].data.length-this[N].buf.length-Atomics.load(this[N].state,nr)<=0,!this[N].needDrain}end(){this[N].destroyed||(this[N].ending=!0,um(this))}flush(e){if(this[N].destroyed){typeof e=="function"&&process.nextTick(e,new Error("the worker has exited"));return}let r=Atomics.load(this[N].state,nr);xU(this[N].state,ai,r,1/0,(i,s)=>{if(i){li(this,i),process.nextTick(e,i);return}if(s==="not-equal"){this.flush(e);return}process.nextTick(e)})}flushSync(){this[N].destroyed||(om(this),cm(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[N].ready}get destroyed(){return this[N].destroyed}get closed(){return this[N].closed}get writable(){return!this[N].destroyed&&!this[N].ending}get writableEnded(){return this[N].ending}get writableFinished(){return this[N].finished}get writableNeedDrain(){return this[N].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[N].errored}};function lm(t,e){setImmediate(()=>{t.emit("error",e)})}function li(t,e){t[N].destroyed||(t[N].destroyed=!0,e&&(t[N].errored=e,lm(t,e)),t.worker.exited?setImmediate(()=>{t[N].closed=!0,t.emit("close")}):t.worker.terminate().catch(()=>{}).then(()=>{t[N].closed=!0,t.emit("close")}))}function gu(t,e,r){let i=Atomics.load(t[N].state,nr),s=Buffer.byteLength(e);return t[N].data.write(e,i),Atomics.store(t[N].state,nr,i+s),Atomics.notify(t[N].state,nr),r(),!0}function um(t){if(!(t[N].ended||!t[N].ending||t[N].flushing)){t[N].ended=!0;try{t.flushSync();let e=Atomics.load(t[N].state,ai);Atomics.store(t[N].state,nr,-1),Atomics.notify(t[N].state,nr);let r=0;for(;e!==-1;){if(Atomics.wait(t[N].state,ai,e,1e3),e=Atomics.load(t[N].state,ai),e===-2){li(t,new Error("end() failed"));return}if(++r===10){li(t,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{t[N].finished=!0,t.emit("finish")})}catch(e){li(t,e)}}}function om(t){let e=()=>{t[N].ending?um(t):t[N].needDrain&&process.nextTick(tR,t)};for(t[N].flushing=!1;t[N].buf.length!==0;){let r=Atomics.load(t[N].state,nr),i=t[N].data.length-r;if(i===0){cm(t),Atomics.store(t[N].state,ai,0),Atomics.store(t[N].state,nr,0);continue}else if(i<0)throw new Error("overwritten");let s=t[N].buf.slice(0,i),n=Buffer.byteLength(s);if(n<=i)t[N].buf=t[N].buf.slice(i),gu(t,s,e);else{for(cm(t),Atomics.store(t[N].state,ai,0),Atomics.store(t[N].state,nr,0);n>t[N].buf.length;)i=i/2,s=t[N].buf.slice(0,i),n=Buffer.byteLength(s);t[N].buf=t[N].buf.slice(i),gu(t,s,e)}}}function cm(t){if(t[N].flushing)throw new Error("unable to flush while flushing");let e=Atomics.load(t[N].state,nr),r=0;for(;;){let i=Atomics.load(t[N].state,ai);if(i===-2)throw Error("_flushSync failed");if(i!==e)Atomics.wait(t[N].state,ai,i,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}iR.exports=am});var hm=_((cfe,nR)=>{"use strict";var{createRequire:$U}=require("module"),NU=Kp(),{join:fm,isAbsolute:kU,sep:qU}=require("node:path"),LU=rm(),dm=nm(),jU=sR();function DU(t){dm.register(t,MU),dm.registerBeforeExit(t,zU),t.on("close",function(){dm.unregister(t)})}function FU(t,e,r,i){let s=new jU({filename:t,workerData:e,workerOpts:r,sync:i});s.on("ready",n),s.on("close",function(){process.removeListener("exit",o)}),process.on("exit",o);function n(){process.removeListener("exit",o),s.unref(),r.autoEnd!==!1&&DU(s)}function o(){s.closed||(s.flushSync(),LU(100),s.end())}return s}function MU(t){t.ref(),t.flushSync(),t.end(),t.once("close",function(){t.unref()})}function zU(t){t.flushSync()}function BU(t){let{pipeline:e,targets:r,levels:i,dedupe:s,worker:n={},caller:o=NU(),sync:a=!1}=t,l={...t.options},c=typeof o=="string"?[o]:o,u="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},f=t.target;if(f&&r)throw new Error("only one of target or targets can be specified");return r?(f=u["pino-worker"]||fm(__dirname,"worker.js"),l.targets=r.filter(d=>d.target).map(d=>({...d,target:p(d.target)})),l.pipelines=r.filter(d=>d.pipeline).map(d=>d.pipeline.map(h=>({...h,level:d.level,target:p(h.target)})))):e&&(f=u["pino-worker"]||fm(__dirname,"worker.js"),l.pipelines=[e.map(d=>({...d,target:p(d.target)}))]),i&&(l.levels=i),s&&(l.dedupe=s),l.pinoWillSendConfig=!0,FU(p(f),l,n,a);function p(d){if(d=u[d]||d,kU(d)||d.indexOf("file://")===0)return d;if(d==="pino/file")return fm(__dirname,"..","file.js");let h;for(let m of c)try{let v=m==="node:repl"?process.cwd()+qU:m;h=$U(v).resolve(d);break}catch{continue}if(!h)throw new Error(`unable to determine transport target for "${d}"`);return h}}nR.exports=BU});var wu=_((ufe,yR)=>{"use strict";var oR=qx(),{mapHttpRequest:UU,mapHttpResponse:HU}=Gp(),mm=Ux(),aR=nm(),{lsCacheSym:VU,chindingsSym:uR,writeSym:lR,serializersSym:fR,formatOptsSym:cR,endSym:GU,stringifiersSym:dR,stringifySym:hR,stringifySafeSym:ym,wildcardFirstSym:pR,nestedKeySym:KU,formattersSym:mR,messageKeySym:WU,errorKeySym:JU,nestedKeyStrSym:QU,msgPrefixSym:bu}=Qn(),{isMainThread:YU}=require("worker_threads"),XU=hm();function Xn(){}function ZU(t,e){if(!e)return r;return function(...s){e.call(this,s,r,t)};function r(i,...s){if(typeof i=="object"){let n=i;i!==null&&(i.method&&i.headers&&i.socket?i=UU(i):typeof i.setHeader=="function"&&(i=HU(i)));let o;n===null&&s.length===0?o=[null]:(n=s.shift(),o=s),typeof this[bu]=="string"&&n!==void 0&&n!==null&&(n=this[bu]+n),this[lR](i,oR(n,o,this[cR]),t)}else{let n=i===void 0?s.shift():i;typeof this[bu]=="string"&&n!==void 0&&n!==null&&(n=this[bu]+n),this[lR](null,oR(n,s,this[cR]),t)}}}function pm(t){let e="",r=0,i=!1,s=255,n=t.length;if(n>100)return JSON.stringify(t);for(var o=0;o<n&&s>=32;o++)s=t.charCodeAt(o),(s===34||s===92)&&(e+=t.slice(r,o)+"\\",r=o,i=!0);return i?e+=t.slice(r):e=t,s<32?JSON.stringify(t):'"'+e+'"'}function eH(t,e,r,i){let s=this[hR],n=this[ym],o=this[dR],a=this[GU],l=this[uR],c=this[fR],u=this[mR],f=this[WU],p=this[JU],d=this[VU][r]+i;d=d+l;let h;u.log&&(t=u.log(t));let m=o[pR],v="";for(let w in t)if(h=t[w],Object.prototype.hasOwnProperty.call(t,w)&&h!==void 0){c[w]?h=c[w](h):w===p&&c.err&&(h=c.err(h));let b=o[w]||m;switch(typeof h){case"undefined":case"function":continue;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":b&&(h=b(h));break;case"string":h=(b||pm)(h);break;default:h=(b||s)(h,n)}if(h===void 0)continue;let y=pm(w);v+=","+y+":"+h}let g="";if(e!==void 0){h=c[f]?c[f](e):e;let w=o[f]||m;switch(typeof h){case"function":break;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":w&&(h=w(h)),g=',"'+f+'":'+h;break;case"string":h=(w||pm)(h),g=',"'+f+'":'+h;break;default:h=(w||s)(h,n),g=',"'+f+'":'+h}}return this[KU]&&v?d+this[QU]+v.slice(1)+"}"+g+a:d+v+g+a}function tH(t,e){let r,i=t[uR],s=t[hR],n=t[ym],o=t[dR],a=o[pR],l=t[fR],c=t[mR].bindings;e=c(e);for(let u in e)if(r=e[u],(u!=="level"&&u!=="serializers"&&u!=="formatters"&&u!=="customLevels"&&e.hasOwnProperty(u)&&r!==void 0)===!0){if(r=l[u]?l[u](r):r,r=(o[u]||a||s)(r,n),r===void 0)continue;i+=',"'+u+'":'+r}return i}function rH(t){return t.write!==t.constructor.prototype.write}var iH=process.env.NODE_V8_COVERAGE||process.env.V8_COVERAGE;function vu(t){let e=new mm(t);return e.on("error",r),!iH&&!t.sync&&YU&&(aR.register(e,sH),e.on("close",function(){aR.unregister(e)})),e;function r(i){if(i.code==="EPIPE"){e.write=Xn,e.end=Xn,e.flushSync=Xn,e.destroy=Xn;return}e.removeListener("error",r),e.emit("error",i)}}function sH(t,e){t.destroyed||(e==="beforeExit"?(t.flush(),t.on("drain",function(){t.end()})):t.flushSync())}function nH(t){return function(r,i,s={},n){if(typeof s=="string")n=vu({dest:s}),s={};else if(typeof n=="string"){if(s&&s.transport)throw Error("only one of option.transport or stream can be specified");n=vu({dest:n})}else if(s instanceof mm||s.writable||s._writableState)n=s,s={};else if(s.transport){if(s.transport instanceof mm||s.transport.writable||s.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(s.transport.targets&&s.transport.targets.length&&s.formatters&&typeof s.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let l;s.customLevels&&(l=s.useOnlyCustomLevels?s.customLevels:Object.assign({},s.levels,s.customLevels)),n=XU({caller:i,...s.transport,levels:l})}if(s=Object.assign({},t,s),s.serializers=Object.assign({},t.serializers,s.serializers),s.formatters=Object.assign({},t.formatters,s.formatters),s.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=s;return o===!1&&(s.level="silent"),a||(s.onChild=Xn),n||(rH(process.stdout)?n=process.stdout:n=vu({fd:process.stdout.fd||1})),{opts:s,stream:n}}}function oH(t,e){try{return JSON.stringify(t)}catch{try{return(e||this[ym])(t)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function aH(t,e,r){return{level:t,bindings:e,log:r}}function lH(t){let e=Number(t);return typeof t=="string"&&Number.isFinite(e)?e:t===void 0?1:t}yR.exports={noop:Xn,buildSafeSonicBoom:vu,asChindings:tH,asJson:eH,genLog:ZU,createArgsNormalizer:nH,stringify:oH,buildFormatters:aH,normalizeDestFileDescriptor:lH}});var _u=_((ffe,gR)=>{"use strict";var cH={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},uH={ASC:"ASC",DESC:"DESC"};gR.exports={DEFAULT_LEVELS:cH,SORTING_ORDER:uH}});var vm=_((dfe,_R)=>{"use strict";var{lsCacheSym:fH,levelValSym:gm,useOnlyCustomLevelsSym:dH,streamSym:hH,formattersSym:pH,hooksSym:mH,levelCompSym:bR}=Qn(),{noop:yH,genLog:Ws}=wu(),{DEFAULT_LEVELS:ci,SORTING_ORDER:vR}=_u(),wR={fatal:t=>{let e=Ws(ci.fatal,t);return function(...r){let i=this[hH];if(e.call(this,...r),typeof i.flushSync=="function")try{i.flushSync()}catch{}}},error:t=>Ws(ci.error,t),warn:t=>Ws(ci.warn,t),info:t=>Ws(ci.info,t),debug:t=>Ws(ci.debug,t),trace:t=>Ws(ci.trace,t)},bm=Object.keys(ci).reduce((t,e)=>(t[ci[e]]=e,t),{}),gH=Object.keys(bm).reduce((t,e)=>(t[e]='{"level":'+Number(e),t),{});function bH(t){let e=t[pH].level,{labels:r}=t.levels,i={};for(let s in r){let n=e(r[s],Number(s));i[s]=JSON.stringify(n).slice(0,-1)}return t[fH]=i,t}function vH(t,e){if(e)return!1;switch(t){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function wH(t){let{labels:e,values:r}=this.levels;if(typeof t=="number"){if(e[t]===void 0)throw Error("unknown level value"+t);t=e[t]}if(r[t]===void 0)throw Error("unknown level "+t);let i=this[gm],s=this[gm]=r[t],n=this[dH],o=this[bR],a=this[mH].logMethod;for(let l in r){if(o(r[l],s)===!1){this[l]=yH;continue}this[l]=vH(l,n)?wR[l](a):Ws(r[l],a)}this.emit("level-change",t,s,e[i],i,this)}function _H(t){let{levels:e,levelVal:r}=this;return e&&e.labels?e.labels[r]:""}function SH(t){let{values:e}=this.levels,r=e[t];return r!==void 0&&this[bR](r,this[gm])}function EH(t,e,r){return t===vR.DESC?e<=r:e>=r}function xH(t){return typeof t=="string"?EH.bind(null,t):t}function RH(t=null,e=!1){let r=t?Object.keys(t).reduce((n,o)=>(n[t[o]]=o,n),{}):null,i=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),e?null:bm,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),e?null:ci,t);return{labels:i,values:s}}function TH(t,e,r){if(typeof t=="number"){if(![].concat(Object.keys(e||{}).map(n=>e[n]),r?[]:Object.keys(bm).map(n=>+n),1/0).includes(t))throw Error(`default level:${t} must be included in custom levels`);return}let i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:ci,e);if(!(t in i))throw Error(`default level:${t} must be included in custom levels`)}function PH(t,e){let{labels:r,values:i}=t;for(let s in e){if(s in i)throw Error("levels cannot be overridden");if(e[s]in r)throw Error("pre-existing level values cannot be used for new levels")}}function AH(t){if(typeof t!="function"&&!(typeof t=="string"&&Object.values(vR).includes(t)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}_R.exports={initialLsCache:gH,genLsCache:bH,levelMethods:wR,getLevel:_H,setLevel:wH,isLevelEnabled:SH,mappings:RH,assertNoLevelCollisions:PH,assertDefaultLevelFound:TH,genLevelComparison:xH,assertLevelComparison:AH}});var wm=_((hfe,SR)=>{"use strict";SR.exports={version:"9.6.0"}});var NR=_((mfe,$R)=>{"use strict";var{EventEmitter:CH}=require("node:events"),{lsCacheSym:OH,levelValSym:IH,setLevelSym:Sm,getLevelSym:ER,chindingsSym:Em,parsedChindingsSym:$H,mixinSym:NH,asJsonSym:AR,writeSym:kH,mixinMergeStrategySym:qH,timeSym:LH,timeSliceIndexSym:jH,streamSym:CR,serializersSym:Js,formattersSym:_m,errorKeySym:DH,messageKeySym:FH,useOnlyCustomLevelsSym:MH,needsMetadataGsym:zH,redactFmtSym:BH,stringifySym:UH,formatOptsSym:HH,stringifiersSym:VH,msgPrefixSym:xR,hooksSym:GH}=Qn(),{getLevel:KH,setLevel:WH,isLevelEnabled:JH,mappings:QH,initialLsCache:YH,genLsCache:XH,assertNoLevelCollisions:ZH}=vm(),{asChindings:OR,asJson:eV,buildFormatters:RR,stringify:TR}=wu(),{version:tV}=wm(),rV=em(),iV=class{},IR={constructor:iV,child:sV,bindings:nV,setBindings:oV,flush:uV,isLevelEnabled:JH,version:tV,get level(){return this[ER]()},set level(t){this[Sm](t)},get levelVal(){return this[IH]},set levelVal(t){throw Error("levelVal is read-only")},[OH]:YH,[kH]:lV,[AR]:eV,[ER]:KH,[Sm]:WH};Object.setPrototypeOf(IR,CH.prototype);$R.exports=function(){return Object.create(IR)};var PR=t=>t;function sV(t,e){if(!t)throw Error("missing bindings for child Pino");e=e||{};let r=this[Js],i=this[_m],s=Object.create(this);if(e.hasOwnProperty("serializers")===!0){s[Js]=Object.create(null);for(let u in r)s[Js][u]=r[u];let l=Object.getOwnPropertySymbols(r);for(var n=0;n<l.length;n++){let u=l[n];s[Js][u]=r[u]}for(let u in e.serializers)s[Js][u]=e.serializers[u];let c=Object.getOwnPropertySymbols(e.serializers);for(var o=0;o<c.length;o++){let u=c[o];s[Js][u]=e.serializers[u]}}else s[Js]=r;if(e.hasOwnProperty("formatters")){let{level:l,bindings:c,log:u}=e.formatters;s[_m]=RR(l||i.level,c||PR,u||i.log)}else s[_m]=RR(i.level,PR,i.log);if(e.hasOwnProperty("customLevels")===!0&&(ZH(this.levels,e.customLevels),s.levels=QH(e.customLevels,s[MH]),XH(s)),typeof e.redact=="object"&&e.redact!==null||Array.isArray(e.redact)){s.redact=e.redact;let l=rV(s.redact,TR),c={stringify:l[BH]};s[UH]=TR,s[VH]=l,s[HH]=c}typeof e.msgPrefix=="string"&&(s[xR]=(this[xR]||"")+e.msgPrefix),s[Em]=OR(s,t);let a=e.level||this.level;return s[Sm](a),this.onChild(s),s}function nV(){let e=`{${this[Em].substr(1)}}`,r=JSON.parse(e);return delete r.pid,delete r.hostname,r}function oV(t){let e=OR(this,t);this[Em]=e,delete this[$H]}function aV(t,e){return Object.assign(e,t)}function lV(t,e,r){let i=this[LH](),s=this[NH],n=this[DH],o=this[FH],a=this[qH]||aV,l,c=this[GH].streamWrite;t==null?l={}:t instanceof Error?(l={[n]:t},e===void 0&&(e=t.message)):(l=t,e===void 0&&t[o]===void 0&&t[n]&&(e=t[n].message)),s&&(l=a(l,s(l,r,this)));let u=this[AR](l,e,r,i),f=this[CR];f[zH]===!0&&(f.lastLevel=r,f.lastObj=l,f.lastMsg=e,f.lastTime=i.slice(this[jH]),f.lastLogger=this),f.write(c?c(u):u)}function cV(){}function uV(t){if(t!=null&&typeof t!="function")throw Error("callback must be a function");let e=this[CR];typeof e.flush=="function"?e.flush(t||cV):t&&t()}});var jR=_((Pm,LR)=>{"use strict";var{hasOwnProperty:_a}=Object.prototype,Ys=Tm();Ys.configure=Tm;Ys.stringify=Ys;Ys.default=Ys;Pm.stringify=Ys;Pm.configure=Tm;LR.exports=Ys;var fV=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function us(t){return t.length<5e3&&!fV.test(t)?`"${t}"`:JSON.stringify(t)}function xm(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let i=t[r],s=r;for(;s!==0&&t[s-1]>i;)t[s]=t[s-1],s--;t[s]=i}return t}var dV=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function Rm(t){return dV.call(t)!==void 0&&t.length!==0}function kR(t,e,r){t.length<r&&(r=t.length);let i=e===","?"":" ",s=`"0":${i}${t[0]}`;for(let n=1;n<r;n++)s+=`${e}"${n}":${i}${t[n]}`;return s}function hV(t){if(_a.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function pV(t){let e;if(_a.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function mV(t,e){let r;if(_a.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function qR(t,e){let r;if(_a.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function Qs(t){return t===1?"1 item":`${t} items`}function yV(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function gV(t){if(_a.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let i=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(i+=` (${r.toString()})`),new Error(i)}}}function Tm(t){t={...t};let e=gV(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=hV(t),i=mV(t,"bigint"),s=pV(t),n=typeof s=="function"?s:void 0,o=qR(t,"maximumDepth"),a=qR(t,"maximumBreadth");function l(d,h,m,v,g,w){let b=h[d];switch(typeof b=="object"&&b!==null&&typeof b.toJSON=="function"&&(b=b.toJSON(d)),b=v.call(h,d,b),typeof b){case"string":return us(b);case"object":{if(b===null)return"null";if(m.indexOf(b)!==-1)return r;let y="",E=",",x=w;if(Array.isArray(b)){if(b.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(b),g!==""&&(w+=g,y+=`
${w}`,E=`,
${w}`);let O=Math.min(b.length,a),P=0;for(;P<O-1;P++){let te=l(String(P),b,m,v,g,w);y+=te!==void 0?te:"null",y+=E}let D=l(String(P),b,m,v,g,w);if(y+=D!==void 0?D:"null",b.length-1>a){let te=b.length-a-1;y+=`${E}"... ${Qs(te)} not stringified"`}return g!==""&&(y+=`
${x}`),m.pop(),`[${y}]`}let S=Object.keys(b),R=S.length;if(R===0)return"{}";if(o<m.length+1)return'"[Object]"';let T="",C="";g!==""&&(w+=g,E=`,
${w}`,T=" ");let q=Math.min(R,a);s&&!Rm(b)&&(S=xm(S,n)),m.push(b);for(let O=0;O<q;O++){let P=S[O],D=l(P,b,m,v,g,w);D!==void 0&&(y+=`${C}${us(P)}:${T}${D}`,C=E)}if(R>a){let O=R-a;y+=`${C}"...":${T}"${Qs(O)} not stringified"`,C=E}return g!==""&&C.length>1&&(y=`
${w}${y}
${x}`),m.pop(),`{${y}}`}case"number":return isFinite(b)?String(b):e?e(b):"null";case"boolean":return b===!0?"true":"false";case"undefined":return;case"bigint":if(i)return String(b);default:return e?e(b):void 0}}function c(d,h,m,v,g,w){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(d)),typeof h){case"string":return us(h);case"object":{if(h===null)return"null";if(m.indexOf(h)!==-1)return r;let b=w,y="",E=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h),g!==""&&(w+=g,y+=`
${w}`,E=`,
${w}`);let R=Math.min(h.length,a),T=0;for(;T<R-1;T++){let q=c(String(T),h[T],m,v,g,w);y+=q!==void 0?q:"null",y+=E}let C=c(String(T),h[T],m,v,g,w);if(y+=C!==void 0?C:"null",h.length-1>a){let q=h.length-a-1;y+=`${E}"... ${Qs(q)} not stringified"`}return g!==""&&(y+=`
${b}`),m.pop(),`[${y}]`}m.push(h);let x="";g!==""&&(w+=g,E=`,
${w}`,x=" ");let S="";for(let R of v){let T=c(R,h[R],m,v,g,w);T!==void 0&&(y+=`${S}${us(R)}:${x}${T}`,S=E)}return g!==""&&S.length>1&&(y=`
${w}${y}
${b}`),m.pop(),`{${y}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(i)return String(h);default:return e?e(h):void 0}}function u(d,h,m,v,g){switch(typeof h){case"string":return us(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(d),typeof h!="object")return u(d,h,m,v,g);if(h===null)return"null"}if(m.indexOf(h)!==-1)return r;let w=g;if(Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h),g+=v;let T=`
${g}`,C=`,
${g}`,q=Math.min(h.length,a),O=0;for(;O<q-1;O++){let D=u(String(O),h[O],m,v,g);T+=D!==void 0?D:"null",T+=C}let P=u(String(O),h[O],m,v,g);if(T+=P!==void 0?P:"null",h.length-1>a){let D=h.length-a-1;T+=`${C}"... ${Qs(D)} not stringified"`}return T+=`
${w}`,m.pop(),`[${T}]`}let b=Object.keys(h),y=b.length;if(y===0)return"{}";if(o<m.length+1)return'"[Object]"';g+=v;let E=`,
${g}`,x="",S="",R=Math.min(y,a);Rm(h)&&(x+=kR(h,E,a),b=b.slice(h.length),R-=h.length,S=E),s&&(b=xm(b,n)),m.push(h);for(let T=0;T<R;T++){let C=b[T],q=u(C,h[C],m,v,g);q!==void 0&&(x+=`${S}${us(C)}: ${q}`,S=E)}if(y>a){let T=y-a;x+=`${S}"...": "${Qs(T)} not stringified"`,S=E}return S!==""&&(x=`
${g}${x}
${w}`),m.pop(),`{${x}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(i)return String(h);default:return e?e(h):void 0}}function f(d,h,m){switch(typeof h){case"string":return us(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(d),typeof h!="object")return f(d,h,m);if(h===null)return"null"}if(m.indexOf(h)!==-1)return r;let v="",g=h.length!==void 0;if(g&&Array.isArray(h)){if(h.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(h);let x=Math.min(h.length,a),S=0;for(;S<x-1;S++){let T=f(String(S),h[S],m);v+=T!==void 0?T:"null",v+=","}let R=f(String(S),h[S],m);if(v+=R!==void 0?R:"null",h.length-1>a){let T=h.length-a-1;v+=`,"... ${Qs(T)} not stringified"`}return m.pop(),`[${v}]`}let w=Object.keys(h),b=w.length;if(b===0)return"{}";if(o<m.length+1)return'"[Object]"';let y="",E=Math.min(b,a);g&&Rm(h)&&(v+=kR(h,",",a),w=w.slice(h.length),E-=h.length,y=","),s&&(w=xm(w,n)),m.push(h);for(let x=0;x<E;x++){let S=w[x],R=f(S,h[S],m);R!==void 0&&(v+=`${y}${us(S)}:${R}`,y=",")}if(b>a){let x=b-a;v+=`${y}"...":"${Qs(x)} not stringified"`}return m.pop(),`{${v}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(i)return String(h);default:return e?e(h):void 0}}function p(d,h,m){if(arguments.length>1){let v="";if(typeof m=="number"?v=" ".repeat(Math.min(m,10)):typeof m=="string"&&(v=m.slice(0,10)),h!=null){if(typeof h=="function")return l("",{"":d},[],h,v,"");if(Array.isArray(h))return c("",d,[],yV(h),v,"")}if(v.length!==0)return u("",d,[],v,"")}return f("",d,[])}return p}});var MR=_((yfe,FR)=>{"use strict";var Am=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:DR}=_u(),bV=DR.info;function vV(t,e){let r=0;t=t||[],e=e||{dedupe:!1};let i=Object.create(DR);i.silent=1/0,e.levels&&typeof e.levels=="object"&&Object.keys(e.levels).forEach(f=>{i[f]=e.levels[f]});let s={write:n,add:l,emit:o,flushSync:a,end:c,minLevel:0,streams:[],clone:u,[Am]:!0,streamLevels:i};return Array.isArray(t)?t.forEach(l,s):l.call(s,t),t=null,s;function n(f){let p,d=this.lastLevel,{streams:h}=this,m=0,v;for(let g=_V(h.length,e.dedupe);EV(g,h.length,e.dedupe);g=SV(g,e.dedupe))if(p=h[g],p.level<=d){if(m!==0&&m!==p.level)break;if(v=p.stream,v[Am]){let{lastTime:w,lastMsg:b,lastObj:y,lastLogger:E}=this;v.lastLevel=d,v.lastTime=w,v.lastMsg=b,v.lastObj=y,v.lastLogger=E}v.write(f),e.dedupe&&(m=p.level)}else if(!e.dedupe)break}function o(...f){for(let{stream:p}of this.streams)typeof p.emit=="function"&&p.emit(...f)}function a(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync()}function l(f){if(!f)return s;let p=typeof f.write=="function"||f.stream,d=f.write?f:f.stream;if(!p)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:h,streamLevels:m}=this,v;typeof f.levelVal=="number"?v=f.levelVal:typeof f.level=="string"?v=m[f.level]:typeof f.level=="number"?v=f.level:v=bV;let g={stream:d,level:v,levelVal:void 0,id:r++};return h.unshift(g),h.sort(wV),this.minLevel=h[0].level,s}function c(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync(),f.end()}function u(f){let p=new Array(this.streams.length);for(let d=0;d<p.length;d++)p[d]={level:f,stream:this.streams[d].stream};return{write:n,add:l,minLevel:f,streams:p,clone:u,emit:o,flushSync:a,[Am]:!0}}}function wV(t,e){return t.level-e.level}function _V(t,e){return e?t-1:0}function SV(t,e){return e?t-1:t+1}function EV(t,e,r){return r?t>=0:t<e}FR.exports=vV});var eT=_((gfe,Tr)=>{"use strict";var xV=require("node:os"),WR=Gp(),RV=Kp(),TV=em(),JR=Nx(),PV=NR(),QR=Qn(),{configure:AV}=jR(),{assertDefaultLevelFound:CV,mappings:YR,genLsCache:OV,genLevelComparison:IV,assertLevelComparison:$V}=vm(),{DEFAULT_LEVELS:XR,SORTING_ORDER:NV}=_u(),{createArgsNormalizer:kV,asChindings:qV,buildSafeSonicBoom:zR,buildFormatters:LV,stringify:Cm,normalizeDestFileDescriptor:BR,noop:jV}=wu(),{version:DV}=wm(),{chindingsSym:UR,redactFmtSym:FV,serializersSym:HR,timeSym:MV,timeSliceIndexSym:zV,streamSym:BV,stringifySym:VR,stringifySafeSym:Om,stringifiersSym:GR,setLevelSym:UV,endSym:HV,formatOptsSym:VV,messageKeySym:GV,errorKeySym:KV,nestedKeySym:WV,mixinSym:JV,levelCompSym:QV,useOnlyCustomLevelsSym:YV,formattersSym:KR,hooksSym:XV,nestedKeyStrSym:ZV,mixinMergeStrategySym:e3,msgPrefixSym:t3}=QR,{epochTime:ZR,nullTime:r3}=JR,{pid:i3}=process,s3=xV.hostname(),n3=WR.err,o3={level:"info",levelComparison:NV.ASC,levels:XR,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:i3,hostname:s3},serializers:Object.assign(Object.create(null),{err:n3}),formatters:Object.assign(Object.create(null),{bindings(t){return t},level(t,e){return{level:e}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:ZR,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},a3=kV(o3),l3=Object.assign(Object.create(null),WR);function Im(...t){let e={},{opts:r,stream:i}=a3(e,RV(),...t);r.level&&typeof r.level=="string"&&XR[r.level.toLowerCase()]!==void 0&&(r.level=r.level.toLowerCase());let{redact:s,crlf:n,serializers:o,timestamp:a,messageKey:l,errorKey:c,nestedKey:u,base:f,name:p,level:d,customLevels:h,levelComparison:m,mixin:v,mixinMergeStrategy:g,useOnlyCustomLevels:w,formatters:b,hooks:y,depthLimit:E,edgeLimit:x,onChild:S,msgPrefix:R}=r,T=AV({maximumDepth:E,maximumBreadth:x}),C=LV(b.level,b.bindings,b.log),q=Cm.bind({[Om]:T}),O=s?TV(s,q):{},P=s?{stringify:O[FV]}:{stringify:q},D="}"+(n?`\r
`:`
`),te=qV.bind(null,{[UR]:"",[HR]:o,[GR]:O,[VR]:Cm,[Om]:T,[KR]:C}),L="";f!==null&&(p===void 0?L=te(f):L=te(Object.assign({},f,{name:p})));let K=a instanceof Function?a:a?ZR:r3,Re=K().indexOf(":")+1;if(w&&!h)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(v&&typeof v!="function")throw Error(`Unknown mixin type "${typeof v}" - expected "function"`);if(R&&typeof R!="string")throw Error(`Unknown msgPrefix type "${typeof R}" - expected "string"`);CV(d,h,w);let z=YR(h,w);typeof i.emit=="function"&&i.emit("message",{code:"PINO_CONFIG",config:{levels:z,messageKey:l,errorKey:c}}),$V(m);let Te=IV(m);return Object.assign(e,{levels:z,[QV]:Te,[YV]:w,[BV]:i,[MV]:K,[zV]:Re,[VR]:Cm,[Om]:T,[GR]:O,[HV]:D,[VV]:P,[GV]:l,[KV]:c,[WV]:u,[ZV]:u?`,${JSON.stringify(u)}:{`:"",[HR]:o,[JV]:v,[e3]:g,[UR]:L,[KR]:C,[XV]:y,silent:jV,onChild:S,[t3]:R}),Object.setPrototypeOf(e,PV()),OV(e),e[UV](d),e}Tr.exports=Im;Tr.exports.destination=(t=process.stdout.fd)=>typeof t=="object"?(t.dest=BR(t.dest||process.stdout.fd),zR(t)):zR({dest:BR(t),minLength:0});Tr.exports.transport=hm();Tr.exports.multistream=MR();Tr.exports.levels=YR();Tr.exports.stdSerializers=l3;Tr.exports.stdTimeFunctions=Object.assign({},JR);Tr.exports.symbols=QR;Tr.exports.version=DV;Tr.exports.default=Im;Tr.exports.pino=Im});var iT=_((bfe,rT)=>{"use strict";var Su=eT(),{serializersSym:tT}=Su.symbols,{FST_ERR_LOG_INVALID_DESTINATION:c3}=Et();function u3(t){if(t.stream&&t.file)throw new c3;t.file&&(t.stream=Su.destination(t.file),delete t.file);let e=t.logger,r=t.genReqId,i=null;return e?(t.logger=void 0,t.genReqId=void 0,e[tT]&&(t.serializers=Object.assign({},t.serializers,e[tT])),i=e.child({},t),t.logger=e,t.genReqId=r):i=Su(t,t.stream),i}var f3={req:function(e){return{method:e.method,url:e.url,version:e.headers&&e.headers["accept-version"],host:e.host,remoteAddress:e.ip,remotePort:e.socket?e.socket.remotePort:void 0}},err:Su.stdSerializers.err,res:function(e){return{statusCode:e.statusCode}}};rT.exports={serializers:f3,createPinoLogger:u3}});var Sa=_((vfe,nT)=>{"use strict";var{FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:d3,FST_ERR_LOG_INVALID_LOGGER_CONFIG:h3,FST_ERR_LOG_INVALID_LOGGER_INSTANCE:p3,FST_ERR_LOG_INVALID_LOGGER:m3}=Et();function y3(t,e,r,i,s){let n={[t.requestIdLogLabel]:i},o=t.childLoggerFactory.call(t.server,e,n,s||{},r);return t.childLoggerFactory!==sT&&Eu(o,!0),o}function sT(t,e,r){return t.child(e,r)}function Eu(t,e){let r=["info","error","debug","fatal","warn","trace","child"],i=t?r.filter(s=>!t[s]||typeof t[s]!="function"):r;if(i.length){if(i.length===r.length&&!e)return!1;throw m3(i.join(","))}else return!0}function g3(t){if(t.logger&&t.loggerInstance)throw new d3;if(!t.loggerInstance&&!t.logger){let o=UE();return o.child=()=>o,{logger:o,hasLogger:!1}}let{createPinoLogger:e,serializers:r}=iT();if(Eu(t.loggerInstance))return{logger:e({logger:t.loggerInstance,serializers:Object.assign({},r,t.loggerInstance.serializers)}),hasLogger:!0};if(Eu(t.logger))throw h3();if(t.loggerInstance)throw p3();let i={};return Object.prototype.toString.call(t.logger)==="[object Object]"&&Reflect.ownKeys(t.logger).forEach(n=>{Object.defineProperty(i,n,{value:t.logger[n],writable:!0,enumerable:!0,configurable:!0})}),i.level=i.level||"info",i.serializers=Object.assign({},r,i.serializers),t.logger=i,{logger:e(t.logger),hasLogger:!0}}function b3(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}nT.exports={createChildLogger:y3,defaultChildLoggerFactory:sT,createLogger:g3,validateLogger:Eu,now:b3}});var xu=_((wfe,oT)=>{"use strict";oT.exports=v3;function Zn(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function v3(t){if(t=t||{},t.circles)return w3(t);let e=new Map;if(e.set(Date,o=>new Date(o)),e.set(Map,(o,a)=>new Map(i(Array.from(o),a))),e.set(Set,(o,a)=>new Set(i(Array.from(o),a))),t.constructorHandlers)for(let o of t.constructorHandlers)e.set(o[0],o[1]);let r=null;return t.proto?n:s;function i(o,a){let l=Object.keys(o),c=new Array(l.length);for(let u=0;u<l.length;u++){let f=l[u],p=o[f];typeof p!="object"||p===null?c[f]=p:p.constructor!==Object&&(r=e.get(p.constructor))?c[f]=r(p,a):ArrayBuffer.isView(p)?c[f]=Zn(p):c[f]=a(p)}return c}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return i(o,s);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,s);let a={};for(let l in o){if(Object.hasOwnProperty.call(o,l)===!1)continue;let c=o[l];typeof c!="object"||c===null?a[l]=c:c.constructor!==Object&&(r=e.get(c.constructor))?a[l]=r(c,s):ArrayBuffer.isView(c)?a[l]=Zn(c):a[l]=s(c)}return a}function n(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return i(o,n);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,n);let a={};for(let l in o){let c=o[l];typeof c!="object"||c===null?a[l]=c:c.constructor!==Object&&(r=e.get(c.constructor))?a[l]=r(c,n):ArrayBuffer.isView(c)?a[l]=Zn(c):a[l]=n(c)}return a}}function w3(t){let e=[],r=[],i=new Map;if(i.set(Date,l=>new Date(l)),i.set(Map,(l,c)=>new Map(n(Array.from(l),c))),i.set(Set,(l,c)=>new Set(n(Array.from(l),c))),t.constructorHandlers)for(let l of t.constructorHandlers)i.set(l[0],l[1]);let s=null;return t.proto?a:o;function n(l,c){let u=Object.keys(l),f=new Array(u.length);for(let p=0;p<u.length;p++){let d=u[p],h=l[d];if(typeof h!="object"||h===null)f[d]=h;else if(h.constructor!==Object&&(s=i.get(h.constructor)))f[d]=s(h,c);else if(ArrayBuffer.isView(h))f[d]=Zn(h);else{let m=e.indexOf(h);m!==-1?f[d]=r[m]:f[d]=c(h)}}return f}function o(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return n(l,o);if(l.constructor!==Object&&(s=i.get(l.constructor)))return s(l,o);let c={};e.push(l),r.push(c);for(let u in l){if(Object.hasOwnProperty.call(l,u)===!1)continue;let f=l[u];if(typeof f!="object"||f===null)c[u]=f;else if(f.constructor!==Object&&(s=i.get(f.constructor)))c[u]=s(f,o);else if(ArrayBuffer.isView(f))c[u]=Zn(f);else{let p=e.indexOf(f);p!==-1?c[u]=r[p]:c[u]=o(f)}}return e.pop(),r.pop(),c}function a(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return n(l,a);if(l.constructor!==Object&&(s=i.get(l.constructor)))return s(l,a);let c={};e.push(l),r.push(c);for(let u in l){let f=l[u];if(typeof f!="object"||f===null)c[u]=f;else if(f.constructor!==Object&&(s=i.get(f.constructor)))c[u]=s(f,a);else if(ArrayBuffer.isView(f))c[u]=Zn(f);else{let p=e.indexOf(f);p!==-1?c[u]=r[p]:c[u]=a(f)}}return e.pop(),r.pop(),c}}});var Ea=_((_fe,fT)=>{"use strict";var _3=xu()({circles:!1,proto:!0}),{kSchemaVisited:aT,kSchemaResponse:S3}=pt(),$m=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:E3,FST_ERR_SCH_ALREADY_PRESENT:x3,FST_ERR_SCH_DUPLICATE:R3,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:lT}=Et(),uT=["params","body","querystring","query","headers"];function Ru(t){this.store=t||{}}Ru.prototype.add=function(t){let e=_3(t.isFluentSchema||t.isFluentJSONSchema||t[$m]?t.valueOf():t),r=e.$id;if(!r)throw new E3;if(this.store[r])throw new x3(r);this.store[r]=e};Ru.prototype.getSchemas=function(){return Object.assign({},this.store)};Ru.prototype.getSchema=function(t){return this.store[t]};function cT(t){return typeof t=="object"&&Object.getPrototypeOf(t)!==Object.prototype}function T3(t,e){if(t[aT])return t;if(t.query){if(t.querystring)throw new R3("querystring");t.querystring=t.query}P3(t);for(let r of uT){let i=t[r];if(i&&!cT(i)&&r==="body"&&i.content){let s=i.content,n=Object.keys(s);for(let o=0;o<n.length;o++){let a=n[o];if(!s[a].schema)throw new lT(a)}continue}}if(t.response){let r=Object.keys(t.response);for(let i of r){if(cT(t.response[i]))continue;let s=t.response[i].content;if(s){let n=Object.keys(s);for(let o=0;o<n.length;o++){let a=n[o];if(!s[a].schema)throw new lT(a)}}}}return t[aT]=!0,t}function P3(t){for(let e of uT)t[e]&&(t[e].isFluentSchema||t[e][$m])&&(t[e]=t[e].valueOf());if(t.response){let e=Object.keys(t.response);for(let r of e)(t.response[r].isFluentSchema||t.response[r][$m])&&(t.response[r]=t.response[r].valueOf())}}function A3(t,e,r){let i=t[S3];if(!i)return!1;if(i[e]){if(i[e].constructor===Object&&r){let n=r.split(";",1)[0];return i[e][n]?i[e][n]:i[e]["*/*"]?i[e]["*/*"]:!1}return i[e]}let s=(e+"")[0]+"xx";if(i[s]){if(i[s].constructor===Object&&r){let n=r.split(";",1)[0];return i[s][n]?i[s][n]:i[s]["*/*"]?i[s]["*/*"]:!1}return i[s]}if(i.default){if(i.default.constructor===Object&&r){let n=r.split(";",1)[0];return i.default[n]?i.default[n]:i.default["*/*"]?i.default["*/*"]:!1}return i.default}return!1}fT.exports={buildSchemas(t){return new Ru(t)},getSchemaSerializer:A3,normalizeSchema:T3}});var Tu=_((Sfe,hT)=>{"use strict";var C3=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;hT.exports=class dT{constructor(e){switch(e&&e.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=e}asInteger(e){if(Number.isInteger(e))return""+e;if(typeof e=="bigint")return e.toString();let r=this.parseInteger(e);if(r===1/0||r===-1/0||r!==r)throw new Error(`The value "${e}" cannot be converted to an integer.`);return""+r}asNumber(e){let r=Number(e);if(r!==r)throw new Error(`The value "${e}" cannot be converted to a number.`);return r===1/0||r===-1/0?"null":""+r}asBoolean(e){return e&&"true"||"false"}asDateTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+e.toISOString()+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date-time.`)}asDate(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a date.`)}asTime(e){if(e===null)return'""';if(e instanceof Date)return'"'+new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof e=="string")return'"'+e+'"';throw new Error(`The value "${e}" cannot be converted to a time.`)}asString(e){let r=e.length;if(r<42){let i="",s=-1,n=255;for(let o=0;o<r;o++)if(n=e.charCodeAt(o),n===34||n===92)s===-1&&(s=0),i+=e.slice(s,o)+"\\",s=o;else if(n<32||n>=55296&&n<=57343)return JSON.stringify(e);return s===-1&&'"'+e+'"'||'"'+i+e.slice(s)+'"'}else return r<5e3&&C3.test(e)===!1?'"'+e+'"':JSON.stringify(e)}asUnsafeString(e){return'"'+e+'"'}getState(){return this._options}static restoreFromState(e){return new dT(e)}}});var mT=_((Efe,pT)=>{"use strict";var O3=Tu(),I3={mode:"standalone"},$3=O3.restoreFromState(I3),N3=null;pT.exports=function(e,r){let i="{",s="}",n="[",o="]",a=",",l=":",c='"',u=i+s,f=n+o,p=c+c,d="null";function h(v){let g=v&&typeof v.toJSON=="function"?v.toJSON():v;if(g===null)return u;let w,b=i,y=!1;return w=g.statusCode,w!==void 0&&(!y&&(y=!0)||(b+=a),b+='"statusCode":',b+=r.asNumber(w)),w=g.code,w!==void 0&&(!y&&(y=!0)||(b+=a),b+='"code":',typeof w!="string"?w===null?b+=p:w instanceof Date?b+=c+w.toISOString()+c:w instanceof RegExp?b+=r.asString(w.source):b+=r.asString(w.toString()):b+=r.asString(w)),w=g.error,w!==void 0&&(!y&&(y=!0)||(b+=a),b+='"error":',typeof w!="string"?w===null?b+=p:w instanceof Date?b+=c+w.toISOString()+c:w instanceof RegExp?b+=r.asString(w.source):b+=r.asString(w.toString()):b+=r.asString(w)),w=g.message,w!==void 0&&(!y&&(y=!0)||(b+=a),b+='"message":',typeof w!="string"?w===null?b+=p:w instanceof Date?b+=c+w.toISOString()+c:w instanceof RegExp?b+=r.asString(w.source):b+=r.asString(w.toString()):b+=r.asString(w)),b+s}return h}(N3,$3)});var xa=_((xfe,vT)=>{"use strict";var yT=require("node:http").STATUS_CODES,k3=$p(),{kReplyHeaders:Xs,kReplyNextErrorHandler:Pu,kReplyIsRunningOnErrorHook:q3,kReplyHasStatusCode:L3,kRouteContext:bT,kDisableRequestLogging:Au}=pt(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:j3,FST_ERR_FAILED_ERROR_SERIALIZATION:D3}=Et(),{getSchemaSerializer:F3}=Ea(),Nm=mT(),M3={func:B3,toJSON(){return this.func.name.toString()+"()"}};function z3(t,e,r){t[q3]=!1;let i=t[bT];if(t[Pu]===!1){gT(e,t,function(o,a){try{o.raw.writeHead(o.raw.statusCode,o[Xs])}catch(l){o.log[Au]||o.log.warn({req:o.request,res:o,err:l},l&&l.message),o.raw.writeHead(o.raw.statusCode)}o.raw.end(a)});return}let s=t[Pu]||i.errorHandler;t[Pu]=Object.getPrototypeOf(s),delete t[Xs]["content-type"],delete t[Xs]["content-length"];let n=s.func;if(!n){t[Pu]=!1,gT(e,t,r);return}try{let o=n(e,t.request,t);o!==void 0&&(o!==null&&typeof o.then=="function"?k3(o,t):t.send(o))}catch(o){t.send(o)}}function B3(t,e,r){if(H3(t,r),!r[L3]||r.statusCode===200){let i=t.statusCode||t.status;r.code(i>=400?i:500)}r.statusCode<500?r.log[Au]||r.log.info({res:r,err:t},t&&t.message):r.log[Au]||r.log.error({req:e,res:r,err:t},t&&t.message),r.send(t)}function gT(t,e,r){let i=e.raw,s=e.statusCode;e[Xs]["content-type"]=e[Xs]["content-type"]??"application/json; charset=utf-8";let n;try{let o=F3(e[bT],s,e[Xs]["content-type"]);n=o===!1?Nm({error:yT[s+""],code:t.code,message:t.message,statusCode:s}):o(Object.create(t,{error:{value:yT[s+""]},message:{value:t.message},statusCode:{value:s}}))}catch(o){e.log[Au]||e.log.error({err:o,statusCode:i.statusCode},"The serializer for the given status code failed"),e.code(500),n=Nm(new D3(o.message,t.message))}typeof n!="string"&&!Buffer.isBuffer(n)&&(n=Nm(new j3(typeof n))),e[Xs]["content-length"]=""+Buffer.byteLength(n),r(e,n)}function U3(t=M3,e){if(!e)return t;let r=Object.create(t);return r.func=e,r}function H3(t,e){let r=e.raw,i=r.statusCode;i=i>=400?i:500,t!=null&&(t.headers!==void 0&&e.headers(t.headers),t.status>=400?i=t.status:t.statusCode>=400&&(i=t.statusCode)),r.statusCode=i}vT.exports={buildErrorHandler:U3,handleError:z3}});var ku=_((Rfe,Nu)=>{"use strict";var jm=require("node:stream").finished,V3=require("node:stream").Readable,{kFourOhFourContext:wT,kReplyErrorHandlerCalled:PT,kReplyHijacked:Fm,kReplyStartTime:Ra,kReplyEndTime:Mm,kReplySerializer:Fi,kReplySerializerDefault:Ou,kReplyIsError:Iu,kReplyHeaders:qe,kReplyTrailers:mt,kReplyHasStatusCode:zm,kReplyIsRunningOnErrorHook:Bm,kReplyNextErrorHandler:G3,kDisableRequestLogging:AT,kSchemaResponse:$u,kReplyCacheSerializeFns:fs,kSchemaController:km,kOptions:K3,kRouteContext:pe}=pt(),{onSendHookRunner:CT,onResponseHookRunner:W3,preHandlerHookRunner:J3,preSerializationHookRunner:Q3}=ls(),_T=Lp()[Symbol.for("internals")],Y3=Sa(),Dm=Y3.now,{handleError:ST}=xa(),{getSchemaSerializer:X3}=Ea(),qm={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:Z3,FST_ERR_REP_RESPONSE_BODY_CONSUMED:e5,FST_ERR_REP_READABLE_STREAM_LOCKED:t5,FST_ERR_REP_ALREADY_SENT:r5,FST_ERR_SEND_INSIDE_ONERR:i5,FST_ERR_BAD_STATUS_CODE:s5,FST_ERR_BAD_TRAILER_NAME:n5,FST_ERR_BAD_TRAILER_VALUE:o5,FST_ERR_MISSING_SERIALIZATION_FN:a5,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:l5}=Et(),OT=Object.prototype.toString;function Ne(t,e,r){this.raw=t,this[Fi]=null,this[PT]=!1,this[Iu]=!1,this[Bm]=!1,this.request=e,this[qe]={},this[mt]=null,this[zm]=!1,this[Ra]=void 0,this.log=r}Ne.props=[];Object.defineProperties(Ne.prototype,{[pe]:{get(){return this.request[pe]}},elapsedTime:{get(){return this[Ra]===void 0?0:(this[Mm]||Dm())-this[Ra]}},server:{get(){return this.request[pe].server}},sent:{enumerable:!0,get(){return(this[Fm]||this.raw.writableEnded)===!0}},statusCode:{get(){return this.raw.statusCode},set(t){this.code(t)}},routeOptions:{get(){return this.request.routeOptions}}});Ne.prototype.writeEarlyHints=function(t,e){return this.raw.writeEarlyHints(t,e),this};Ne.prototype.hijack=function(){return this[Fm]=!0,this};Ne.prototype.send=function(t){if(this[Bm]===!0)throw new i5;if(this.sent)return this.log.warn({err:new r5(this.request.url,this.request.method)}),this;if(t instanceof Error||this[Iu]===!0)return this[Iu]=!1,Ta(this,t,Zs),this;if(t===void 0)return Zs(this,t),this;let e=this.getHeader("content-type"),r=e!==void 0;if(t!==null){if(typeof t.pipe=="function"||typeof t.getReader=="function"||OT.call(t)==="[object Response]")return Zs(this,t),this;if(t?.buffer instanceof ArrayBuffer){r===!1&&(this[qe]["content-type"]=qm.OCTET);let i=Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength);return Zs(this,i),this}if(r===!1&&typeof t=="string")return this[qe]["content-type"]=qm.PLAIN,Zs(this,t),this}if(this[Fi]!==null){if(typeof t!="string")return ET(this,t),this;t=this[Fi](t)}else if(r===!1||e.indexOf("json")>-1){if(r===!1)this[qe]["content-type"]=qm.JSON;else if(e.indexOf("charset")===-1){let i=e.trim();i.endsWith(";")?this[qe]["content-type"]=`${i} charset=utf-8`:this[qe]["content-type"]=`${i}; charset=utf-8`}if(typeof t!="string")return ET(this,t),this}return Zs(this,t),this};Ne.prototype.getHeader=function(t){t=t.toLowerCase();let e=this.raw,r=this[qe][t];return r===void 0&&e.hasHeader(t)&&(r=e.getHeader(t)),r};Ne.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[qe]}};Ne.prototype.hasHeader=function(t){return t=t.toLowerCase(),this[qe][t]!==void 0||this.raw.hasHeader(t)};Ne.prototype.removeHeader=function(t){return delete this[qe][t.toLowerCase()],this};Ne.prototype.header=function(t,e=""){return t=t.toLowerCase(),this[qe][t]&&t==="set-cookie"?(typeof this[qe][t]=="string"&&(this[qe][t]=[this[qe][t]]),Array.isArray(e)?Array.prototype.push.apply(this[qe][t],e):this[qe][t].push(e)):this[qe][t]=e,this};Ne.prototype.headers=function(t){let e=Object.keys(t);for(let r=0;r!==e.length;++r){let i=e[r];this.header(i,t[i])}return this};var c5=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);Ne.prototype.trailer=function(t,e){if(t=t.toLowerCase(),c5.has(t))throw new n5(t);if(typeof e!="function")throw new o5(t,typeof e);return this[mt]===null&&(this[mt]={}),this[mt][t]=e,this};Ne.prototype.hasTrailer=function(t){return this[mt]?.[t.toLowerCase()]!==void 0};Ne.prototype.removeTrailer=function(t){return this[mt]===null?this:(this[mt][t.toLowerCase()]=void 0,this)};Ne.prototype.code=function(t){let e=Number(t);if(isNaN(e)||e<100||e>599)throw new s5(t||String(t));return this.raw.statusCode=e,this[zm]=!0,this};Ne.prototype.status=Ne.prototype.code;Ne.prototype.getSerializationFunction=function(t,e){let r;return typeof t=="string"||typeof t=="number"?typeof e=="string"?r=this[pe][$u]?.[t]?.[e]:r=this[pe][$u]?.[t]:typeof t=="object"&&(r=this[pe][fs]?.get(t)),r};Ne.prototype.compileSerializationSchema=function(t,e=null,r=null){let{request:i}=this,{method:s,url:n}=i;if(this[pe][fs]?.has(t))return this[pe][fs].get(t);let a=(this[pe].serializerCompiler||this.server[km].serializerCompiler||this.server[km].setupSerializer(this.server[K3])||this.server[km].serializerCompiler)({schema:t,method:s,url:n,httpStatus:e,contentType:r});return this[pe][fs]==null&&(this[pe][fs]=new WeakMap),this[pe][fs].set(t,a),a};Ne.prototype.serializeInput=function(t,e,r,i){let s=r,n;if(r=typeof e=="string"||typeof e=="number"?e:r,i=r&&s!==r?s:i,r!=null){if(i!=null?n=this[pe][$u]?.[r]?.[i]:n=this[pe][$u]?.[r],n==null)throw i?new l5(r,i):new a5(r)}else this[pe][fs]?.has(e)?n=this[pe][fs].get(e):n=this.compileSerializationSchema(e,r,i);return n(t)};Ne.prototype.serialize=function(t){return this[Fi]!==null?this[Fi](t):this[pe]&&this[pe][Ou]?this[pe][Ou](t,this.raw.statusCode):NT(this[pe],t,this.raw.statusCode)};Ne.prototype.serializer=function(t){return this[Fi]=t,this};Ne.prototype.type=function(t){return this[qe]["content-type"]=t,this};Ne.prototype.redirect=function(t,e){return e||(e=this[zm]?this.raw.statusCode:302),this.header("location",t).code(e).send()};Ne.prototype.callNotFound=function(){return y5(this),this};Ne.prototype.then=function(t,e){if(this.sent){t();return}jm(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?e?e(r):this.log&&this.log.warn("unhandled rejection on reply.then"):t()})};function ET(t,e){t[pe].preSerialization!==null?Q3(t[pe].preSerialization,t.request,t,e,xT):xT(null,t.request,t,e)}function xT(t,e,r,i){if(t!=null){Ta(r,t);return}try{r[Fi]!==null?i=r[Fi](i):r[pe]&&r[pe][Ou]?i=r[pe][Ou](i,r.raw.statusCode):i=NT(r[pe],i,r.raw.statusCode,r[qe]["content-type"])}catch(s){u5(s,r),Ta(r,s);return}Zs(r,i)}function u5(t,e){t.serialization=e[pe].config}function Zs(t,e){t[pe].onSend!==null?CT(t[pe].onSend,t.request,t,e,f5):IT(t,e)}function f5(t,e,r,i){t!=null?Ta(r,t):IT(r,i)}function Lm(t,e){let r=t.raw;try{r.writeHead(e,t[qe])}catch(i){throw i.code==="ERR_HTTP_HEADERS_SENT"&&t.log.warn(`Reply was already sent, did you forget to "return reply" in the "${t.request.raw.url}" (${t.request.raw.method}) route?`),i}}function IT(t,e){let r=t.raw,i=t.request;if(t[mt]!==null){let n=Object.keys(t[mt]),o="";for(let a of n)typeof t[mt][a]=="function"&&(o+=" ",o+=a);t.header("Transfer-Encoding","chunked"),t.header("Trailer",o.trim())}if(OT.call(e)==="[object Response]"){if(typeof e.status=="number"&&t.code(e.status),typeof e.headers=="object"&&typeof e.headers.forEach=="function")for(let[n,o]of e.headers)t.header(n,o);if(e.body!==null&&e.bodyUsed)throw new e5;e=e.body}let s=r.statusCode;if(e==null){s>=200&&s!==204&&s!==304&&i.method!=="HEAD"&&t[mt]===null&&(t[qe]["content-length"]="0"),Lm(t,s),Cu(e,r,t);return}if(s>=100&&s<200||s===204){t.removeHeader("content-type"),t.removeHeader("content-length"),Lm(t,s),Cu(void 0,r,t),typeof e.resume=="function"&&(e.on("error",kT),e.resume());return}if(typeof e.pipe=="function"){$T(e,r,t);return}if(typeof e.getReader=="function"){d5(e,r,t);return}if(typeof e!="string"&&!Buffer.isBuffer(e))throw new Z3(typeof e);if(t[mt]===null){let n=t[qe]["content-length"];(!n||i.raw.method!=="HEAD"&&Number(n)!==Buffer.byteLength(e))&&(t[qe]["content-length"]=""+Buffer.byteLength(e))}Lm(t,s),r.write(e),Cu(e,r,t)}function RT(t,e,r){e.code==="ERR_STREAM_PREMATURE_CLOSE"?t[AT]||t.info({res:r},"stream closed prematurely"):t.warn({err:e},"response terminated with an error with headers already sent")}function d5(t,e,r){if(t.locked)throw t5();let i=V3.fromWeb(t);$T(i,e,r)}function $T(t,e,r){let i=!0,s=!1;if(h5(t,e,r),jm(t,{readable:!0,writable:!1},function(n){i=!1,n!=null&&(e.headersSent||r.request.raw.aborted===!0?(s||(s=!0,RT(r.log,n,r)),e.destroy()):Ta(r,n))}),jm(e,function(n){i&&(n!=null&&e.headersSent&&!s&&(s=!0,RT(r.log,n,e)),typeof t.destroy=="function"?t.destroy():typeof t.close=="function"?t.close(kT):typeof t.abort=="function"?t.abort():r.log.warn("stream payload does not end properly"))}),e.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let n in r[qe])e.setHeader(n,r[qe][n]);t.pipe(e)}function Cu(t,e,r){if(r[mt]===null){e.end(null,null,null);return}let i=Object.keys(r[mt]),s={},n=0,o=!0;function a(){n===0&&(e.addTrailers(s),e.end(null,null,null))}for(let l of i){let c=function(f,p){n++,f?r.log.debug(f):s[l]=p,process.nextTick(a)};if(typeof r[mt][l]!="function")continue;o=!1,n--;let u=r[mt][l](r,t,c);typeof u=="object"&&typeof u.then=="function"&&u.then(f=>c(null,f),c)}o&&e.end(null,null,null)}function h5(t,e,r){r[mt]!==null&&t.on("end",()=>Cu(null,e,r))}function Ta(t,e,r){t[pe].onError!==null&&!t[G3]?(t[Bm]=!0,CT(t[pe].onError,t.request,t,e,()=>ST(t,e,r))):ST(t,e,r)}function p5(t){t[Ra]=Dm();let e=r=>{t[Mm]=Dm(),t.raw.removeListener("finish",e),t.raw.removeListener("error",e);let i=t[pe];i&&i.onResponse!==null?W3(i.onResponse,t.request,t,TT):TT(r,t.request,t)};t.raw.on("finish",e),t.raw.on("error",e)}function TT(t,e,r){if(r.log[AT])return;let i=r.elapsedTime;if(t!=null){r.log.error({res:r,err:t,responseTime:i},"request errored");return}r.log.info({res:r,responseTime:i},"request completed")}function m5(t){let e=t.props.slice();function r(i,s,n){this.raw=i,this[Iu]=!1,this[PT]=!1,this[Fm]=!1,this[Fi]=null,this.request=s,this[qe]={},this[mt]=null,this[Ra]=void 0,this[Mm]=void 0,this.log=n;let o;for(let a=0;a<e.length;a++)o=e[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.parent=t,r.props=e,r}function y5(t){if(t[pe][wT]===null){t.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),t.code(404).send("404 Not Found");return}t.request[pe]=t[pe][wT],t[pe].preHandler!==null?J3(t[pe].preHandler,t.request,t,_T.preHandlerCallback):_T.preHandlerCallback(null,t.request,t)}function NT(t,e,r,i){let s=X3(t,r,i);return s?s(e):JSON.stringify(e)}function kT(){}Nu.exports=Ne;Nu.exports.buildReply=m5;Nu.exports.setupResponseListeners=p5});var qT=_((Tfe,qu)=>{"use strict";function Um(t){if(!t)throw new TypeError("argument req is required");let e=t.headers["x-forwarded-for"],r=t.socket.remoteAddress;if(!e||typeof e!="string")return[r];if(e.indexOf(",")===-1){let i=e.trim();return i.length?[r,i]:[r]}else return g5(e,r)}function g5(t,e){let r=[e],i=t.length,s=i,n,o;for(o=i-1;o>=0;--o)n=t[o],n===" "?s===i&&(s=i=o):n===","?(s!==i&&r.push(t.slice(s,i)),s=i=o):s=o;return s!==i&&r.push(t.substring(s,i)),r}qu.exports=Um;qu.exports.default=Um;qu.exports.forwarded=Um});var jT=_((LT,Lu)=>{"use strict";(function(t){"use strict";let e="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${e}\\.${e}\\.${e}\\.${e}$`,"i"),threeOctet:new RegExp(`^${e}\\.${e}\\.${e}$`,"i"),twoOctet:new RegExp(`^${e}\\.${e}$`,"i"),longValue:new RegExp(`^${e}$`,"i")},i=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),n="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(n,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${n})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${e}\\.${e}\\.${e}\\.${e}(${n})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${e}\\.${e}\\.${e}\\.${e}(${n})?$`,"i")};function l(d,h){if(d.indexOf("::")!==d.lastIndexOf("::"))return null;let m=0,v=-1,g=(d.match(a.zoneIndex)||[])[0],w,b;for(g&&(g=g.substring(1),d=d.replace(/%.+$/,""));(v=d.indexOf(":",v+1))>=0;)m++;if(d.substr(0,2)==="::"&&m--,d.substr(-2,2)==="::"&&m--,m>h)return null;for(b=h-m,w=":";b--;)w+="0:";return d=d.replace("::",w),d[0]===":"&&(d=d.slice(1)),d[d.length-1]===":"&&(d=d.slice(0,-1)),h=function(){let y=d.split(":"),E=[];for(let x=0;x<y.length;x++)E.push(parseInt(y[x],16));return E}(),{parts:h,zoneId:g}}function c(d,h,m,v){if(d.length!==h.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let g=0,w;for(;v>0;){if(w=m-v,w<0&&(w=0),d[g]>>w!==h[g]>>w)return!1;v-=m,g+=1}return!0}function u(d){if(s.test(d))return parseInt(d,16);if(d[0]==="0"&&!isNaN(parseInt(d[1],10))){if(i.test(d))return parseInt(d,8);throw new Error(`ipaddr: cannot parse ${d} as octal`)}return parseInt(d,10)}function f(d,h){for(;d.length<h;)d=`0${d}`;return d}let p={};p.IPv4=function(){function d(h){if(h.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let m,v;for(m=0;m<h.length;m++)if(v=h[m],!(0<=v&&v<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=h}return d.prototype.SpecialRanges={unspecified:[[new d([0,0,0,0]),8]],broadcast:[[new d([255,255,255,255]),32]],multicast:[[new d([224,0,0,0]),4]],linkLocal:[[new d([169,254,0,0]),16]],loopback:[[new d([127,0,0,0]),8]],carrierGradeNat:[[new d([100,64,0,0]),10]],private:[[new d([10,0,0,0]),8],[new d([172,16,0,0]),12],[new d([192,168,0,0]),16]],reserved:[[new d([192,0,0,0]),24],[new d([192,0,2,0]),24],[new d([192,88,99,0]),24],[new d([198,18,0,0]),15],[new d([198,51,100,0]),24],[new d([203,0,113,0]),24],[new d([240,0,0,0]),4]],as112:[[new d([192,175,48,0]),24],[new d([192,31,196,0]),24]],amt:[[new d([192,52,193,0]),24]]},d.prototype.kind=function(){return"ipv4"},d.prototype.match=function(h,m){let v;if(m===void 0&&(v=h,h=v[0],m=v[1]),h.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return c(this.octets,h.octets,8,m)},d.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1,v={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},g,w,b;for(g=3;g>=0;g-=1)if(w=this.octets[g],w in v){if(b=v[w],m&&b!==0)return null;b!==8&&(m=!0),h+=b}else return null;return 32-h},d.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},d.prototype.toByteArray=function(){return this.octets.slice(0)},d.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},d.prototype.toNormalizedString=function(){return this.toString()},d.prototype.toString=function(){return this.octets.join(".")},d}(),p.IPv4.broadcastAddressFromCIDR=function(d){try{let h=this.parseCIDR(d),m=h[0].toByteArray(),v=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],w=0;for(;w<4;)g.push(parseInt(m[w],10)|parseInt(v[w],10)^255),w++;return new this(g)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(d){return this.parser(d)!==null},p.IPv4.isValid=function(d){try{return new this(this.parser(d)),!0}catch{return!1}},p.IPv4.isValidCIDR=function(d){try{return this.parseCIDR(d),!0}catch{return!1}},p.IPv4.isValidFourPartDecimal=function(d){return!!(p.IPv4.isValid(d)&&d.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(d){let h,m,v,g,w;try{for(h=this.parseCIDR(d),v=h[0].toByteArray(),w=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],m=0;m<4;)g.push(parseInt(v[m],10)&parseInt(w[m],10)),m++;return new this(g)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(d){let h=this.parser(d);if(h===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(h)},p.IPv4.parseCIDR=function(d){let h;if(h=d.match(/^(.+)\/(\d+)$/)){let m=parseInt(h[2]);if(m>=0&&m<=32){let v=[this.parse(h[1]),m];return Object.defineProperty(v,"toString",{value:function(){return this.join("/")}}),v}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(d){let h,m,v;if(h=d.match(r.fourOctet))return function(){let g=h.slice(1,6),w=[];for(let b=0;b<g.length;b++)m=g[b],w.push(u(m));return w}();if(h=d.match(r.longValue)){if(v=u(h[1]),v>4294967295||v<0)throw new Error("ipaddr: address outside defined range");return function(){let g=[],w;for(w=0;w<=24;w+=8)g.push(v>>w&255);return g}().reverse()}else return(h=d.match(r.twoOctet))?function(){let g=h.slice(1,4),w=[];if(v=u(g[1]),v>16777215||v<0)throw new Error("ipaddr: address outside defined range");return w.push(u(g[0])),w.push(v>>16&255),w.push(v>>8&255),w.push(v&255),w}():(h=d.match(r.threeOctet))?function(){let g=h.slice(1,5),w=[];if(v=u(g[2]),v>65535||v<0)throw new Error("ipaddr: address outside defined range");return w.push(u(g[0])),w.push(u(g[1])),w.push(v>>8&255),w.push(v&255),w}():null},p.IPv4.subnetMaskFromPrefixLength=function(d){if(d=parseInt(d),d<0||d>32)throw new Error("ipaddr: invalid IPv4 prefix length");let h=[0,0,0,0],m=0,v=Math.floor(d/8);for(;m<v;)h[m]=255,m++;return v<4&&(h[v]=Math.pow(2,d%8)-1<<8-d%8),new this(h)},p.IPv6=function(){function d(h,m){let v,g;if(h.length===16)for(this.parts=[],v=0;v<=14;v+=2)this.parts.push(h[v]<<8|h[v+1]);else if(h.length===8)this.parts=h;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(v=0;v<this.parts.length;v++)if(g=this.parts[v],!(0<=g&&g<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");m&&(this.zoneId=m)}return d.prototype.SpecialRanges={unspecified:[new d([0,0,0,0,0,0,0,0]),128],linkLocal:[new d([65152,0,0,0,0,0,0,0]),10],multicast:[new d([65280,0,0,0,0,0,0,0]),8],loopback:[new d([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new d([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new d([0,0,0,0,0,65535,0,0]),96],discard:[new d([256,0,0,0,0,0,0,0]),64],rfc6145:[new d([0,0,0,0,65535,0,0,0]),96],rfc6052:[new d([100,65435,0,0,0,0,0,0]),96],"6to4":[new d([8194,0,0,0,0,0,0,0]),16],teredo:[new d([8193,0,0,0,0,0,0,0]),32],benchmarking:[new d([8193,2,0,0,0,0,0,0]),48],amt:[new d([8193,3,0,0,0,0,0,0]),32],as112v6:[[new d([8193,4,274,0,0,0,0,0]),48],[new d([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new d([8193,16,0,0,0,0,0,0]),28],orchid2:[new d([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new d([8193,48,0,0,0,0,0,0]),28],reserved:[[new d([8193,0,0,0,0,0,0,0]),23],[new d([8193,3512,0,0,0,0,0,0]),32]]},d.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},d.prototype.kind=function(){return"ipv6"},d.prototype.match=function(h,m){let v;if(m===void 0&&(v=h,h=v[0],m=v[1]),h.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return c(this.parts,h.parts,16,m)},d.prototype.prefixLengthFromSubnetMask=function(){let h=0,m=!1,v={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},g,w;for(let b=7;b>=0;b-=1)if(g=this.parts[b],g in v){if(w=v[g],m&&w!==0)return null;w!==16&&(m=!0),h+=w}else return null;return 128-h},d.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},d.prototype.toByteArray=function(){let h,m=[],v=this.parts;for(let g=0;g<v.length;g++)h=v[g],m.push(h>>8),m.push(h&255);return m},d.prototype.toFixedLengthString=function(){let h=function(){let v=[];for(let g=0;g<this.parts.length;g++)v.push(f(this.parts[g].toString(16),4));return v}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},d.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let h=this.parts.slice(-2),m=h[0],v=h[1];return new p.IPv4([m>>8,m&255,v>>8,v&255])},d.prototype.toNormalizedString=function(){let h=function(){let v=[];for(let g=0;g<this.parts.length;g++)v.push(this.parts[g].toString(16));return v}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),h+m},d.prototype.toRFC5952String=function(){let h=/((^|:)(0(:|$)){2,})/g,m=this.toNormalizedString(),v=0,g=-1,w;for(;w=h.exec(m);)w[0].length>g&&(v=w.index,g=w[0].length);return g<0?m:`${m.substring(0,v)}::${m.substring(v+g)}`},d.prototype.toString=function(){return this.toRFC5952String()},d}(),p.IPv6.broadcastAddressFromCIDR=function(d){try{let h=this.parseCIDR(d),m=h[0].toByteArray(),v=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],w=0;for(;w<16;)g.push(parseInt(m[w],10)|parseInt(v[w],10)^255),w++;return new this(g)}catch(h){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${h})`)}},p.IPv6.isIPv6=function(d){return this.parser(d)!==null},p.IPv6.isValid=function(d){if(typeof d=="string"&&d.indexOf(":")===-1)return!1;try{let h=this.parser(d);return new this(h.parts,h.zoneId),!0}catch{return!1}},p.IPv6.isValidCIDR=function(d){if(typeof d=="string"&&d.indexOf(":")===-1)return!1;try{return this.parseCIDR(d),!0}catch{return!1}},p.IPv6.networkAddressFromCIDR=function(d){let h,m,v,g,w;try{for(h=this.parseCIDR(d),v=h[0].toByteArray(),w=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),g=[],m=0;m<16;)g.push(parseInt(v[m],10)&parseInt(w[m],10)),m++;return new this(g)}catch(b){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${b})`)}},p.IPv6.parse=function(d){let h=this.parser(d);if(h.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(h.parts,h.zoneId)},p.IPv6.parseCIDR=function(d){let h,m,v;if((m=d.match(/^(.+)\/(\d+)$/))&&(h=parseInt(m[2]),h>=0&&h<=128))return v=[this.parse(m[1]),h],Object.defineProperty(v,"toString",{value:function(){return this.join("/")}}),v;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(d){let h,m,v,g,w,b;if(v=d.match(a.deprecatedTransitional))return this.parser(`::ffff:${v[1]}`);if(a.native.test(d))return l(d,8);if((v=d.match(a.transitional))&&(b=v[6]||"",h=v[1],v[1].endsWith("::")||(h=h.slice(0,-1)),h=l(h+b,6),h.parts)){for(w=[parseInt(v[2]),parseInt(v[3]),parseInt(v[4]),parseInt(v[5])],m=0;m<w.length;m++)if(g=w[m],!(0<=g&&g<=255))return null;return h.parts.push(w[0]<<8|w[1]),h.parts.push(w[2]<<8|w[3]),{parts:h.parts,zoneId:h.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(d){if(d=parseInt(d),d<0||d>128)throw new Error("ipaddr: invalid IPv6 prefix length");let h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,v=Math.floor(d/8);for(;m<v;)h[m]=255,m++;return v<16&&(h[v]=Math.pow(2,d%8)-1<<8-d%8),new this(h)},p.fromByteArray=function(d){let h=d.length;if(h===4)return new p.IPv4(d);if(h===16)return new p.IPv6(d);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(d){return p.IPv6.isValid(d)||p.IPv4.isValid(d)},p.isValidCIDR=function(d){return p.IPv6.isValidCIDR(d)||p.IPv4.isValidCIDR(d)},p.parse=function(d){if(p.IPv6.isValid(d))return p.IPv6.parse(d);if(p.IPv4.isValid(d))return p.IPv4.parse(d);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(d){try{return p.IPv6.parseCIDR(d)}catch{try{return p.IPv4.parseCIDR(d)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(d){let h=this.parse(d);return h.kind()==="ipv6"&&h.isIPv4MappedAddress()?h.toIPv4Address():h},p.subnetMatch=function(d,h,m){let v,g,w,b;m==null&&(m="unicast");for(g in h)if(Object.prototype.hasOwnProperty.call(h,g)){for(w=h[g],w[0]&&!(w[0]instanceof Array)&&(w=[w]),v=0;v<w.length;v++)if(b=w[v],d.kind()===b[0].kind()&&d.match.apply(d,b))return g}return m},typeof Lu<"u"&&Lu.exports?Lu.exports=p:t.ipaddr=p})(LT)});var BT=_((Pfe,eo)=>{"use strict";eo.exports=Hm;eo.exports.default=Hm;eo.exports.proxyaddr=Hm;eo.exports.all=MT;eo.exports.compile=zT;var b5=qT(),FT=jT(),v5=/^\d+$/u,ju=FT.isValid,Du=FT.parse,DT={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function MT(t,e){let r=b5(t);if(!e)return r;typeof e!="function"&&(e=zT(e));for(var i=0;i<r.length-1;i++)e(r[i],i)||(r.length=i+1);return r}function zT(t){if(!t)throw new TypeError("argument is required");let e;if(typeof t=="string")e=[t];else if(Array.isArray(t))e=t.slice();else throw new TypeError("unsupported trust argument");for(var r=0;r<e.length;r++)t=e[r],Object.prototype.hasOwnProperty.call(DT,t)&&(t=DT[t],e.splice.apply(e,[r,1].concat(t)),r+=t.length-1);return _5(w5(e))}function w5(t){let e=new Array(t.length);for(var r=0;r<t.length;r++)e[r]=S5(t[r]);return e}function _5(t){let e=t.length;return e===0?x5:e===1?T5(t[0]):R5(t)}function S5(t){let e=t.lastIndexOf("/"),r=e!==-1?t.substring(0,e):t;if(!ju(r))throw new TypeError("invalid IP address: "+r);let i=Du(r);e===-1&&i.kind()==="ipv6"&&i.isIPv4MappedAddress()&&(i=i.toIPv4Address());let s=i.kind()==="ipv6"?128:32,n=e!==-1?t.substring(e+1,t.length):null;if(n===null?n=s:v5.test(n)?n=parseInt(n,10):i.kind()==="ipv4"&&ju(n)?n=E5(n):n=null,n<=0||n>s)throw new TypeError("invalid range on address: "+t);return[i,n]}function E5(t){let e=Du(t);return e.kind()==="ipv4"?e.prefixLengthFromSubnetMask():null}function Hm(t,e){if(!t)throw new TypeError("req argument is required");if(!e)throw new TypeError("trust argument is required");let r=MT(t,e);return r[r.length-1]}function x5(){return!1}function R5(t){return function(r){if(!ju(r))return!1;let i=Du(r),s,n=i.kind();for(var o=0;o<t.length;o++){let a=t[o],l=a[0],c=l.kind(),u=a[1],f=i;if(n!==c){if(c==="ipv4"&&!i.isIPv4MappedAddress())continue;s||(s=c==="ipv4"?i.toIPv4Address():i.toIPv4MappedAddress()),f=s}if(f.match(l,u))return!0}return!1}}function T5(t){let e=t[0],r=e.kind(),i=r==="ipv4",s=t[1];return function(o){if(!ju(o))return!1;let a=Du(o);if(a.kind()!==r){if(i&&!a.isIPv4MappedAddress())return!1;a=i?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(e,s)}}});var Mu=_((Afe,Wm)=>{"use strict";var Fu=BT(),{kHasBeenDecorated:P5,kSchemaBody:A5,kSchemaHeaders:C5,kSchemaParams:O5,kSchemaQuerystring:UT,kSchemaController:Vm,kOptions:I5,kRequestCacheValidateFns:ds,kRouteContext:Lt,kRequestOriginalUrl:Gm}=pt(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:$5}=Et(),HT={body:A5,headers:C5,params:O5,querystring:UT,query:UT};function Km(t,e,r,i,s,n){this.id=t,this[Lt]=n,this.params=e,this.raw=r,this.query=i,this.log=s,this.body=void 0}Km.props=[];function N5(t){if(typeof t=="function")return t;if(t===!0)return null;if(typeof t=="number")return function(e,r){return r<t};if(typeof t=="string"){let e=t.split(",").map(r=>r.trim());return Fu.compile(e)}return Fu.compile(t)}function k5(t,e){return e?q5(t,e):GT(t)}function GT(t){let e=t.props.slice();function r(i,s,n,o,a,l){this.id=i,this[Lt]=l,this.params=s,this.raw=n,this.query=o,this.log=a,this.body=void 0;let c;for(let u=0;u<e.length;u++)c=e[u],this[c.key]=c.value}return Object.setPrototypeOf(r.prototype,t.prototype),Object.setPrototypeOf(r,t),r.props=e,r.parent=t,r}function VT(t){let e=t.lastIndexOf(",");return e===-1?t.trim():t.slice(e+1).trim()}function q5(t,e){let r=GT(t),i=N5(e);return r[P5]=!0,Object.defineProperties(r.prototype,{ip:{get(){let s=Fu.all(this.raw,i);return s[s.length-1]}},ips:{get(){return Fu.all(this.raw,i)}},host:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?VT(this.headers["x-forwarded-host"]):this.headers.host??this.headers[":authority"]??""}},protocol:{get(){if(this.headers["x-forwarded-proto"])return VT(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}Object.defineProperties(Km.prototype,{server:{get(){return this[Lt].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[Gm]||(this[Gm]=this.raw.originalUrl||this.raw.url),this[Gm]}},method:{get(){return this.raw.method}},routeOptions:{get(){let t=this[Lt],e=t._parserOptions.limit,r=t.server.initialConfig.bodyLimit,i=t.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0,s={method:t.config?.method,url:t.config?.url,bodyLimit:e||r,attachValidation:t.attachValidation,logLevel:t.logLevel,exposeHeadRoute:t.exposeHeadRoute,prefixTrailingSlash:t.prefixTrailingSlash,handler:t.handler,version:i};return Object.defineProperties(s,{config:{get:()=>t.config},schema:{get:()=>t.schema}}),Object.freeze(s)}},is404:{get(){return this[Lt].config?.url===void 0}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},host:{get(){return this.raw.headers.host??this.raw.headers[":authority"]??""}},hostname:{get(){return this.host.split(":",1)[0]}},port:{get(){let t=parseInt(this.host.split(":").slice(-1)[0]);if(!isNaN(t))return t;let e=this.headers.host??this.headers[":authority"]??"",r=parseInt(e.split(":").slice(-1)[0]);return isNaN(r)?null:r}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(t){this.additionalHeaders=t}},getValidationFunction:{value:function(t){if(typeof t=="string"){let e=HT[t];return this[Lt][e]}else if(typeof t=="object")return this[Lt][ds]?.get(t)}},compileValidationSchema:{value:function(t,e=null){let{method:r,url:i}=this;if(this[Lt][ds]?.has(t))return this[Lt][ds].get(t);let n=(this[Lt].validatorCompiler||this.server[Vm].validatorCompiler||this.server[Vm].setupValidator(this.server[I5])||this.server[Vm].validatorCompiler)({schema:t,method:r,url:i,httpPart:e});return this[Lt][ds]==null&&(this[Lt][ds]=new WeakMap),this[Lt][ds].set(t,n),n}},validateInput:{value:function(t,e,r){r=typeof e=="string"?e:r;let i=r!=null&&typeof r=="string"&&HT[r],s;if(i&&(s=this[Lt][i]),s==null&&(e==null||typeof e!="object"||Array.isArray(e)))throw new $5(r);return s==null&&(this[Lt][ds]?.has(e)?s=this[Lt][ds].get(e):s=this.compileValidationSchema(e,r)),s(t)}}});Wm.exports=Km;Wm.exports.buildRequest=k5});var zu=_((Cfe,KT)=>{"use strict";var{kFourOhFourContext:L5,kReplySerializerDefault:j5,kSchemaErrorFormatter:D5,kErrorHandler:F5,kChildLoggerFactory:M5,kOptions:z5,kReply:B5,kRequest:U5,kBodyLimit:H5,kLogLevel:V5,kContentTypeParser:G5,kRouteByFastify:K5,kRequestCacheValidateFns:W5,kReplyCacheSerializeFns:J5}=pt();function Q5({schema:t,handler:e,config:r,requestIdLogLabel:i,childLoggerFactory:s,errorHandler:n,bodyLimit:o,logLevel:a,logSerializers:l,attachValidation:c,validatorCompiler:u,serializerCompiler:f,replySerializer:p,schemaErrorFormatter:d,exposeHeadRoute:h,prefixTrailingSlash:m,server:v,isFastify:g}){this.schema=t,this.handler=e,this.Reply=v[B5],this.Request=v[U5],this.contentTypeParser=v[G5],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=n||v[F5],this.requestIdLogLabel=i||v[z5].requestIdLogLabel,this.childLoggerFactory=s||v[M5],this._middie=null,this._parserOptions={limit:o||v[H5]},this.exposeHeadRoute=h,this.prefixTrailingSlash=m,this.logLevel=a||v[V5],this.logSerializers=l,this[L5]=null,this.attachValidation=c,this[j5]=p,this.schemaErrorFormatter=d||v[D5]||Y5,this[K5]=g,this[W5]=null,this[J5]=null,this.validatorCompiler=u||null,this.serializerCompiler=f||null,this.server=v}function Y5(t,e){let r="",i=", ";for(let s=0;s!==t.length;++s){let n=t[s];r+=e+(n.instancePath||"")+" "+n.message+i}return new Error(r.slice(0,-i.length))}KT.exports=Q5});var Zm=_((Ofe,YT)=>{"use strict";var{kReply:Jm,kRequest:Qm,kState:X5,kHasBeenDecorated:Z5}=pt(),{FST_ERR_DEC_ALREADY_PRESENT:WT,FST_ERR_DEC_MISSING_DEPENDENCY:e9,FST_ERR_DEC_AFTER_START:t9,FST_ERR_DEC_REFERENCE_TYPE:r9,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:i9}=Et();function s9(t,e,r,i){if(Object.hasOwn(t,e))throw new WT(e);Ym(t,e,i),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(t,e,{get:r.getter,set:r.setter}):t[e]=r}function JT(t,e,r,i){let s=t.prototype;if(Object.hasOwn(s,e)||Uu(t,e))throw new WT(e);t[Z5]=!0,Ym(t,e,i),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(s,e,{get:r.getter,set:r.setter}):typeof r=="function"?s[e]=r:t.props.push({key:e,value:r})}function QT(t,e){if(typeof e=="object"&&e&&!(typeof e.getter=="function"||typeof e.setter=="function"))throw new r9(t,typeof e)}function n9(t,e,r){return Xm(this,t),s9(this,t,e,r),this}function Bu(t,e){return e?e in t||t.prototype&&e in t.prototype||Uu(t,e):t in this}function Uu(t,e){return t.props?t.props.find(({key:r})=>r===e):!1}function o9(t){return t&&Uu(this[Qm],t)?!0:Bu(this[Qm].prototype,t)}function a9(t){return t&&Uu(this[Jm],t)?!0:Bu(this[Jm].prototype,t)}function Ym(t,e,r){if(r!=null){if(!Array.isArray(r))throw new i9(e);for(let i=0;i!==r.length;++i)if(!Bu(t,r[i]))throw new e9(r[i])}}function l9(t,e,r){return Xm(this,t),QT(t,e),JT(this[Jm],t,e,r),this}function c9(t,e,r){return Xm(this,t),QT(t,e),JT(this[Qm],t,e,r),this}function Xm(t,e){if(t[X5].started)throw new t9(e)}YT.exports={add:n9,exist:Bu,existRequest:o9,existReply:a9,dependencies:Ym,decorateReply:l9,decorateRequest:c9}});var ZT=_(ui=>{"use strict";var ey=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var i=0;i<e.length;i++)r.push(this.get(e[i]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let i={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,i),this.size===1?this.first=i:this.last.next=i,this.last=i}},ty=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=e,this.ttl=r}get size(){return this.items.size}bumpLru(e){if(this.last===e)return;let r=this.last,i=e.next,s=e.prev;this.first===e&&(this.first=i),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=i),i!==null&&(i.prev=s),this.last=e}clear(){this.items=new Map,this.first=null,this.last=null}delete(e){if(this.items.has(e)){let r=this.items.get(e);this.items.delete(e),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;this.items.delete(e.key),this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(this.items.has(e))return this.items.get(e).expiry}get(e){if(this.items.has(e)){let r=this.items.get(e);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var i=0;i<e.length;i++)r.push(this.get(e[i]));return r}keys(){return this.items.keys()}set(e,r){if(this.items.has(e)){let s=this.items.get(e);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let i={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items.set(e,i),this.size===1?this.first=i:this.last.next=i,this.last=i}},Pa=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}bumpLru(e){if(this.last===e)return;let r=this.last,i=e.next,s=e.prev;this.first===e&&(this.first=i),e.next=null,e.prev=r,r.next=e,s!==null&&(s.next=i),i!==null&&(i.prev=s),this.last=e}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return this.bumpLru(r),r.value}}getMany(e){let r=[];for(var i=0;i<e.length;i++)r.push(this.get(e[i]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let i={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=i,++this.size===1?this.first=i:this.last.next=i,this.last=i}},Hu=class{constructor(){this.records={}}initForCache(e,r){this.records[e]={[r]:{cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}}resetForCache(e){for(let r of Object.keys(this.records[e]))this.records[e][r]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}getStatistics(){return this.records}};function XT(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}var ry=class{constructor(e,r,i){this.cacheId=e,this.statisticTtlInHours=r,this.collectionStart=new Date,this.currentTimeStamp=XT(this.collectionStart),this.records=i||new Hu,this.records.initForCache(this.cacheId,this.currentTimeStamp)}get currentRecord(){return this.records.records[this.cacheId][this.currentTimeStamp]||(this.records.records[this.cacheId][this.currentTimeStamp]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,sets:0,invalidateOne:0,invalidateAll:0}),this.records.records[this.cacheId][this.currentTimeStamp]}hoursPassed(){return(Date.now()-this.collectionStart)/1e3/60/60}addHit(){this.archiveIfNeeded(),this.currentRecord.hits++}addFalsyHit(){this.archiveIfNeeded(),this.currentRecord.falsyHits++}addEmptyHit(){this.archiveIfNeeded(),this.currentRecord.emptyHits++}addMiss(){this.archiveIfNeeded(),this.currentRecord.misses++}addEviction(){this.archiveIfNeeded(),this.currentRecord.evictions++}setCacheSize(e){this.archiveIfNeeded(),this.currentRecord.cacheSize=e}addExpiration(){this.archiveIfNeeded(),this.currentRecord.expirations++}addSet(){this.archiveIfNeeded(),this.currentRecord.sets++}addInvalidateOne(){this.archiveIfNeeded(),this.currentRecord.invalidateOne++}addInvalidateAll(){this.archiveIfNeeded(),this.currentRecord.invalidateAll++}getStatistics(){return this.records.getStatistics()}archiveIfNeeded(){this.hoursPassed()>=this.statisticTtlInHours&&(this.collectionStart=new Date,this.currentTimeStamp=XT(this.collectionStart),this.records.initForCache(this.cacheId,this.currentTimeStamp))}},Vu=class extends Pa{constructor(e,r,i,s,n){if(super(e||1e3,r||0),!i)throw new Error("Cache id is mandatory");this.hitStatistics=new ry(i,n!==void 0?n:24,s)}getStatistics(){return this.hitStatistics.getStatistics()}set(e,r){super.set(e,r),this.hitStatistics.addSet(),this.hitStatistics.setCacheSize(this.size)}evict(){super.evict(),this.hitStatistics.addEviction(),this.hitStatistics.setCacheSize(this.size)}delete(e,r=!1){super.delete(e),r||this.hitStatistics.addInvalidateOne(),this.hitStatistics.setCacheSize(this.size)}clear(){super.clear(),this.hitStatistics.addInvalidateAll(),this.hitStatistics.setCacheSize(this.size)}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e,!0),this.hitStatistics.addExpiration();return}return this.bumpLru(r),r.value||this.hitStatistics.addFalsyHit(),(r.value===void 0||r.value===null||r.value==="")&&this.hitStatistics.addEmptyHit(),this.hitStatistics.addHit(),r.value}this.hitStatistics.addMiss()}},Gu=class{constructor(e=1e3,r=0){if(isNaN(e)||e<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=e,this.ttl=r}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];delete this.items[e],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(e){for(var r=0;r<e.length;r++)this.delete(e[r])}evict(){if(this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}}expiresAt(e){if(Object.prototype.hasOwnProperty.call(this.items,e))return this.items[e].expiry}get(e){if(Object.prototype.hasOwnProperty.call(this.items,e)){let r=this.items[e];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(e);return}return r.value}}getMany(e){let r=[];for(var i=0;i<e.length;i++)r.push(this.get(e[i]));return r}keys(){return Object.keys(this.items)}set(e,r){if(Object.prototype.hasOwnProperty.call(this.items,e)){let s=this.items[e];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let i={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:r};this.items[e]=i,++this.size===1?this.first=i:this.last.next=i,this.last=i}};ui.Fifo=Gu;ui.FifoMap=ey;ui.FifoObject=Gu;ui.HitStatisticsRecord=Hu;ui.Lru=Pa;ui.LruHitStatistics=Vu;ui.LruMap=ty;ui.LruObject=Pa;ui.LruObjectHitStatistics=Vu});var sy=_(($fe,to)=>{"use strict";var u9=typeof Buffer<"u",eP=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,tP=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function rP(t,e,r){r==null&&e!==null&&typeof e=="object"&&(r=e,e=void 0),u9&&Buffer.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));let i=JSON.parse(t,e);if(i===null||typeof i!="object")return i;let s=r&&r.protoAction||"error",n=r&&r.constructorAction||"error";if(s==="ignore"&&n==="ignore")return i;if(s!=="ignore"&&n!=="ignore"){if(eP.test(t)===!1&&tP.test(t)===!1)return i}else if(s!=="ignore"&&n==="ignore"){if(eP.test(t)===!1)return i}else if(tP.test(t)===!1)return i;return iP(i,{protoAction:s,constructorAction:n,safe:r&&r.safe})}function iP(t,{protoAction:e="error",constructorAction:r="error",safe:i}={}){let s=[t];for(;s.length;){let n=s;s=[];for(let o of n){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(i===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(i===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let l=o[a];l&&typeof l=="object"&&s.push(l)}}}return t}function iy(t,e,r){let{stackTraceLimit:i}=Error;Error.stackTraceLimit=0;try{return rP(t,e,r)}finally{Error.stackTraceLimit=i}}function f9(t,e){let{stackTraceLimit:r}=Error;Error.stackTraceLimit=0;try{return rP(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}to.exports=iy;to.exports.default=iy;to.exports.parse=iy;to.exports.safeParse=f9;to.exports.scan=iP});var uy=_((Nfe,Ca)=>{"use strict";var{AsyncResource:d9}=require("node:async_hooks"),{FifoMap:nP}=ZT(),h9=sy(),{kDefaultJsonParse:Aa,kContentTypeParser:ro,kBodyLimit:p9,kRequestPayloadStream:oP,kState:oy,kTestInternals:m9,kReplyIsError:aP,kRouteContext:y9}=pt(),{FST_ERR_CTP_INVALID_TYPE:ay,FST_ERR_CTP_EMPTY_TYPE:g9,FST_ERR_CTP_ALREADY_PRESENT:b9,FST_ERR_CTP_INVALID_HANDLER:v9,FST_ERR_CTP_INVALID_PARSE_TYPE:w9,FST_ERR_CTP_BODY_TOO_LARGE:sP,FST_ERR_CTP_INVALID_MEDIA_TYPE:_9,FST_ERR_CTP_INVALID_CONTENT_LENGTH:S9,FST_ERR_CTP_EMPTY_JSON_BODY:E9,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:ly}=Et(),{FSTSEC001:x9}=Ap();function Mi(t,e,r){this[Aa]=cP(e,r),this.customParsers=new Map,this.customParsers.set("application/json",new ny(!0,!1,t,this[Aa])),this.customParsers.set("text/plain",new ny(!0,!1,t,cy)),this.parserList=["application/json","text/plain"],this.parserRegExpList=[],this.cache=new nP(100)}Mi.prototype.add=function(t,e,r){let i=typeof t=="string";if(i){if(t=t.trim().toLowerCase(),t.length===0)throw new g9}else if(!(t instanceof RegExp))throw new ay;if(typeof r!="function")throw new v9;if(this.existingParser(t))throw new b9(t);if(e.parseAs!==void 0&&e.parseAs!=="string"&&e.parseAs!=="buffer")throw new w9(e.parseAs);let s=new ny(e.parseAs==="string",e.parseAs==="buffer",e.bodyLimit,r);t==="*"?this.customParsers.set("",s):i?(this.parserList.unshift(t),this.customParsers.set(t,s)):(O9(t),this.parserRegExpList.unshift(t),this.customParsers.set(t.toString(),s))};Mi.prototype.hasParser=function(t){if(typeof t=="string")t=t.trim().toLowerCase();else{if(!(t instanceof RegExp))throw new ay;t=t.toString()}return this.customParsers.has(t)};Mi.prototype.existingParser=function(t){return t==="application/json"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==this[Aa]:t==="text/plain"&&this.customParsers.has(t)?this.customParsers.get(t).fn!==cy:this.hasParser(t)};Mi.prototype.getParser=function(t){let e=this.customParsers.get(t);if(e!==void 0||(e=this.cache.get(t),e!==void 0))return e;let r=t.toLowerCase();for(let i=0;i!==this.parserList.length;++i){let s=this.parserList[i];if(r.slice(0,s.length)===s&&(r.length===s.length||r.charCodeAt(s.length)===59||r.charCodeAt(s.length)===32))return e=this.customParsers.get(s),this.cache.set(t,e),e}for(let i=0;i!==this.parserRegExpList.length;++i){let s=this.parserRegExpList[i];if(s.test(t))return e=this.customParsers.get(s.toString()),this.cache.set(t,e),e}return this.customParsers.get("")};Mi.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=new nP(100)};Mi.prototype.remove=function(t){let e;if(typeof t=="string")t=t.trim().toLowerCase(),e=this.parserList;else{if(!(t instanceof RegExp))throw new ay;t=t.toString(),e=this.parserRegExpList}let r=this.customParsers.delete(t),i=e.findIndex(s=>s.toString()===t);return i>-1&&e.splice(i,1),r||i>-1};Mi.prototype.run=function(t,e,r,i){let s=this.getParser(t);if(s===void 0){r.is404?e(r,i):i.send(new _9(t||void 0));return}let n=new d9("content-type-parser:run",r);if(s.asString===!0||s.asBuffer===!0)lP(r,i,i[y9]._parserOptions,s,o);else{let a=s.fn(r,r[oP],o);typeof a?.then=="function"&&a.then(l=>o(null,l),o)}function o(a,l){n.runInAsyncScope(()=>{n.emitDestroy(),a?(i[aP]=!0,i.send(a)):(r.body=l,e(r,i))})}};function lP(t,e,r,i,s){let n=i.asString,o=r.limit===null?i.bodyLimit:r.limit,a=Number(t.headers["content-length"]);if(a>o){e.header("connection","close"),e.send(new sP);return}let l=0,c=n===!0?"":[],u=t[oP]||t.raw;n===!0&&u.setEncoding("utf8"),u.on("data",f),u.on("end",p),u.on("error",p),u.resume();function f(d){l+=d.length;let{receivedEncodedLength:h=0}=u;if(l>o||h>o){u.removeListener("data",f),u.removeListener("end",p),u.removeListener("error",p),e.send(new sP);return}n===!0?c+=d:c.push(d)}function p(d){if(u.removeListener("data",f),u.removeListener("end",p),u.removeListener("error",p),d!==void 0){typeof d.statusCode=="number"&&d.statusCode>=400||(d.statusCode=400),e[aP]=!0,e.code(d.statusCode).send(d);return}if(n===!0&&(l=Buffer.byteLength(c)),!Number.isNaN(a)&&(u.receivedEncodedLength||l)!==a){e.header("connection","close"),e.send(new S9);return}n===!1&&(c=Buffer.concat(c));let h=i.fn(t,c,s);h&&typeof h.then=="function"&&h.then(m=>s(null,m),s)}}function cP(t,e){return r;function r(i,s,n){if(s===""||s==null||Buffer.isBuffer(s)&&s.length===0)return n(new E9,void 0);let o;try{o=h9.parse(s,{protoAction:t,constructorAction:e})}catch(a){return a.statusCode=400,n(a,void 0)}n(null,o)}}function cy(t,e,r){r(null,e)}function ny(t,e,r,i){this.asString=t,this.asBuffer=e,this.bodyLimit=r,this.fn=i}function R9(t){let e=new Mi;return e[Aa]=t[Aa],e.customParsers=new Map(t.customParsers.entries()),e.parserList=t.parserList.slice(),e.parserRegExpList=t.parserRegExpList.slice(),e}function T9(t,e,r){if(this[oy].started)throw new ly("addContentTypeParser");return typeof e=="function"&&(r=e,e={}),e||(e={}),e.bodyLimit||(e.bodyLimit=this[p9]),Array.isArray(t)?t.forEach(i=>this[ro].add(i,e,r)):this[ro].add(t,e,r),this}function P9(t){return this[ro].hasParser(t)}function A9(t){if(this[oy].started)throw new ly("removeContentTypeParser");if(Array.isArray(t))for(let e of t)this[ro].remove(e);else this[ro].remove(t)}function C9(){if(this[oy].started)throw new ly("removeAllContentTypeParsers");this[ro].removeAll()}function O9(t){t.source[0]!=="^"&&t.source.includes(";?")===!1&&x9(t.source)}Ca.exports=Mi;Ca.exports.helpers={buildContentTypeParser:R9,addContentTypeParser:T9,hasContentTypeParser:P9,removeContentTypeParser:A9,removeAllContentTypeParsers:C9};Ca.exports.defaultParsers={getDefaultJsonParser:cP,defaultTextParser:cy};Ca.exports[m9]={rawBody:lP}});var Ku=_(dP=>{"use strict";var uP=Object.prototype.hasOwnProperty;function fP(t,e,r){for(r of t.keys())if(Oa(r,e))return r}function Oa(t,e){var r,i,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((i=t.length)===e.length)for(;i--&&Oa(t[i],e[i]););return i===-1}if(r===Set){if(t.size!==e.size)return!1;for(i of t)if(s=i,s&&typeof s=="object"&&(s=fP(e,s),!s)||!e.has(s))return!1;return!0}if(r===Map){if(t.size!==e.size)return!1;for(i of t)if(s=i[0],s&&typeof s=="object"&&(s=fP(e,s),!s)||!Oa(i[1],e.get(s)))return!1;return!0}if(r===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(r===DataView){if((i=t.byteLength)===e.byteLength)for(;i--&&t.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===e.byteLength)for(;i--&&t[i]===e[i];);return i===-1}if(!r||typeof t=="object"){i=0;for(r in t)if(uP.call(t,r)&&++i&&!uP.call(e,r)||!(r in e)||!Oa(t[r],e[r]))return!1;return Object.keys(e).length===i}}return t!==t&&e!==e}dP.dequal=Oa});var yP=_((qfe,mP)=>{"use strict";var{dequal:hP}=Ku(),I9=Symbol.for("json-schema-ref"),fy=class{#e;#t;#n;#r;#o;constructor(e={}){this.#e={},this.#t={},this.#n=e.insertRefSymbol??!1,this.#r=e.allowEqualDuplicates??!0,this.#o=e.cloneSchemaWithoutRefs??!1}addSchema(e,r,i=!0){i&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#a(e,r));let s=e.$id;s!==void 0&&typeof s=="string"&&(s.charAt(0)==="#"?this.#l(e,r,s):(this.#a(e,s),r=s));let n=e.$ref;if(n!==void 0&&typeof n=="string"){let{refSchemaId:o,refJsonPointer:a}=this.#y(n,r);this.#e[r].refs.push({schemaId:o,jsonPointer:a})}for(let o in e)typeof e[o]=="object"&&e[o]!==null&&this.addSchema(e[o],r,!1)}getSchema(e,r="#"){let i=this.#e[e];if(i===void 0)throw new Error(`Cannot resolve ref "${e}${r}". Schema with id "${e}" is not found.`);return i.anchors[r]!==void 0?i.anchors[r]:pP(i.schema,r)}hasSchema(e){return this.#e[e]!==void 0}getSchemaRefs(e){let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);return r.refs}getSchemaDependencies(e,r={}){let i=this.#e[e];for(let s of i.refs){let n=s.schemaId;n===e||r[n]!==void 0||(r[n]=this.getSchema(n),this.getSchemaDependencies(n,r))}return r}derefSchema(e){if(this.#t[e]!==void 0)return;let r=this.#e[e];if(r===void 0)throw new Error(`Schema with id "${e}" is not found.`);!this.#o&&r.refs.length===0&&(this.#t[e]={schema:r.schema,anchors:r.anchors});let i=[];this.#c(r.schema,e,!0,i);let s=this.getSchemaDependencies(e);for(let n in s){let o=s[n];this.#c(o,n,!0,i)}for(let n of i){let{refSchemaId:o,refJsonPointer:a}=this.#y(n.ref,n.sourceSchemaId),l=this.getDerefSchema(o,a);if(l===null)throw new Error(`Cannot resolve ref "${n.ref}". Ref "${a}" is not found in schema "${o}".`);n.targetSchema=l,n.targetSchemaId=o}for(let n of i)this.#f(n,i)}getDerefSchema(e,r="#"){let i=this.#t[e];return i===void 0&&(this.derefSchema(e),i=this.#t[e]),i.anchors[r]!==void 0?i.anchors[r]:pP(i.schema,r)}#y(e,r){let i=e.indexOf("#");return i===-1?{refSchemaId:e,refJsonPointer:"#"}:i===0?{refSchemaId:r,refJsonPointer:e}:{refSchemaId:e.slice(0,i),refJsonPointer:e.slice(i)}}#c(e,r,i,s=[]){let n=Array.isArray(e)?[...e]:{...e};i&&(e.$id!==void 0&&e.$id.charAt(0)!=="#"?r=e.$id:this.#i(n,r));let o=n.$id;o!==void 0&&typeof o=="string"&&(o.charAt(0)==="#"?this.#h(n,r,o):(this.#i(n,o),r=o)),n.$ref!==void 0&&s.push({ref:n.$ref,sourceSchemaId:r,sourceSchema:n});for(let a in n){let l=n[a];typeof l=="object"&&l!==null&&(n[a]=this.#c(l,r,!1,s))}return n}#f(e,r){let{sourceSchema:i,targetSchema:s}=e;if(i.$ref){if(this.#n&&(i[I9]=i.$ref),delete i.$ref,s.$ref){let n=r.find(o=>o.sourceSchema===s);this.#f(n,r)}for(let n in s)if(n!=="$id"){if(i[n]!==void 0){if(hP(i[n],s[n]))continue;throw new Error(`Cannot resolve ref "${e.ref}". Property "${n}" already exists in schema "${e.sourceSchemaId}".`)}i[n]=s[n]}e.isResolved=!0}}#a(e,r){let i=this.#e[r];if(i!==void 0){if(this.#r&&hP(e,i.schema))return;throw new Error(`There is already another schema with id "${r}".`)}this.#e[r]={schema:e,anchors:{},refs:[]}}#l(e,r,i){let{anchors:s}=this.#e[r];if(s[i]!==void 0)throw new Error(`There is already another anchor "${i}" in schema "${r}".`);s[i]=e}#i(e,r){this.#t[r]===void 0&&(this.#t[r]={schema:e,anchors:{}})}#h(e,r,i){let{anchors:s}=this.#t[r];s[i]=e}};function pP(t,e){let r=e.split("/"),i=t;for(let s of r)if(!(s===""||s==="#")){if(typeof i!="object"||i===null)return null;i=i[s]}return i??null}mP.exports={RefResolver:fy}});var io=_(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.regexpCode=Se.getEsmExportName=Se.getProperty=Se.safeStringify=Se.stringify=Se.strConcat=Se.addCodeArg=Se.str=Se._=Se.nil=Se._Code=Se.Name=Se.IDENTIFIER=Se._CodeOrName=void 0;var Ia=class{};Se._CodeOrName=Ia;Se.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var en=class extends Ia{constructor(e){if(super(),!Se.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Se.Name=en;var Pr=class extends Ia{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,i)=>`${r}${i}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,i)=>(i instanceof en&&(r[i.str]=(r[i.str]||0)+1),r),{})}};Se._Code=Pr;Se.nil=new Pr("");function gP(t,...e){let r=[t[0]],i=0;for(;i<e.length;)hy(r,e[i]),r.push(t[++i]);return new Pr(r)}Se._=gP;var dy=new Pr("+");function bP(t,...e){let r=[$a(t[0])],i=0;for(;i<e.length;)r.push(dy),hy(r,e[i]),r.push(dy,$a(t[++i]));return $9(r),new Pr(r)}Se.str=bP;function hy(t,e){e instanceof Pr?t.push(...e._items):e instanceof en?t.push(e):t.push(q9(e))}Se.addCodeArg=hy;function $9(t){let e=1;for(;e<t.length-1;){if(t[e]===dy){let r=N9(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function N9(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof en||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof en))return`"${t}${e.slice(1)}`}function k9(t,e){return e.emptyStr()?t:t.emptyStr()?e:bP`${t}${e}`}Se.strConcat=k9;function q9(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:$a(Array.isArray(t)?t.join(","):t)}function L9(t){return new Pr($a(t))}Se.stringify=L9;function $a(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Se.safeStringify=$a;function j9(t){return typeof t=="string"&&Se.IDENTIFIER.test(t)?new Pr(`.${t}`):gP`[${t}]`}Se.getProperty=j9;function D9(t){if(typeof t=="string"&&Se.IDENTIFIER.test(t))return new Pr(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}Se.getEsmExportName=D9;function F9(t){return new Pr(t.toString())}Se.regexpCode=F9});var Yu=_(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.ValueScope=ar.ValueScopeName=ar.Scope=ar.varKinds=ar.UsedValueState=void 0;var or=io(),py=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Wu;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Wu||(ar.UsedValueState=Wu={}));ar.varKinds={const:new or.Name("const"),let:new or.Name("let"),var:new or.Name("var")};var Ju=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof or.Name?e:this.name(e)}name(e){return new or.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,i;if(!((i=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||i===void 0)&&i.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};ar.Scope=Ju;var Qu=class extends or.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:i}){this.value=e,this.scopePath=(0,or._)`.${new or.Name(r)}[${i}]`}};ar.ValueScopeName=Qu;var M9=(0,or._)`\n`,my=class extends Ju{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?M9:or.nil}}get(){return this._scope}name(e){return new Qu(e,this._newName(e))}value(e,r){var i;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:n}=s,o=(i=r.key)!==null&&i!==void 0?i:r.ref,a=this._values[n];if(a){let u=a.get(o);if(u)return u}else a=this._values[n]=new Map;a.set(o,s);let l=this._scope[n]||(this._scope[n]=[]),c=l.length;return l[c]=r.ref,s.setValue(r,{property:n,itemIndex:c}),s}getValue(e,r){let i=this._values[e];if(i)return i.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,i=>{if(i.scopePath===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return(0,or._)`${e}${i.scopePath}`})}scopeCode(e=this._values,r,i){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,i)}_reduceValues(e,r,i={},s){let n=or.nil;for(let o in e){let a=e[o];if(!a)continue;let l=i[o]=i[o]||new Map;a.forEach(c=>{if(l.has(c))return;l.set(c,Wu.Started);let u=r(c);if(u){let f=this.opts.es5?ar.varKinds.var:ar.varKinds.const;n=(0,or._)`${n}${f} ${c} = ${u};${this.opts._n}`}else if(u=s?.(c))n=(0,or._)`${n}${u}${this.opts._n}`;else throw new py(c);l.set(c,Wu.Completed)})}return n}};ar.ValueScope=my});var re=_(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.or=fe.and=fe.not=fe.CodeGen=fe.operators=fe.varKinds=fe.ValueScopeName=fe.ValueScope=fe.Scope=fe.Name=fe.regexpCode=fe.stringify=fe.getProperty=fe.nil=fe.strConcat=fe.str=fe._=void 0;var be=io(),Kr=Yu(),hs=io();Object.defineProperty(fe,"_",{enumerable:!0,get:function(){return hs._}});Object.defineProperty(fe,"str",{enumerable:!0,get:function(){return hs.str}});Object.defineProperty(fe,"strConcat",{enumerable:!0,get:function(){return hs.strConcat}});Object.defineProperty(fe,"nil",{enumerable:!0,get:function(){return hs.nil}});Object.defineProperty(fe,"getProperty",{enumerable:!0,get:function(){return hs.getProperty}});Object.defineProperty(fe,"stringify",{enumerable:!0,get:function(){return hs.stringify}});Object.defineProperty(fe,"regexpCode",{enumerable:!0,get:function(){return hs.regexpCode}});Object.defineProperty(fe,"Name",{enumerable:!0,get:function(){return hs.Name}});var tf=Yu();Object.defineProperty(fe,"Scope",{enumerable:!0,get:function(){return tf.Scope}});Object.defineProperty(fe,"ValueScope",{enumerable:!0,get:function(){return tf.ValueScope}});Object.defineProperty(fe,"ValueScopeName",{enumerable:!0,get:function(){return tf.ValueScopeName}});Object.defineProperty(fe,"varKinds",{enumerable:!0,get:function(){return tf.varKinds}});fe.operators={GT:new be._Code(">"),GTE:new be._Code(">="),LT:new be._Code("<"),LTE:new be._Code("<="),EQ:new be._Code("==="),NEQ:new be._Code("!=="),NOT:new be._Code("!"),OR:new be._Code("||"),AND:new be._Code("&&"),ADD:new be._Code("+")};var zi=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},yy=class extends zi{constructor(e,r,i){super(),this.varKind=e,this.name=r,this.rhs=i}render({es5:e,_n:r}){let i=e?Kr.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${i} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=no(this.rhs,e,r)),this}get names(){return this.rhs instanceof be._CodeOrName?this.rhs.names:{}}},Xu=class extends zi{constructor(e,r,i){super(),this.lhs=e,this.rhs=r,this.sideEffects=i}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof be.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=no(this.rhs,e,r),this}get names(){let e=this.lhs instanceof be.Name?{}:{...this.lhs.names};return ef(e,this.rhs)}},gy=class extends Xu{constructor(e,r,i,s){super(e,i,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},by=class extends zi{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},vy=class extends zi{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},wy=class extends zi{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},_y=class extends zi{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=no(this.code,e,r),this}get names(){return this.code instanceof be._CodeOrName?this.code.names:{}}},Na=class extends zi{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,i)=>r+i.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let i=e[r].optimizeNodes();Array.isArray(i)?e.splice(r,1,...i):i?e[r]=i:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:i}=this,s=i.length;for(;s--;){let n=i[s];n.optimizeNames(e,r)||(z9(e,n.names),i.splice(s,1))}return i.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>sn(e,r.names),{})}},Bi=class extends Na{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Sy=class extends Na{},so=class extends Bi{};so.kind="else";var tn=class t extends Bi{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let i=r.optimizeNodes();r=this.else=Array.isArray(i)?new so(i):i}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(vP(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var i;if(this.else=(i=this.else)===null||i===void 0?void 0:i.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=no(this.condition,e,r),this}get names(){let e=super.names;return ef(e,this.condition),this.else&&sn(e,this.else.names),e}};tn.kind="if";var rn=class extends Bi{};rn.kind="for";var Ey=class extends rn{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=no(this.iteration,e,r),this}get names(){return sn(super.names,this.iteration.names)}},xy=class extends rn{constructor(e,r,i,s){super(),this.varKind=e,this.name=r,this.from=i,this.to=s}render(e){let r=e.es5?Kr.varKinds.var:this.varKind,{name:i,from:s,to:n}=this;return`for(${r} ${i}=${s}; ${i}<${n}; ${i}++)`+super.render(e)}get names(){let e=ef(super.names,this.from);return ef(e,this.to)}},Zu=class extends rn{constructor(e,r,i,s){super(),this.loop=e,this.varKind=r,this.name=i,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=no(this.iterable,e,r),this}get names(){return sn(super.names,this.iterable.names)}},ka=class extends Bi{constructor(e,r,i){super(),this.name=e,this.args=r,this.async=i}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};ka.kind="func";var qa=class extends Na{render(e){return"return "+super.render(e)}};qa.kind="return";var Ry=class extends Bi{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var i,s;return super.optimizeNames(e,r),(i=this.catch)===null||i===void 0||i.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&sn(e,this.catch.names),this.finally&&sn(e,this.finally.names),e}},La=class extends Bi{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};La.kind="catch";var ja=class extends Bi{render(e){return"finally"+super.render(e)}};ja.kind="finally";var Ty=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Kr.Scope({parent:e}),this._nodes=[new Sy]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let i=this._extScope.value(e,r);return(this._values[i.prefix]||(this._values[i.prefix]=new Set)).add(i),i}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,i,s){let n=this._scope.toName(r);return i!==void 0&&s&&(this._constants[n.str]=i),this._leafNode(new yy(e,n,i)),n}const(e,r,i){return this._def(Kr.varKinds.const,e,r,i)}let(e,r,i){return this._def(Kr.varKinds.let,e,r,i)}var(e,r,i){return this._def(Kr.varKinds.var,e,r,i)}assign(e,r,i){return this._leafNode(new Xu(e,r,i))}add(e,r){return this._leafNode(new gy(e,fe.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==be.nil&&this._leafNode(new _y(e)),this}object(...e){let r=["{"];for(let[i,s]of e)r.length>1&&r.push(","),r.push(i),(i!==s||this.opts.es5)&&(r.push(":"),(0,be.addCodeArg)(r,s));return r.push("}"),new be._Code(r)}if(e,r,i){if(this._blockNode(new tn(e)),r&&i)this.code(r).else().code(i).endIf();else if(r)this.code(r).endIf();else if(i)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new tn(e))}else(){return this._elseNode(new so)}endIf(){return this._endBlockNode(tn,so)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Ey(e),r)}forRange(e,r,i,s,n=this.opts.es5?Kr.varKinds.var:Kr.varKinds.let){let o=this._scope.toName(e);return this._for(new xy(n,o,r,i),()=>s(o))}forOf(e,r,i,s=Kr.varKinds.const){let n=this._scope.toName(e);if(this.opts.es5){let o=r instanceof be.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,be._)`${o}.length`,a=>{this.var(n,(0,be._)`${o}[${a}]`),i(n)})}return this._for(new Zu("of",s,n,r),()=>i(n))}forIn(e,r,i,s=this.opts.es5?Kr.varKinds.var:Kr.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,be._)`Object.keys(${r})`,i);let n=this._scope.toName(e);return this._for(new Zu("in",s,n,r),()=>i(n))}endFor(){return this._endBlockNode(rn)}label(e){return this._leafNode(new by(e))}break(e){return this._leafNode(new vy(e))}return(e){let r=new qa;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(qa)}try(e,r,i){if(!r&&!i)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Ry;if(this._blockNode(s),this.code(e),r){let n=this.name("e");this._currNode=s.catch=new La(n),r(n)}return i&&(this._currNode=s.finally=new ja,this.code(i)),this._endBlockNode(La,ja)}throw(e){return this._leafNode(new wy(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let i=this._nodes.length-r;if(i<0||e!==void 0&&i!==e)throw new Error(`CodeGen: wrong number of nodes: ${i} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=be.nil,i,s){return this._blockNode(new ka(e,r,i)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(ka)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let i=this._currNode;if(i instanceof e||r&&i instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof tn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};fe.CodeGen=Ty;function sn(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function ef(t,e){return e instanceof be._CodeOrName?sn(t,e.names):t}function no(t,e,r){if(t instanceof be.Name)return i(t);if(!s(t))return t;return new be._Code(t._items.reduce((n,o)=>(o instanceof be.Name&&(o=i(o)),o instanceof be._Code?n.push(...o._items):n.push(o),n),[]));function i(n){let o=r[n.str];return o===void 0||e[n.str]!==1?n:(delete e[n.str],o)}function s(n){return n instanceof be._Code&&n._items.some(o=>o instanceof be.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function z9(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function vP(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,be._)`!${Py(t)}`}fe.not=vP;var B9=wP(fe.operators.AND);function U9(...t){return t.reduce(B9)}fe.and=U9;var H9=wP(fe.operators.OR);function V9(...t){return t.reduce(H9)}fe.or=V9;function wP(t){return(e,r)=>e===be.nil?r:r===be.nil?e:(0,be._)`${Py(e)} ${t} ${Py(r)}`}function Py(t){return t instanceof be.Name?t:(0,be._)`(${t})`}});var ce=_(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.checkStrictMode=de.getErrorPath=de.Type=de.useFunc=de.setEvaluated=de.evaluatedPropsToName=de.mergeEvaluated=de.eachItem=de.unescapeJsonPointer=de.escapeJsonPointer=de.escapeFragment=de.unescapeFragment=de.schemaRefOrVal=de.schemaHasRulesButRef=de.schemaHasRules=de.checkUnknownRules=de.alwaysValidSchema=de.toHash=void 0;var ke=re(),G9=io();function K9(t){let e={};for(let r of t)e[r]=!0;return e}de.toHash=K9;function W9(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(EP(t,e),!xP(e,t.self.RULES.all))}de.alwaysValidSchema=W9;function EP(t,e=t.schema){let{opts:r,self:i}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=i.RULES.keywords;for(let n in e)s[n]||PP(t,`unknown keyword: "${n}"`)}de.checkUnknownRules=EP;function xP(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}de.schemaHasRules=xP;function J9(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}de.schemaHasRulesButRef=J9;function Q9({topSchemaRef:t,schemaPath:e},r,i,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,ke._)`${r}`}return(0,ke._)`${t}${e}${(0,ke.getProperty)(i)}`}de.schemaRefOrVal=Q9;function Y9(t){return RP(decodeURIComponent(t))}de.unescapeFragment=Y9;function X9(t){return encodeURIComponent(Cy(t))}de.escapeFragment=X9;function Cy(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}de.escapeJsonPointer=Cy;function RP(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}de.unescapeJsonPointer=RP;function Z9(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}de.eachItem=Z9;function _P({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:i}){return(s,n,o,a)=>{let l=o===void 0?n:o instanceof ke.Name?(n instanceof ke.Name?t(s,n,o):e(s,n,o),o):n instanceof ke.Name?(e(s,o,n),n):r(n,o);return a===ke.Name&&!(l instanceof ke.Name)?i(s,l):l}}de.mergeEvaluated={props:_P({mergeNames:(t,e,r)=>t.if((0,ke._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,ke._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,ke._)`${r} || {}`).code((0,ke._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,ke._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,ke._)`${r} || {}`),Oy(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:TP}),items:_P({mergeNames:(t,e,r)=>t.if((0,ke._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,ke._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,ke._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,ke._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function TP(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,ke._)`{}`);return e!==void 0&&Oy(t,r,e),r}de.evaluatedPropsToName=TP;function Oy(t,e,r){Object.keys(r).forEach(i=>t.assign((0,ke._)`${e}${(0,ke.getProperty)(i)}`,!0))}de.setEvaluated=Oy;var SP={};function e6(t,e){return t.scopeValue("func",{ref:e,code:SP[e.code]||(SP[e.code]=new G9._Code(e.code))})}de.useFunc=e6;var Ay;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Ay||(de.Type=Ay={}));function t6(t,e,r){if(t instanceof ke.Name){let i=e===Ay.Num;return r?i?(0,ke._)`"[" + ${t} + "]"`:(0,ke._)`"['" + ${t} + "']"`:i?(0,ke._)`"/" + ${t}`:(0,ke._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,ke.getProperty)(t).toString():"/"+Cy(t)}de.getErrorPath=t6;function PP(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}de.checkStrictMode=PP});var Ar=_(Iy=>{"use strict";Object.defineProperty(Iy,"__esModule",{value:!0});var jt=re(),r6={data:new jt.Name("data"),valCxt:new jt.Name("valCxt"),instancePath:new jt.Name("instancePath"),parentData:new jt.Name("parentData"),parentDataProperty:new jt.Name("parentDataProperty"),rootData:new jt.Name("rootData"),dynamicAnchors:new jt.Name("dynamicAnchors"),vErrors:new jt.Name("vErrors"),errors:new jt.Name("errors"),this:new jt.Name("this"),self:new jt.Name("self"),scope:new jt.Name("scope"),json:new jt.Name("json"),jsonPos:new jt.Name("jsonPos"),jsonLen:new jt.Name("jsonLen"),jsonPart:new jt.Name("jsonPart")};Iy.default=r6});var Da=_(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.extendErrors=Dt.resetErrorsCount=Dt.reportExtraError=Dt.reportError=Dt.keyword$DataError=Dt.keywordError=void 0;var _e=re(),rf=ce(),Wt=Ar();Dt.keywordError={message:({keyword:t})=>(0,_e.str)`must pass "${t}" keyword validation`};Dt.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,_e.str)`"${t}" keyword must be ${e} ($data)`:(0,_e.str)`"${t}" keyword is invalid ($data)`};function i6(t,e=Dt.keywordError,r,i){let{it:s}=t,{gen:n,compositeRule:o,allErrors:a}=s,l=OP(t,e,r);i??(o||a)?AP(n,l):CP(s,(0,_e._)`[${l}]`)}Dt.reportError=i6;function s6(t,e=Dt.keywordError,r){let{it:i}=t,{gen:s,compositeRule:n,allErrors:o}=i,a=OP(t,e,r);AP(s,a),n||o||CP(i,Wt.default.vErrors)}Dt.reportExtraError=s6;function n6(t,e){t.assign(Wt.default.errors,e),t.if((0,_e._)`${Wt.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,_e._)`${Wt.default.vErrors}.length`,e),()=>t.assign(Wt.default.vErrors,null)))}Dt.resetErrorsCount=n6;function o6({gen:t,keyword:e,schemaValue:r,data:i,errsCount:s,it:n}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,Wt.default.errors,a=>{t.const(o,(0,_e._)`${Wt.default.vErrors}[${a}]`),t.if((0,_e._)`${o}.instancePath === undefined`,()=>t.assign((0,_e._)`${o}.instancePath`,(0,_e.strConcat)(Wt.default.instancePath,n.errorPath))),t.assign((0,_e._)`${o}.schemaPath`,(0,_e.str)`${n.errSchemaPath}/${e}`),n.opts.verbose&&(t.assign((0,_e._)`${o}.schema`,r),t.assign((0,_e._)`${o}.data`,i))})}Dt.extendErrors=o6;function AP(t,e){let r=t.const("err",e);t.if((0,_e._)`${Wt.default.vErrors} === null`,()=>t.assign(Wt.default.vErrors,(0,_e._)`[${r}]`),(0,_e._)`${Wt.default.vErrors}.push(${r})`),t.code((0,_e._)`${Wt.default.errors}++`)}function CP(t,e){let{gen:r,validateName:i,schemaEnv:s}=t;s.$async?r.throw((0,_e._)`new ${t.ValidationError}(${e})`):(r.assign((0,_e._)`${i}.errors`,e),r.return(!1))}var nn={keyword:new _e.Name("keyword"),schemaPath:new _e.Name("schemaPath"),params:new _e.Name("params"),propertyName:new _e.Name("propertyName"),message:new _e.Name("message"),schema:new _e.Name("schema"),parentSchema:new _e.Name("parentSchema")};function OP(t,e,r){let{createErrors:i}=t.it;return i===!1?(0,_e._)`{}`:a6(t,e,r)}function a6(t,e,r={}){let{gen:i,it:s}=t,n=[l6(s,r),c6(t,r)];return u6(t,e,n),i.object(...n)}function l6({errorPath:t},{instancePath:e}){let r=e?(0,_e.str)`${t}${(0,rf.getErrorPath)(e,rf.Type.Str)}`:t;return[Wt.default.instancePath,(0,_e.strConcat)(Wt.default.instancePath,r)]}function c6({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:i}){let s=i?e:(0,_e.str)`${e}/${t}`;return r&&(s=(0,_e.str)`${s}${(0,rf.getErrorPath)(r,rf.Type.Str)}`),[nn.schemaPath,s]}function u6(t,{params:e,message:r},i){let{keyword:s,data:n,schemaValue:o,it:a}=t,{opts:l,propertyName:c,topSchemaRef:u,schemaPath:f}=a;i.push([nn.keyword,s],[nn.params,typeof e=="function"?e(t):e||(0,_e._)`{}`]),l.messages&&i.push([nn.message,typeof r=="function"?r(t):r]),l.verbose&&i.push([nn.schema,o],[nn.parentSchema,(0,_e._)`${u}${f}`],[Wt.default.data,n]),c&&i.push([nn.propertyName,c])}});var $P=_(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.boolOrEmptySchema=oo.topBoolOrEmptySchema=void 0;var f6=Da(),d6=re(),h6=Ar(),p6={message:"boolean schema is false"};function m6(t){let{gen:e,schema:r,validateName:i}=t;r===!1?IP(t,!1):typeof r=="object"&&r.$async===!0?e.return(h6.default.data):(e.assign((0,d6._)`${i}.errors`,null),e.return(!0))}oo.topBoolOrEmptySchema=m6;function y6(t,e){let{gen:r,schema:i}=t;i===!1?(r.var(e,!1),IP(t)):r.var(e,!0)}oo.boolOrEmptySchema=y6;function IP(t,e){let{gen:r,data:i}=t,s={gen:r,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,f6.reportError)(s,p6,void 0,e)}});var $y=_(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.getRules=ao.isJSONType=void 0;var g6=["string","number","integer","boolean","null","object","array"],b6=new Set(g6);function v6(t){return typeof t=="string"&&b6.has(t)}ao.isJSONType=v6;function w6(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}ao.getRules=w6});var Ny=_(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.shouldUseRule=ps.shouldUseGroup=ps.schemaHasRulesForType=void 0;function _6({schema:t,self:e},r){let i=e.RULES.types[r];return i&&i!==!0&&NP(t,i)}ps.schemaHasRulesForType=_6;function NP(t,e){return e.rules.some(r=>kP(t,r))}ps.shouldUseGroup=NP;function kP(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(i=>t[i]!==void 0))}ps.shouldUseRule=kP});var Fa=_(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.reportTypeError=Ft.checkDataTypes=Ft.checkDataType=Ft.coerceAndCheckDataType=Ft.getJSONTypes=Ft.getSchemaTypes=Ft.DataType=void 0;var S6=$y(),E6=Ny(),x6=Da(),le=re(),qP=ce(),lo;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(lo||(Ft.DataType=lo={}));function R6(t){let e=LP(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Ft.getSchemaTypes=R6;function LP(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(S6.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Ft.getJSONTypes=LP;function T6(t,e){let{gen:r,data:i,opts:s}=t,n=P6(e,s.coerceTypes),o=e.length>0&&!(n.length===0&&e.length===1&&(0,E6.schemaHasRulesForType)(t,e[0]));if(o){let a=qy(e,i,s.strictNumbers,lo.Wrong);r.if(a,()=>{n.length?A6(t,e,n):Ly(t)})}return o}Ft.coerceAndCheckDataType=T6;var jP=new Set(["string","number","integer","boolean","null"]);function P6(t,e){return e?t.filter(r=>jP.has(r)||e==="array"&&r==="array"):[]}function A6(t,e,r){let{gen:i,data:s,opts:n}=t,o=i.let("dataType",(0,le._)`typeof ${s}`),a=i.let("coerced",(0,le._)`undefined`);n.coerceTypes==="array"&&i.if((0,le._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>i.assign(s,(0,le._)`${s}[0]`).assign(o,(0,le._)`typeof ${s}`).if(qy(e,s,n.strictNumbers),()=>i.assign(a,s))),i.if((0,le._)`${a} !== undefined`);for(let c of r)(jP.has(c)||c==="array"&&n.coerceTypes==="array")&&l(c);i.else(),Ly(t),i.endIf(),i.if((0,le._)`${a} !== undefined`,()=>{i.assign(s,a),C6(t,a)});function l(c){switch(c){case"string":i.elseIf((0,le._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,le._)`"" + ${s}`).elseIf((0,le._)`${s} === null`).assign(a,(0,le._)`""`);return;case"number":i.elseIf((0,le._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,le._)`+${s}`);return;case"integer":i.elseIf((0,le._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,le._)`+${s}`);return;case"boolean":i.elseIf((0,le._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,le._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":i.elseIf((0,le._)`${s} === "" || ${s} === 0 || ${s} === false`),i.assign(a,null);return;case"array":i.elseIf((0,le._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,le._)`[${s}]`)}}}function C6({gen:t,parentData:e,parentDataProperty:r},i){t.if((0,le._)`${e} !== undefined`,()=>t.assign((0,le._)`${e}[${r}]`,i))}function ky(t,e,r,i=lo.Correct){let s=i===lo.Correct?le.operators.EQ:le.operators.NEQ,n;switch(t){case"null":return(0,le._)`${e} ${s} null`;case"array":n=(0,le._)`Array.isArray(${e})`;break;case"object":n=(0,le._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":n=o((0,le._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":n=o();break;default:return(0,le._)`typeof ${e} ${s} ${t}`}return i===lo.Correct?n:(0,le.not)(n);function o(a=le.nil){return(0,le.and)((0,le._)`typeof ${e} == "number"`,a,r?(0,le._)`isFinite(${e})`:le.nil)}}Ft.checkDataType=ky;function qy(t,e,r,i){if(t.length===1)return ky(t[0],e,r,i);let s,n=(0,qP.toHash)(t);if(n.array&&n.object){let o=(0,le._)`typeof ${e} != "object"`;s=n.null?o:(0,le._)`!${e} || ${o}`,delete n.null,delete n.array,delete n.object}else s=le.nil;n.number&&delete n.integer;for(let o in n)s=(0,le.and)(s,ky(o,e,r,i));return s}Ft.checkDataTypes=qy;var O6={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,le._)`{type: ${t}}`:(0,le._)`{type: ${e}}`};function Ly(t){let e=I6(t);(0,x6.reportError)(e,O6)}Ft.reportTypeError=Ly;function I6(t){let{gen:e,data:r,schema:i}=t,s=(0,qP.schemaRefOrVal)(t,i,"type");return{gen:e,keyword:"type",data:r,schema:i.type,schemaCode:s,schemaValue:s,parentSchema:i,params:{},it:t}}});var FP=_(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.assignDefaults=void 0;var co=re(),$6=ce();function N6(t,e){let{properties:r,items:i}=t.schema;if(e==="object"&&r)for(let s in r)DP(t,s,r[s].default);else e==="array"&&Array.isArray(i)&&i.forEach((s,n)=>DP(t,n,s.default))}sf.assignDefaults=N6;function DP(t,e,r){let{gen:i,compositeRule:s,data:n,opts:o}=t;if(r===void 0)return;let a=(0,co._)`${n}${(0,co.getProperty)(e)}`;if(s){(0,$6.checkStrictMode)(t,`default is ignored for: ${a}`);return}let l=(0,co._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,co._)`${l} || ${a} === null || ${a} === ""`),i.if(l,(0,co._)`${a} = ${(0,co.stringify)(r)}`)}});var xt=_($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.validateUnion=$e.validateArray=$e.usePattern=$e.callValidateCode=$e.schemaProperties=$e.allSchemaProperties=$e.noPropertyInData=$e.propertyInData=$e.isOwnProperty=$e.hasPropFunc=$e.reportMissingProp=$e.checkMissingProp=$e.checkReportMissingProp=void 0;var Me=re(),jy=ce(),ms=Ar(),k6=ce();function q6(t,e){let{gen:r,data:i,it:s}=t;r.if(Fy(r,i,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Me._)`${e}`},!0),t.error()})}$e.checkReportMissingProp=q6;function L6({gen:t,data:e,it:{opts:r}},i,s){return(0,Me.or)(...i.map(n=>(0,Me.and)(Fy(t,e,n,r.ownProperties),(0,Me._)`${s} = ${n}`)))}$e.checkMissingProp=L6;function j6(t,e){t.setParams({missingProperty:e},!0),t.error()}$e.reportMissingProp=j6;function MP(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Me._)`Object.prototype.hasOwnProperty`})}$e.hasPropFunc=MP;function Dy(t,e,r){return(0,Me._)`${MP(t)}.call(${e}, ${r})`}$e.isOwnProperty=Dy;function D6(t,e,r,i){let s=(0,Me._)`${e}${(0,Me.getProperty)(r)} !== undefined`;return i?(0,Me._)`${s} && ${Dy(t,e,r)}`:s}$e.propertyInData=D6;function Fy(t,e,r,i){let s=(0,Me._)`${e}${(0,Me.getProperty)(r)} === undefined`;return i?(0,Me.or)(s,(0,Me.not)(Dy(t,e,r))):s}$e.noPropertyInData=Fy;function zP(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}$e.allSchemaProperties=zP;function F6(t,e){return zP(e).filter(r=>!(0,jy.alwaysValidSchema)(t,e[r]))}$e.schemaProperties=F6;function M6({schemaCode:t,data:e,it:{gen:r,topSchemaRef:i,schemaPath:s,errorPath:n},it:o},a,l,c){let u=c?(0,Me._)`${t}, ${e}, ${i}${s}`:e,f=[[ms.default.instancePath,(0,Me.strConcat)(ms.default.instancePath,n)],[ms.default.parentData,o.parentData],[ms.default.parentDataProperty,o.parentDataProperty],[ms.default.rootData,ms.default.rootData]];o.opts.dynamicRef&&f.push([ms.default.dynamicAnchors,ms.default.dynamicAnchors]);let p=(0,Me._)`${u}, ${r.object(...f)}`;return l!==Me.nil?(0,Me._)`${a}.call(${l}, ${p})`:(0,Me._)`${a}(${p})`}$e.callValidateCode=M6;var z6=(0,Me._)`new RegExp`;function B6({gen:t,it:{opts:e}},r){let i=e.unicodeRegExp?"u":"",{regExp:s}=e.code,n=s(r,i);return t.scopeValue("pattern",{key:n.toString(),ref:n,code:(0,Me._)`${s.code==="new RegExp"?z6:(0,k6.useFunc)(t,s)}(${r}, ${i})`})}$e.usePattern=B6;function U6(t){let{gen:e,data:r,keyword:i,it:s}=t,n=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(n,!0),o(()=>e.break()),n;function o(a){let l=e.const("len",(0,Me._)`${r}.length`);e.forRange("i",0,l,c=>{t.subschema({keyword:i,dataProp:c,dataPropType:jy.Type.Num},n),e.if((0,Me.not)(n),a)})}}$e.validateArray=U6;function H6(t){let{gen:e,schema:r,keyword:i,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,jy.alwaysValidSchema)(s,l))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((l,c)=>{let u=t.subschema({keyword:i,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,Me._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,Me.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}$e.validateUnion=H6});var HP=_(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.validateKeywordUsage=fi.validSchemaType=fi.funcKeywordCode=fi.macroKeywordCode=void 0;var Jt=re(),on=Ar(),V6=xt(),G6=Da();function K6(t,e){let{gen:r,keyword:i,schema:s,parentSchema:n,it:o}=t,a=e.macro.call(o.self,s,n,o),l=UP(r,i,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:Jt.nil,errSchemaPath:`${o.errSchemaPath}/${i}`,topSchemaRef:l,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}fi.macroKeywordCode=K6;function W6(t,e){var r;let{gen:i,keyword:s,schema:n,parentSchema:o,$data:a,it:l}=t;Q6(l,e);let c=!a&&e.compile?e.compile.call(l.self,n,o,l):e.validate,u=UP(i,s,c),f=i.let("valid");t.block$data(f,p),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function p(){if(e.errors===!1)m(),e.modifying&&BP(t),v(()=>t.error());else{let g=e.async?d():h();e.modifying&&BP(t),v(()=>J6(t,g))}}function d(){let g=i.let("ruleErrs",null);return i.try(()=>m((0,Jt._)`await `),w=>i.assign(f,!1).if((0,Jt._)`${w} instanceof ${l.ValidationError}`,()=>i.assign(g,(0,Jt._)`${w}.errors`),()=>i.throw(w))),g}function h(){let g=(0,Jt._)`${u}.errors`;return i.assign(g,null),m(Jt.nil),g}function m(g=e.async?(0,Jt._)`await `:Jt.nil){let w=l.opts.passContext?on.default.this:on.default.self,b=!("compile"in e&&!a||e.schema===!1);i.assign(f,(0,Jt._)`${g}${(0,V6.callValidateCode)(t,u,w,b)}`,e.modifying)}function v(g){var w;i.if((0,Jt.not)((w=e.valid)!==null&&w!==void 0?w:f),g)}}fi.funcKeywordCode=W6;function BP(t){let{gen:e,data:r,it:i}=t;e.if(i.parentData,()=>e.assign(r,(0,Jt._)`${i.parentData}[${i.parentDataProperty}]`))}function J6(t,e){let{gen:r}=t;r.if((0,Jt._)`Array.isArray(${e})`,()=>{r.assign(on.default.vErrors,(0,Jt._)`${on.default.vErrors} === null ? ${e} : ${on.default.vErrors}.concat(${e})`).assign(on.default.errors,(0,Jt._)`${on.default.vErrors}.length`),(0,G6.extendErrors)(t)},()=>t.error())}function Q6({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function UP(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Jt.stringify)(r)})}function Y6(t,e,r=!1){return!e.length||e.some(i=>i==="array"?Array.isArray(t):i==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==i||r&&typeof t>"u")}fi.validSchemaType=Y6;function X6({schema:t,opts:e,self:r,errSchemaPath:i},s,n){if(Array.isArray(s.keyword)?!s.keyword.includes(n):s.keyword!==n)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${n}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[n])){let l=`keyword "${n}" value is invalid at path "${i}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}fi.validateKeywordUsage=X6});var GP=_(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.extendSubschemaMode=ys.extendSubschemaData=ys.getSubschema=void 0;var di=re(),VP=ce();function Z6(t,{keyword:e,schemaProp:r,schema:i,schemaPath:s,errSchemaPath:n,topSchemaRef:o}){if(e!==void 0&&i!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,di._)`${t.schemaPath}${(0,di.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,di._)`${t.schemaPath}${(0,di.getProperty)(e)}${(0,di.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,VP.escapeFragment)(r)}`}}if(i!==void 0){if(s===void 0||n===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:s,topSchemaRef:o,errSchemaPath:n}}throw new Error('either "keyword" or "schema" must be passed')}ys.getSubschema=Z6;function eG(t,e,{dataProp:r,dataPropType:i,data:s,dataTypes:n,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:u,opts:f}=e,p=a.let("data",(0,di._)`${e.data}${(0,di.getProperty)(r)}`,!0);l(p),t.errorPath=(0,di.str)`${c}${(0,VP.getErrorPath)(r,i,f.jsPropertySyntax)}`,t.parentDataProperty=(0,di._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let c=s instanceof di.Name?s:a.let("data",s,!0);l(c),o!==void 0&&(t.propertyName=o)}n&&(t.dataTypes=n);function l(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}ys.extendSubschemaData=eG;function tG(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:i,createErrors:s,allErrors:n}){i!==void 0&&(t.compositeRule=i),s!==void 0&&(t.createErrors=s),n!==void 0&&(t.allErrors=n),t.jtdDiscriminator=e,t.jtdMetadata=r}ys.extendSubschemaMode=tG});var Ma=_((Qfe,KP)=>{"use strict";KP.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var i,s,n;if(Array.isArray(e)){if(i=e.length,i!=r.length)return!1;for(s=i;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(n=Object.keys(e),i=n.length,i!==Object.keys(r).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[s]))return!1;for(s=i;s--!==0;){var o=n[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var JP=_((Yfe,WP)=>{"use strict";var gs=WP.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var i=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};nf(e,i,s,t,"",t)};gs.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};gs.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};gs.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};gs.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function nf(t,e,r,i,s,n,o,a,l,c){if(i&&typeof i=="object"&&!Array.isArray(i)){e(i,s,n,o,a,l,c);for(var u in i){var f=i[u];if(Array.isArray(f)){if(u in gs.arrayKeywords)for(var p=0;p<f.length;p++)nf(t,e,r,f[p],s+"/"+u+"/"+p,n,s,u,i,p)}else if(u in gs.propsKeywords){if(f&&typeof f=="object")for(var d in f)nf(t,e,r,f[d],s+"/"+u+"/"+rG(d),n,s,u,i,d)}else(u in gs.keywords||t.allKeys&&!(u in gs.skipKeywords))&&nf(t,e,r,f,s+"/"+u,n,s,u,i)}r(i,s,n,o,a,l,c)}}function rG(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var za=_(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.getSchemaRefs=lr.resolveUrl=lr.normalizeId=lr._getFullPath=lr.getFullPath=lr.inlineRef=void 0;var iG=ce(),sG=Ma(),nG=JP(),oG=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function aG(t,e=!0){return typeof t=="boolean"?!0:e===!0?!My(t):e?QP(t)<=e:!1}lr.inlineRef=aG;var lG=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function My(t){for(let e in t){if(lG.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(My)||typeof r=="object"&&My(r))return!0}return!1}function QP(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!oG.has(r)&&(typeof t[r]=="object"&&(0,iG.eachItem)(t[r],i=>e+=QP(i)),e===1/0))return 1/0}return e}function YP(t,e="",r){r!==!1&&(e=uo(e));let i=t.parse(e);return XP(t,i)}lr.getFullPath=YP;function XP(t,e){return t.serialize(e).split("#")[0]+"#"}lr._getFullPath=XP;var cG=/#\/?$/;function uo(t){return t?t.replace(cG,""):""}lr.normalizeId=uo;function uG(t,e,r){return r=uo(r),t.resolve(e,r)}lr.resolveUrl=uG;var fG=/^[a-z_][-a-z0-9._]*$/i;function dG(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:i}=this.opts,s=uo(t[r]||e),n={"":s},o=YP(i,s,!1),a={},l=new Set;return nG(t,{allKeys:!0},(f,p,d,h)=>{if(h===void 0)return;let m=o+p,v=n[h];typeof f[r]=="string"&&(v=g.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),n[p]=v;function g(b){let y=this.opts.uriResolver.resolve;if(b=uo(v?y(v,b):b),l.has(b))throw u(b);l.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?c(f,E.schema,b):b!==uo(m)&&(b[0]==="#"?(c(f,a[b],b),a[b]=f):this.refs[b]=m),b}function w(b){if(typeof b=="string"){if(!fG.test(b))throw new Error(`invalid anchor "${b}"`);g.call(this,`#${b}`)}}}),a;function c(f,p,d){if(p!==void 0&&!sG(f,p))throw u(d)}function u(f){return new Error(`reference "${f}" resolves to more than one schema`)}}lr.getSchemaRefs=dG});var fo=_(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.getData=bs.KeywordCxt=bs.validateFunctionCode=void 0;var iA=$P(),ZP=Fa(),By=Ny(),of=Fa(),hG=FP(),Ua=HP(),zy=GP(),X=re(),ne=Ar(),pG=za(),Ui=ce(),Ba=Da();function mG(t){if(oA(t)&&(aA(t),nA(t))){bG(t);return}sA(t,()=>(0,iA.topBoolOrEmptySchema)(t))}bs.validateFunctionCode=mG;function sA({gen:t,validateName:e,schema:r,schemaEnv:i,opts:s},n){s.code.es5?t.func(e,(0,X._)`${ne.default.data}, ${ne.default.valCxt}`,i.$async,()=>{t.code((0,X._)`"use strict"; ${eA(r,s)}`),gG(t,s),t.code(n)}):t.func(e,(0,X._)`${ne.default.data}, ${yG(s)}`,i.$async,()=>t.code(eA(r,s)).code(n))}function yG(t){return(0,X._)`{${ne.default.instancePath}="", ${ne.default.parentData}, ${ne.default.parentDataProperty}, ${ne.default.rootData}=${ne.default.data}${t.dynamicRef?(0,X._)`, ${ne.default.dynamicAnchors}={}`:X.nil}}={}`}function gG(t,e){t.if(ne.default.valCxt,()=>{t.var(ne.default.instancePath,(0,X._)`${ne.default.valCxt}.${ne.default.instancePath}`),t.var(ne.default.parentData,(0,X._)`${ne.default.valCxt}.${ne.default.parentData}`),t.var(ne.default.parentDataProperty,(0,X._)`${ne.default.valCxt}.${ne.default.parentDataProperty}`),t.var(ne.default.rootData,(0,X._)`${ne.default.valCxt}.${ne.default.rootData}`),e.dynamicRef&&t.var(ne.default.dynamicAnchors,(0,X._)`${ne.default.valCxt}.${ne.default.dynamicAnchors}`)},()=>{t.var(ne.default.instancePath,(0,X._)`""`),t.var(ne.default.parentData,(0,X._)`undefined`),t.var(ne.default.parentDataProperty,(0,X._)`undefined`),t.var(ne.default.rootData,ne.default.data),e.dynamicRef&&t.var(ne.default.dynamicAnchors,(0,X._)`{}`)})}function bG(t){let{schema:e,opts:r,gen:i}=t;sA(t,()=>{r.$comment&&e.$comment&&cA(t),EG(t),i.let(ne.default.vErrors,null),i.let(ne.default.errors,0),r.unevaluated&&vG(t),lA(t),TG(t)})}function vG(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,X._)`${r}.evaluated`),e.if((0,X._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,X._)`${t.evaluated}.props`,(0,X._)`undefined`)),e.if((0,X._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,X._)`${t.evaluated}.items`,(0,X._)`undefined`))}function eA(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,X._)`/*# sourceURL=${r} */`:X.nil}function wG(t,e){if(oA(t)&&(aA(t),nA(t))){_G(t,e);return}(0,iA.boolOrEmptySchema)(t,e)}function nA({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function oA(t){return typeof t.schema!="boolean"}function _G(t,e){let{schema:r,gen:i,opts:s}=t;s.$comment&&r.$comment&&cA(t),xG(t),RG(t);let n=i.const("_errs",ne.default.errors);lA(t,n),i.var(e,(0,X._)`${n} === ${ne.default.errors}`)}function aA(t){(0,Ui.checkUnknownRules)(t),SG(t)}function lA(t,e){if(t.opts.jtd)return tA(t,[],!1,e);let r=(0,ZP.getSchemaTypes)(t.schema),i=(0,ZP.coerceAndCheckDataType)(t,r);tA(t,r,!i,e)}function SG(t){let{schema:e,errSchemaPath:r,opts:i,self:s}=t;e.$ref&&i.ignoreKeywordsWithRef&&(0,Ui.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function EG(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ui.checkStrictMode)(t,"default is ignored in the schema root")}function xG(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,pG.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function RG(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function cA({gen:t,schemaEnv:e,schema:r,errSchemaPath:i,opts:s}){let n=r.$comment;if(s.$comment===!0)t.code((0,X._)`${ne.default.self}.logger.log(${n})`);else if(typeof s.$comment=="function"){let o=(0,X.str)`${i}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,X._)`${ne.default.self}.opts.$comment(${n}, ${o}, ${a}.schema)`)}}function TG(t){let{gen:e,schemaEnv:r,validateName:i,ValidationError:s,opts:n}=t;r.$async?e.if((0,X._)`${ne.default.errors} === 0`,()=>e.return(ne.default.data),()=>e.throw((0,X._)`new ${s}(${ne.default.vErrors})`)):(e.assign((0,X._)`${i}.errors`,ne.default.vErrors),n.unevaluated&&PG(t),e.return((0,X._)`${ne.default.errors} === 0`))}function PG({gen:t,evaluated:e,props:r,items:i}){r instanceof X.Name&&t.assign((0,X._)`${e}.props`,r),i instanceof X.Name&&t.assign((0,X._)`${e}.items`,i)}function tA(t,e,r,i){let{gen:s,schema:n,data:o,allErrors:a,opts:l,self:c}=t,{RULES:u}=c;if(n.$ref&&(l.ignoreKeywordsWithRef||!(0,Ui.schemaHasRulesButRef)(n,u))){s.block(()=>fA(t,"$ref",u.all.$ref.definition));return}l.jtd||AG(t,e),s.block(()=>{for(let p of u.rules)f(p);f(u.post)});function f(p){(0,By.shouldUseGroup)(n,p)&&(p.type?(s.if((0,of.checkDataType)(p.type,o,l.strictNumbers)),rA(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,of.reportTypeError)(t)),s.endIf()):rA(t,p),a||s.if((0,X._)`${ne.default.errors} === ${i||0}`))}}function rA(t,e){let{gen:r,schema:i,opts:{useDefaults:s}}=t;s&&(0,hG.assignDefaults)(t,e.type),r.block(()=>{for(let n of e.rules)(0,By.shouldUseRule)(i,n)&&fA(t,n.keyword,n.definition,e.type)})}function AG(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(CG(t,e),t.opts.allowUnionTypes||OG(t,e),IG(t,t.dataTypes))}function CG(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{uA(t.dataTypes,r)||Uy(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),NG(t,e)}}function OG(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Uy(t,"use allowUnionTypes to allow union type keyword")}function IG(t,e){let r=t.self.RULES.all;for(let i in r){let s=r[i];if(typeof s=="object"&&(0,By.shouldUseRule)(t.schema,s)){let{type:n}=s.definition;n.length&&!n.some(o=>$G(e,o))&&Uy(t,`missing type "${n.join(",")}" for keyword "${i}"`)}}}function $G(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function uA(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function NG(t,e){let r=[];for(let i of t.dataTypes)uA(e,i)?r.push(i):e.includes("integer")&&i==="number"&&r.push("integer");t.dataTypes=r}function Uy(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Ui.checkStrictMode)(t,e,t.opts.strictTypes)}var af=class{constructor(e,r,i){if((0,Ua.validateKeywordUsage)(e,r,i),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=i,this.data=e.data,this.schema=e.schema[i],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ui.schemaRefOrVal)(e,this.schema,i,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",dA(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Ua.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${i} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ne.default.errors))}result(e,r,i){this.failResult((0,X.not)(e),r,i)}failResult(e,r,i){this.gen.if(e),i?i():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,X.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,X._)`${r} !== undefined && (${(0,X.or)(this.invalid$data(),e)})`)}error(e,r,i){if(r){this.setParams(r),this._error(e,i),this.setParams({});return}this._error(e,i)}_error(e,r){(e?Ba.reportExtraError:Ba.reportError)(this,this.def.error,r)}$dataError(){(0,Ba.reportError)(this,this.def.$dataError||Ba.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ba.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,i=X.nil){this.gen.block(()=>{this.check$data(e,i),r()})}check$data(e=X.nil,r=X.nil){if(!this.$data)return;let{gen:i,schemaCode:s,schemaType:n,def:o}=this;i.if((0,X.or)((0,X._)`${s} === undefined`,r)),e!==X.nil&&i.assign(e,!0),(n.length||o.validateSchema)&&(i.elseIf(this.invalid$data()),this.$dataError(),e!==X.nil&&i.assign(e,!1)),i.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:i,def:s,it:n}=this;return(0,X.or)(o(),a());function o(){if(i.length){if(!(r instanceof X.Name))throw new Error("ajv implementation error");let l=Array.isArray(i)?i:[i];return(0,X._)`${(0,of.checkDataTypes)(l,r,n.opts.strictNumbers,of.DataType.Wrong)}`}return X.nil}function a(){if(s.validateSchema){let l=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,X._)`!${l}(${r})`}return X.nil}}subschema(e,r){let i=(0,zy.getSubschema)(this.it,e);(0,zy.extendSubschemaData)(i,this.it,e),(0,zy.extendSubschemaMode)(i,e);let s={...this.it,...i,items:void 0,props:void 0};return wG(s,r),s}mergeEvaluated(e,r){let{it:i,gen:s}=this;i.opts.unevaluated&&(i.props!==!0&&e.props!==void 0&&(i.props=Ui.mergeEvaluated.props(s,e.props,i.props,r)),i.items!==!0&&e.items!==void 0&&(i.items=Ui.mergeEvaluated.items(s,e.items,i.items,r)))}mergeValidEvaluated(e,r){let{it:i,gen:s}=this;if(i.opts.unevaluated&&(i.props!==!0||i.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,X.Name)),!0}};bs.KeywordCxt=af;function fA(t,e,r,i){let s=new af(t,r,e);"code"in r?r.code(s,i):s.$data&&r.validate?(0,Ua.funcKeywordCode)(s,r):"macro"in r?(0,Ua.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Ua.funcKeywordCode)(s,r)}var kG=/^\/(?:[^~]|~0|~1)*$/,qG=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function dA(t,{dataLevel:e,dataNames:r,dataPathArr:i}){let s,n;if(t==="")return ne.default.rootData;if(t[0]==="/"){if(!kG.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,n=ne.default.rootData}else{let c=qG.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+c[1];if(s=c[2],s==="#"){if(u>=e)throw new Error(l("property/index",u));return i[e-u]}if(u>e)throw new Error(l("data",u));if(n=r[e-u],!s)return n}let o=n,a=s.split("/");for(let c of a)c&&(n=(0,X._)`${n}${(0,X.getProperty)((0,Ui.unescapeJsonPointer)(c))}`,o=(0,X._)`${o} && ${n}`);return o;function l(c,u){return`Cannot access ${c} ${u} levels up, current level is ${e}`}}bs.getData=dA});var Ha=_(Vy=>{"use strict";Object.defineProperty(Vy,"__esModule",{value:!0});var Hy=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Vy.default=Hy});var Hi=_(Wy=>{"use strict";Object.defineProperty(Wy,"__esModule",{value:!0});var Gy=za(),Ky=class extends Error{constructor(e,r,i,s){super(s||`can't resolve reference ${i} from id ${r}`),this.missingRef=(0,Gy.resolveUrl)(e,r,i),this.missingSchema=(0,Gy.normalizeId)((0,Gy.getFullPath)(e,this.missingRef))}};Wy.default=Ky});var ln=_(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.resolveSchema=Cr.getCompilingSchema=Cr.resolveRef=Cr.compileSchema=Cr.SchemaEnv=void 0;var Wr=re(),LG=Ha(),an=Ar(),Jr=za(),hA=ce(),jG=fo(),ho=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let i;typeof e.schema=="object"&&(i=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Jr.normalizeId)(i?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=i?.$async,this.refs={}}};Cr.SchemaEnv=ho;function Qy(t){let e=pA.call(this,t);if(e)return e;let r=(0,Jr.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:i,lines:s}=this.opts.code,{ownProperties:n}=this.opts,o=new Wr.CodeGen(this.scope,{es5:i,lines:s,ownProperties:n}),a;t.$async&&(a=o.scopeValue("Error",{ref:LG.default,code:(0,Wr._)`require("ajv/dist/runtime/validation_error").default`}));let l=o.scopeName("validate");t.validateName=l;let c={gen:o,allErrors:this.opts.allErrors,data:an.default.data,parentData:an.default.parentData,parentDataProperty:an.default.parentDataProperty,dataNames:[an.default.data],dataPathArr:[Wr.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Wr.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Wr.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Wr._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,jG.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let f=o.toString();u=`${o.scopeRefs(an.default.scope)}return ${f}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let d=new Function(`${an.default.self}`,`${an.default.scope}`,u)(this,this.scope.get());if(this.scope.value(l,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:l,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:m}=c;d.evaluated={props:h instanceof Wr.Name?void 0:h,items:m instanceof Wr.Name?void 0:m,dynamicProps:h instanceof Wr.Name,dynamicItems:m instanceof Wr.Name},d.source&&(d.source.evaluated=(0,Wr.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),f}finally{this._compilations.delete(t)}}Cr.compileSchema=Qy;function DG(t,e,r){var i;r=(0,Jr.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let n=zG.call(this,t,r);if(n===void 0){let o=(i=t.localRefs)===null||i===void 0?void 0:i[r],{schemaId:a}=this.opts;o&&(n=new ho({schema:o,schemaId:a,root:t,baseId:e}))}if(n!==void 0)return t.refs[r]=FG.call(this,n)}Cr.resolveRef=DG;function FG(t){return(0,Jr.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Qy.call(this,t)}function pA(t){for(let e of this._compilations)if(MG(e,t))return e}Cr.getCompilingSchema=pA;function MG(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function zG(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||lf.call(this,t,e)}function lf(t,e){let r=this.opts.uriResolver.parse(e),i=(0,Jr._getFullPath)(this.opts.uriResolver,r),s=(0,Jr.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&i===s)return Jy.call(this,r,t);let n=(0,Jr.normalizeId)(i),o=this.refs[n]||this.schemas[n];if(typeof o=="string"){let a=lf.call(this,t,o);return typeof a?.schema!="object"?void 0:Jy.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||Qy.call(this,o),n===(0,Jr.normalizeId)(e)){let{schema:a}=o,{schemaId:l}=this.opts,c=a[l];return c&&(s=(0,Jr.resolveUrl)(this.opts.uriResolver,s,c)),new ho({schema:a,schemaId:l,root:t,baseId:s})}return Jy.call(this,r,o)}}Cr.resolveSchema=lf;var BG=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Jy(t,{baseId:e,schema:r,root:i}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,hA.unescapeFragment)(a)];if(l===void 0)return;r=l;let c=typeof r=="object"&&r[this.opts.schemaId];!BG.has(a)&&c&&(e=(0,Jr.resolveUrl)(this.opts.uriResolver,e,c))}let n;if(typeof r!="boolean"&&r.$ref&&!(0,hA.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Jr.resolveUrl)(this.opts.uriResolver,e,r.$ref);n=lf.call(this,i,a)}let{schemaId:o}=this.opts;if(n=n||new ho({schema:r,schemaId:o,root:i,baseId:e}),n.schema!==n.root.schema)return n}});var mA=_((ide,UG)=>{UG.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var gA=_((sde,yA)=>{"use strict";var HG={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};yA.exports={HEX:HG}});var RA=_((nde,xA)=>{"use strict";var{HEX:VG}=gA(),GG=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function _A(t){if(EA(t,".")<3)return{host:t,isIPV4:!1};let e=t.match(GG)||[],[r]=e;return r?{host:WG(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function Yy(t,e=!1){let r="",i=!0;for(let s of t){if(VG[s]===void 0)return;s!=="0"&&i===!0&&(i=!1),i||(r+=s)}return e&&r.length===0&&(r="0"),r}function KG(t){let e=0,r={error:!1,address:"",zone:""},i=[],s=[],n=!1,o=!1,a=!1;function l(){if(s.length){if(n===!1){let c=Yy(s);if(c!==void 0)i.push(c);else return r.error=!0,!1}s.length=0}return!0}for(let c=0;c<t.length;c++){let u=t[c];if(!(u==="["||u==="]"))if(u===":"){if(o===!0&&(a=!0),!l())break;if(e++,i.push(":"),e>7){r.error=!0;break}c-1>=0&&t[c-1]===":"&&(o=!0);continue}else if(u==="%"){if(!l())break;n=!0}else{s.push(u);continue}}return s.length&&(n?r.zone=s.join(""):a?i.push(s.join("")):i.push(Yy(s))),r.address=i.join(""),r}function SA(t){if(EA(t,":")<2)return{host:t,isIPV6:!1};let e=KG(t);if(e.error)return{host:t,isIPV6:!1};{let r=e.address,i=e.address;return e.zone&&(r+="%"+e.zone,i+="%25"+e.zone),{host:r,escapedHost:i,isIPV6:!0}}}function WG(t,e){let r="",i=!0,s=t.length;for(let n=0;n<s;n++){let o=t[n];o==="0"&&i?(n+1<=s&&t[n+1]===e||n+1===s)&&(r+=o,i=!1):(o===e?i=!0:i=!1,r+=o)}return r}function EA(t,e){let r=0;for(let i=0;i<t.length;i++)t[i]===e&&r++;return r}var bA=/^\.\.?\//u,vA=/^\/\.(?:\/|$)/u,wA=/^\/\.\.(?:\/|$)/u,JG=/^\/?(?:.|\n)*?(?=\/|$)/u;function QG(t){let e=[];for(;t.length;)if(t.match(bA))t=t.replace(bA,"");else if(t.match(vA))t=t.replace(vA,"/");else if(t.match(wA))t=t.replace(wA,"/"),e.pop();else if(t==="."||t==="..")t="";else{let r=t.match(JG);if(r){let i=r[0];t=t.slice(i.length),e.push(i)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function YG(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function XG(t){let e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let r=unescape(t.host),i=_A(r);if(i.isIPV4)r=i.host;else{let s=SA(i.host);s.isIPV6===!0?r=`[${s.escapedHost}]`:r=t.host}e.push(r)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}xA.exports={recomposeAuthority:XG,normalizeComponentEncoding:YG,removeDotSegments:QG,normalizeIPv4:_A,normalizeIPv6:SA,stringArrayToHexStripped:Yy}});var IA=_((ode,OA)=>{"use strict";var ZG=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,e8=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function TA(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function PA(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function AA(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function t8(t){return t.secure=TA(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function r8(t){if((t.port===(TA(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function i8(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(e8);if(r){let i=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let s=`${i}:${e.nid||t.nid}`,n=Xy[s];t.path=void 0,n&&(t=n.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function s8(t,e){let r=e.scheme||t.scheme||"urn",i=t.nid.toLowerCase(),s=`${r}:${e.nid||i}`,n=Xy[s];n&&(t=n.serialize(t,e));let o=t,a=t.nss;return o.path=`${i||e.nid}:${a}`,e.skipEscape=!0,o}function n8(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!ZG.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function o8(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var CA={scheme:"http",domainHost:!0,parse:PA,serialize:AA},a8={scheme:"https",domainHost:CA.domainHost,parse:PA,serialize:AA},cf={scheme:"ws",domainHost:!0,parse:t8,serialize:r8},l8={scheme:"wss",domainHost:cf.domainHost,parse:cf.parse,serialize:cf.serialize},c8={scheme:"urn",parse:i8,serialize:s8,skipNormalize:!0},u8={scheme:"urn:uuid",parse:n8,serialize:o8,skipNormalize:!0},Xy={http:CA,https:a8,ws:cf,wss:l8,urn:c8,"urn:uuid":u8};OA.exports=Xy});var df=_((ade,ff)=>{"use strict";var{normalizeIPv6:f8,normalizeIPv4:d8,removeDotSegments:Va,recomposeAuthority:h8,normalizeComponentEncoding:uf}=RA(),Zy=IA();function p8(t,e){return typeof t=="string"?t=hi(Vi(t,e),e):typeof t=="object"&&(t=Vi(hi(t,e),e)),t}function m8(t,e,r){let i=Object.assign({scheme:"null"},r),s=$A(Vi(t,i),Vi(e,i),i,!0);return hi(s,{...i,skipEscape:!0})}function $A(t,e,r,i){let s={};return i||(t=Vi(hi(t,r),r),e=Vi(hi(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Va(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Va(e.path||""),s.query=e.query):(e.path?(e.path.charAt(0)==="/"?s.path=Va(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=Va(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function y8(t,e,r){return typeof t=="string"?(t=unescape(t),t=hi(uf(Vi(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=hi(uf(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=hi(uf(Vi(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=hi(uf(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function hi(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},i=Object.assign({},e),s=[],n=Zy[(i.scheme||r.scheme||"").toLowerCase()];n&&n.serialize&&n.serialize(r,i),r.path!==void 0&&(i.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),i.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");let o=h8(r);if(o!==void 0&&(i.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!i.absolutePath&&(!n||!n.absolutePath)&&(a=Va(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),s.push(a)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}var g8=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function b8(t){let e=0;for(let r=0,i=t.length;r<i;++r)if(e=t.charCodeAt(r),e>126||g8[e])return!0;return!1}var v8=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Vi(t,e){let r=Object.assign({},e),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=t.indexOf("%")!==-1,n=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);let o=t.match(v8);if(o){if(i.scheme=o[1],i.userinfo=o[3],i.host=o[4],i.port=parseInt(o[5],10),i.path=o[6]||"",i.query=o[7],i.fragment=o[8],isNaN(i.port)&&(i.port=o[5]),i.host){let l=d8(i.host);if(l.isIPV4===!1){let c=f8(l.host);i.host=c.host.toLowerCase(),n=c.isIPV6}else i.host=l.host,n=!0}i.scheme===void 0&&i.userinfo===void 0&&i.host===void 0&&i.port===void 0&&i.query===void 0&&!i.path?i.reference="same-document":i.scheme===void 0?i.reference="relative":i.fragment===void 0?i.reference="absolute":i.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==i.reference&&(i.error=i.error||"URI is not a "+r.reference+" reference.");let a=Zy[(r.scheme||i.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&i.host&&(r.domainHost||a&&a.domainHost)&&n===!1&&b8(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch(l){i.error=i.error||"Host's domain name can not be converted to ASCII: "+l}(!a||a&&!a.skipNormalize)&&(s&&i.scheme!==void 0&&(i.scheme=unescape(i.scheme)),s&&i.host!==void 0&&(i.host=unescape(i.host)),i.path&&(i.path=escape(unescape(i.path))),i.fragment&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),a&&a.parse&&a.parse(i,r)}else i.error=i.error||"URI can not be parsed.";return i}var eg={SCHEMES:Zy,normalize:p8,resolve:m8,resolveComponents:$A,equal:y8,serialize:hi,parse:Vi};ff.exports=eg;ff.exports.default=eg;ff.exports.fastUri=eg});var kA=_(tg=>{"use strict";Object.defineProperty(tg,"__esModule",{value:!0});var NA=df();NA.code='require("ajv/dist/runtime/uri").default';tg.default=NA});var sg=_(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.CodeGen=Rt.Name=Rt.nil=Rt.stringify=Rt.str=Rt._=Rt.KeywordCxt=void 0;var w8=fo();Object.defineProperty(Rt,"KeywordCxt",{enumerable:!0,get:function(){return w8.KeywordCxt}});var po=re();Object.defineProperty(Rt,"_",{enumerable:!0,get:function(){return po._}});Object.defineProperty(Rt,"str",{enumerable:!0,get:function(){return po.str}});Object.defineProperty(Rt,"stringify",{enumerable:!0,get:function(){return po.stringify}});Object.defineProperty(Rt,"nil",{enumerable:!0,get:function(){return po.nil}});Object.defineProperty(Rt,"Name",{enumerable:!0,get:function(){return po.Name}});Object.defineProperty(Rt,"CodeGen",{enumerable:!0,get:function(){return po.CodeGen}});var _8=Ha(),FA=Hi(),S8=$y(),Ga=ln(),E8=re(),Ka=za(),hf=Fa(),ig=ce(),qA=mA(),x8=kA(),MA=(t,e)=>new RegExp(t,e);MA.code="new RegExp";var R8=["removeAdditional","useDefaults","coerceTypes"],T8=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),P8={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},A8={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},LA=200;function C8(t){var e,r,i,s,n,o,a,l,c,u,f,p,d,h,m,v,g,w,b,y,E,x,S,R,T;let C=t.strict,q=(e=t.code)===null||e===void 0?void 0:e.optimize,O=q===!0||q===void 0?1:q||0,P=(i=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&i!==void 0?i:MA,D=(s=t.uriResolver)!==null&&s!==void 0?s:x8.default;return{strictSchema:(o=(n=t.strictSchema)!==null&&n!==void 0?n:C)!==null&&o!==void 0?o:!0,strictNumbers:(l=(a=t.strictNumbers)!==null&&a!==void 0?a:C)!==null&&l!==void 0?l:!0,strictTypes:(u=(c=t.strictTypes)!==null&&c!==void 0?c:C)!==null&&u!==void 0?u:"log",strictTuples:(p=(f=t.strictTuples)!==null&&f!==void 0?f:C)!==null&&p!==void 0?p:"log",strictRequired:(h=(d=t.strictRequired)!==null&&d!==void 0?d:C)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:O,regExp:P}:{optimize:O,regExp:P},loopRequired:(m=t.loopRequired)!==null&&m!==void 0?m:LA,loopEnum:(v=t.loopEnum)!==null&&v!==void 0?v:LA,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(b=t.inlineRefs)!==null&&b!==void 0?b:!0,schemaId:(y=t.schemaId)!==null&&y!==void 0?y:"$id",addUsedSchema:(E=t.addUsedSchema)!==null&&E!==void 0?E:!0,validateSchema:(x=t.validateSchema)!==null&&x!==void 0?x:!0,validateFormats:(S=t.validateFormats)!==null&&S!==void 0?S:!0,unicodeRegExp:(R=t.unicodeRegExp)!==null&&R!==void 0?R:!0,int32range:(T=t.int32range)!==null&&T!==void 0?T:!0,uriResolver:D}}var Wa=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...C8(e)};let{es5:r,lines:i}=this.opts.code;this.scope=new E8.ValueScope({scope:{},prefixes:T8,es5:r,lines:i}),this.logger=q8(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,S8.getRules)(),jA.call(this,P8,e,"NOT SUPPORTED"),jA.call(this,A8,e,"DEPRECATED","warn"),this._metaOpts=N8.call(this),e.formats&&I8.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&$8.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),O8.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:i}=this.opts,s=qA;i==="id"&&(s={...qA},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[i],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let i;if(typeof e=="string"){if(i=this.getSchema(e),!i)throw new Error(`no schema with key or ref "${e}"`)}else i=this.compile(e);let s=i(r);return"$async"in i||(this.errors=i.errors),s}compile(e,r){let i=this._addSchema(e,r);return i.validate||this._compileSchemaEnv(i)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:i}=this.opts;return s.call(this,e,r);async function s(u,f){await n.call(this,u.$schema);let p=this._addSchema(u,f);return p.validate||o.call(this,p)}async function n(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(f){if(!(f instanceof FA.default))throw f;return a.call(this,f),await l.call(this,f.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:f}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${f} cannot be resolved`)}async function l(u){let f=await c.call(this,u);this.refs[u]||await n.call(this,f.$schema),this.refs[u]||this.addSchema(f,u,r)}async function c(u){let f=this._loading[u];if(f)return f;try{return await(this._loading[u]=i(u))}finally{delete this._loading[u]}}}addSchema(e,r,i,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,i,s);return this}let n;if(typeof e=="object"){let{schemaId:o}=this.opts;if(n=e[o],n!==void 0&&typeof n!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Ka.normalizeId)(r||n),this._checkUnique(r),this.schemas[r]=this._addSchema(e,i,r,s,!0),this}addMetaSchema(e,r,i=this.opts.validateSchema){return this.addSchema(e,r,!0,i),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let i;if(i=e.$schema,i!==void 0&&typeof i!="string")throw new Error("$schema must be a string");if(i=i||this.opts.defaultMeta||this.defaultMeta(),!i)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(i,e);if(!s&&r){let n="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(n);else throw new Error(n)}return s}getSchema(e){let r;for(;typeof(r=DA.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:i}=this.opts,s=new Ga.SchemaEnv({schema:{},schemaId:i});if(r=Ga.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=DA.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let i=e[this.opts.schemaId];return i&&(i=(0,Ka.normalizeId)(i),delete this.schemas[i],delete this.refs[i]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let i;if(typeof e=="string")i=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=i);else if(typeof e=="object"&&r===void 0){if(r=e,i=r.keyword,Array.isArray(i)&&!i.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(j8.call(this,i,r),!r)return(0,ig.eachItem)(i,n=>rg.call(this,n)),this;F8.call(this,r);let s={...r,type:(0,hf.getJSONTypes)(r.type),schemaType:(0,hf.getJSONTypes)(r.schemaType)};return(0,ig.eachItem)(i,s.type.length===0?n=>rg.call(this,n,s):n=>s.type.forEach(o=>rg.call(this,n,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let i of r.rules){let s=i.rules.findIndex(n=>n.keyword===e);s>=0&&i.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:i="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${i}${s.instancePath} ${s.message}`).reduce((s,n)=>s+r+n)}$dataMetaSchema(e,r){let i=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let n=s.split("/").slice(1),o=e;for(let a of n)o=o[a];for(let a in i){let l=i[a];if(typeof l!="object")continue;let{$data:c}=l.definition,u=o[a];c&&u&&(o[a]=zA(u))}}return e}_removeAllSchemas(e,r){for(let i in e){let s=e[i];(!r||r.test(i))&&(typeof s=="string"?delete e[i]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[i]))}}_addSchema(e,r,i,s=this.opts.validateSchema,n=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;i=(0,Ka.normalizeId)(o||i);let c=Ka.getSchemaRefs.call(this,e,i);return l=new Ga.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:i,localRefs:c}),this._cache.set(l.schema,l),n&&!i.startsWith("#")&&(i&&this._checkUnique(i),this.refs[i]=l),s&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Ga.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Ga.compileSchema.call(this,e)}finally{this.opts=r}}};Wa.ValidationError=_8.default;Wa.MissingRefError=FA.default;Rt.default=Wa;function jA(t,e,r,i="error"){for(let s in t){let n=s;n in e&&this.logger[i](`${r}: option ${s}. ${t[n]}`)}}function DA(t){return t=(0,Ka.normalizeId)(t),this.schemas[t]||this.refs[t]}function O8(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function I8(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function $8(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function N8(){let t={...this.opts};for(let e of R8)delete t[e];return t}var k8={log(){},warn(){},error(){}};function q8(t){if(t===!1)return k8;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var L8=/^[a-z_$][a-z0-9_$:-]*$/i;function j8(t,e){let{RULES:r}=this;if((0,ig.eachItem)(t,i=>{if(r.keywords[i])throw new Error(`Keyword ${i} is already defined`);if(!L8.test(i))throw new Error(`Keyword ${i} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function rg(t,e,r){var i;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:n}=this,o=s?n.post:n.rules.find(({type:l})=>l===r);if(o||(o={type:r,rules:[]},n.rules.push(o)),n.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,hf.getJSONTypes)(e.type),schemaType:(0,hf.getJSONTypes)(e.schemaType)}};e.before?D8.call(this,o,a,e.before):o.rules.push(a),n.all[t]=a,(i=e.implements)===null||i===void 0||i.forEach(l=>this.addKeyword(l))}function D8(t,e,r){let i=t.rules.findIndex(s=>s.keyword===r);i>=0?t.rules.splice(i,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function F8(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=zA(e)),t.validateSchema=this.compile(e,!0))}var M8={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function zA(t){return{anyOf:[t,M8]}}});var BA=_(ng=>{"use strict";Object.defineProperty(ng,"__esModule",{value:!0});var z8={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};ng.default=z8});var og=_(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.callRef=cn.getValidate=void 0;var B8=Hi(),UA=xt(),cr=re(),mo=Ar(),HA=ln(),pf=ce(),U8={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:i}=t,{baseId:s,schemaEnv:n,validateName:o,opts:a,self:l}=i,{root:c}=n;if((r==="#"||r==="#/")&&s===c.baseId)return f();let u=HA.resolveRef.call(l,c,s,r);if(u===void 0)throw new B8.default(i.opts.uriResolver,s,r);if(u instanceof HA.SchemaEnv)return p(u);return d(u);function f(){if(n===c)return mf(t,o,n,n.$async);let h=e.scopeValue("root",{ref:c});return mf(t,(0,cr._)`${h}.validate`,c,c.$async)}function p(h){let m=VA(t,h);mf(t,m,h,h.$async)}function d(h){let m=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,cr.stringify)(h)}:{ref:h}),v=e.name("valid"),g=t.subschema({schema:h,dataTypes:[],schemaPath:cr.nil,topSchemaRef:m,errSchemaPath:r},v);t.mergeEvaluated(g),t.ok(v)}}};function VA(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,cr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}cn.getValidate=VA;function mf(t,e,r,i){let{gen:s,it:n}=t,{allErrors:o,schemaEnv:a,opts:l}=n,c=l.passContext?mo.default.this:cr.nil;i?u():f();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,cr._)`await ${(0,UA.callValidateCode)(t,e,c)}`),d(e),o||s.assign(h,!0)},m=>{s.if((0,cr._)`!(${m} instanceof ${n.ValidationError})`,()=>s.throw(m)),p(m),o||s.assign(h,!1)}),t.ok(h)}function f(){t.result((0,UA.callValidateCode)(t,e,c),()=>d(e),()=>p(e))}function p(h){let m=(0,cr._)`${h}.errors`;s.assign(mo.default.vErrors,(0,cr._)`${mo.default.vErrors} === null ? ${m} : ${mo.default.vErrors}.concat(${m})`),s.assign(mo.default.errors,(0,cr._)`${mo.default.vErrors}.length`)}function d(h){var m;if(!n.opts.unevaluated)return;let v=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(n.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(n.props=pf.mergeEvaluated.props(s,v.props,n.props));else{let g=s.var("props",(0,cr._)`${h}.evaluated.props`);n.props=pf.mergeEvaluated.props(s,g,n.props,cr.Name)}if(n.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(n.items=pf.mergeEvaluated.items(s,v.items,n.items));else{let g=s.var("items",(0,cr._)`${h}.evaluated.items`);n.items=pf.mergeEvaluated.items(s,g,n.items,cr.Name)}}}cn.callRef=mf;cn.default=U8});var GA=_(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});var H8=BA(),V8=og(),G8=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",H8.default,V8.default];ag.default=G8});var KA=_(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});var yf=re(),vs=yf.operators,gf={maximum:{okStr:"<=",ok:vs.LTE,fail:vs.GT},minimum:{okStr:">=",ok:vs.GTE,fail:vs.LT},exclusiveMaximum:{okStr:"<",ok:vs.LT,fail:vs.GTE},exclusiveMinimum:{okStr:">",ok:vs.GT,fail:vs.LTE}},K8={message:({keyword:t,schemaCode:e})=>(0,yf.str)`must be ${gf[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,yf._)`{comparison: ${gf[t].okStr}, limit: ${e}}`},W8={keyword:Object.keys(gf),type:"number",schemaType:"number",$data:!0,error:K8,code(t){let{keyword:e,data:r,schemaCode:i}=t;t.fail$data((0,yf._)`${r} ${gf[e].fail} ${i} || isNaN(${r})`)}};lg.default=W8});var WA=_(cg=>{"use strict";Object.defineProperty(cg,"__esModule",{value:!0});var Ja=re(),J8={message:({schemaCode:t})=>(0,Ja.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Ja._)`{multipleOf: ${t}}`},Q8={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:J8,code(t){let{gen:e,data:r,schemaCode:i,it:s}=t,n=s.opts.multipleOfPrecision,o=e.let("res"),a=n?(0,Ja._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${n}`:(0,Ja._)`${o} !== parseInt(${o})`;t.fail$data((0,Ja._)`(${i} === 0 || (${o} = ${r}/${i}, ${a}))`)}};cg.default=Q8});var QA=_(ug=>{"use strict";Object.defineProperty(ug,"__esModule",{value:!0});function JA(t){let e=t.length,r=0,i=0,s;for(;i<e;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<e&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}ug.default=JA;JA.code='require("ajv/dist/runtime/ucs2length").default'});var YA=_(fg=>{"use strict";Object.defineProperty(fg,"__esModule",{value:!0});var un=re(),Y8=ce(),X8=QA(),Z8={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,un.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,un._)`{limit: ${t}}`},eK={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Z8,code(t){let{keyword:e,data:r,schemaCode:i,it:s}=t,n=e==="maxLength"?un.operators.GT:un.operators.LT,o=s.opts.unicode===!1?(0,un._)`${r}.length`:(0,un._)`${(0,Y8.useFunc)(t.gen,X8.default)}(${r})`;t.fail$data((0,un._)`${o} ${n} ${i}`)}};fg.default=eK});var XA=_(dg=>{"use strict";Object.defineProperty(dg,"__esModule",{value:!0});var tK=xt(),bf=re(),rK={message:({schemaCode:t})=>(0,bf.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,bf._)`{pattern: ${t}}`},iK={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:rK,code(t){let{data:e,$data:r,schema:i,schemaCode:s,it:n}=t,o=n.opts.unicodeRegExp?"u":"",a=r?(0,bf._)`(new RegExp(${s}, ${o}))`:(0,tK.usePattern)(t,i);t.fail$data((0,bf._)`!${a}.test(${e})`)}};dg.default=iK});var ZA=_(hg=>{"use strict";Object.defineProperty(hg,"__esModule",{value:!0});var Qa=re(),sK={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Qa.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Qa._)`{limit: ${t}}`},nK={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:sK,code(t){let{keyword:e,data:r,schemaCode:i}=t,s=e==="maxProperties"?Qa.operators.GT:Qa.operators.LT;t.fail$data((0,Qa._)`Object.keys(${r}).length ${s} ${i}`)}};hg.default=nK});var eC=_(pg=>{"use strict";Object.defineProperty(pg,"__esModule",{value:!0});var Ya=xt(),Xa=re(),oK=ce(),aK={message:({params:{missingProperty:t}})=>(0,Xa.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Xa._)`{missingProperty: ${t}}`},lK={keyword:"required",type:"object",schemaType:"array",$data:!0,error:aK,code(t){let{gen:e,schema:r,schemaCode:i,data:s,$data:n,it:o}=t,{opts:a}=o;if(!n&&r.length===0)return;let l=r.length>=a.loopRequired;if(o.allErrors?c():u(),a.strictRequired){let d=t.parentSchema.properties,{definedProperties:h}=t.it;for(let m of r)if(d?.[m]===void 0&&!h.has(m)){let v=o.schemaEnv.baseId+o.errSchemaPath,g=`required property "${m}" is not defined at "${v}" (strictRequired)`;(0,oK.checkStrictMode)(o,g,o.opts.strictRequired)}}function c(){if(l||n)t.block$data(Xa.nil,f);else for(let d of r)(0,Ya.checkReportMissingProp)(t,d)}function u(){let d=e.let("missing");if(l||n){let h=e.let("valid",!0);t.block$data(h,()=>p(d,h)),t.ok(h)}else e.if((0,Ya.checkMissingProp)(t,r,d)),(0,Ya.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",i,d=>{t.setParams({missingProperty:d}),e.if((0,Ya.noPropertyInData)(e,s,d,a.ownProperties),()=>t.error())})}function p(d,h){t.setParams({missingProperty:d}),e.forOf(d,i,()=>{e.assign(h,(0,Ya.propertyInData)(e,s,d,a.ownProperties)),e.if((0,Xa.not)(h),()=>{t.error(),e.break()})},Xa.nil)}}};pg.default=lK});var tC=_(mg=>{"use strict";Object.defineProperty(mg,"__esModule",{value:!0});var Za=re(),cK={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Za.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Za._)`{limit: ${t}}`},uK={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:cK,code(t){let{keyword:e,data:r,schemaCode:i}=t,s=e==="maxItems"?Za.operators.GT:Za.operators.LT;t.fail$data((0,Za._)`${r}.length ${s} ${i}`)}};mg.default=uK});var el=_(yg=>{"use strict";Object.defineProperty(yg,"__esModule",{value:!0});var rC=Ma();rC.code='require("ajv/dist/runtime/equal").default';yg.default=rC});var iC=_(bg=>{"use strict";Object.defineProperty(bg,"__esModule",{value:!0});var gg=Fa(),Tt=re(),fK=ce(),dK=el(),hK={message:({params:{i:t,j:e}})=>(0,Tt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Tt._)`{i: ${t}, j: ${e}}`},pK={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:hK,code(t){let{gen:e,data:r,$data:i,schema:s,parentSchema:n,schemaCode:o,it:a}=t;if(!i&&!s)return;let l=e.let("valid"),c=n.items?(0,gg.getSchemaTypes)(n.items):[];t.block$data(l,u,(0,Tt._)`${o} === false`),t.ok(l);function u(){let h=e.let("i",(0,Tt._)`${r}.length`),m=e.let("j");t.setParams({i:h,j:m}),e.assign(l,!0),e.if((0,Tt._)`${h} > 1`,()=>(f()?p:d)(h,m))}function f(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function p(h,m){let v=e.name("item"),g=(0,gg.checkDataTypes)(c,v,a.opts.strictNumbers,gg.DataType.Wrong),w=e.const("indices",(0,Tt._)`{}`);e.for((0,Tt._)`;${h}--;`,()=>{e.let(v,(0,Tt._)`${r}[${h}]`),e.if(g,(0,Tt._)`continue`),c.length>1&&e.if((0,Tt._)`typeof ${v} == "string"`,(0,Tt._)`${v} += "_"`),e.if((0,Tt._)`typeof ${w}[${v}] == "number"`,()=>{e.assign(m,(0,Tt._)`${w}[${v}]`),t.error(),e.assign(l,!1).break()}).code((0,Tt._)`${w}[${v}] = ${h}`)})}function d(h,m){let v=(0,fK.useFunc)(e,dK.default),g=e.name("outer");e.label(g).for((0,Tt._)`;${h}--;`,()=>e.for((0,Tt._)`${m} = ${h}; ${m}--;`,()=>e.if((0,Tt._)`${v}(${r}[${h}], ${r}[${m}])`,()=>{t.error(),e.assign(l,!1).break(g)})))}}};bg.default=pK});var sC=_(wg=>{"use strict";Object.defineProperty(wg,"__esModule",{value:!0});var vg=re(),mK=ce(),yK=el(),gK={message:"must be equal to constant",params:({schemaCode:t})=>(0,vg._)`{allowedValue: ${t}}`},bK={keyword:"const",$data:!0,error:gK,code(t){let{gen:e,data:r,$data:i,schemaCode:s,schema:n}=t;i||n&&typeof n=="object"?t.fail$data((0,vg._)`!${(0,mK.useFunc)(e,yK.default)}(${r}, ${s})`):t.fail((0,vg._)`${n} !== ${r}`)}};wg.default=bK});var nC=_(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0});var tl=re(),vK=ce(),wK=el(),_K={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,tl._)`{allowedValues: ${t}}`},SK={keyword:"enum",schemaType:"array",$data:!0,error:_K,code(t){let{gen:e,data:r,$data:i,schema:s,schemaCode:n,it:o}=t;if(!i&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,l,c=()=>l??(l=(0,vK.useFunc)(e,wK.default)),u;if(a||i)u=e.let("valid"),t.block$data(u,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let d=e.const("vSchema",n);u=(0,tl.or)(...s.map((h,m)=>p(d,m)))}t.pass(u);function f(){e.assign(u,!1),e.forOf("v",n,d=>e.if((0,tl._)`${c()}(${r}, ${d})`,()=>e.assign(u,!0).break()))}function p(d,h){let m=s[h];return typeof m=="object"&&m!==null?(0,tl._)`${c()}(${r}, ${d}[${h}])`:(0,tl._)`${r} === ${m}`}}};_g.default=SK});var oC=_(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});var EK=KA(),xK=WA(),RK=YA(),TK=XA(),PK=ZA(),AK=eC(),CK=tC(),OK=iC(),IK=sC(),$K=nC(),NK=[EK.default,xK.default,RK.default,TK.default,PK.default,AK.default,CK.default,OK.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},IK.default,$K.default];Sg.default=NK});var xg=_(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.validateAdditionalItems=void 0;var fn=re(),Eg=ce(),kK={message:({params:{len:t}})=>(0,fn.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,fn._)`{limit: ${t}}`},qK={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:kK,code(t){let{parentSchema:e,it:r}=t,{items:i}=e;if(!Array.isArray(i)){(0,Eg.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}aC(t,i)}};function aC(t,e){let{gen:r,schema:i,data:s,keyword:n,it:o}=t;o.items=!0;let a=r.const("len",(0,fn._)`${s}.length`);if(i===!1)t.setParams({len:e.length}),t.pass((0,fn._)`${a} <= ${e.length}`);else if(typeof i=="object"&&!(0,Eg.alwaysValidSchema)(o,i)){let c=r.var("valid",(0,fn._)`${a} <= ${e.length}`);r.if((0,fn.not)(c),()=>l(c)),t.ok(c)}function l(c){r.forRange("i",e.length,a,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:Eg.Type.Num},c),o.allErrors||r.if((0,fn.not)(c),()=>r.break())})}}rl.validateAdditionalItems=aC;rl.default=qK});var Rg=_(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.validateTuple=void 0;var lC=re(),vf=ce(),LK=xt(),jK={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return cC(t,"additionalItems",e);r.items=!0,!(0,vf.alwaysValidSchema)(r,e)&&t.ok((0,LK.validateArray)(t))}};function cC(t,e,r=t.schema){let{gen:i,parentSchema:s,data:n,keyword:o,it:a}=t;u(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=vf.mergeEvaluated.items(i,r.length,a.items));let l=i.name("valid"),c=i.const("len",(0,lC._)`${n}.length`);r.forEach((f,p)=>{(0,vf.alwaysValidSchema)(a,f)||(i.if((0,lC._)`${c} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},l)),t.ok(l))});function u(f){let{opts:p,errSchemaPath:d}=a,h=r.length,m=h===f.minItems&&(h===f.maxItems||f[e]===!1);if(p.strictTuples&&!m){let v=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,vf.checkStrictMode)(a,v,p.strictTuples)}}}il.validateTuple=cC;il.default=jK});var uC=_(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});var DK=Rg(),FK={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,DK.validateTuple)(t,"items")};Tg.default=FK});var dC=_(Pg=>{"use strict";Object.defineProperty(Pg,"__esModule",{value:!0});var fC=re(),MK=ce(),zK=xt(),BK=xg(),UK={message:({params:{len:t}})=>(0,fC.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,fC._)`{limit: ${t}}`},HK={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:UK,code(t){let{schema:e,parentSchema:r,it:i}=t,{prefixItems:s}=r;i.items=!0,!(0,MK.alwaysValidSchema)(i,e)&&(s?(0,BK.validateAdditionalItems)(t,s):t.ok((0,zK.validateArray)(t)))}};Pg.default=HK});var hC=_(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});var Or=re(),wf=ce(),VK={message:({params:{min:t,max:e}})=>e===void 0?(0,Or.str)`must contain at least ${t} valid item(s)`:(0,Or.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Or._)`{minContains: ${t}}`:(0,Or._)`{minContains: ${t}, maxContains: ${e}}`},GK={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:VK,code(t){let{gen:e,schema:r,parentSchema:i,data:s,it:n}=t,o,a,{minContains:l,maxContains:c}=i;n.opts.next?(o=l===void 0?1:l,a=c):o=1;let u=e.const("len",(0,Or._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,wf.checkStrictMode)(n,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,wf.checkStrictMode)(n,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,wf.alwaysValidSchema)(n,r)){let m=(0,Or._)`${u} >= ${o}`;a!==void 0&&(m=(0,Or._)`${m} && ${u} <= ${a}`),t.pass(m);return}n.items=!0;let f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,Or._)`${s}.length > 0`,p)):(e.let(f,!1),p()),t.result(f,()=>t.reset());function p(){let m=e.name("_valid"),v=e.let("count",0);d(m,()=>e.if(m,()=>h(v)))}function d(m,v){e.forRange("i",0,u,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:wf.Type.Num,compositeRule:!0},m),v()})}function h(m){e.code((0,Or._)`${m}++`),a===void 0?e.if((0,Or._)`${m} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,Or._)`${m} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,Or._)`${m} >= ${o}`,()=>e.assign(f,!0)))}}};Ag.default=GK});var yC=_(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.validateSchemaDeps=pi.validatePropertyDeps=pi.error=void 0;var Cg=re(),KK=ce(),sl=xt();pi.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let i=e===1?"property":"properties";return(0,Cg.str)`must have ${i} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:i}})=>(0,Cg._)`{property: ${t},
    missingProperty: ${i},
    depsCount: ${e},
    deps: ${r}}`};var WK={keyword:"dependencies",type:"object",schemaType:"object",error:pi.error,code(t){let[e,r]=JK(t);pC(t,e),mC(t,r)}};function JK({schema:t}){let e={},r={};for(let i in t){if(i==="__proto__")continue;let s=Array.isArray(t[i])?e:r;s[i]=t[i]}return[e,r]}function pC(t,e=t.schema){let{gen:r,data:i,it:s}=t;if(Object.keys(e).length===0)return;let n=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let l=(0,sl.propertyInData)(r,i,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(l,()=>{for(let c of a)(0,sl.checkReportMissingProp)(t,c)}):(r.if((0,Cg._)`${l} && (${(0,sl.checkMissingProp)(t,a,n)})`),(0,sl.reportMissingProp)(t,n),r.else())}}pi.validatePropertyDeps=pC;function mC(t,e=t.schema){let{gen:r,data:i,keyword:s,it:n}=t,o=r.name("valid");for(let a in e)(0,KK.alwaysValidSchema)(n,e[a])||(r.if((0,sl.propertyInData)(r,i,a,n.opts.ownProperties),()=>{let l=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(l,o)},()=>r.var(o,!0)),t.ok(o))}pi.validateSchemaDeps=mC;pi.default=WK});var bC=_(Og=>{"use strict";Object.defineProperty(Og,"__esModule",{value:!0});var gC=re(),QK=ce(),YK={message:"property name must be valid",params:({params:t})=>(0,gC._)`{propertyName: ${t.propertyName}}`},XK={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:YK,code(t){let{gen:e,schema:r,data:i,it:s}=t;if((0,QK.alwaysValidSchema)(s,r))return;let n=e.name("valid");e.forIn("key",i,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},n),e.if((0,gC.not)(n),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(n)}};Og.default=XK});var $g=_(Ig=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});var _f=xt(),Qr=re(),ZK=Ar(),Sf=ce(),eW={message:"must NOT have additional properties",params:({params:t})=>(0,Qr._)`{additionalProperty: ${t.additionalProperty}}`},tW={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:eW,code(t){let{gen:e,schema:r,parentSchema:i,data:s,errsCount:n,it:o}=t;if(!n)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,Sf.alwaysValidSchema)(o,r))return;let c=(0,_f.allSchemaProperties)(i.properties),u=(0,_f.allSchemaProperties)(i.patternProperties);f(),t.ok((0,Qr._)`${n} === ${ZK.default.errors}`);function f(){e.forIn("key",s,v=>{!c.length&&!u.length?h(v):e.if(p(v),()=>h(v))})}function p(v){let g;if(c.length>8){let w=(0,Sf.schemaRefOrVal)(o,i.properties,"properties");g=(0,_f.isOwnProperty)(e,w,v)}else c.length?g=(0,Qr.or)(...c.map(w=>(0,Qr._)`${v} === ${w}`)):g=Qr.nil;return u.length&&(g=(0,Qr.or)(g,...u.map(w=>(0,Qr._)`${(0,_f.usePattern)(t,w)}.test(${v})`))),(0,Qr.not)(g)}function d(v){e.code((0,Qr._)`delete ${s}[${v}]`)}function h(v){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){d(v);return}if(r===!1){t.setParams({additionalProperty:v}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Sf.alwaysValidSchema)(o,r)){let g=e.name("valid");l.removeAdditional==="failing"?(m(v,g,!1),e.if((0,Qr.not)(g),()=>{t.reset(),d(v)})):(m(v,g),a||e.if((0,Qr.not)(g),()=>e.break()))}}function m(v,g,w){let b={keyword:"additionalProperties",dataProp:v,dataPropType:Sf.Type.Str};w===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(b,g)}}};Ig.default=tW});var _C=_(kg=>{"use strict";Object.defineProperty(kg,"__esModule",{value:!0});var rW=fo(),vC=xt(),Ng=ce(),wC=$g(),iW={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:i,data:s,it:n}=t;n.opts.removeAdditional==="all"&&i.additionalProperties===void 0&&wC.default.code(new rW.KeywordCxt(n,wC.default,"additionalProperties"));let o=(0,vC.allSchemaProperties)(r);for(let f of o)n.definedProperties.add(f);n.opts.unevaluated&&o.length&&n.props!==!0&&(n.props=Ng.mergeEvaluated.props(e,(0,Ng.toHash)(o),n.props));let a=o.filter(f=>!(0,Ng.alwaysValidSchema)(n,r[f]));if(a.length===0)return;let l=e.name("valid");for(let f of a)c(f)?u(f):(e.if((0,vC.propertyInData)(e,s,f,n.opts.ownProperties)),u(f),n.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function c(f){return n.opts.useDefaults&&!n.compositeRule&&r[f].default!==void 0}function u(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};kg.default=iW});var RC=_(qg=>{"use strict";Object.defineProperty(qg,"__esModule",{value:!0});var SC=xt(),Ef=re(),EC=ce(),xC=ce(),sW={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:i,parentSchema:s,it:n}=t,{opts:o}=n,a=(0,SC.allSchemaProperties)(r),l=a.filter(m=>(0,EC.alwaysValidSchema)(n,r[m]));if(a.length===0||l.length===a.length&&(!n.opts.unevaluated||n.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,u=e.name("valid");n.props!==!0&&!(n.props instanceof Ef.Name)&&(n.props=(0,xC.evaluatedPropsToName)(e,n.props));let{props:f}=n;p();function p(){for(let m of a)c&&d(m),n.allErrors?h(m):(e.var(u,!0),h(m),e.if(u))}function d(m){for(let v in c)new RegExp(m).test(v)&&(0,EC.checkStrictMode)(n,`property ${v} matches pattern ${m} (use allowMatchingProperties)`)}function h(m){e.forIn("key",i,v=>{e.if((0,Ef._)`${(0,SC.usePattern)(t,m)}.test(${v})`,()=>{let g=l.includes(m);g||t.subschema({keyword:"patternProperties",schemaProp:m,dataProp:v,dataPropType:xC.Type.Str},u),n.opts.unevaluated&&f!==!0?e.assign((0,Ef._)`${f}[${v}]`,!0):!g&&!n.allErrors&&e.if((0,Ef.not)(u),()=>e.break())})})}}};qg.default=sW});var TC=_(Lg=>{"use strict";Object.defineProperty(Lg,"__esModule",{value:!0});var nW=ce(),oW={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:i}=t;if((0,nW.alwaysValidSchema)(i,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Lg.default=oW});var PC=_(jg=>{"use strict";Object.defineProperty(jg,"__esModule",{value:!0});var aW=xt(),lW={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:aW.validateUnion,error:{message:"must match a schema in anyOf"}};jg.default=lW});var AC=_(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});var xf=re(),cW=ce(),uW={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,xf._)`{passingSchemas: ${t.passing}}`},fW={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:uW,code(t){let{gen:e,schema:r,parentSchema:i,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&i.discriminator)return;let n=r,o=e.let("valid",!1),a=e.let("passing",null),l=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){n.forEach((u,f)=>{let p;(0,cW.alwaysValidSchema)(s,u)?e.var(l,!0):p=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,xf._)`${l} && ${o}`).assign(o,!1).assign(a,(0,xf._)`[${a}, ${f}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(a,f),p&&t.mergeEvaluated(p,xf.Name)})})}}};Dg.default=fW});var CC=_(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});var dW=ce(),hW={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((n,o)=>{if((0,dW.alwaysValidSchema)(i,n))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};Fg.default=hW});var $C=_(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});var Rf=re(),IC=ce(),pW={message:({params:t})=>(0,Rf.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Rf._)`{failingKeyword: ${t.ifClause}}`},mW={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:pW,code(t){let{gen:e,parentSchema:r,it:i}=t;r.then===void 0&&r.else===void 0&&(0,IC.checkStrictMode)(i,'"if" without "then" and "else" is ignored');let s=OC(i,"then"),n=OC(i,"else");if(!s&&!n)return;let o=e.let("valid",!0),a=e.name("_valid");if(l(),t.reset(),s&&n){let u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,c("then",u),c("else",u))}else s?e.if(a,c("then")):e.if((0,Rf.not)(a),c("else"));t.pass(o,()=>t.error(!0));function l(){let u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function c(u,f){return()=>{let p=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(p,o),f?e.assign(f,(0,Rf._)`${u}`):t.setParams({ifClause:u})}}}};function OC(t,e){let r=t.schema[e];return r!==void 0&&!(0,IC.alwaysValidSchema)(t,r)}Mg.default=mW});var NC=_(zg=>{"use strict";Object.defineProperty(zg,"__esModule",{value:!0});var yW=ce(),gW={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,yW.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};zg.default=gW});var kC=_(Bg=>{"use strict";Object.defineProperty(Bg,"__esModule",{value:!0});var bW=xg(),vW=uC(),wW=Rg(),_W=dC(),SW=hC(),EW=yC(),xW=bC(),RW=$g(),TW=_C(),PW=RC(),AW=TC(),CW=PC(),OW=AC(),IW=CC(),$W=$C(),NW=NC();function kW(t=!1){let e=[AW.default,CW.default,OW.default,IW.default,$W.default,NW.default,xW.default,RW.default,EW.default,TW.default,PW.default];return t?e.push(vW.default,_W.default):e.push(bW.default,wW.default),e.push(SW.default),e}Bg.default=kW});var qC=_(Ug=>{"use strict";Object.defineProperty(Ug,"__esModule",{value:!0});var Ye=re(),qW={message:({schemaCode:t})=>(0,Ye.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Ye._)`{format: ${t}}`},LW={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:qW,code(t,e){let{gen:r,data:i,$data:s,schema:n,schemaCode:o,it:a}=t,{opts:l,errSchemaPath:c,schemaEnv:u,self:f}=a;if(!l.validateFormats)return;s?p():d();function p(){let h=r.scopeValue("formats",{ref:f.formats,code:l.code.formats}),m=r.const("fDef",(0,Ye._)`${h}[${o}]`),v=r.let("fType"),g=r.let("format");r.if((0,Ye._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(v,(0,Ye._)`${m}.type || "string"`).assign(g,(0,Ye._)`${m}.validate`),()=>r.assign(v,(0,Ye._)`"string"`).assign(g,m)),t.fail$data((0,Ye.or)(w(),b()));function w(){return l.strictSchema===!1?Ye.nil:(0,Ye._)`${o} && !${g}`}function b(){let y=u.$async?(0,Ye._)`(${m}.async ? await ${g}(${i}) : ${g}(${i}))`:(0,Ye._)`${g}(${i})`,E=(0,Ye._)`(typeof ${g} == "function" ? ${y} : ${g}.test(${i}))`;return(0,Ye._)`${g} && ${g} !== true && ${v} === ${e} && !${E}`}}function d(){let h=f.formats[n];if(!h){w();return}if(h===!0)return;let[m,v,g]=b(h);m===e&&t.pass(y());function w(){if(l.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${n}" ignored in schema at path "${c}"`}}function b(E){let x=E instanceof RegExp?(0,Ye.regexpCode)(E):l.code.formats?(0,Ye._)`${l.code.formats}${(0,Ye.getProperty)(n)}`:void 0,S=r.scopeValue("formats",{key:n,ref:E,code:x});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,Ye._)`${S}.validate`]:["string",E,S]}function y(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Ye._)`await ${g}(${i})`}return typeof v=="function"?(0,Ye._)`${g}(${i})`:(0,Ye._)`${g}.test(${i})`}}}};Ug.default=LW});var LC=_(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});var jW=qC(),DW=[jW.default];Hg.default=DW});var jC=_(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.contentVocabulary=yo.metadataVocabulary=void 0;yo.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];yo.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var FC=_(Vg=>{"use strict";Object.defineProperty(Vg,"__esModule",{value:!0});var FW=GA(),MW=oC(),zW=kC(),BW=LC(),DC=jC(),UW=[FW.default,MW.default,(0,zW.default)(),BW.default,DC.metadataVocabulary,DC.contentVocabulary];Vg.default=UW});var Gg=_(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.DiscrError=void 0;var MC;(function(t){t.Tag="tag",t.Mapping="mapping"})(MC||(Tf.DiscrError=MC={}))});var BC=_(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});var go=re(),Kg=Gg(),zC=ln(),HW=Hi(),VW=ce(),GW={message:({params:{discrError:t,tagName:e}})=>t===Kg.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,go._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},KW={keyword:"discriminator",type:"object",schemaType:"object",error:GW,code(t){let{gen:e,data:r,schema:i,parentSchema:s,it:n}=t,{oneOf:o}=s;if(!n.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=i.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),c=e.const("tag",(0,go._)`${r}${(0,go.getProperty)(a)}`);e.if((0,go._)`typeof ${c} == "string"`,()=>u(),()=>t.error(!1,{discrError:Kg.DiscrError.Tag,tag:c,tagName:a})),t.ok(l);function u(){let d=p();e.if(!1);for(let h in d)e.elseIf((0,go._)`${c} === ${h}`),e.assign(l,f(d[h]));e.else(),t.error(!1,{discrError:Kg.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function f(d){let h=e.name("valid"),m=t.subschema({keyword:"oneOf",schemaProp:d},h);return t.mergeEvaluated(m,go.Name),h}function p(){var d;let h={},m=g(s),v=!0;for(let y=0;y<o.length;y++){let E=o[y];if(E?.$ref&&!(0,VW.schemaHasRulesButRef)(E,n.self.RULES)){let S=E.$ref;if(E=zC.resolveRef.call(n.self,n.schemaEnv.root,n.baseId,S),E instanceof zC.SchemaEnv&&(E=E.schema),E===void 0)throw new HW.default(n.opts.uriResolver,n.baseId,S)}let x=(d=E?.properties)===null||d===void 0?void 0:d[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);v=v&&(m||g(E)),w(x,y)}if(!v)throw new Error(`discriminator: "${a}" must be required`);return h;function g({required:y}){return Array.isArray(y)&&y.includes(a)}function w(y,E){if(y.const)b(y.const,E);else if(y.enum)for(let x of y.enum)b(x,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(y,E){if(typeof y!="string"||y in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[y]=E}}}};Wg.default=KW});var UC=_((Jde,WW)=>{WW.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Af=_((ze,Jg)=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.MissingRefError=ze.ValidationError=ze.CodeGen=ze.Name=ze.nil=ze.stringify=ze.str=ze._=ze.KeywordCxt=ze.Ajv=void 0;var JW=sg(),QW=FC(),YW=BC(),HC=UC(),XW=["/properties"],Pf="http://json-schema.org/draft-07/schema",bo=class extends JW.default{_addVocabularies(){super._addVocabularies(),QW.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(YW.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(HC,XW):HC;this.addMetaSchema(e,Pf,!1),this.refs["http://json-schema.org/schema"]=Pf}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Pf)?Pf:void 0)}};ze.Ajv=bo;Jg.exports=ze=bo;Jg.exports.Ajv=bo;Object.defineProperty(ze,"__esModule",{value:!0});ze.default=bo;var ZW=fo();Object.defineProperty(ze,"KeywordCxt",{enumerable:!0,get:function(){return ZW.KeywordCxt}});var vo=re();Object.defineProperty(ze,"_",{enumerable:!0,get:function(){return vo._}});Object.defineProperty(ze,"str",{enumerable:!0,get:function(){return vo.str}});Object.defineProperty(ze,"stringify",{enumerable:!0,get:function(){return vo.stringify}});Object.defineProperty(ze,"nil",{enumerable:!0,get:function(){return vo.nil}});Object.defineProperty(ze,"Name",{enumerable:!0,get:function(){return vo.Name}});Object.defineProperty(ze,"CodeGen",{enumerable:!0,get:function(){return vo.CodeGen}});var e7=Ha();Object.defineProperty(ze,"ValidationError",{enumerable:!0,get:function(){return e7.default}});var t7=Hi();Object.defineProperty(ze,"MissingRefError",{enumerable:!0,get:function(){return t7.default}})});var Cf=_(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.formatNames=yi.fastFormats=yi.fullFormats=void 0;function mi(t,e){return{validate:t,compare:e}}yi.fullFormats={date:mi(WC,Zg),time:mi(Yg(!0),e0),"date-time":mi(VC(!0),QC),"iso-time":mi(Yg(),JC),"iso-date-time":mi(VC(),YC),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:a7,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:p7,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:l7,int32:{type:"number",validate:f7},int64:{type:"number",validate:d7},float:{type:"number",validate:KC},double:{type:"number",validate:KC},password:!0,binary:!0};yi.fastFormats={...yi.fullFormats,date:mi(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,Zg),time:mi(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,e0),"date-time":mi(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,QC),"iso-time":mi(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,JC),"iso-date-time":mi(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,YC),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};yi.formatNames=Object.keys(yi.fullFormats);function r7(t){return t%4===0&&(t%100!==0||t%400===0)}var i7=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s7=[0,31,28,31,30,31,30,31,31,30,31,30,31];function WC(t){let e=i7.exec(t);if(!e)return!1;let r=+e[1],i=+e[2],s=+e[3];return i>=1&&i<=12&&s>=1&&s<=(i===2&&r7(r)?29:s7[i])}function Zg(t,e){if(t&&e)return t>e?1:t<e?-1:0}var Qg=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function Yg(t){return function(r){let i=Qg.exec(r);if(!i)return!1;let s=+i[1],n=+i[2],o=+i[3],a=i[4],l=i[5]==="-"?-1:1,c=+(i[6]||0),u=+(i[7]||0);if(c>23||u>59||t&&!a)return!1;if(s<=23&&n<=59&&o<60)return!0;let f=n-u*l,p=s-c*l-(f<0?1:0);return(p===23||p===-1)&&(f===59||f===-1)&&o<61}}function e0(t,e){if(!(t&&e))return;let r=new Date("2020-01-01T"+t).valueOf(),i=new Date("2020-01-01T"+e).valueOf();if(r&&i)return r-i}function JC(t,e){if(!(t&&e))return;let r=Qg.exec(t),i=Qg.exec(e);if(r&&i)return t=r[1]+r[2]+r[3],e=i[1]+i[2]+i[3],t>e?1:t<e?-1:0}var Xg=/t|\s/i;function VC(t){let e=Yg(t);return function(i){let s=i.split(Xg);return s.length===2&&WC(s[0])&&e(s[1])}}function QC(t,e){if(!(t&&e))return;let r=new Date(t).valueOf(),i=new Date(e).valueOf();if(r&&i)return r-i}function YC(t,e){if(!(t&&e))return;let[r,i]=t.split(Xg),[s,n]=e.split(Xg),o=Zg(r,s);if(o!==void 0)return o||e0(i,n)}var n7=/\/|:/,o7=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function a7(t){return n7.test(t)&&o7.test(t)}var GC=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function l7(t){return GC.lastIndex=0,GC.test(t)}var c7=-(2**31),u7=2**31-1;function f7(t){return Number.isInteger(t)&&t<=u7&&t>=c7}function d7(t){return Number.isInteger(t)}function KC(){return!0}var h7=/[^\\]\\Z/;function p7(t){if(h7.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var XC=_(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.formatLimitDefinition=void 0;var m7=Af(),Yr=re(),ws=Yr.operators,Of={formatMaximum:{okStr:"<=",ok:ws.LTE,fail:ws.GT},formatMinimum:{okStr:">=",ok:ws.GTE,fail:ws.LT},formatExclusiveMaximum:{okStr:"<",ok:ws.LT,fail:ws.GTE},formatExclusiveMinimum:{okStr:">",ok:ws.GT,fail:ws.LTE}},y7={message:({keyword:t,schemaCode:e})=>(0,Yr.str)`should be ${Of[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Yr._)`{comparison: ${Of[t].okStr}, limit: ${e}}`};wo.formatLimitDefinition={keyword:Object.keys(Of),type:"string",schemaType:"string",$data:!0,error:y7,code(t){let{gen:e,data:r,schemaCode:i,keyword:s,it:n}=t,{opts:o,self:a}=n;if(!o.validateFormats)return;let l=new m7.KeywordCxt(n,a.RULES.all.format.definition,"format");l.$data?c():u();function c(){let p=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),d=e.const("fmt",(0,Yr._)`${p}[${l.schemaCode}]`);t.fail$data((0,Yr.or)((0,Yr._)`typeof ${d} != "object"`,(0,Yr._)`${d} instanceof RegExp`,(0,Yr._)`typeof ${d}.compare != "function"`,f(d)))}function u(){let p=l.schema,d=a.formats[p];if(!d||d===!0)return;if(typeof d!="object"||d instanceof RegExp||typeof d.compare!="function")throw new Error(`"${s}": format "${p}" does not define "compare" function`);let h=e.scopeValue("formats",{key:p,ref:d,code:o.code.formats?(0,Yr._)`${o.code.formats}${(0,Yr.getProperty)(p)}`:void 0});t.fail$data(f(h))}function f(p){return(0,Yr._)`${p}.compare(${r}, ${i}) ${Of[s].fail} 0`}},dependencies:["format"]};var g7=t=>(t.addKeyword(wo.formatLimitDefinition),t);wo.default=g7});var i0=_((nl,tO)=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});var _o=Cf(),b7=XC(),t0=re(),ZC=new t0.Name("fullFormats"),v7=new t0.Name("fastFormats"),r0=(t,e={keywords:!0})=>{if(Array.isArray(e))return eO(t,e,_o.fullFormats,ZC),t;let[r,i]=e.mode==="fast"?[_o.fastFormats,v7]:[_o.fullFormats,ZC],s=e.formats||_o.formatNames;return eO(t,s,r,i),e.keywords&&(0,b7.default)(t),t};r0.get=(t,e="full")=>{let i=(e==="fast"?_o.fastFormats:_o.fullFormats)[t];if(!i)throw new Error(`Unknown format "${t}"`);return i};function eO(t,e,r,i){var s,n;(s=(n=t.opts.code).formats)!==null&&s!==void 0||(n.formats=(0,t0._)`require("ajv-formats/dist/formats").${i}`);for(let o of e)t.addFormat(o,r[o])}tO.exports=nl=r0;Object.defineProperty(nl,"__esModule",{value:!0});nl.default=r0});var n0=_((Xde,rO)=>{"use strict";var w7=Af(),_7=df(),S7=i0(),E7=xu()({proto:!0}),s0=class t{constructor(e){this.ajv=new w7({...e,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:_7}),S7(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,i)=>i instanceof Date}),this._ajvSchemas={},this._ajvOptions=e||{}}addSchema(e,r){let i=e.$id||r;if(e.$id!==void 0&&e.$id[0]==="#"&&(i=r+e.$id),this.ajv.refs[i]===void 0&&this.ajv.schemas[i]===void 0){let s=E7(e);this.convertSchemaToAjvFormat(s),this.ajv.addSchema(s,i),this._ajvSchemas[i]=e}}validate(e,r){return this.ajv.validate(e,r)}convertSchemaToAjvFormat(e){if(e!==null){e.type==="string"?(e.fjs_type="string",e.type=["string","object"]):Array.isArray(e.type)&&e.type.includes("string")&&!e.type.includes("object")&&(e.fjs_type="string",e.type.push("object"));for(let r in e)typeof e[r]=="object"&&this.convertSchemaToAjvFormat(e[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(e){let r=new t(e.ajvOptions);for(let[i,s]of Object.entries(e.ajvSchemas))r.ajv.addSchema(s,i);return r}};rO.exports=s0});var sO=_((Zde,iO)=>{"use strict";var o0=class t{constructor(e,r,i="#"){this.schema=e,this.schemaId=r,this.jsonPointer=i}getPropertyLocation(e){return new t(this.schema[e],this.schemaId,this.jsonPointer+"/"+e)}getSchemaRef(){return this.schemaId+this.jsonPointer}};iO.exports=o0});var cO=_((ehe,l0)=>{"use strict";l0.exports=F;l0.exports.default=F;var x7={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},nO={enum:["array","boolean","integer","null","number","object","string"]},oO=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,R7=Cf().fullFormats.uri,aO=Cf().fullFormats.regex;function Ir(t,{instancePath:e="",parentData:r,parentDataProperty:i,rootData:s=t}={}){let n=null,o=0,a=o;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?o===a&&typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(Ir.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(Ir.errors=n,o===0):(Ir.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var a0={validate:F};function Qt(t,{instancePath:e="",parentData:r,parentDataProperty:i,rootData:s=t}={}){let n=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return Qt.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let l=t.length;for(let c=0;c<l;c++){let u=o;a0.validate(t[c],{instancePath:e+"/"+c,parentData:t,parentDataProperty:c,rootData:s})||(n=n===null?a0.validate.errors:n.concat(a0.validate.errors),o=n.length);var a=u===o;if(!a)break}}}else return Qt.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return Qt.errors=n,o===0}var lO=el().default;function F(t,{instancePath:e="",parentData:r,parentDataProperty:i,rootData:s=t}={}){let n=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return F.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:x7.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let b=t.$id,y=o;if(o===y&&o===y)if(typeof b=="string"){if(!oO.test(b))return F.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.$schema!==void 0){let b=t.$schema,y=o;if(o===y&&o===y)if(typeof b=="string"){if(!R7(b))return F.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return F.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.$ref!==void 0){let b=t.$ref,y=o;if(o===y&&o===y)if(typeof b=="string"){if(!oO.test(b))return F.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.$comment!==void 0){let b=o;if(typeof t.$comment!="string")return F.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.title!==void 0){let b=o;if(typeof t.title!="string")return F.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.description!==void 0){let b=o;if(typeof t.description!="string")return F.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.readOnly!==void 0){let b=o;if(typeof t.readOnly!="boolean")return F.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=b===o}else var a=!0;if(a){if(t.examples!==void 0){let b=o;if(o===b&&!Array.isArray(t.examples))return F.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=b===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let b=t.multipleOf,y=o;if(o===y)if(typeof b=="number"&&isFinite(b)){if(b<=0||isNaN(b))return F.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return F.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.maximum!==void 0){let b=t.maximum,y=o;if(!(typeof b=="number"&&isFinite(b)))return F.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let b=t.exclusiveMaximum,y=o;if(!(typeof b=="number"&&isFinite(b)))return F.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.minimum!==void 0){let b=t.minimum,y=o;if(!(typeof b=="number"&&isFinite(b)))return F.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let b=t.exclusiveMinimum,y=o;if(!(typeof b=="number"&&isFinite(b)))return F.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(t.maxLength!==void 0){let b=t.maxLength,y=o,E=o;if(!(typeof b=="number"&&!(b%1)&&!isNaN(b)&&isFinite(b)))return F.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===E&&typeof b=="number"&&isFinite(b)&&(b<0||isNaN(b)))return F.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(t.minLength!==void 0){let b=o;Ir(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(n=n===null?Ir.errors:n.concat(Ir.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.pattern!==void 0){let b=t.pattern,y=o;if(o===y&&o===y)if(typeof b=="string"){if(!aO(b))return F.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return F.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.additionalItems!==void 0){let b=o;F(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.items!==void 0){let b=t.items,y=o,E=o,x=!1,S=o;F(b,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var l=S===o;if(x=x||l,!x){let T=o;Qt(b,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(n=n===null?Qt.errors:n.concat(Qt.errors),o=n.length);var l=T===o;x=x||l}if(x)o=E,n!==null&&(E?n.length=E:n=null);else{let T={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return n===null?n=[T]:n.push(T),o++,F.errors=n,!1}var a=y===o}else var a=!0;if(a){if(t.maxItems!==void 0){let b=t.maxItems,y=o,E=o;if(!(typeof b=="number"&&!(b%1)&&!isNaN(b)&&isFinite(b)))return F.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===E&&typeof b=="number"&&isFinite(b)&&(b<0||isNaN(b)))return F.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(t.minItems!==void 0){let b=o;Ir(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(n=n===null?Ir.errors:n.concat(Ir.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){let b=o;if(typeof t.uniqueItems!="boolean")return F.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=b===o}else var a=!0;if(a){if(t.contains!==void 0){let b=o;F(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let b=t.maxProperties,y=o,E=o;if(!(typeof b=="number"&&!(b%1)&&!isNaN(b)&&isFinite(b)))return F.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===E&&typeof b=="number"&&isFinite(b)&&(b<0||isNaN(b)))return F.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(t.minProperties!==void 0){let b=o;Ir(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(n=n===null?Ir.errors:n.concat(Ir.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.required!==void 0){let b=t.required,y=o;if(o===o)if(Array.isArray(b)){var c=!0;let S=b.length;for(let R=0;R<S;R++){let T=o;if(typeof b[R]!="string")return F.errors=[{instancePath:e+"/required/"+R,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=T===o;if(!c)break}if(c){let R=b.length,T;if(R>1){let C={};for(;R--;){let q=b[R];if(typeof q=="string"){if(typeof C[q]=="number"){return T=C[q],F.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:R,j:T},message:"must NOT have duplicate items (items ## "+T+" and "+R+" are identical)"}],!1;break}C[q]=R}}}}}else return F.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=y===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){let b=o;F(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.definitions!==void 0){let b=t.definitions,y=o;if(o===y)if(b&&typeof b=="object"&&!Array.isArray(b))for(let x in b){let S=o;F(b[x],{instancePath:e+"/definitions/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:b,parentDataProperty:x,rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var u=S===o;if(!u)break}else return F.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.properties!==void 0){let b=t.properties,y=o;if(o===y)if(b&&typeof b=="object"&&!Array.isArray(b))for(let x in b){let S=o;F(b[x],{instancePath:e+"/properties/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:b,parentDataProperty:x,rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var f=S===o;if(!f)break}else return F.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let b=t.patternProperties,y=o;if(o===y)if(b&&typeof b=="object"&&!Array.isArray(b)){for(let x in b){let S=o;if(o===S&&typeof x=="string"&&!aO(x)){let R={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:x};n===null?n=[R]:n.push(R),o++}var p=S===o;if(!p){let R={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:x},message:"property name must be valid"};return n===null?n=[R]:n.push(R),o++,F.errors=n,!1;break}}if(p)for(let x in b){let S=o;F(b[x],{instancePath:e+"/patternProperties/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:b,parentDataProperty:x,rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var d=S===o;if(!d)break}}else return F.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.dependencies!==void 0){let b=t.dependencies,y=o;if(o===y)if(b&&typeof b=="object"&&!Array.isArray(b))for(let x in b){let S=b[x],R=o,T=o,C=!1,q=o;F(S,{instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:b,parentDataProperty:x,rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var h=q===o;if(C=C||h,!C){let O=o;if(o===o)if(Array.isArray(S)){var m=!0;let te=S.length;for(let L=0;L<te;L++){let K=o;if(typeof S[L]!="string"){let z={instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+L,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[z]:n.push(z),o++}var m=K===o;if(!m)break}if(m){let L=S.length,K;if(L>1){let Re={};for(;L--;){let z=S[L];if(typeof z=="string"){if(typeof Re[z]=="number"){K=Re[z];let Te={instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:L,j:K},message:"must NOT have duplicate items (items ## "+K+" and "+L+" are identical)"};n===null?n=[Te]:n.push(Te),o++;break}Re[z]=L}}}}}else{let te={instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};n===null?n=[te]:n.push(te),o++}var h=O===o;C=C||h}if(C)o=T,n!==null&&(T?n.length=T:n=null);else{let O={instancePath:e+"/dependencies/"+x.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return n===null?n=[O]:n.push(O),o++,F.errors=n,!1}var v=R===o;if(!v)break}else return F.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(t.propertyNames!==void 0){let b=o;F(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.enum!==void 0){let b=t.enum,y=o;if(o===y)if(Array.isArray(b)){if(b.length<1)return F.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let x=b.length,S;if(x>1){e:for(;x--;)for(S=x;S--;)if(lO(b[x],b[S])){return F.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:x,j:S},message:"must NOT have duplicate items (items ## "+S+" and "+x+" are identical)"}],!1;break e}}}}else return F.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=y===o}else var a=!0;if(a){if(t.type!==void 0){let b=t.type,y=o,E=o,x=!1,S=o;if(!(b==="array"||b==="boolean"||b==="integer"||b==="null"||b==="number"||b==="object"||b==="string")){let T={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:nO.enum},message:"must be equal to one of the allowed values"};n===null?n=[T]:n.push(T),o++}var g=S===o;if(x=x||g,!x){let T=o;if(o===T)if(Array.isArray(b))if(b.length<1){let q={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};n===null?n=[q]:n.push(q),o++}else{var w=!0;let q=b.length;for(let O=0;O<q;O++){let P=b[O],D=o;if(!(P==="array"||P==="boolean"||P==="integer"||P==="null"||P==="number"||P==="object"||P==="string")){let L={instancePath:e+"/type/"+O,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:nO.enum},message:"must be equal to one of the allowed values"};n===null?n=[L]:n.push(L),o++}var w=D===o;if(!w)break}if(w){let O=b.length,P;if(O>1){e:for(;O--;)for(P=O;P--;)if(lO(b[O],b[P])){let D={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:O,j:P},message:"must NOT have duplicate items (items ## "+P+" and "+O+" are identical)"};n===null?n=[D]:n.push(D),o++;break e}}}}else{let q={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};n===null?n=[q]:n.push(q),o++}var g=T===o;x=x||g}if(x)o=E,n!==null&&(E?n.length=E:n=null);else{let T={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return n===null?n=[T]:n.push(T),o++,F.errors=n,!1}var a=y===o}else var a=!0;if(a){if(t.format!==void 0){let b=o;if(typeof t.format!="string")return F.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){let b=o;if(typeof t.contentMediaType!="string")return F.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){let b=o;if(typeof t.contentEncoding!="string")return F.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=b===o}else var a=!0;if(a){if(t.if!==void 0){let b=o;F(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.then!==void 0){let b=o;F(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.else!==void 0){let b=o;F(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.allOf!==void 0){let b=o;Qt(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(n=n===null?Qt.errors:n.concat(Qt.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.anyOf!==void 0){let b=o;Qt(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(n=n===null?Qt.errors:n.concat(Qt.errors),o=n.length);var a=b===o}else var a=!0;if(a){if(t.oneOf!==void 0){let b=o;Qt(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(n=n===null?Qt.errors:n.concat(Qt.errors),o=n.length);var a=b===o}else var a=!0;if(a)if(t.not!==void 0){let b=o;F(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(n=n===null?F.errors:n.concat(F.errors),o=n.length);var a=b===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return F.errors=n,o===0}});var d0=_((the,uO)=>{"use strict";var c0=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Failed to merge "${e}" keyword schemas.`,this.schemas=r}},u0=class extends Error{constructor(e,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Resolver for "${e}" keyword not found.`,this.schemas=r}},f0=class extends Error{constructor(e){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Invalid "onConflict" option: "${e}".`}};uO.exports={MergeError:c0,ResolverNotFoundError:u0,InvalidOnConflictOptionError:f0}});var hO=_((rhe,dO)=>{"use strict";var{dequal:T7}=Ku(),{MergeError:h0}=d0();function fO(t){let e=t[0];for(let r=1;r<t.length;r++)e=e.filter(i=>t[r].includes(i));return e}function P7(t,e,r){let i=fO(e);if(i.length===0)throw new h0(t,e);r[t]=i}function A7(t,e,r){for(let s=0;s<e.length;s++)Array.isArray(e[s])||(e[s]=[e[s]]);let i=fO(e);if(i.length===0)throw new h0(t,e);i.length===1?r[t]=i[0]:r[t]=i}function C7(t,e,r){let i=[];for(let s of e)for(let n of s)i.includes(n)||i.push(n);r[t]=i}function O7(t,e,r){r[t]=Math.min(...e)}function I7(t,e,r){r[t]=Math.max(...e)}function $7(t,e,r){let i=(a,l)=>l?i(l,a%l):a,s=(a,l)=>a*l/i(a,l),n=1;for(let a of e)for(;a*n%1!==0;)n*=10;let o=e[0]*n;for(let a of e)o=s(o,a*n);r[t]=o/n}function N7(t,e,r){let i=e[0];for(let s=1;s<e.length;s++)if(!T7(e[s],i))throw new h0(t,e);r[t]=i}function k7(){}function q7(t,e,r){for(let i of e)if(i===!1){r[t]=!1;return}r[t]=!0}function L7(t,e,r){for(let i of e)if(i===!0){r[t]=!0;return}r[t]=!1}dO.exports={arraysIntersection:P7,hybridArraysIntersection:A7,arraysUnion:C7,minNumber:O7,maxNumber:I7,commonMultiple:$7,allEqual:N7,booleanAnd:q7,booleanOr:L7,skip:k7}});var vO=_((ihe,bO)=>{"use strict";var{dequal:j7}=Ku(),He=hO(),Nf=d0(),yO={$id:He.skip,type:He.hybridArraysIntersection,enum:He.arraysIntersection,minLength:He.maxNumber,maxLength:He.minNumber,minimum:He.maxNumber,maximum:He.minNumber,multipleOf:He.commonMultiple,exclusiveMinimum:He.maxNumber,exclusiveMaximum:He.minNumber,minItems:He.maxNumber,maxItems:He.minNumber,maxProperties:He.minNumber,minProperties:He.maxNumber,const:He.allEqual,default:He.allEqual,format:He.allEqual,required:He.arraysUnion,properties:U7,patternProperties:$f,additionalProperties:If,items:M7,additionalItems:z7,definitions:$f,$defs:$f,nullable:He.booleanAnd,oneOf:pO,anyOf:pO,allOf:He.arraysUnion,not:If,if:H7,then:He.skip,else:He.skip,dependencies:mO,dependentRequired:mO,dependentSchemas:$f,propertyNames:If,uniqueItems:He.booleanOr,contains:If};function If(t,e,r,i,s){r[t]=Xr(e,s)}function D7(t){let e=[[]];for(let r of t){let i=[];for(let s of e)for(let n of r)i.push([...s,n]);e=i}return e}function pO(t,e,r,i,s){if(e.length===1){r[t]=e[0];return}let n=D7(e),o=[];for(let a of n)try{let l=Xr(a,s);l!==void 0&&o.push(l)}catch(l){if(l instanceof Nf.MergeError)continue;throw l}r[t]=o}function F7(t,e){let{items:r,additionalItems:i}=t;return Array.isArray(r)?e<r.length?r[e]:i:r!==void 0?r:i}function M7(t,e,r,i,s){let n=0;for(let a of e)Array.isArray(a)&&(n=Math.max(n,a.length));if(n===0){r[t]=Xr(e,s);return}let o=[];for(let a=0;a<n;a++){let l=[];for(let c of i){let u=F7(c,a);u!==void 0&&l.push(u)}o[a]=Xr(l,s)}r[t]=o}function z7(t,e,r,i,s){let n=!1;for(let a of i)if(Array.isArray(a.items)){n=!0;break}if(!n){r[t]=Xr(e,s);return}let o=[];for(let a of i){let l=a.additionalItems;l===void 0&&!Array.isArray(a.items)&&(l=a.items),l!==void 0&&o.push(l)}r[t]=Xr(o,s)}function B7(t,e){let{properties:r,patternProperties:i,additionalProperties:s}=t;if(r?.[e]!==void 0)return r[e];for(let n of Object.keys(i??{}))if(new RegExp(n).test(e))return i[n];return s}function U7(t,e,r,i,s){let n={};for(let a of i){let l=a.properties??{};for(let c of Object.keys(l)){if(n[c]!==void 0)continue;let u=l[c];n[c]=[u];for(let f of i){if(a===f)continue;let p=B7(f,c);p!==void 0&&n[c].push(p)}}}let o={};for(let a of Object.keys(n)){let l=n[a];o[a]=Xr(l,s)}r[t]=o}function $f(t,e,r,i,s){let n={};for(let a of e)for(let l of Object.keys(a))n[l]===void 0&&(n[l]=[]),n[l].push(a[l]);let o={};for(let a of Object.keys(n)){let l=n[a],c=Xr(l,s);o[a]=c}r[t]=o}function H7(t,e,r,i,s){for(let n=0;n<i.length;n++){let o={if:i[n].if,then:i[n].then,else:i[n].else};if(o.if!==void 0){if(r.if===void 0){r.if=o.if,o.then!==void 0&&(r.then=o.then),o.else!==void 0&&(r.else=o.else);continue}r.then!==void 0&&(r.then=Xr([r.then,o],s)),r.else!==void 0&&(r.else=Xr([r.else,o],s))}}}function mO(t,e,r){let i={};for(let s of e)for(let n of Object.keys(s)){i[n]===void 0&&(i[n]=[]);let o=i[n];for(let a of s[n])o.includes(a)||o.push(a)}r[t]=i}function Xr(t,e){if(t.length===0)return{};if(t.length===1)return t[0];let r={},i={},s=!0;for(let n of t){if(n===!1)return!1;if(n!==!0){s=!1;for(let o of Object.keys(n))i[o]===void 0&&(i[o]=[]),i[o].push(n[o])}}if(s)return!0;for(let n of Object.keys(i)){let o=i[n];(e.resolvers[n]??e.defaultResolver)(n,o,r,t,e)}return r}function gO(t,e,r,i,s){let n=s.onConflict??"throw";if(e.length===1||n==="first"){r[t]=e[0];return}let o=!0;for(let a=1;a<e.length;a++)if(!j7(e[a],e[0])){o=!1;break}if(o){r[t]=e[0];return}if(n==="throw")throw new Nf.ResolverNotFoundError(t,e);if(n!=="skip")throw new Nf.InvalidOnConflictOptionError(n)}function V7(t,e={}){return e.defaultResolver===void 0&&(e.defaultResolver=gO),e.resolvers={...yO,...e.resolvers},Xr(t,e)}bO.exports={mergeSchemas:V7,keywordsResolvers:yO,defaultResolver:gO,...Nf}});var _O=_((she,wO)=>{"use strict";var{mergeSchemas:G7}=vO();function K7(t){return G7(t,{onConflict:"skip"})}wO.exports=K7});var SO=_((nhe,p0)=>{"use strict";function W7(t,e,r,i){let s="";e.validatorSchemasIds.size>0?(s+=`const Validator = require('fast-json-stringify/lib/validator')
`,s+=`const validatorState = ${JSON.stringify(i.getState())}
`,s+=`const validator = Validator.restoreFromState(validatorState)
`):s+=`const validator = null
`;let{schema:n,...o}=r.getState();return`
  'use strict'

  const Serializer = require('fast-json-stringify/lib/serializer')
  const serializerState = ${JSON.stringify(o)}
  const serializer = Serializer.restoreFromState(serializerState)

  ${s}

  module.exports = ${t.toString()}(validator, serializer)`}p0.exports=W7;p0.exports.dependencies={Serializer:Tu(),Validator:n0()}});var IO=_((ohe,So)=>{"use strict";var{RefResolver:J7}=yP(),Q7=Tu(),Y7=n0(),dn=sO(),EO=cO(),X7=_O(),Z7=/'/g,kf=2e4,RO="default",eJ=["floor","ceil","round","trunc"],TO=["default","json-stringify"],ol=0;function m0(t,e){if(!EO(t)){e?e=`"${e}" `:e="";let r=EO.errors[0],i=new Error(`${e}schema is invalid: data${r.instancePath} ${r.message}`);throw i.errors=m0.errors,i}}function al(t,e){let r=e.schema.$ref,i=r.indexOf("#");i===-1&&(i=r.length);let s=r.slice(0,i)||e.schemaId,n=r.slice(i)||"#",o=t.refResolver.getSchema(s,n);if(o===null)throw new Error(`Cannot find reference "${r}"`);let a=new dn(o,s,n);return o.$ref!==void 0?al(t,a):a}function qf(t,e){let r=t.refResolver.getSchema(e,"#");return new dn(r,e,"#")}function xO(t,e){return t.$id&&t.$id.charAt(0)!=="#"?t.$id:e}function y0(t,e){m0(t),e=e||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:e,refResolver:new J7,rootSchemaId:t.$id||`__fjs_root_${ol++}`,validatorSchemasIds:new Set,mergedSchemasIds:new Map},i=xO(t,r.rootSchemaId);if(r.refResolver.hasSchema(i)||r.refResolver.addSchema(t,r.rootSchemaId),e.schema)for(let u in e.schema){let f=e.schema[u],p=xO(f,u);r.refResolver.hasSchema(p)||(m0(f,u),r.refResolver.addSchema(f,u))}if(e.rounding&&!eJ.includes(e.rounding))throw new Error(`Unsupported integer rounding method ${e.rounding}`);if(e.largeArrayMechanism)if(TO.includes(e.largeArrayMechanism))RO=e.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${e.largeArrayMechanism}`);if(e.largeArraySize)if(typeof e.largeArraySize=="string"&&Number.isFinite(Number.parseInt(e.largeArraySize,10)))kf=Number.parseInt(e.largeArraySize,10);else if(typeof e.largeArraySize=="number"&&Number.isInteger(e.largeArraySize))kf=e.largeArraySize;else if(typeof e.largeArraySize=="bigint")kf=Number(e.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof e.largeArraySize} with value ${e.largeArraySize}`);let s=new dn(t,r.rootSchemaId),n=mr(r,s,"input"),o=`
    const JSON_STR_BEGIN_OBJECT = '{'
    const JSON_STR_END_OBJECT = '}'
    const JSON_STR_BEGIN_ARRAY = '['
    const JSON_STR_END_ARRAY = ']'
    const JSON_STR_COMMA = ','
    const JSON_STR_COLONS = ':'
    const JSON_STR_QUOTE = '"'
    const JSON_STR_EMPTY_OBJECT = JSON_STR_BEGIN_OBJECT + JSON_STR_END_OBJECT
    const JSON_STR_EMPTY_ARRAY = JSON_STR_BEGIN_ARRAY + JSON_STR_END_ARRAY
    const JSON_STR_EMPTY_STRING = JSON_STR_QUOTE + JSON_STR_QUOTE
    const JSON_STR_NULL = 'null'
  `;n==="json += anonymous0(input)"?o+=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:o+=`
    function main (input) {
      let json = ''
      ${n}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let a=new Q7(e),l=new Y7(e.ajv);for(let u of r.validatorSchemasIds){let f=r.refResolver.getSchema(u);l.addSchema(f,u);let p=r.refResolver.getSchemaDependencies(u);for(let[d,h]of Object.entries(p))l.addSchema(h,d)}if(e.debugMode&&(e.mode="debug"),e.mode==="debug")return{validator:l,serializer:a,code:`validator
serializer
${o}`,ajv:l.ajv};let c=new Function("validator","serializer",o);return e.mode==="standalone"?SO()(c,r,a,l):c(l,a)}var tJ=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],rJ=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],iJ=["maxLength","minLength","pattern"],sJ=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function nJ(t){for(let e of tJ)if(e in t)return"object";for(let e of rJ)if(e in t)return"array";for(let e of iJ)if(e in t)return"string";for(let e of sJ)if(e in t)return"number";return t.type}function oJ(t,e,r){let i=e.schema,s=Object.keys(i.properties||{}),n=`
    const propertiesKeys = ${JSON.stringify(s)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,o=e.getPropertyLocation("patternProperties"),a=o.schema;if(a!==void 0)for(let u in a){let f=o.getPropertyLocation(u);n+=`
        if (/${u.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${r}
          json += serializer.asString(key) + JSON_STR_COLONS
          ${mr(t,f,"value")}
          continue
        }
      `}let c=e.getPropertyLocation("additionalProperties").schema;if(c!==void 0)if(c===!0)n+=`
        ${r}
        json += serializer.asString(key) + JSON_STR_COLONS + JSON.stringify(value)
      `;else{let u=e.getPropertyLocation("additionalProperties");n+=`
        ${r}
        json += serializer.asString(key) + JSON_STR_COLONS
        ${mr(t,u,"value")}
      `}return n+=`
    }
  `,n}function aJ(t,e){let r=e.schema,i=e.getPropertyLocation("properties"),s=r.required||[],n=Object.keys(r.properties||{}).sort((c,u)=>{let f=s.includes(c),p=s.includes(u);return f===p?0:f?-1:1}),o=s.includes(n[0]),a=`let value
`;for(let c of s)if(!n.includes(c)){let u=JSON.stringify(c);a+=`if (obj[${u}] === undefined) throw new Error('${u.replace(/'/g,"\\'")} is required!')
`}a+=`let json = JSON_STR_BEGIN_OBJECT
`;let l="";o||(a+=`let addComma = false
`,l="!addComma && (addComma = true) || (json += JSON_STR_COMMA)");for(let c of n){let u=i.getPropertyLocation(c);u.schema.$ref&&(u=al(t,u));let f=JSON.stringify(c),p=u.schema.default,d=s.includes(c);a+=`
      value = obj[${f}]
      if (value !== undefined) {
        ${l}
        json += ${JSON.stringify(f+":")}
        ${mr(t,u,"value")}
      }`,p!==void 0?a+=` else {
        ${l}
        json += ${JSON.stringify(f+":"+JSON.stringify(p))}
      }
      `:d?a+=` else {
        throw new Error('${f.replace(/'/g,"\\'")} is required!')
      }
      `:a+=`
`,o&&(l="json += ','")}return(r.patternProperties||r.additionalProperties)&&(a+=oJ(t,e,l)),a+=`
    return json + JSON_STR_END_OBJECT
  `,a}function Lf(t,e,r){for(let o=0;o<r.length;o++){let a=r[o];a.schema.$ref&&(r[o]=al(t,a))}let i=[];for(let o of r){let a=PO(t,o.schema,o.schemaId);delete a.$id,i.push(a)}let s=X7(i),n=new dn(s,e);return t.refResolver.addSchema(s,e),n}function PO(t,e,r){let i=Array.isArray(e)?[]:{};e.$id!==void 0&&e.$id.charAt(0)!=="#"&&(r=e.$id);let s=t.mergedSchemasIds.get(e);s&&t.mergedSchemasIds.set(i,s);for(let n in e){let o=e[n];n==="$ref"&&typeof o=="string"&&o.charAt(0)==="#"&&(o=r+o),typeof o=="object"&&o!==null&&(o=PO(t,o,r)),i[n]=o}return i}function lJ(t){return`(${t} && typeof ${t}.toJSON === 'function')
    ? ${t}.toJSON()
    : ${t}
  `}function cJ(t,e){let r=e.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let i=CO(t);t.functionsNamesBySchema.set(r,i);let s=e.getSchemaRef();s.startsWith(t.rootSchemaId)&&(s=s.replace(t.rootSchemaId,""));let n=`
  `,o=r.nullable===!0;return n+=`
    // ${s}
    function ${i} (input) {
      const obj = ${lJ("input")}
      ${o?"":"if (obj === null) return JSON_STR_EMPTY_OBJECT"}

      ${aJ(t,e)}
    }
  `,t.functions.push(n),i}function uJ(t,e){let r=e.schema,i=e.getPropertyLocation("items");i.schema=i.schema||{},i.schema.$ref&&(i=al(t,i));let s=i.schema;if(t.functionsNamesBySchema.has(r))return t.functionsNamesBySchema.get(r);let n=CO(t);t.functionsNamesBySchema.set(r,n);let o=e.getSchemaRef();o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,""));let a=`
    function ${n} (obj) {
      // ${o}
  `,l=r.nullable===!0;if(a+=`
    ${l?"":"if (obj === null) return JSON_STR_EMPTY_ARRAY"}
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(s)&&(a+=`
      if (arrayLength > ${s.length}) {
        throw new Error(\`Item at ${s.length} does not match schema definition.\`)
      }
    `),RO==="json-stringify"&&(a+=`if (arrayLength >= ${kf}) return JSON.stringify(obj)
`),a+=`
    const arrayEnd = arrayLength - 1
    let value
    let json = ''
  `,Array.isArray(s)){for(let c=0;c<s.length;c++){let u=s[c];a+=`value = obj[${c}]`;let f=mr(t,i.getPropertyLocation(c),"value");a+=`
        if (${c} < arrayLength) {
          if (${AO(u.type,`[${c}]`)}) {
            ${f}
            if (${c} < arrayEnd) {
              json += JSON_STR_COMMA
            }
          } else {
            throw new Error(\`Item at ${c} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${s.length}; i < arrayLength; i++) {
          json += JSON.stringify(obj[i])
          if (i < arrayEnd) {
            json += JSON_STR_COMMA
          }
        }`)}else{let c=mr(t,i,"obj[i]");a+=`
      for (let i = 0; i < arrayLength; i++) {
        ${c}
        if (i < arrayEnd) {
          json += JSON_STR_COMMA
        }
      }`}return a+=`
    return JSON_STR_BEGIN_ARRAY + json + JSON_STR_END_ARRAY
  }`,t.functions.push(a),n}function AO(t,e){let r;switch(t){case"null":r="value === null";break;case"string":r=`typeof value === 'string' ||
      value === null ||
      value instanceof Date ||
      value instanceof RegExp ||
      (
        typeof value === "object" &&
        typeof value.toString === "function" &&
        value.toString !== Object.prototype.toString
      )`;break;case"integer":r="Number.isInteger(value)";break;case"number":r="Number.isFinite(value)";break;case"boolean":r="typeof value === 'boolean'";break;case"object":r="value && typeof value === 'object' && value.constructor === Object";break;case"array":r="Array.isArray(value)";break;default:Array.isArray(t)&&(r=`(${t.map(s=>AO(s,e)).join(" || ")})`)}return r}function CO(t){return"anonymous"+t.functionsCounter++}function fJ(t,e,r){let s=e.schema.type.sort(a=>a==="null"?-1:1),n="";s.forEach((a,l)=>{e.schema={...e.schema,type:a};let c=OO(t,e,r),u=l===0?"if":"else if";switch(a){case"null":n+=`
          ${u} (${r} === null)
            ${c}
          `;break;case"string":{n+=`
          ${u}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString
            )
          )
            ${c}
        `;break}case"array":{n+=`
          ${u}(Array.isArray(${r}))
            ${c}
        `;break}case"integer":{n+=`
          ${u}(Number.isInteger(${r}) || ${r} === null)
            ${c}
        `;break}default:{n+=`
          ${u}(typeof ${r} === "${a}" || ${r} === null)
            ${c}
        `;break}}});let o=e.getSchemaRef();return o.startsWith(t.rootSchemaId)&&(o=o.replace(t.rootSchemaId,"")),n+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,n}function OO(t,e,r){let i=e.schema;switch(i.type){case"null":return"json += JSON_STR_NULL";case"string":return i.format==="date-time"?`json += serializer.asDateTime(${r})`:i.format==="date"?`json += serializer.asDate(${r})`:i.format==="time"?`json += serializer.asTime(${r})`:i.format==="unsafe"?`json += serializer.asUnsafeString(${r})`:`
        if (typeof ${r} !== 'string') {
          if (${r} === null) {
            json += JSON_STR_EMPTY_STRING
          } else if (${r} instanceof Date) {
            json += JSON_STR_QUOTE + ${r}.toISOString() + JSON_STR_QUOTE
          } else if (${r} instanceof RegExp) {
            json += serializer.asString(${r}.source)
          } else {
            json += serializer.asString(${r}.toString())
          }
        } else {
          json += serializer.asString(${r})
        }
        `;case"integer":return`json += serializer.asInteger(${r})`;case"number":return`json += serializer.asNumber(${r})`;case"boolean":return`json += serializer.asBoolean(${r})`;case"object":return`json += ${cJ(t,e)}(${r})`;case"array":return`json += ${uJ(t,e)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${i.type} unsupported`)}}function dJ(t,e){let r=t.schema,i=r.type,s=Array.isArray(i)&&i.includes("null"),n="";return s&&(n+=`
      if (${e} === null) {
        json += JSON_STR_NULL
      } else {
    `),n+=`json += '${JSON.stringify(r.const).replace(Z7,"\\'")}'`,s&&(n+=`
      }
    `),n}function hJ(t,e,r){let i=e.schema,s=t.mergedSchemasIds.get(i);if(s){let u=qf(t,s);return mr(t,u,r)}s=`__fjs_merged_${ol++}`,t.mergedSchemasIds.set(i,s);let{allOf:n,...o}=e.schema,a=[new dn(o,e.schemaId,e.jsonPointer)],l=e.getPropertyLocation("allOf");for(let u=0;u<n.length;u++)a.push(l.getPropertyLocation(u));let c=Lf(t,s,a);return mr(t,c,r)}function pJ(t,e,r){t.validatorSchemasIds.add(e.schemaId);let s=e.schema.anyOf?"anyOf":"oneOf",{[s]:n,...o}=e.schema,a=new dn(o,e.schemaId,e.jsonPointer),l=e.getPropertyLocation(s),c="";for(let f=0;f<n.length;f++){let p=l.getPropertyLocation(f),d=p.schema,h=t.mergedSchemasIds.get(d),m=null;h?m=qf(t,h):(h=`__fjs_merged_${ol++}`,t.mergedSchemasIds.set(d,h),m=Lf(t,h,[a,p]));let v=mr(t,m,r),g=p.getSchemaRef();c+=`
      ${f===0?"if":"else if"}(validator.validate("${g}", ${r}))
        ${v}
    `}let u=e.getSchemaRef();return u.startsWith(t.rootSchemaId)&&(u=u.replace(t.rootSchemaId,"")),c+=`
    else throw new TypeError(\`The value of '${u}' does not match schema definition.\`)
  `,c}function mJ(t,e,r){t.validatorSchemasIds.add(e.schemaId);let{if:i,then:s,else:n,...o}=e.schema,a=new dn(o,e.schemaId,e.jsonPointer),c=e.getPropertyLocation("if").getSchemaRef(),u=e.getPropertyLocation("then"),f=t.mergedSchemasIds.get(s),p=null;if(f?p=qf(t,f):(f=`__fjs_merged_${ol++}`,t.mergedSchemasIds.set(s,f),p=Lf(t,f,[a,u])),!n)return`
      if (validator.validate("${c}", ${r})) {
        ${mr(t,p,r)}
      } else {
        ${mr(t,a,r)}
      }
    `;let d=e.getPropertyLocation("else"),h=t.mergedSchemasIds.get(n),m=null;return h?m=qf(t,h):(h=`__fjs_merged_${ol++}`,t.mergedSchemasIds.set(n,h),m=Lf(t,h,[a,d])),`
    if (validator.validate("${c}", ${r})) {
      ${mr(t,p,r)}
    } else {
      ${mr(t,m,r)}
    }
  `}function mr(t,e,r){let i=e.schema;if(typeof i=="boolean")return`json += JSON.stringify(${r})`;if(i.$ref&&(e=al(t,e),i=e.schema),i.allOf)return hJ(t,e,r);if(i.anyOf||i.oneOf)return pJ(t,e,r);if(i.if&&i.then)return mJ(t,e,r);if(i.type===void 0){let a=nJ(i);a&&(i.type=a)}let s="",n=i.type,o=i.nullable===!0;return o&&(s+=`
      if (${r} === null) {
        json += JSON_STR_NULL
      } else {
    `),i.const!==void 0?s+=dJ(e,r):Array.isArray(n)?s+=fJ(t,e,r):s+=OO(t,e,r),o&&(s+=`
      }
    `),s}So.exports=y0;So.exports.default=y0;So.exports.build=y0;So.exports.validLargeArrayMechanisms=TO;So.exports.restore=function({code:t,validator:e,serializer:r}){return Function.apply(null,["validator","serializer",t]).apply(null,[e,r])}});var NO=_((ahe,g0)=>{"use strict";var yJ=b0();function $O(t={readMode:!0}){if(t.readMode===!0&&typeof t.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(t.readMode!==!0&&typeof t.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(t.readMode===!0)return function(){return function(i){return t.restoreFunction(i)}};let e=yJ();return function(i,s={}){s.mode="standalone";let n=e(i,s);return function(o){let a=n(o);return t.storeFunction(o,a),new Function(a)}}}g0.exports=$O;g0.exports.default=$O});var b0=_((lhe,ll)=>{"use strict";var gJ=IO();function v0(){return function(e,r){let i=Object.assign({},r,{schema:e});return bJ.bind(null,i)}}function bJ(t,{schema:e}){return t.schema&&e.$id&&t.schema[e.$id]&&(t.schema={...t.schema},delete t.schema[e.$id]),gJ(e,t)}ll.exports=v0;ll.exports.default=v0;ll.exports.SerializerSelector=v0;ll.exports.StandaloneSerializer=NO()});var Gi=_(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.checkMetadata=void 0;var vJ=ce(),wJ={keyword:"metadata",schemaType:"object",code(t){kO(t);let{gen:e,schema:r,it:i}=t;if((0,vJ.alwaysValidSchema)(i,r))return;let s=e.name("valid");t.subschema({keyword:"metadata",jtdMetadata:!0},s),t.ok(s)}};function kO({it:t,keyword:e},r){if(t.jtdMetadata!==r)throw new Error(`JTD: "${e}" cannot be used in this schema location`)}cl.checkMetadata=kO;cl.default=wJ});var jf=_(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.hasRef=void 0;var qO=ln(),ul=re(),_J=Hi(),LO=Ar(),jO=og(),SJ=Gi(),EJ={keyword:"ref",schemaType:"string",code(t){(0,SJ.checkMetadata)(t);let{gen:e,data:r,schema:i,parentSchema:s,it:n}=t,{schemaEnv:{root:o}}=n,a=e.name("valid");s.nullable?(e.var(a,(0,ul._)`${r} === null`),e.if((0,ul.not)(a),l)):(e.var(a,!1),l()),t.ok(a);function l(){var f;let p=(f=o.schema.definitions)===null||f===void 0?void 0:f[i];if(!p)throw new _J.default(n.opts.uriResolver,"",i,`No definition ${i}`);w0(p)||!n.opts.inlineRefs?c(p):u(p)}function c(f){let p=qO.compileSchema.call(n.self,new qO.SchemaEnv({schema:f,root:o,schemaPath:`/definitions/${i}`})),d=(0,jO.getValidate)(t,p),h=e.const("_errs",LO.default.errors);(0,jO.callRef)(t,d,p,p.$async),e.assign(a,(0,ul._)`${h} === ${LO.default.errors}`)}function u(f){let p=e.scopeValue("schema",n.opts.code.source===!0?{ref:f,code:(0,ul.stringify)(f)}:{ref:f});t.subschema({schema:f,dataTypes:[],schemaPath:ul.nil,topSchemaRef:p,errSchemaPath:`/definitions/${i}`},a)}}};function w0(t){for(let e in t){let r;if(e==="ref"||typeof(r=t[e])=="object"&&w0(r))return!0}return!1}fl.hasRef=w0;fl.default=EJ});var S0=_(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});var xJ=/t|\s/i,RJ=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,TJ=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,PJ=[0,31,28,31,30,31,30,31,31,30,31,30,31];function FO(t,e){let r=t.split(xJ);return r.length===2&&DO(r[0])&&AJ(r[1])||e&&r.length===1&&DO(r[0])}_0.default=FO;function DO(t){let e=RJ.exec(t);if(!e)return!1;let r=+e[1],i=+e[2],s=+e[3];return i>=1&&i<=12&&s>=1&&(s<=PJ[i]||i===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function AJ(t){let e=TJ.exec(t);if(!e)return!1;let r=+e[1],i=+e[2],s=+e[3],n=+(e[4]||0),o=+(e[5]||0);return r<=23&&i<=59&&s<=59||r-n===23&&i-o===59&&s===60}FO.code='require("ajv/dist/runtime/timestamp").default'});var Eo=_(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.typeErrorParams=_s.typeErrorMessage=_s.typeError=void 0;var CJ=re();function OJ(t){return{message:e=>MO(e,t),params:e=>zO(e,t)}}_s.typeError=OJ;function MO({parentSchema:t},e){return t?.nullable?`must be ${e} or null`:`must be ${e}`}_s.typeErrorMessage=MO;function zO({parentSchema:t},e){return(0,CJ._)`{type: ${e}, nullable: ${!!t?.nullable}}`}_s.typeErrorParams=zO});var E0=_(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.intRange=void 0;var yr=re(),IJ=S0(),$J=ce(),NJ=Gi(),BO=Eo();xo.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var kJ={message:t=>(0,BO.typeErrorMessage)(t,t.schema),params:t=>(0,BO.typeErrorParams)(t,t.schema)};function qJ(t){let{gen:e,data:r,it:i}=t,{timestamp:s,allowDate:n}=i.opts;if(s==="date")return(0,yr._)`${r} instanceof Date `;let o=(0,$J.useFunc)(e,IJ.default),a=n?(0,yr._)`, true`:yr.nil,l=(0,yr._)`typeof ${r} == "string" && ${o}(${r}${a})`;return s==="string"?l:(0,yr.or)((0,yr._)`${r} instanceof Date`,l)}var LJ={keyword:"type",schemaType:"string",error:kJ,code(t){(0,NJ.checkMetadata)(t);let{data:e,schema:r,parentSchema:i,it:s}=t,n;switch(r){case"boolean":case"string":n=(0,yr._)`typeof ${e} == ${r}`;break;case"timestamp":{n=qJ(t);break}case"float32":case"float64":n=(0,yr._)`typeof ${e} == "number"`;break;default:{let o=r;if(n=(0,yr._)`typeof ${e} == "number" && isFinite(${e}) && !(${e} % 1)`,!s.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(n=(0,yr._)`${n} && ${e} >= 0`);else{let[a,l]=xo.intRange[o];n=(0,yr._)`${n} && ${e} >= ${a} && ${e} <= ${l}`}}}t.pass(i.nullable?(0,yr.or)((0,yr._)`${e} === null`,n):n)}};xo.default=LJ});var To=_(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.checkNullableObject=Ro.checkNullable=void 0;var Df=re();function UO({gen:t,data:e,parentSchema:r},i=Df.nil){let s=t.name("valid");return r.nullable?(t.let(s,(0,Df._)`${e} === null`),i=(0,Df.not)(s)):t.let(s,!1),[s,i]}Ro.checkNullable=UO;function jJ(t,e){let[r,i]=UO(t,e);return[r,(0,Df._)`${i} && typeof ${t.data} == "object" && !Array.isArray(${t.data})`]}Ro.checkNullableObject=jJ});var HO=_(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});var Ss=re(),DJ=Gi(),FJ=To(),MJ={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Ss._)`{allowedValues: ${t}}`},zJ={keyword:"enum",schemaType:"array",error:MJ,code(t){(0,DJ.checkMetadata)(t);let{gen:e,data:r,schema:i,schemaValue:s,parentSchema:n,it:o}=t;if(i.length===0)throw new Error("enum must have non-empty array");if(i.length!==new Set(i).size)throw new Error("enum items must be unique");let a,l=(0,Ss._)`typeof ${r} == "string"`;if(i.length>=o.opts.loopEnum){let u;[a,u]=(0,FJ.checkNullable)(t,l),e.if(u,c)}else{if(!Array.isArray(i))throw new Error("ajv implementation error");a=(0,Ss.and)(l,(0,Ss.or)(...i.map(u=>(0,Ss._)`${r} === ${u}`))),n.nullable&&(a=(0,Ss.or)((0,Ss._)`${r} === null`,a))}t.pass(a);function c(){e.forOf("v",s,u=>e.if((0,Ss._)`${a} = ${r} === ${u}`,()=>e.break()))}}};x0.default=zJ});var GO=_(R0=>{"use strict";Object.defineProperty(R0,"__esModule",{value:!0});var BJ=ce(),UJ=xt(),VO=re(),HJ=Gi(),VJ=To(),GJ=Eo(),KJ={keyword:"elements",schemaType:"object",error:(0,GJ.typeError)("array"),code(t){(0,HJ.checkMetadata)(t);let{gen:e,data:r,schema:i,it:s}=t;if((0,BJ.alwaysValidSchema)(s,i))return;let[n]=(0,VJ.checkNullable)(t);e.if((0,VO.not)(n),()=>e.if((0,VO._)`Array.isArray(${r})`,()=>e.assign(n,(0,UJ.validateArray)(t)),()=>t.error())),t.ok(n)}};R0.default=KJ});var P0=_(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.validateProperties=Es.error=void 0;var T0=xt(),KO=ce(),Ki=re(),WJ=Gi(),JJ=To(),WO=Eo(),Po;(function(t){t.Additional="additional",t.Missing="missing"})(Po||(Po={}));Es.error={message:t=>{let{params:e}=t;return e.propError?e.propError===Po.Additional?"must NOT have additional properties":`must have property '${e.missingProperty}'`:(0,WO.typeErrorMessage)(t,"object")},params:t=>{let{params:e}=t;return e.propError?e.propError===Po.Additional?(0,Ki._)`{error: ${e.propError}, additionalProperty: ${e.additionalProperty}}`:(0,Ki._)`{error: ${e.propError}, missingProperty: ${e.missingProperty}}`:(0,WO.typeErrorParams)(t,"object")}};var QJ={keyword:"properties",schemaType:"object",error:Es.error,code:JO};function JO(t){(0,WJ.checkMetadata)(t);let{gen:e,data:r,parentSchema:i,it:s}=t,{additionalProperties:n,nullable:o}=i;if(s.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(d())throw new Error("JTD: properties and optionalProperties have common members");let[a,l]=h("properties"),[c,u]=h("optionalProperties");if(l.length===0&&u.length===0&&n)return;let[f,p]=s.jtdDiscriminator===void 0?(0,JJ.checkNullableObject)(t,r):[e.let("valid",!1),!0];e.if(p,()=>e.assign(f,!0).block(()=>{m(l,"properties",!0),m(u,"optionalProperties"),n||g()})),t.pass(f);function d(){let b=i.properties,y=i.optionalProperties;if(!(b&&y))return!1;for(let E in b)if(Object.prototype.hasOwnProperty.call(y,E))return!0;return!1}function h(b){let y=i[b],E=y?(0,T0.allSchemaProperties)(y):[];if(s.jtdDiscriminator&&E.some(S=>S===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${b}`);let x=E.filter(S=>!(0,KO.alwaysValidSchema)(s,y[S]));return[E,x]}function m(b,y,E){let x=e.var("valid");for(let R of b)e.if((0,T0.propertyInData)(e,r,R,s.opts.ownProperties),()=>v(R,y,x),()=>S(R)),t.ok(x);function S(R){E?(e.assign(x,!1),t.error(!1,{propError:Po.Missing,missingProperty:R},{schemaPath:R})):e.assign(x,!0)}}function v(b,y,E){t.subschema({keyword:y,schemaProp:b,dataProp:b},E)}function g(){e.forIn("key",r,b=>{let y=w(b,a,"properties",s.jtdDiscriminator),E=w(b,c,"optionalProperties"),x=y===!0?E:E===!0?y:(0,Ki.and)(y,E);e.if(x,()=>{s.opts.removeAdditional?e.code((0,Ki._)`delete ${r}[${b}]`):(t.error(!1,{propError:Po.Additional,additionalProperty:b},{instancePath:b,parentSchema:!0}),s.opts.allErrors||e.break())})})}function w(b,y,E,x){let S;if(y.length>8){let R=(0,KO.schemaRefOrVal)(s,i[E],E);S=(0,Ki.not)((0,T0.isOwnProperty)(e,R,b)),x!==void 0&&(S=(0,Ki.and)(S,(0,Ki._)`${b} !== ${x}`))}else if(y.length||x!==void 0){let R=x===void 0?y:[x].concat(y);S=(0,Ki.and)(...R.map(T=>(0,Ki._)`${b} !== ${T}`))}else S=!0;return S}}Es.validateProperties=JO;Es.default=QJ});var YO=_(A0=>{"use strict";Object.defineProperty(A0,"__esModule",{value:!0});var QO=P0(),YJ={keyword:"optionalProperties",schemaType:"object",error:QO.error,code(t){t.parentSchema.properties||(0,QO.validateProperties)(t)}};A0.default=YJ});var ZO=_(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});var hn=re(),XJ=Gi(),ZJ=To(),XO=Eo(),Ff=Gg(),eQ={message:t=>{let{schema:e,params:r}=t;return r.discrError?r.discrError===Ff.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in mapping`:(0,XO.typeErrorMessage)(t,"object")},params:t=>{let{schema:e,params:r}=t;return r.discrError?(0,hn._)`{error: ${r.discrError}, tag: ${e}, tagValue: ${r.tag}}`:(0,XO.typeErrorParams)(t,"object")}},tQ={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:eQ,code(t){(0,XJ.checkMetadata)(t);let{gen:e,data:r,schema:i,parentSchema:s}=t,[n,o]=(0,ZJ.checkNullableObject)(t,r);e.if(o),a(),e.elseIf((0,hn.not)(n)),t.error(),e.endIf(),t.ok(n);function a(){let u=e.const("tag",(0,hn._)`${r}${(0,hn.getProperty)(i)}`);e.if((0,hn._)`${u} === undefined`),t.error(!1,{discrError:Ff.DiscrError.Tag,tag:u}),e.elseIf((0,hn._)`typeof ${u} == "string"`),l(u),e.else(),t.error(!1,{discrError:Ff.DiscrError.Tag,tag:u},{instancePath:i}),e.endIf()}function l(u){e.if(!1);for(let f in s.mapping)e.elseIf((0,hn._)`${u} === ${f}`),e.assign(n,c(f));e.else(),t.error(!1,{discrError:Ff.DiscrError.Mapping,tag:u},{instancePath:i,schemaPath:"mapping",parentSchema:!0}),e.endIf()}function c(u){let f=e.name("valid");return t.subschema({keyword:"mapping",schemaProp:u,jtdDiscriminator:i},f),f}}};C0.default=tQ});var tI=_(O0=>{"use strict";Object.defineProperty(O0,"__esModule",{value:!0});var eI=ce(),Mf=re(),rQ=Gi(),iQ=To(),sQ=Eo(),nQ={keyword:"values",schemaType:"object",error:(0,sQ.typeError)("object"),code(t){(0,rQ.checkMetadata)(t);let{gen:e,data:r,schema:i,it:s}=t,[n,o]=(0,iQ.checkNullableObject)(t,r);(0,eI.alwaysValidSchema)(s,i)?e.if((0,Mf.not)((0,Mf.or)(o,n)),()=>t.error()):(e.if(o),e.assign(n,a()),e.elseIf((0,Mf.not)(n)),t.error(),e.endIf()),t.ok(n);function a(){let l=e.name("valid");if(s.allErrors){let u=e.let("valid",!0);return c(()=>e.assign(u,!1)),u}return e.var(l,!0),c(()=>e.break()),l;function c(u){e.forIn("key",r,f=>{t.subschema({keyword:"values",dataProp:f,dataPropType:eI.Type.Str},l),e.if((0,Mf.not)(l),u)})}}}};O0.default=nQ});var rI=_(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0});var oQ=xt(),aQ={keyword:"union",schemaType:"array",trackErrors:!0,code:oQ.validateUnion,error:{message:"must match a schema in union"}};I0.default=aQ});var iI=_($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});var lQ=jf(),cQ=E0(),uQ=HO(),fQ=GO(),dQ=P0(),hQ=YO(),pQ=ZO(),mQ=tI(),yQ=rI(),gQ=Gi(),bQ=["definitions",lQ.default,cQ.default,uQ.default,fQ.default,dQ.default,hQ.default,pQ.default,mQ.default,yQ.default,gQ.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];$0.default=bQ});var aI=_(N0=>{"use strict";Object.defineProperty(N0,"__esModule",{value:!0});var Wi=t=>{let e={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return t&&(e.definitions={values:{ref:"schema"}}),e},vQ=t=>({optionalProperties:Wi(t)}),wQ=t=>({properties:{ref:{type:"string"}},optionalProperties:Wi(t)}),_Q=t=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:Wi(t)}),SQ=t=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:Wi(t)}),EQ=t=>({properties:{elements:{ref:"schema"}},optionalProperties:Wi(t)}),nI=t=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...Wi(t)}}),oI=t=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...Wi(t)}}),xQ=t=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[nI(!1),oI(!1)]}}}},optionalProperties:Wi(t)}),RQ=t=>({properties:{values:{ref:"schema"}},optionalProperties:Wi(t)}),sI=t=>({metadata:{union:[vQ,wQ,_Q,SQ,EQ,nI,oI,xQ,RQ].map(e=>e(t))}}),TQ={definitions:{schema:sI(!1)},...sI(!0)};N0.default=TQ});var k0=_(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.jtdForms=void 0;zf.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var cI=_(L0=>{"use strict";Object.defineProperty(L0,"__esModule",{value:!0});var q0=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,PQ={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function lI(t){return q0.lastIndex=0,'"'+(q0.test(t)?t.replace(q0,e=>{let r=PQ[e];return typeof r=="string"?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):t)+'"'}L0.default=lI;lI.code='require("ajv/dist/runtime/quote").default'});var mI=_(D0=>{"use strict";Object.defineProperty(D0,"__esModule",{value:!0});var AQ=k0(),fI=ln(),ye=re(),CQ=Hi(),Le=Ar(),OQ=xt(),IQ=jf(),$Q=ce(),NQ=cI(),kQ={elements:LQ,values:jQ,discriminator:DQ,properties:uI,optionalProperties:uI,enum:dl,type:FQ,ref:zQ};function dI(t,e){let r=fI.getCompilingSchema.call(this,t);if(r)return r;let{es5:i,lines:s}=this.opts.code,{ownProperties:n}=this.opts,o=new ye.CodeGen(this.scope,{es5:i,lines:s,ownProperties:n}),a=o.scopeName("serialize"),l={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:Le.default.data},c;try{this._compilations.add(t),t.serializeName=a,o.func(a,Le.default.data,!1,()=>{o.let(Le.default.json,(0,ye.str)``),hl(l),o.return(Le.default.json)}),o.optimize(this.opts.code.optimize);let u=o.toString();c=`${o.scopeRefs(Le.default.scope)}return ${u}`;let p=new Function(`${Le.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:p}),t.serialize=p}catch(u){throw c&&this.logger.error("Error compiling serializer, function code:",c),delete t.serialize,delete t.serializeName,u}finally{this._compilations.delete(t)}return t}D0.default=dI;function hl(t){let e;for(let r of AQ.jtdForms)if(r in t.schema){e=r;break}qQ(t,e?kQ[e]:UQ)}function qQ(t,e){let{gen:r,schema:i,data:s}=t;if(!i.nullable)return e(t);r.if((0,ye._)`${s} === undefined || ${s} === null`,()=>r.add(Le.default.json,(0,ye._)`"null"`),()=>e(t))}function LQ(t){let{gen:e,schema:r,data:i}=t;e.add(Le.default.json,(0,ye.str)`[`);let s=e.let("first",!0);e.forOf("el",i,n=>{j0(t,s),hl({...t,schema:r.elements,data:n})}),e.add(Le.default.json,(0,ye.str)`]`)}function jQ(t){let{gen:e,schema:r,data:i}=t;e.add(Le.default.json,(0,ye.str)`{`);let s=e.let("first",!0);e.forIn("key",i,n=>hI(t,n,r.values,s)),e.add(Le.default.json,(0,ye.str)`}`)}function hI(t,e,r,i){let{gen:s,data:n}=t;j0(t,i),dl({...t,data:e}),s.add(Le.default.json,(0,ye.str)`:`);let o=s.const("value",(0,ye._)`${n}${(0,ye.getProperty)(e)}`);hl({...t,schema:r,data:o})}function DQ(t){let{gen:e,schema:r,data:i}=t,{discriminator:s}=r;e.add(Le.default.json,(0,ye.str)`{${JSON.stringify(s)}:`);let n=e.const("tag",(0,ye._)`${i}${(0,ye.getProperty)(s)}`);dl({...t,data:n}),e.if(!1);for(let o in r.mapping){e.elseIf((0,ye._)`${n} === ${o}`);let a=r.mapping[o];pI({...t,schema:a},s)}e.endIf(),e.add(Le.default.json,(0,ye.str)`}`)}function uI(t){let{gen:e}=t;e.add(Le.default.json,(0,ye.str)`{`),pI(t),e.add(Le.default.json,(0,ye.str)`}`)}function pI(t,e){let{gen:r,schema:i,data:s}=t,{properties:n,optionalProperties:o}=i,a=p(n),l=p(o),c=d(a.concat(l)),u=!e,f;for(let g of a)u?u=!1:r.add(Le.default.json,(0,ye.str)`,`),m(g,n[g],h(g));u&&(f=r.let("first",!0));for(let g of l){let w=h(g);r.if((0,ye.and)((0,ye._)`${w} !== undefined`,(0,OQ.isOwnProperty)(r,s,g)),()=>{j0(t,f),m(g,o[g],w)})}i.additionalProperties&&r.forIn("key",s,g=>r.if(v(g,c),()=>hI(t,g,{},f)));function p(g){return g?Object.keys(g):[]}function d(g){if(e&&g.push(e),new Set(g).size!==g.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return g}function h(g){return r.const("value",(0,ye._)`${s}${(0,ye.getProperty)(g)}`)}function m(g,w,b){r.add(Le.default.json,(0,ye.str)`${JSON.stringify(g)}:`),hl({...t,schema:w,data:b})}function v(g,w){return w.length?(0,ye.and)(...w.map(b=>(0,ye._)`${g} !== ${b}`)):!0}}function FQ(t){let{gen:e,schema:r,data:i}=t;switch(r.type){case"boolean":e.add(Le.default.json,(0,ye._)`${i} ? "true" : "false"`);break;case"string":dl(t);break;case"timestamp":e.if((0,ye._)`${i} instanceof Date`,()=>e.add(Le.default.json,(0,ye._)`'"' + ${i}.toISOString() + '"'`),()=>dl(t));break;default:MQ(t)}}function dl({gen:t,data:e}){t.add(Le.default.json,(0,ye._)`${(0,$Q.useFunc)(t,NQ.default)}(${e})`)}function MQ({gen:t,data:e}){t.add(Le.default.json,(0,ye._)`"" + ${e}`)}function zQ(t){let{gen:e,self:r,data:i,definitions:s,schema:n,schemaEnv:o}=t,{ref:a}=n,l=s[a];if(!l)throw new CQ.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,IQ.hasRef)(l))return hl({...t,schema:l});let{root:c}=o,u=dI.call(r,new fI.SchemaEnv({schema:l,root:c}),s);e.add(Le.default.json,(0,ye._)`${BQ(e,u)}(${i})`)}function BQ(t,e){return e.serialize?t.scopeValue("serialize",{ref:e.serialize}):(0,ye._)`${t.scopeValue("wrapper",{ref:e})}.serialize`}function UQ({gen:t,data:e}){t.add(Le.default.json,(0,ye._)`JSON.stringify(${e})`)}function j0({gen:t},e){e?t.if(e,()=>t.assign(e,!1),()=>t.add(Le.default.json,(0,ye.str)`,`)):t.add(Le.default.json,(0,ye.str)`,`)}});var gI=_(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.parseJsonString=Rs.parseJsonNumber=Rs.parseJson=void 0;var HQ=/position\s(\d+)(?: \(line \d+ column \d+\))?$/;function Ji(t,e){let r;Ji.message=void 0;let i;e&&(t=t.slice(e));try{return Ji.position=e+t.length,JSON.parse(t)}catch(s){if(i=HQ.exec(s.message),!i){Ji.message="unexpected end";return}r=+i[1];let n=t[r];t=t.slice(0,r),Ji.position=e+r;try{return JSON.parse(t)}catch{Ji.message=`unexpected token ${n}`;return}}}Rs.parseJson=Ji;Ji.message=void 0;Ji.position=0;Ji.code='require("ajv/dist/runtime/parseJson").parseJson';function Qi(t,e,r){let i="",s;if(Qi.message=void 0,t[e]==="-"&&(i+="-",e++),t[e]==="0")i+="0",e++;else if(!n(r)){o();return}if(r)return Qi.position=e,+i;if(t[e]==="."&&(i+=".",e++,!n())){o();return}if(s=t[e],(s==="e"||s==="E")&&(i+="e",e++,s=t[e],(s==="+"||s==="-")&&(i+=s,e++),!n())){o();return}return Qi.position=e,+i;function n(a){let l=!1;for(;s=t[e],s>="0"&&s<="9"&&(a===void 0||a-- >0);)l=!0,i+=s,e++;return l}function o(){Qi.position=e,Qi.message=e<t.length?`unexpected token ${t[e]}`:"unexpected end"}}Rs.parseJsonNumber=Qi;Qi.message=void 0;Qi.position=0;Qi.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var yI={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},VQ=97,GQ=48;function xs(t,e){let r="",i;for(xs.message=void 0;i=t[e++],i!=='"';)if(i==="\\")if(i=t[e],i in yI)r+=yI[i],e++;else if(i==="u"){e++;let n=4,o=0;for(;n--;){if(o<<=4,i=t[e],i===void 0){s("unexpected end");return}if(i=i.toLowerCase(),i>="a"&&i<="f")o+=i.charCodeAt(0)-VQ+10;else if(i>="0"&&i<="9")o+=i.charCodeAt(0)-GQ;else{s(`unexpected token ${i}`);return}e++}r+=String.fromCharCode(o)}else{s(`unexpected token ${i}`);return}else if(i===void 0){s("unexpected end");return}else if(i.charCodeAt(0)>=32)r+=i;else{s(`unexpected token ${i}`);return}return xs.position=e,r;function s(n){xs.position=e,xs.message=n}}Rs.parseJsonString=xs;xs.message=void 0;xs.position=0;xs.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var AI=_(G0=>{"use strict";Object.defineProperty(G0,"__esModule",{value:!0});var KQ=k0(),_I=ln(),ee=re(),WQ=Hi(),me=Ar(),JQ=xt(),QQ=jf(),YQ=E0(),z0=gI(),SI=ce(),XQ=S0(),ZQ={elements:iY,values:sY,discriminator:oY,properties:bI,optionalProperties:bI,enum:lY,type:aY,ref:cY};function EI(t,e){let r=_I.getCompilingSchema.call(this,t);if(r)return r;let{es5:i,lines:s}=this.opts.code,{ownProperties:n}=this.opts,o=new ee.CodeGen(this.scope,{es5:i,lines:s,ownProperties:n}),a=o.scopeName("parse"),l={self:this,gen:o,schema:t.schema,schemaEnv:t,definitions:e,data:me.default.data,parseName:a,char:o.name("c")},c;try{this._compilations.add(t),t.parseName=a,eY(l),o.optimize(this.opts.code.optimize);let u=o.toString();c=`${o.scopeRefs(me.default.scope)}return ${u}`;let p=new Function(`${me.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:p}),t.parse=p}catch(u){throw c&&this.logger.error("Error compiling parser, function code:",c),delete t.parse,delete t.parseName,u}finally{this._compilations.delete(t)}return t}G0.default=EI;var M0=(0,ee._)`undefined`;function eY(t){let{gen:e,parseName:r,char:i}=t;e.func(r,(0,ee._)`${me.default.json}, ${me.default.jsonPos}, ${me.default.jsonPart}`,!1,()=>{e.let(me.default.data),e.let(i),e.assign((0,ee._)`${r}.message`,M0),e.assign((0,ee._)`${r}.position`,M0),e.assign(me.default.jsonPos,(0,ee._)`${me.default.jsonPos} || 0`),e.const(me.default.jsonLen,(0,ee._)`${me.default.json}.length`),Bf(t),V0(t),e.if(me.default.jsonPart,()=>{e.assign((0,ee._)`${r}.position`,me.default.jsonPos),e.return(me.default.data)}),e.if((0,ee._)`${me.default.jsonPos} === ${me.default.jsonLen}`,()=>e.return(me.default.data)),Ao(t)})}function Bf(t){let e;for(let r of KQ.jtdForms)if(r in t.schema){e=r;break}e?rY(t,ZQ[e]):U0(t)}var tY=wI(!0,wI(!1,Ao));function rY(t,e){let{gen:r,schema:i,data:s}=t;if(!i.nullable)return e(t);pl(t,"null",e,()=>r.assign(s,null))}function iY(t){let{gen:e,schema:r,data:i}=t;gi(t,"[");let s=e.let("i",0);e.assign(i,(0,ee._)`[]`),B0(t,"]",()=>{let n=e.let("el");Bf({...t,schema:r.elements,data:n}),e.assign((0,ee._)`${i}[${s}++]`,n)})}function sY(t){let{gen:e,schema:r,data:i}=t;gi(t,"{"),e.assign(i,(0,ee._)`{}`),B0(t,"}",()=>nY(t,r.values))}function B0(t,e,r){xI(t,e,r),gi(t,e)}function xI(t,e,r){let{gen:i}=t;i.for((0,ee._)`;${me.default.jsonPos}<${me.default.jsonLen} && ${Uf(1)}!==${e};`,()=>{r(),pl(t,",",()=>i.break(),s)});function s(){pl(t,e,()=>{},Ao)}}function nY(t,e){let{gen:r}=t,i=r.let("key");pn({...t,data:i}),gi(t,":"),TI(t,i,e)}function oY(t){let{gen:e,data:r,schema:i}=t,{discriminator:s,mapping:n}=i;gi(t,"{"),e.assign(r,(0,ee._)`{}`);let o=e.const("pos",me.default.jsonPos),a=e.let("value"),l=e.let("tag");xI(t,"}",()=>{let c=e.let("key");pn({...t,data:c}),gi(t,":"),e.if((0,ee._)`${c} === ${s}`,()=>{pn({...t,data:l}),e.assign((0,ee._)`${r}[${c}]`,l),e.break()},()=>U0({...t,data:a}))}),e.assign(me.default.jsonPos,o),e.if((0,ee._)`${l} === undefined`),Yi(t,(0,ee.str)`discriminator tag not found`);for(let c in n)e.elseIf((0,ee._)`${l} === ${c}`),RI({...t,schema:n[c]},s);e.else(),Yi(t,(0,ee.str)`discriminator value not in schema`),e.endIf()}function bI(t){let{gen:e,data:r}=t;gi(t,"{"),e.assign(r,(0,ee._)`{}`),RI(t)}function RI(t,e){let{gen:r,schema:i,data:s}=t,{properties:n,optionalProperties:o,additionalProperties:a}=i;if(B0(t,"}",()=>{let l=r.let("key");if(pn({...t,data:l}),gi(t,":"),r.if(!1),vI(t,l,n),vI(t,l,o),e){r.elseIf((0,ee._)`${l} === ${e}`);let c=r.let("tag");pn({...t,data:c})}r.else(),a?U0({...t,data:(0,ee._)`${s}[${l}]`}):Yi(t,(0,ee.str)`property ${l} not allowed`),r.endIf()}),n){let l=(0,JQ.hasPropFunc)(r),c=(0,ee.and)(...Object.keys(n).map(u=>(0,ee._)`${l}.call(${s}, ${u})`));r.if((0,ee.not)(c),()=>Yi(t,(0,ee.str)`missing required properties`))}}function vI(t,e,r={}){let{gen:i}=t;for(let s in r)i.elseIf((0,ee._)`${e} === ${s}`),TI(t,e,r[s])}function TI(t,e,r){Bf({...t,schema:r,data:(0,ee._)`${t.data}[${e}]`})}function aY(t){let{gen:e,schema:r,data:i,self:s}=t;switch(r.type){case"boolean":tY(t);break;case"string":pn(t);break;case"timestamp":{pn(t);let n=(0,SI.useFunc)(e,XQ.default),{allowDate:o,parseDate:a}=s.opts,l=o?(0,ee._)`!${n}(${i}, true)`:(0,ee._)`!${n}(${i})`,c=a?(0,ee.or)(l,(0,ee._)`(${i} = new Date(${i}), false)`,(0,ee._)`isNaN(${i}.valueOf())`):l;e.if(c,()=>Yi(t,(0,ee.str)`invalid timestamp`));break}case"float32":case"float64":F0(t);break;default:{let n=r.type;if(!s.opts.int32range&&(n==="int32"||n==="uint32"))F0(t,16),n==="uint32"&&e.if((0,ee._)`${i} < 0`,()=>Yi(t,(0,ee.str)`integer out of range`));else{let[o,a,l]=YQ.intRange[n];F0(t,l),e.if((0,ee._)`${i} < ${o} || ${i} > ${a}`,()=>Yi(t,(0,ee.str)`integer out of range`))}}}}function pn(t){gi(t,'"'),H0(t,z0.parseJsonString)}function lY(t){let{gen:e,data:r,schema:i}=t,s=i.enum;gi(t,'"'),e.if(!1);for(let n of s){let o=JSON.stringify(n).slice(1);e.elseIf((0,ee._)`${Uf(o.length)} === ${o}`),e.assign(r,(0,ee.str)`${n}`),e.add(me.default.jsonPos,o.length)}e.else(),Ao(t),e.endIf()}function F0(t,e){let{gen:r}=t;V0(t),r.if((0,ee._)`"-0123456789".indexOf(${Uf(1)}) < 0`,()=>Ao(t),()=>H0(t,z0.parseJsonNumber,e))}function wI(t,e){return r=>{let{gen:i,data:s}=r;pl(r,`${t}`,()=>e(r),()=>i.assign(s,t))}}function cY(t){let{gen:e,self:r,definitions:i,schema:s,schemaEnv:n}=t,{ref:o}=s,a=i[o];if(!a)throw new WQ.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,QQ.hasRef)(a))return Bf({...t,schema:a});let{root:l}=n,c=EI.call(r,new _I.SchemaEnv({schema:a,root:l}),i);PI(t,uY(e,c),!0)}function uY(t,e){return e.parse?t.scopeValue("parse",{ref:e.parse}):(0,ee._)`${t.scopeValue("wrapper",{ref:e})}.parse`}function U0(t){H0(t,z0.parseJson)}function H0(t,e,r){PI(t,(0,SI.useFunc)(t.gen,e),r)}function PI(t,e,r){let{gen:i,data:s}=t;i.assign(s,(0,ee._)`${e}(${me.default.json}, ${me.default.jsonPos}${r?(0,ee._)`, ${r}`:ee.nil})`),i.assign(me.default.jsonPos,(0,ee._)`${e}.position`),i.if((0,ee._)`${s} === undefined`,()=>Yi(t,(0,ee._)`${e}.message`))}function gi(t,e){pl(t,e,Ao)}function pl(t,e,r,i){let{gen:s}=t,n=e.length;V0(t),s.if((0,ee._)`${Uf(n)} === ${e}`,()=>{s.add(me.default.jsonPos,n),i?.(t)},()=>r(t))}function V0({gen:t,char:e}){t.code((0,ee._)`while((${e}=${me.default.json}[${me.default.jsonPos}],${e}===" "||${e}==="\\n"||${e}==="\\r"||${e}==="\\t"))${me.default.jsonPos}++;`)}function Uf(t){return t===1?(0,ee._)`${me.default.json}[${me.default.jsonPos}]`:(0,ee._)`${me.default.json}.slice(${me.default.jsonPos}, ${me.default.jsonPos}+${t})`}function Ao(t){Yi(t,(0,ee._)`"unexpected token " + ${me.default.json}[${me.default.jsonPos}]`)}function Yi({gen:t,parseName:e},r){t.assign((0,ee._)`${e}.message`,r),t.assign((0,ee._)`${e}.position`,me.default.jsonPos),t.return(M0)}});var J0=_((Be,W0)=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.MissingRefError=Be.ValidationError=Be.CodeGen=Be.Name=Be.nil=Be.stringify=Be.str=Be._=Be.KeywordCxt=Be.Ajv=void 0;var fY=sg(),dY=iI(),hY=aI(),pY=mI(),mY=AI(),K0="JTD-meta-schema",Co=class extends fY.default{constructor(e={}){super({...e,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(dY.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(hY.default,K0,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(K0)?K0:void 0)}compileSerializer(e){let r=this._addSchema(e);return r.serialize||this._compileSerializer(r)}compileParser(e){let r=this._addSchema(e);return r.parse||this._compileParser(r)}_compileSerializer(e){if(pY.default.call(this,e,e.schema.definitions||{}),!e.serialize)throw new Error("ajv implementation error");return e.serialize}_compileParser(e){if(mY.default.call(this,e,e.schema.definitions||{}),!e.parse)throw new Error("ajv implementation error");return e.parse}};Be.Ajv=Co;W0.exports=Be=Co;W0.exports.Ajv=Co;Object.defineProperty(Be,"__esModule",{value:!0});Be.default=Co;var yY=fo();Object.defineProperty(Be,"KeywordCxt",{enumerable:!0,get:function(){return yY.KeywordCxt}});var Oo=re();Object.defineProperty(Be,"_",{enumerable:!0,get:function(){return Oo._}});Object.defineProperty(Be,"str",{enumerable:!0,get:function(){return Oo.str}});Object.defineProperty(Be,"stringify",{enumerable:!0,get:function(){return Oo.stringify}});Object.defineProperty(Be,"nil",{enumerable:!0,get:function(){return Oo.nil}});Object.defineProperty(Be,"Name",{enumerable:!0,get:function(){return Oo.Name}});Object.defineProperty(Be,"CodeGen",{enumerable:!0,get:function(){return Oo.CodeGen}});var gY=Ha();Object.defineProperty(Be,"ValidationError",{enumerable:!0,get:function(){return gY.default}});var bY=Hi();Object.defineProperty(Be,"MissingRefError",{enumerable:!0,get:function(){return bY.default}})});var Q0=_((Che,CI)=>{"use strict";var vY=df();CI.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:vY,addUsedSchema:!1,allErrors:!1})});var $I=_((Ohe,II)=>{"use strict";var wY=Af().default,_Y=J0(),OI=Q0(),Y0=class{constructor(e,r){r.mode==="JTD"?this.ajv=new _Y(Object.assign({},OI,r.customOptions)):this.ajv=new wY(Object.assign({},OI,r.customOptions));let i=!0;if(r.plugins&&r.plugins.length>0)for(let n of r.plugins)Array.isArray(n)?(i=i&&n[0].name!=="formatsPlugin",n[0](this.ajv,n[1])):(i=i&&n.name!=="formatsPlugin",n(this.ajv));i&&i0()(this.ajv),r.onCreate?.(this.ajv);let s=Object.values(e);for(let n of s)this.ajv.addSchema(n)}buildValidatorFunction({schema:e}){if(e.$id){let r=this.ajv.getSchema(e.$id);if(r)return r}return this.ajv.compile(e)}};II.exports=Y0});var kI=_((Ihe,NI)=>{"use strict";var SY=J0(),EY=Q0(),X0=class{constructor(e,r){this.ajv=new SY(Object.assign({},EY,r))}buildSerializerFunction({schema:e}){return this.ajv.compileSerializer(e)}};NI.exports=X0});var jI=_((yl,LI)=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});var ml=Yu(),Zr=io();function qI(t,e){if(!t.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=t.scope.opts;return typeof e=="function"?s(e.source):e!==void 0?n(e,i):n(t.schemas,a=>a.meta?void 0:t.compile(a.schema));function i(a){let l=t.getSchema(a);if(!l)throw new Error(`moduleCode: no schema with id ${a}`);return l}function s(a){let l={},c=a?.validateName,u=o(l,a);return t.opts.code.esm?`"use strict";${r}export const validate = ${c};${r}export default ${c};${r}${u}`:`"use strict";${r}module.exports = ${c};${r}module.exports.default = ${c};${r}${u}`}function n(a,l){var c;let u={},f=(0,Zr._)`"use strict";`;for(let p in a){let d=l(a[p]);if(d){let h=o(u,d.source),m=t.opts.code.esm?(0,Zr._)`export const ${(0,Zr.getEsmExportName)(p)}`:(0,Zr._)`exports${(0,Zr.getProperty)(p)}`;f=(0,Zr._)`${f}${r}${m} = ${(c=d.source)===null||c===void 0?void 0:c.validateName};${r}${h}`}}return`${f}`}function o(a,l){if(!l)throw new Error('moduleCode: function does not have "source" property');if(p(l.validateName)===ml.UsedValueState.Completed)return Zr.nil;d(l.validateName,ml.UsedValueState.Started);let c=t.scope.scopeCode(l.scopeValues,a,f),u=new Zr._Code(`${c}${r}${l.validateCode}`);return l.evaluated?(0,Zr._)`${u}${l.validateName}.evaluated = ${l.evaluated};${r}`:u;function f(h){var m;let v=(m=h.value)===null||m===void 0?void 0:m.ref;if(h.prefix==="validate"&&typeof v=="function")return o(a,v.source);if((h.prefix==="root"||h.prefix==="wrapper")&&typeof v=="object"){let{validate:g,validateName:w}=v;if(!w)throw new Error("ajv internal error");let b=t.opts.code.es5?ml.varKinds.var:ml.varKinds.const,y=(0,Zr._)`${b} ${h} = {validate: ${w}};`;if(p(w)===ml.UsedValueState.Started)return y;let E=o(a,g?.source);return(0,Zr._)`${y}${r}${E}`}}function p(h){var m;return(m=a[h.prefix])===null||m===void 0?void 0:m.get(h)}function d(h,m){let{prefix:v}=h;(a[v]=a[v]||new Map).set(h,m)}}}LI.exports=yl=qI;Object.defineProperty(yl,"__esModule",{value:!0});yl.default=qI});var MI=_(($he,FI)=>{"use strict";var DI=Z0(),xY=jI().default;function RY(t={readMode:!0}){if(t.readMode===!0&&!t.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(t.readMode!==!0&&!t.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(t.readMode===!0)return function(){return function(i){return t.restoreFunction(i)}};let e=DI();return function(i,s={}){(!s.customOptions||!s.customOptions.code)&&(s.customOptions=Object.assign({},s.customOptions,{code:{source:!0}}));let n=e(i,s);return function(o){let a=n(o),l=xY(n[DI.AjvReference].ajv,a);return t.storeFunction(o,l),a}}}FI.exports=RY});var Z0=_((Nhe,Io)=>{"use strict";var BI=Symbol.for("fastify.ajv-compiler.reference"),TY=$I(),PY=kI();function eb(t){let e=new Map,r=new Map;return t&&t.jtdSerializer===!0?function(s,n){let o=zI({},n);if(r.has(o))return r.get(o);let a=new PY(s,n),l=a.buildSerializerFunction.bind(a);return r.set(o,l),l}:function(s,n){let o=zI(s,n.customOptions);if(e.has(o))return e.get(o);let a=new TY(s,n),l=a.buildValidatorFunction.bind(a);return e.set(o,l),n.customOptions.code!==void 0&&(l[BI]=a),l}}function zI(t,e){let r=JSON.stringify(t),i=JSON.stringify(e);return`${r}${i}`}Io.exports=eb;Io.exports.default=eb;Io.exports.AjvCompiler=eb;Io.exports.AjvReference=BI;Io.exports.StandaloneValidator=MI()});var tb=_((khe,UI)=>{"use strict";var{buildSchemas:AY}=Ea(),CY=b0(),OY=Z0();function IY(t,e){if(t)return new $o(t,e);let r=Object.assign({buildValidator:null,buildSerializer:null},e?.compilersFactory);r.buildValidator||(r.buildValidator=OY()),r.buildSerializer||(r.buildSerializer=CY());let i={bucket:e&&e.bucket||AY,compilersFactory:r,isCustomValidatorCompiler:typeof e?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof e?.compilersFactory?.buildValidator=="function"};return new $o(void 0,i)}var $o=class{constructor(e,r){this.opts=r||e?.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,e?(this.schemaBucket=this.opts.bucket(e.getSchemas()),this.validatorCompiler=e.getValidatorCompiler(),this.serializerCompiler=e.getSerializerCompiler(),this.isCustomValidatorCompiler=e.isCustomValidatorCompiler,this.isCustomSerializerCompiler=e.isCustomSerializerCompiler,this.parent=e):(this.schemaBucket=this.opts.bucket(),this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1)}add(e){return this.addedSchemas=!0,this.schemaBucket.add(e)}getSchema(e){return this.schemaBucket.getSchema(e)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildValidator:()=>e}),this.validatorCompiler=e,this.isCustomValidatorCompiler=!0}setSerializerCompiler(e){this.compilersFactory=Object.assign({},this.compilersFactory,{buildSerializer:()=>e}),this.serializerCompiler=e,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(e){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),e.ajv))}setupSerializer(e){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),e.serializerOpts))}};$o.buildSchemaController=IY;UI.exports=$o});var gl=_((qhe,HI)=>{"use strict";var $Y="2.0.0",NY=Number.MAX_SAFE_INTEGER||9007199254740991,kY=16,qY=250,LY=["major","premajor","minor","preminor","patch","prepatch","prerelease"];HI.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:kY,MAX_SAFE_BUILD_LENGTH:qY,MAX_SAFE_INTEGER:NY,RELEASE_TYPES:LY,SEMVER_SPEC_VERSION:$Y,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var bl=_((Lhe,VI)=>{"use strict";var jY=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};VI.exports=jY});var No=_((bi,GI)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:rb,MAX_SAFE_BUILD_LENGTH:DY,MAX_LENGTH:FY}=gl(),MY=bl();bi=GI.exports={};var zY=bi.re=[],BY=bi.safeRe=[],H=bi.src=[],UY=bi.safeSrc=[],V=bi.t={},HY=0,ib="[a-zA-Z0-9-]",VY=[["\\s",1],["\\d",FY],[ib,DY]],GY=t=>{for(let[e,r]of VY)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},oe=(t,e,r)=>{let i=GY(e),s=HY++;MY(t,s,e),V[t]=s,H[s]=e,UY[s]=i,zY[s]=new RegExp(e,r?"g":void 0),BY[s]=new RegExp(i,r?"g":void 0)};oe("NUMERICIDENTIFIER","0|[1-9]\\d*");oe("NUMERICIDENTIFIERLOOSE","\\d+");oe("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${ib}*`);oe("MAINVERSION",`(${H[V.NUMERICIDENTIFIER]})\\.(${H[V.NUMERICIDENTIFIER]})\\.(${H[V.NUMERICIDENTIFIER]})`);oe("MAINVERSIONLOOSE",`(${H[V.NUMERICIDENTIFIERLOOSE]})\\.(${H[V.NUMERICIDENTIFIERLOOSE]})\\.(${H[V.NUMERICIDENTIFIERLOOSE]})`);oe("PRERELEASEIDENTIFIER",`(?:${H[V.NUMERICIDENTIFIER]}|${H[V.NONNUMERICIDENTIFIER]})`);oe("PRERELEASEIDENTIFIERLOOSE",`(?:${H[V.NUMERICIDENTIFIERLOOSE]}|${H[V.NONNUMERICIDENTIFIER]})`);oe("PRERELEASE",`(?:-(${H[V.PRERELEASEIDENTIFIER]}(?:\\.${H[V.PRERELEASEIDENTIFIER]})*))`);oe("PRERELEASELOOSE",`(?:-?(${H[V.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${H[V.PRERELEASEIDENTIFIERLOOSE]})*))`);oe("BUILDIDENTIFIER",`${ib}+`);oe("BUILD",`(?:\\+(${H[V.BUILDIDENTIFIER]}(?:\\.${H[V.BUILDIDENTIFIER]})*))`);oe("FULLPLAIN",`v?${H[V.MAINVERSION]}${H[V.PRERELEASE]}?${H[V.BUILD]}?`);oe("FULL",`^${H[V.FULLPLAIN]}$`);oe("LOOSEPLAIN",`[v=\\s]*${H[V.MAINVERSIONLOOSE]}${H[V.PRERELEASELOOSE]}?${H[V.BUILD]}?`);oe("LOOSE",`^${H[V.LOOSEPLAIN]}$`);oe("GTLT","((?:<|>)?=?)");oe("XRANGEIDENTIFIERLOOSE",`${H[V.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);oe("XRANGEIDENTIFIER",`${H[V.NUMERICIDENTIFIER]}|x|X|\\*`);oe("XRANGEPLAIN",`[v=\\s]*(${H[V.XRANGEIDENTIFIER]})(?:\\.(${H[V.XRANGEIDENTIFIER]})(?:\\.(${H[V.XRANGEIDENTIFIER]})(?:${H[V.PRERELEASE]})?${H[V.BUILD]}?)?)?`);oe("XRANGEPLAINLOOSE",`[v=\\s]*(${H[V.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H[V.XRANGEIDENTIFIERLOOSE]})(?:\\.(${H[V.XRANGEIDENTIFIERLOOSE]})(?:${H[V.PRERELEASELOOSE]})?${H[V.BUILD]}?)?)?`);oe("XRANGE",`^${H[V.GTLT]}\\s*${H[V.XRANGEPLAIN]}$`);oe("XRANGELOOSE",`^${H[V.GTLT]}\\s*${H[V.XRANGEPLAINLOOSE]}$`);oe("COERCEPLAIN",`(^|[^\\d])(\\d{1,${rb}})(?:\\.(\\d{1,${rb}}))?(?:\\.(\\d{1,${rb}}))?`);oe("COERCE",`${H[V.COERCEPLAIN]}(?:$|[^\\d])`);oe("COERCEFULL",H[V.COERCEPLAIN]+`(?:${H[V.PRERELEASE]})?(?:${H[V.BUILD]})?(?:$|[^\\d])`);oe("COERCERTL",H[V.COERCE],!0);oe("COERCERTLFULL",H[V.COERCEFULL],!0);oe("LONETILDE","(?:~>?)");oe("TILDETRIM",`(\\s*)${H[V.LONETILDE]}\\s+`,!0);bi.tildeTrimReplace="$1~";oe("TILDE",`^${H[V.LONETILDE]}${H[V.XRANGEPLAIN]}$`);oe("TILDELOOSE",`^${H[V.LONETILDE]}${H[V.XRANGEPLAINLOOSE]}$`);oe("LONECARET","(?:\\^)");oe("CARETTRIM",`(\\s*)${H[V.LONECARET]}\\s+`,!0);bi.caretTrimReplace="$1^";oe("CARET",`^${H[V.LONECARET]}${H[V.XRANGEPLAIN]}$`);oe("CARETLOOSE",`^${H[V.LONECARET]}${H[V.XRANGEPLAINLOOSE]}$`);oe("COMPARATORLOOSE",`^${H[V.GTLT]}\\s*(${H[V.LOOSEPLAIN]})$|^$`);oe("COMPARATOR",`^${H[V.GTLT]}\\s*(${H[V.FULLPLAIN]})$|^$`);oe("COMPARATORTRIM",`(\\s*)${H[V.GTLT]}\\s*(${H[V.LOOSEPLAIN]}|${H[V.XRANGEPLAIN]})`,!0);bi.comparatorTrimReplace="$1$2$3";oe("HYPHENRANGE",`^\\s*(${H[V.XRANGEPLAIN]})\\s+-\\s+(${H[V.XRANGEPLAIN]})\\s*$`);oe("HYPHENRANGELOOSE",`^\\s*(${H[V.XRANGEPLAINLOOSE]})\\s+-\\s+(${H[V.XRANGEPLAINLOOSE]})\\s*$`);oe("STAR","(<|>)?=?\\s*\\*");oe("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");oe("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Hf=_((jhe,KI)=>{"use strict";var KY=Object.freeze({loose:!0}),WY=Object.freeze({}),JY=t=>t?typeof t!="object"?KY:t:WY;KI.exports=JY});var sb=_((Dhe,QI)=>{"use strict";var WI=/^[0-9]+$/,JI=(t,e)=>{let r=WI.test(t),i=WI.test(e);return r&&i&&(t=+t,e=+e),t===e?0:r&&!i?-1:i&&!r?1:t<e?-1:1},QY=(t,e)=>JI(e,t);QI.exports={compareIdentifiers:JI,rcompareIdentifiers:QY}});var Mt=_((Fhe,e1)=>{"use strict";var Vf=bl(),{MAX_LENGTH:YI,MAX_SAFE_INTEGER:Gf}=gl(),{safeRe:XI,safeSrc:ZI,t:Kf}=No(),YY=Hf(),{compareIdentifiers:ko}=sb(),nb=class t{constructor(e,r){if(r=YY(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>YI)throw new TypeError(`version is longer than ${YI} characters`);Vf("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=e.trim().match(r.loose?XI[Kf.LOOSE]:XI[Kf.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Gf||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Gf||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Gf||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let n=+s;if(n>=0&&n<Gf)return n}return s}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Vf("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),ko(this.major,e.major)||ko(this.minor,e.minor)||ko(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],s=e.prerelease[r];if(Vf("prerelease compare",r,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return ko(i,s)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let i=this.build[r],s=e.build[r];if(Vf("build compare",r,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return ko(i,s)}while(++r)}inc(e,r,i){if(e.startsWith("pre")){if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=new RegExp(`^${this.options.loose?ZI[Kf.PRERELEASELOOSE]:ZI[Kf.PRERELEASE]}$`),n=`-${r}`.match(s);if(!n||n[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(i)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);if(n===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let n=[r,s];i===!1&&(n=[r]),ko(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};e1.exports=nb});var mn=_((Mhe,r1)=>{"use strict";var t1=Mt(),XY=(t,e,r=!1)=>{if(t instanceof t1)return t;try{return new t1(t,e)}catch(i){if(!r)return null;throw i}};r1.exports=XY});var s1=_((zhe,i1)=>{"use strict";var ZY=mn(),eX=(t,e)=>{let r=ZY(t,e);return r?r.version:null};i1.exports=eX});var o1=_((Bhe,n1)=>{"use strict";var tX=mn(),rX=(t,e)=>{let r=tX(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};n1.exports=rX});var c1=_((Uhe,l1)=>{"use strict";var a1=Mt(),iX=(t,e,r,i,s)=>{typeof r=="string"&&(s=i,i=r,r=void 0);try{return new a1(t instanceof a1?t.version:t,r).inc(e,i,s).version}catch{return null}};l1.exports=iX});var d1=_((Hhe,f1)=>{"use strict";var u1=mn(),sX=(t,e)=>{let r=u1(t,null,!0),i=u1(e,null,!0),s=r.compare(i);if(s===0)return null;let n=s>0,o=n?r:i,a=n?i:r,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let u=l?"pre":"";return r.major!==i.major?u+"major":r.minor!==i.minor?u+"minor":r.patch!==i.patch?u+"patch":"prerelease"};f1.exports=sX});var p1=_((Vhe,h1)=>{"use strict";var nX=Mt(),oX=(t,e)=>new nX(t,e).major;h1.exports=oX});var y1=_((Ghe,m1)=>{"use strict";var aX=Mt(),lX=(t,e)=>new aX(t,e).minor;m1.exports=lX});var b1=_((Khe,g1)=>{"use strict";var cX=Mt(),uX=(t,e)=>new cX(t,e).patch;g1.exports=uX});var w1=_((Whe,v1)=>{"use strict";var fX=mn(),dX=(t,e)=>{let r=fX(t,e);return r&&r.prerelease.length?r.prerelease:null};v1.exports=dX});var $r=_((Jhe,S1)=>{"use strict";var _1=Mt(),hX=(t,e,r)=>new _1(t,r).compare(new _1(e,r));S1.exports=hX});var x1=_((Qhe,E1)=>{"use strict";var pX=$r(),mX=(t,e,r)=>pX(e,t,r);E1.exports=mX});var T1=_((Yhe,R1)=>{"use strict";var yX=$r(),gX=(t,e)=>yX(t,e,!0);R1.exports=gX});var Wf=_((Xhe,A1)=>{"use strict";var P1=Mt(),bX=(t,e,r)=>{let i=new P1(t,r),s=new P1(e,r);return i.compare(s)||i.compareBuild(s)};A1.exports=bX});var O1=_((Zhe,C1)=>{"use strict";var vX=Wf(),wX=(t,e)=>t.sort((r,i)=>vX(r,i,e));C1.exports=wX});var $1=_((epe,I1)=>{"use strict";var _X=Wf(),SX=(t,e)=>t.sort((r,i)=>_X(i,r,e));I1.exports=SX});var vl=_((tpe,N1)=>{"use strict";var EX=$r(),xX=(t,e,r)=>EX(t,e,r)>0;N1.exports=xX});var Jf=_((rpe,k1)=>{"use strict";var RX=$r(),TX=(t,e,r)=>RX(t,e,r)<0;k1.exports=TX});var ob=_((ipe,q1)=>{"use strict";var PX=$r(),AX=(t,e,r)=>PX(t,e,r)===0;q1.exports=AX});var ab=_((spe,L1)=>{"use strict";var CX=$r(),OX=(t,e,r)=>CX(t,e,r)!==0;L1.exports=OX});var Qf=_((npe,j1)=>{"use strict";var IX=$r(),$X=(t,e,r)=>IX(t,e,r)>=0;j1.exports=$X});var Yf=_((ope,D1)=>{"use strict";var NX=$r(),kX=(t,e,r)=>NX(t,e,r)<=0;D1.exports=kX});var lb=_((ape,F1)=>{"use strict";var qX=ob(),LX=ab(),jX=vl(),DX=Qf(),FX=Jf(),MX=Yf(),zX=(t,e,r,i)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return qX(t,r,i);case"!=":return LX(t,r,i);case">":return jX(t,r,i);case">=":return DX(t,r,i);case"<":return FX(t,r,i);case"<=":return MX(t,r,i);default:throw new TypeError(`Invalid operator: ${e}`)}};F1.exports=zX});var z1=_((lpe,M1)=>{"use strict";var BX=Mt(),UX=mn(),{safeRe:Xf,t:Zf}=No(),HX=(t,e)=>{if(t instanceof BX)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Xf[Zf.COERCEFULL]:Xf[Zf.COERCE]);else{let l=e.includePrerelease?Xf[Zf.COERCERTLFULL]:Xf[Zf.COERCERTL],c;for(;(c=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),l.lastIndex=c.index+c[1].length+c[2].length;l.lastIndex=-1}if(r===null)return null;let i=r[2],s=r[3]||"0",n=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return UX(`${i}.${s}.${n}${o}${a}`,e)};M1.exports=HX});var U1=_((cpe,B1)=>{"use strict";var cb=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,r)}return this}};B1.exports=cb});var Nr=_((upe,K1)=>{"use strict";var VX=/\s+/g,ub=class t{constructor(e,r){if(r=KX(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof fb)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(VX," "),this.set=this.raw.split("||").map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let i=this.set[0];if(this.set=this.set.filter(s=>!V1(s[0])),this.set.length===0)this.set=[i];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&eZ(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let i=0;i<r.length;i++)i>0&&(this.formatted+=" "),this.formatted+=r[i].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let i=((this.options.includePrerelease&&XX)|(this.options.loose&&ZX))+":"+e,s=H1.get(i);if(s)return s;let n=this.options.loose,o=n?ur[Yt.HYPHENRANGELOOSE]:ur[Yt.HYPHENRANGE];e=e.replace(o,uZ(this.options.includePrerelease)),Ue("hyphen replace",e),e=e.replace(ur[Yt.COMPARATORTRIM],JX),Ue("comparator trim",e),e=e.replace(ur[Yt.TILDETRIM],QX),Ue("tilde trim",e),e=e.replace(ur[Yt.CARETTRIM],YX),Ue("caret trim",e);let a=e.split(" ").map(f=>tZ(f,this.options)).join(" ").split(/\s+/).map(f=>cZ(f,this.options));n&&(a=a.filter(f=>(Ue("loose invalid filter",f,this.options),!!f.match(ur[Yt.COMPARATORLOOSE])))),Ue("range list",a);let l=new Map,c=a.map(f=>new fb(f,this.options));for(let f of c){if(V1(f))return[f];l.set(f.value,f)}l.size>1&&l.has("")&&l.delete("");let u=[...l.values()];return H1.set(i,u),u}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(i=>G1(i,r)&&e.set.some(s=>G1(s,r)&&i.every(n=>s.every(o=>n.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new WX(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(fZ(this.set[r],e,this.options))return!0;return!1}};K1.exports=ub;var GX=U1(),H1=new GX,KX=Hf(),fb=wl(),Ue=bl(),WX=Mt(),{safeRe:ur,t:Yt,comparatorTrimReplace:JX,tildeTrimReplace:QX,caretTrimReplace:YX}=No(),{FLAG_INCLUDE_PRERELEASE:XX,FLAG_LOOSE:ZX}=gl(),V1=t=>t.value==="<0.0.0-0",eZ=t=>t.value==="",G1=(t,e)=>{let r=!0,i=t.slice(),s=i.pop();for(;r&&i.length;)r=i.every(n=>s.intersects(n,e)),s=i.pop();return r},tZ=(t,e)=>(Ue("comp",t,e),t=sZ(t,e),Ue("caret",t),t=rZ(t,e),Ue("tildes",t),t=oZ(t,e),Ue("xrange",t),t=lZ(t,e),Ue("stars",t),t),Xt=t=>!t||t.toLowerCase()==="x"||t==="*",rZ=(t,e)=>t.trim().split(/\s+/).map(r=>iZ(r,e)).join(" "),iZ=(t,e)=>{let r=e.loose?ur[Yt.TILDELOOSE]:ur[Yt.TILDE];return t.replace(r,(i,s,n,o,a)=>{Ue("tilde",t,i,s,n,o,a);let l;return Xt(s)?l="":Xt(n)?l=`>=${s}.0.0 <${+s+1}.0.0-0`:Xt(o)?l=`>=${s}.${n}.0 <${s}.${+n+1}.0-0`:a?(Ue("replaceTilde pr",a),l=`>=${s}.${n}.${o}-${a} <${s}.${+n+1}.0-0`):l=`>=${s}.${n}.${o} <${s}.${+n+1}.0-0`,Ue("tilde return",l),l})},sZ=(t,e)=>t.trim().split(/\s+/).map(r=>nZ(r,e)).join(" "),nZ=(t,e)=>{Ue("caret",t,e);let r=e.loose?ur[Yt.CARETLOOSE]:ur[Yt.CARET],i=e.includePrerelease?"-0":"";return t.replace(r,(s,n,o,a,l)=>{Ue("caret",t,s,n,o,a,l);let c;return Xt(n)?c="":Xt(o)?c=`>=${n}.0.0${i} <${+n+1}.0.0-0`:Xt(a)?n==="0"?c=`>=${n}.${o}.0${i} <${n}.${+o+1}.0-0`:c=`>=${n}.${o}.0${i} <${+n+1}.0.0-0`:l?(Ue("replaceCaret pr",l),n==="0"?o==="0"?c=`>=${n}.${o}.${a}-${l} <${n}.${o}.${+a+1}-0`:c=`>=${n}.${o}.${a}-${l} <${n}.${+o+1}.0-0`:c=`>=${n}.${o}.${a}-${l} <${+n+1}.0.0-0`):(Ue("no pr"),n==="0"?o==="0"?c=`>=${n}.${o}.${a}${i} <${n}.${o}.${+a+1}-0`:c=`>=${n}.${o}.${a}${i} <${n}.${+o+1}.0-0`:c=`>=${n}.${o}.${a} <${+n+1}.0.0-0`),Ue("caret return",c),c})},oZ=(t,e)=>(Ue("replaceXRanges",t,e),t.split(/\s+/).map(r=>aZ(r,e)).join(" ")),aZ=(t,e)=>{t=t.trim();let r=e.loose?ur[Yt.XRANGELOOSE]:ur[Yt.XRANGE];return t.replace(r,(i,s,n,o,a,l)=>{Ue("xRange",t,i,s,n,o,a,l);let c=Xt(n),u=c||Xt(o),f=u||Xt(a),p=f;return s==="="&&p&&(s=""),l=e.includePrerelease?"-0":"",c?s===">"||s==="<"?i="<0.0.0-0":i="*":s&&p?(u&&(o=0),a=0,s===">"?(s=">=",u?(n=+n+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",u?n=+n+1:o=+o+1),s==="<"&&(l="-0"),i=`${s+n}.${o}.${a}${l}`):u?i=`>=${n}.0.0${l} <${+n+1}.0.0-0`:f&&(i=`>=${n}.${o}.0${l} <${n}.${+o+1}.0-0`),Ue("xRange return",i),i})},lZ=(t,e)=>(Ue("replaceStars",t,e),t.trim().replace(ur[Yt.STAR],"")),cZ=(t,e)=>(Ue("replaceGTE0",t,e),t.trim().replace(ur[e.includePrerelease?Yt.GTE0PRE:Yt.GTE0],"")),uZ=t=>(e,r,i,s,n,o,a,l,c,u,f,p)=>(Xt(i)?r="":Xt(s)?r=`>=${i}.0.0${t?"-0":""}`:Xt(n)?r=`>=${i}.${s}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Xt(c)?l="":Xt(u)?l=`<${+c+1}.0.0-0`:Xt(f)?l=`<${c}.${+u+1}.0-0`:p?l=`<=${c}.${u}.${f}-${p}`:t?l=`<${c}.${u}.${+f+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),fZ=(t,e,r)=>{for(let i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let i=0;i<t.length;i++)if(Ue(t[i].semver),t[i].semver!==fb.ANY&&t[i].semver.prerelease.length>0){let s=t[i].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var wl=_((fpe,Z1)=>{"use strict";var _l=Symbol("SemVer ANY"),pb=class t{static get ANY(){return _l}constructor(e,r){if(r=W1(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),hb("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===_l?this.value="":this.value=this.operator+this.semver.version,hb("comp",this)}parse(e){let r=this.options.loose?J1[Q1.COMPARATORLOOSE]:J1[Q1.COMPARATOR],i=e.match(r);if(!i)throw new TypeError(`Invalid comparator: ${e}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new Y1(i[2],this.options.loose):this.semver=_l}toString(){return this.value}test(e){if(hb("Comparator.test",e,this.options.loose),this.semver===_l||e===_l)return!0;if(typeof e=="string")try{e=new Y1(e,this.options)}catch{return!1}return db(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new X1(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new X1(this.value,r).test(e.semver):(r=W1(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||db(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||db(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Z1.exports=pb;var W1=Hf(),{safeRe:J1,t:Q1}=No(),db=lb(),hb=bl(),Y1=Mt(),X1=Nr()});var Sl=_((dpe,e$)=>{"use strict";var dZ=Nr(),hZ=(t,e,r)=>{try{e=new dZ(e,r)}catch{return!1}return e.test(t)};e$.exports=hZ});var r$=_((hpe,t$)=>{"use strict";var pZ=Nr(),mZ=(t,e)=>new pZ(t,e).set.map(r=>r.map(i=>i.value).join(" ").trim().split(" "));t$.exports=mZ});var s$=_((ppe,i$)=>{"use strict";var yZ=Mt(),gZ=Nr(),bZ=(t,e,r)=>{let i=null,s=null,n=null;try{n=new gZ(e,r)}catch{return null}return t.forEach(o=>{n.test(o)&&(!i||s.compare(o)===-1)&&(i=o,s=new yZ(i,r))}),i};i$.exports=bZ});var o$=_((mpe,n$)=>{"use strict";var vZ=Mt(),wZ=Nr(),_Z=(t,e,r)=>{let i=null,s=null,n=null;try{n=new wZ(e,r)}catch{return null}return t.forEach(o=>{n.test(o)&&(!i||s.compare(o)===1)&&(i=o,s=new vZ(i,r))}),i};n$.exports=_Z});var c$=_((ype,l$)=>{"use strict";var mb=Mt(),SZ=Nr(),a$=vl(),EZ=(t,e)=>{t=new SZ(t,e);let r=new mb("0.0.0");if(t.test(r)||(r=new mb("0.0.0-0"),t.test(r)))return r;r=null;for(let i=0;i<t.set.length;++i){let s=t.set[i],n=null;s.forEach(o=>{let a=new mb(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!n||a$(a,n))&&(n=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),n&&(!r||a$(r,n))&&(r=n)}return r&&t.test(r)?r:null};l$.exports=EZ});var f$=_((gpe,u$)=>{"use strict";var xZ=Nr(),RZ=(t,e)=>{try{return new xZ(t,e).range||"*"}catch{return null}};u$.exports=RZ});var ed=_((bpe,m$)=>{"use strict";var TZ=Mt(),p$=wl(),{ANY:PZ}=p$,AZ=Nr(),CZ=Sl(),d$=vl(),h$=Jf(),OZ=Yf(),IZ=Qf(),$Z=(t,e,r,i)=>{t=new TZ(t,i),e=new AZ(e,i);let s,n,o,a,l;switch(r){case">":s=d$,n=OZ,o=h$,a=">",l=">=";break;case"<":s=h$,n=IZ,o=d$,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(CZ(t,e,i))return!1;for(let c=0;c<e.set.length;++c){let u=e.set[c],f=null,p=null;if(u.forEach(d=>{d.semver===PZ&&(d=new p$(">=0.0.0")),f=f||d,p=p||d,s(d.semver,f.semver,i)?f=d:o(d.semver,p.semver,i)&&(p=d)}),f.operator===a||f.operator===l||(!p.operator||p.operator===a)&&n(t,p.semver))return!1;if(p.operator===l&&o(t,p.semver))return!1}return!0};m$.exports=$Z});var g$=_((vpe,y$)=>{"use strict";var NZ=ed(),kZ=(t,e,r)=>NZ(t,e,">",r);y$.exports=kZ});var v$=_((wpe,b$)=>{"use strict";var qZ=ed(),LZ=(t,e,r)=>qZ(t,e,"<",r);b$.exports=LZ});var S$=_((_pe,_$)=>{"use strict";var w$=Nr(),jZ=(t,e,r)=>(t=new w$(t,r),e=new w$(e,r),t.intersects(e,r));_$.exports=jZ});var x$=_((Spe,E$)=>{"use strict";var DZ=Sl(),FZ=$r();E$.exports=(t,e,r)=>{let i=[],s=null,n=null,o=t.sort((u,f)=>FZ(u,f,r));for(let u of o)DZ(u,e,r)?(n=u,s||(s=u)):(n&&i.push([s,n]),n=null,s=null);s&&i.push([s,null]);let a=[];for(let[u,f]of i)u===f?a.push(u):!f&&u===o[0]?a.push("*"):f?u===o[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let l=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return l.length<c.length?l:e}});var O$=_((Epe,C$)=>{"use strict";var R$=Nr(),gb=wl(),{ANY:yb}=gb,El=Sl(),bb=$r(),MZ=(t,e,r={})=>{if(t===e)return!0;t=new R$(t,r),e=new R$(e,r);let i=!1;e:for(let s of t.set){for(let n of e.set){let o=BZ(s,n,r);if(i=i||o!==null,o)continue e}if(i)return!1}return!0},zZ=[new gb(">=0.0.0-0")],T$=[new gb(">=0.0.0")],BZ=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===yb){if(e.length===1&&e[0].semver===yb)return!0;r.includePrerelease?t=zZ:t=T$}if(e.length===1&&e[0].semver===yb){if(r.includePrerelease)return!0;e=T$}let i=new Set,s,n;for(let d of t)d.operator===">"||d.operator===">="?s=P$(s,d,r):d.operator==="<"||d.operator==="<="?n=A$(n,d,r):i.add(d.semver);if(i.size>1)return null;let o;if(s&&n){if(o=bb(s.semver,n.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||n.operator!=="<="))return null}for(let d of i){if(s&&!El(d,String(s),r)||n&&!El(d,String(n),r))return null;for(let h of e)if(!El(d,String(h),r))return!1;return!0}let a,l,c,u,f=n&&!r.includePrerelease&&n.semver.prerelease.length?n.semver:!1,p=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&n.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(u=u||d.operator===">"||d.operator===">=",c=c||d.operator==="<"||d.operator==="<=",s){if(p&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===p.major&&d.semver.minor===p.minor&&d.semver.patch===p.patch&&(p=!1),d.operator===">"||d.operator===">="){if(a=P$(s,d,r),a===d&&a!==s)return!1}else if(s.operator===">="&&!El(s.semver,String(d),r))return!1}if(n){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(l=A$(n,d,r),l===d&&l!==n)return!1}else if(n.operator==="<="&&!El(n.semver,String(d),r))return!1}if(!d.operator&&(n||s)&&o!==0)return!1}return!(s&&c&&!n&&o!==0||n&&u&&!s&&o!==0||p||f)},P$=(t,e,r)=>{if(!t)return e;let i=bb(t.semver,e.semver,r);return i>0?t:i<0||e.operator===">"&&t.operator===">="?e:t},A$=(t,e,r)=>{if(!t)return e;let i=bb(t.semver,e.semver,r);return i<0?t:i>0||e.operator==="<"&&t.operator==="<="?e:t};C$.exports=MZ});var k$=_((xpe,N$)=>{"use strict";var vb=No(),I$=gl(),UZ=Mt(),$$=sb(),HZ=mn(),VZ=s1(),GZ=o1(),KZ=c1(),WZ=d1(),JZ=p1(),QZ=y1(),YZ=b1(),XZ=w1(),ZZ=$r(),eee=x1(),tee=T1(),ree=Wf(),iee=O1(),see=$1(),nee=vl(),oee=Jf(),aee=ob(),lee=ab(),cee=Qf(),uee=Yf(),fee=lb(),dee=z1(),hee=wl(),pee=Nr(),mee=Sl(),yee=r$(),gee=s$(),bee=o$(),vee=c$(),wee=f$(),_ee=ed(),See=g$(),Eee=v$(),xee=S$(),Ree=x$(),Tee=O$();N$.exports={parse:HZ,valid:VZ,clean:GZ,inc:KZ,diff:WZ,major:JZ,minor:QZ,patch:YZ,prerelease:XZ,compare:ZZ,rcompare:eee,compareLoose:tee,compareBuild:ree,sort:iee,rsort:see,gt:nee,lt:oee,eq:aee,neq:lee,gte:cee,lte:uee,cmp:fee,coerce:dee,Comparator:hee,Range:pee,satisfies:mee,toComparators:yee,maxSatisfying:gee,minSatisfying:bee,minVersion:vee,validRange:wee,outside:_ee,gtr:See,ltr:Eee,intersects:xee,simplifyRange:Ree,subset:Tee,SemVer:UZ,re:vb.re,src:vb.src,tokens:vb.t,SEMVER_SPEC_VERSION:I$.SEMVER_SPEC_VERSION,RELEASE_TYPES:I$.RELEASE_TYPES,compareIdentifiers:$$.compareIdentifiers,rcompareIdentifiers:$$.rcompareIdentifiers}});var Rb=_((Rpe,xb)=>{"use strict";var wb=k$(),Sb=require("node:assert"),Eb=Symbol.for("registered-plugin"),{kTestInternals:Pee}=pt(),{exist:Aee,existReply:Cee,existRequest:Oee}=Zm(),{FST_ERR_PLUGIN_VERSION_MISMATCH:Iee,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:$ee,FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:Nee}=Et();function xl(t){return t[Symbol.for("plugin-meta")]}function q$(t){let e=L$(t);if(e)return e;let r=require.cache;if(r){let i=Object.keys(r);for(let s=0;s<i.length;s++){let n=i[s];if(r[n].exports===t)return n}}return t.name?t.name:null}function kee(t){return t.toString().split(`
`,2).map(e=>e.trim()).join(" -- ")}function L$(t){return t[Symbol.for("fastify.display-name")]}function j$(t){return!!t[Symbol.for("skip-override")]}function D$(t){let e=xl(t);if(!e)return;let r=e.dependencies;r&&(Sb(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(i=>{Sb(this[Eb].indexOf(i)>-1,`The dependency '${i}' of plugin '${e.name}' is not registered`)}))}function F$(t){let e=xl(t);if(!e)return;let{decorators:r,name:i}=e;r&&(r.fastify&&_b(this,"Fastify",r.fastify,i),r.reply&&_b(this,"Reply",r.reply,i),r.request&&_b(this,"Request",r.request,i))}var qee={Fastify:Aee,Request:Oee,Reply:Cee};function _b(t,e,r,i){Sb(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(s=>{let n=typeof i=="string"?` required by '${i}'`:"";if(!qee[e].call(t,s))throw new $ee(s,n,e)})}function Lee(t){let e=xl(t);if(e==null||e?.fastify==null)return;let r=e.fastify,i=/-(?:rc|pre|alpha).+$/.test(this.version);if(!(i===!0&&wb.gt(this.version,wb.coerce(r))===!0)&&r&&wb.satisfies(this.version,r,{includePrerelease:i})===!1)throw new Iee(e.name,r,this.version)}function jee(t){let e=xl(t);if(!e)return;let r=e.name;if(r)return this[Eb].push(r),r}function Dee(t,e){if(t.constructor.name==="AsyncFunction"&&t.length===3)throw new Nee(e)}function Fee(t){let e=jee.call(this,t)||q$(t);return Dee.call(this,t,e),Lee.call(this,t),F$.call(this,t),D$.call(this,t),j$(t)}xb.exports={getPluginName:q$,getFuncPreview:kee,kRegisteredPlugins:Eb,getDisplayName:L$,registerPlugin:Fee};xb.exports[Pee]={shouldSkipOverride:j$,getMeta:xl,checkDecorators:F$,checkDependencies:D$}});var td=_((Tpe,M$)=>{"use strict";function Mee(t,e){let r=e||Bee();return t?Uee(t,r):r}function zee(t,e){return t.genReqId(e)}function Bee(){let e=0;return function(){return e=e+1&2147483647,`req-${e.toString(36)}`}}function Uee(t,e){return function(r){return r.headers[t]||e(r)}}M$.exports={getGenReqId:zee,reqIdGenFactory:Mee}});var Pb=_((Ppe,U$)=>{"use strict";var z$=12,Hee=0,Tb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function Vee(t){var e=t.indexOf("%");if(e===-1)return t;for(var r=t.length,i="",s=0,n=0,o=e,a=z$;e>-1&&e<r;){var l=B$(t[e+1],4),c=B$(t[e+2],0),u=l|c,f=Tb[u];if(a=Tb[256+a+f],n=n<<6|u&Tb[364+f],a===z$)i+=t.slice(s,o),i+=n<=65535?String.fromCharCode(n):String.fromCharCode(55232+(n>>10),56320+(n&1023)),n=0,s=e+3,e=o=t.indexOf("%",s);else{if(a===Hee)return null;if(e+=3,e<r&&t.charCodeAt(e)===37)continue;return null}}return i+t.slice(s)}var Gee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function B$(t,e){var r=Gee[t];return r===void 0?255:r<<e}U$.exports=Vee});var W$=_((Ape,K$)=>{"use strict";var H$=Pb(),V$=/\+/g,G$=function(){};G$.prototype=Object.create(null);function Kee(t){let e=new G$;if(typeof t!="string")return e;let r=t.length,i="",s="",n=-1,o=-1,a=!1,l=!1,c=!1,u=!1,f=!1,p=0;for(let d=0;d<r+1;d++)if(p=d!==r?t.charCodeAt(d):38,p===38){if(f=o>n,f||(o=d),i=t.slice(n+1,o),f||i.length>0){c&&(i=i.replace(V$," ")),a&&(i=H$(i)||i),f&&(s=t.slice(o+1,d),u&&(s=s.replace(V$," ")),l&&(s=H$(s)||s));let h=e[i];h===void 0?e[i]=s:h.pop?h.push(s):e[i]=[h,s]}s="",n=d,o=d,a=!1,l=!1,c=!1,u=!1}else p===61?o<=n?o=d:l=!0:p===43?o>n?u=!0:c=!0:p===37&&(o>n?l=!0:a=!0);return e}K$.exports=Kee});var Q$=_((Cpe,J$)=>{"use strict";var vi=Array.from({length:256},(t,e)=>"%"+((e<16?"0":"")+e.toString(16)).toUpperCase()),Wee=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function Jee(t){let e=t.length;if(e===0)return"";let r="",i=0,s=0;e:for(;s<e;s++){let n=t.charCodeAt(s);for(;n<128;){if(Wee[n]!==1&&(i<s&&(r+=t.slice(i,s)),i=s+1,r+=vi[n]),++s===e)break e;n=t.charCodeAt(s)}if(i<s&&(r+=t.slice(i,s)),n<2048){i=s+1,r+=vi[192|n>>6]+vi[128|n&63];continue}if(n<55296||n>=57344){i=s+1,r+=vi[224|n>>12]+vi[128|n>>6&63]+vi[128|n&63];continue}if(++s,s>=e)throw new Error("URI malformed");let o=t.charCodeAt(s)&1023;i=s+1,n=65536+((n&1023)<<10|o),r+=vi[240|n>>18]+vi[128|n>>12&63]+vi[128|n>>6&63]+vi[128|n&63]}return i===0?t:i<e?r+t.slice(i):r}J$.exports={encodeString:Jee}});var Z$=_((Ope,X$)=>{"use strict";var{encodeString:Ab}=Q$();function Y$(t){let e=typeof t;return e==="string"?Ab(t):e==="bigint"?t.toString():e==="boolean"?t?"true":"false":e==="number"&&Number.isFinite(t)?t<1e21?""+t:Ab(""+t):""}function Qee(t){let e="";if(t===null||typeof t!="object")return e;let r="&",i=Object.keys(t),s=i.length,n=0;for(let o=0;o<s;o++){let a=i[o],l=t[a],c=Ab(a)+"=";if(o&&(e+=r),Array.isArray(l)){n=l.length;for(let u=0;u<n;u++)u&&(e+=r),e+=c,e+=Y$(l[u])}else e+=c,e+=Y$(l)}return e}X$.exports=Qee});var iN=_((Ipe,Rl)=>{"use strict";var eN=W$(),tN=Z$(),rN={parse:eN,stringify:tN};Rl.exports=rN;Rl.exports.default=rN;Rl.exports.parse=eN;Rl.exports.stringify=tN});var nN=_(sN=>{"use strict";Object.defineProperty(sN,"__esModule",{value:!0})});var oN=_(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.types=void 0;var Yee;(function(t){t[t.ROOT=0]="ROOT",t[t.GROUP=1]="GROUP",t[t.POSITION=2]="POSITION",t[t.SET=3]="SET",t[t.RANGE=4]="RANGE",t[t.REPETITION=5]="REPETITION",t[t.REFERENCE=6]="REFERENCE",t[t.CHAR=7]="CHAR"})(Yee=Tl.types||(Tl.types={}))});var lN=_(aN=>{"use strict";Object.defineProperty(aN,"__esModule",{value:!0})});var Zi=_(Xi=>{"use strict";var Xee=Xi&&Xi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Cb=Xi&&Xi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xee(e,t,r)};Object.defineProperty(Xi,"__esModule",{value:!0});Cb(nN(),Xi);Cb(oN(),Xi);Cb(lN(),Xi)});var rd=_(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.anyChar=zt.notWhitespace=zt.whitespace=zt.notInts=zt.ints=zt.notWords=zt.words=void 0;var Pe=Zi(),cN=()=>[{type:Pe.types.RANGE,from:48,to:57}],uN=()=>[{type:Pe.types.CHAR,value:95},{type:Pe.types.RANGE,from:97,to:122},{type:Pe.types.RANGE,from:65,to:90},{type:Pe.types.RANGE,from:48,to:57}],fN=()=>[{type:Pe.types.CHAR,value:9},{type:Pe.types.CHAR,value:10},{type:Pe.types.CHAR,value:11},{type:Pe.types.CHAR,value:12},{type:Pe.types.CHAR,value:13},{type:Pe.types.CHAR,value:32},{type:Pe.types.CHAR,value:160},{type:Pe.types.CHAR,value:5760},{type:Pe.types.RANGE,from:8192,to:8202},{type:Pe.types.CHAR,value:8232},{type:Pe.types.CHAR,value:8233},{type:Pe.types.CHAR,value:8239},{type:Pe.types.CHAR,value:8287},{type:Pe.types.CHAR,value:12288},{type:Pe.types.CHAR,value:65279}],Zee=()=>[{type:Pe.types.CHAR,value:10},{type:Pe.types.CHAR,value:13},{type:Pe.types.CHAR,value:8232},{type:Pe.types.CHAR,value:8233}];zt.words=()=>({type:Pe.types.SET,set:uN(),not:!1});zt.notWords=()=>({type:Pe.types.SET,set:uN(),not:!0});zt.ints=()=>({type:Pe.types.SET,set:cN(),not:!1});zt.notInts=()=>({type:Pe.types.SET,set:cN(),not:!0});zt.whitespace=()=>({type:Pe.types.SET,set:fN(),not:!1});zt.notWhitespace=()=>({type:Pe.types.SET,set:fN(),not:!0});zt.anyChar=()=>({type:Pe.types.SET,set:Zee(),not:!0})});var hN=_(kr=>{"use strict";var ete=kr&&kr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),tte=kr&&kr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rte=kr&&kr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ete(e,t,r);return tte(e,t),e};Object.defineProperty(kr,"__esModule",{value:!0});kr.tokenizeClass=kr.strToChars=void 0;var dN=Zi(),qo=rte(rd()),ite="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?";kr.strToChars=t=>{let e=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return t.replace(e,(r,i,s,n,o,a,l)=>{if(s)return r;let c=i?8:n?parseInt(n,16):o?parseInt(o,16):a?ite.indexOf(a):{0:0,t:9,n:10,v:11,f:12,r:13}[l],u=String.fromCharCode(c);return/[[\]{}^$.|?*+()]/.test(u)?`\\${u}`:u})};kr.tokenizeClass=(t,e)=>{var r,i,s,n,o,a,l;let c=[],u,f,p=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;for(;(u=p.exec(t))!==null;){let d=(l=(a=(o=(n=(s=(i=(r=u[1]&&qo.words())!==null&&r!==void 0?r:u[2]&&qo.ints())!==null&&i!==void 0?i:u[3]&&qo.whitespace())!==null&&s!==void 0?s:u[4]&&qo.notWords())!==null&&n!==void 0?n:u[5]&&qo.notInts())!==null&&o!==void 0?o:u[6]&&qo.notWhitespace())!==null&&a!==void 0?a:u[7]&&{type:dN.types.RANGE,from:(u[8]||u[9]).charCodeAt(0),to:(f=u[10]).charCodeAt(f.length-1)})!==null&&l!==void 0?l:(f=u[16])&&{type:dN.types.CHAR,value:f.charCodeAt(0)};if(d)c.push(d);else return[c,p.lastIndex]}throw new SyntaxError(`Invalid regular expression: /${e}/: Unterminated character class`)}});var Ob=_(wi=>{"use strict";var ste=wi&&wi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),nte=wi&&wi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yN=wi&&wi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ste(e,t,r);return nte(e,t),e};Object.defineProperty(wi,"__esModule",{value:!0});wi.tokenizer=void 0;var pN=yN(hN()),Pt=Zi(),yn=yN(rd()),ote=/^[a-zA-Z_$]$/i,ate=/^[a-zA-Z0-9_$]$/i,mN=/\d/;wi.tokenizer=t=>{let e=0,r,i={type:Pt.types.ROOT,stack:[]},s=i,n=i.stack,o=[],a=[],l=0,c=f=>{throw new SyntaxError(`Invalid regular expression: /${t}/: Nothing to repeat at column ${f-1}`)},u=pN.strToChars(t);for(;e<u.length;)switch(r=u[e++]){case"\\":if(e===u.length)throw new SyntaxError(`Invalid regular expression: /${t}/: \\ at end of pattern`);switch(r=u[e++]){case"b":n.push({type:Pt.types.POSITION,value:"b"});break;case"B":n.push({type:Pt.types.POSITION,value:"B"});break;case"w":n.push(yn.words());break;case"W":n.push(yn.notWords());break;case"d":n.push(yn.ints());break;case"D":n.push(yn.notInts());break;case"s":n.push(yn.whitespace());break;case"S":n.push(yn.notWhitespace());break;default:if(mN.test(r)){let f=r;for(;e<u.length&&mN.test(u[e]);)f+=u[e++];let p=parseInt(f,10),d={type:Pt.types.REFERENCE,value:p};n.push(d),a.push({reference:d,stack:n,index:n.length-1})}else n.push({type:Pt.types.CHAR,value:r.charCodeAt(0)})}break;case"^":n.push({type:Pt.types.POSITION,value:"^"});break;case"$":n.push({type:Pt.types.POSITION,value:"$"});break;case"[":{let f;u[e]==="^"?(f=!0,e++):f=!1;let p=pN.tokenizeClass(u.slice(e),t);e+=p[1],n.push({type:Pt.types.SET,set:p[0],not:f});break}case".":n.push(yn.anyChar());break;case"(":{let f={type:Pt.types.GROUP,stack:[],remember:!0};if(u[e]==="?")if(r=u[e+1],e+=2,r==="=")f.followedBy=!0,f.remember=!1;else if(r==="!")f.notFollowedBy=!0,f.remember=!1;else if(r==="<"){let p="";if(ote.test(u[e]))p+=u[e],e++;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${u[e]}' after '<' at column ${e+1}`);for(;e<u.length&&ate.test(u[e]);)p+=u[e],e++;if(!p)throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid capture group name, character '${u[e]}' after '<' at column ${e+1}`);if(u[e]!==">")throw new SyntaxError(`Invalid regular expression: /${t}/: Unclosed capture group name, expected '>', found '${u[e]}' at column ${e+1}`);f.name=p,e++}else if(r===":")f.remember=!1;else throw new SyntaxError(`Invalid regular expression: /${t}/: Invalid group, character '${r}' after '?' at column ${e-1}`);else l+=1;n.push(f),o.push(s),s=f,n=f.stack;break}case")":if(o.length===0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unmatched ) at column ${e-1}`);s=o.pop(),n=s.options?s.options[s.options.length-1]:s.stack;break;case"|":{s.options||(s.options=[s.stack],delete s.stack);let f=[];s.options.push(f),n=f;break}case"{":{let f=/^(\d+)(,(\d+)?)?\}/.exec(u.slice(e)),p,d;f!==null?(n.length===0&&c(e),p=parseInt(f[1],10),d=f[2]?f[3]?parseInt(f[3],10):1/0:p,e+=f[0].length,n.push({type:Pt.types.REPETITION,min:p,max:d,value:n.pop()})):n.push({type:Pt.types.CHAR,value:123});break}case"?":n.length===0&&c(e),n.push({type:Pt.types.REPETITION,min:0,max:1,value:n.pop()});break;case"+":n.length===0&&c(e),n.push({type:Pt.types.REPETITION,min:1,max:1/0,value:n.pop()});break;case"*":n.length===0&&c(e),n.push({type:Pt.types.REPETITION,min:0,max:1/0,value:n.pop()});break;default:n.push({type:Pt.types.CHAR,value:r.charCodeAt(0)})}if(o.length!==0)throw new SyntaxError(`Invalid regular expression: /${t}/: Unterminated group`);return lte(a,l),i};function lte(t,e){for(let r of t.reverse())if(e<r.reference.value){r.reference.type=Pt.types.CHAR;let i=r.reference.value.toString();if(r.reference.value=parseInt(i,8),!/^[0-7]+$/.test(i)){let s=0;for(;i[s]!=="8"&&i[s]!=="9";)s+=1;if(s===0?(r.reference.value=i.charCodeAt(0),s+=1):r.reference.value=parseInt(i.slice(0,s),8),i.length>s){let n=r.stack.splice(r.index+1);for(let o of i.slice(s))r.stack.push({type:Pt.types.CHAR,value:o.charCodeAt(0)});r.stack.push(...n)}}}}});var bN=_(Bt=>{"use strict";var cte=Bt&&Bt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),ute=Bt&&Bt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fte=Bt&&Bt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cte(e,t,r);return ute(e,t),e};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.NOTANYCHAR=Bt.WHITESPACE=Bt.WORDS=Bt.INTS=void 0;var id=fte(rd()),gN=Zi();function sd(t){let e={},r=0;for(let i of t)i.type===gN.types.CHAR&&(e[i.value]=!0),i.type===gN.types.RANGE&&(e[`${i.from}-${i.to}`]=!0),r+=1;return{lookup:()=>Object.assign({},e),len:r}}Bt.INTS=sd(id.ints().set);Bt.WORDS=sd(id.words().set);Bt.WHITESPACE=sd(id.whitespace().set);Bt.NOTANYCHAR=sd(id.anyChar().set)});var wN=_(qr=>{"use strict";var dte=qr&&qr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),hte=qr&&qr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pte=qr&&qr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&dte(e,t,r);return hte(e,t),e};Object.defineProperty(qr,"__esModule",{value:!0});qr.writeSetTokens=qr.setChar=void 0;var ld=Zi(),nd=pte(bN());function ad(t){return t===94?"\\^":t===92?"\\\\":t===93?"\\]":t===45?"\\-":String.fromCharCode(t)}qr.setChar=ad;function od(t,{lookup:e,len:r}){if(r!==t.length)return!1;let i=e();for(let s of t){if(s.type===ld.types.SET)return!1;let n=s.type===ld.types.CHAR?s.value:`${s.from}-${s.to}`;if(i[n])i[n]=!1;else return!1}return!0}function vN(t,e=!1){if(od(t.set,nd.INTS))return t.not?"\\D":"\\d";if(od(t.set,nd.WORDS))return t.not?"\\W":"\\w";if(t.not&&od(t.set,nd.NOTANYCHAR))return".";if(od(t.set,nd.WHITESPACE))return t.not?"\\S":"\\s";let r="";for(let s=0;s<t.set.length;s++){let n=t.set[s];r+=mte(n)}let i=`${t.not?"^":""}${r}`;return e?i:`[${i}]`}qr.writeSetTokens=vN;function mte(t){return t.type===ld.types.CHAR?ad(t.value):t.type===ld.types.RANGE?`${ad(t.from)}-${ad(t.to)}`:vN(t,!0)}});var $b=_(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.reconstruct=void 0;var Ts=Zi(),Ib=wN(),_N=t=>t.map(Lo.reconstruct).join(""),SN=t=>{if("options"in t)return t.options.map(_N).join("|");if("stack"in t)return _N(t.stack);throw new Error("options or stack must be Root or Group token")};Lo.reconstruct=t=>{switch(t.type){case Ts.types.ROOT:return SN(t);case Ts.types.CHAR:{let e=String.fromCharCode(t.value);return(/[[\\{}$^.|?*+()]/.test(e)?"\\":"")+e}case Ts.types.POSITION:return t.value==="^"||t.value==="$"?t.value:`\\${t.value}`;case Ts.types.REFERENCE:return`\\${t.value}`;case Ts.types.SET:return Ib.writeSetTokens(t);case Ts.types.GROUP:return`(${t.name?`?<${t.name}>`:t.remember?"":t.followedBy?"?=":t.notFollowedBy?"?!":"?:"}${SN(t)})`;case Ts.types.REPETITION:{let{min:e,max:r}=t,i;return e===0&&r===1?i="?":e===1&&r===1/0?i="+":e===0&&r===1/0?i="*":r===1/0?i=`{${e},}`:e===r?i=`{${e}}`:i=`{${e},${r}}`,`${Lo.reconstruct(t.value)}${i}`}case Ts.types.RANGE:return`${Ib.setChar(t.from)}-${Ib.setChar(t.to)}`;default:throw new Error(`Invalid token type ${t}`)}}});var RN=_((Lr,cd)=>{"use strict";var yte=Lr&&Lr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Nb=Lr&&Lr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yte(e,t,r)};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.types=void 0;var EN=Zi();Object.defineProperty(Lr,"types",{enumerable:!0,get:function(){return EN.types}});Nb(Ob(),Lr);Nb($b(),Lr);var xN=Ob(),gte=$b();Nb(Zi(),Lr);Lr.default=xN.tokenizer;cd.exports=xN.tokenizer;cd.exports.types=EN.types;cd.exports.reconstruct=gte.reconstruct});var PN=_((Bpe,ud)=>{"use strict";var TN=RN(),bte=TN.types;function kb(t,e){e||(e={});let r=e.limit===void 0?25:e.limit;vte(t)?t=t.source:typeof t!="string"&&(t=String(t));try{t=TN(t)}catch{return!1}let i=0;return function s(n,o){let a,l,c;if(n.type===bte.REPETITION&&(o++,i++,o>1||i>r))return!1;if(n.options){for(a=0,c=n.options.length;a<c;a++)if(l=s({stack:n.options[a]},o),!l)return!1}let u=n.stack||n.value?.stack;if(!u)return!0;for(a=0;a<u.length;a++)if(l=s(u[a],o),!l)return!1;return!0}(t,0)}function vte(t){return{}.toString.call(t)==="[object RegExp]"}ud.exports=kb;ud.exports.default=kb;ud.exports.safeRegex=kb});var fd=_((Upe,AN)=>{"use strict";AN.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let t={};return{get:e=>t[e]||null,set:(e,r)=>{t[e]=r}}},deriveConstraint:t=>t.method,mustMatchWhenDerived:!0}});var qN=_((Hpe,kN)=>{"use strict";var CN=Ma(),ON=fd(),IN=Symbol("treeData");function $N(t,e=""){let r="",i=Object.keys(t);for(let s=0;s<i.length;s++){let n=i[s],o=t[n],a=s===i.length-1,l=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",c=a?"    ":"\u2502   ",f=(o[IN]||"").replaceAll(`
`,`
`+e+c);r+=e+l+n+f+`
`,r+=$N(o,e+c)}return r}function wte(t){let e=t.name||"";return e=e.replace("bound","").trim(),e=(e||"anonymous")+"()",e}function NN(t){return Array.isArray(t)?t.map(e=>NN(e)):typeof t=="symbol"?t.toString():typeof t=="function"?wte(t):t}function _te(t,e){if(!e.includeMeta)return{};let r=e.buildPrettyMeta(t),i={},s=e.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(r));for(let n of s){if(!Object.prototype.hasOwnProperty.call(r,n))continue;let o=n.toString(),a=r[n];if(a!=null){let l=JSON.stringify(NN(a));i[o]=l}}return i}function Ste(t){let e="";for(let[r,i]of Object.entries(t))e+=`
\u2022 (${r}) ${i}`;return e}function Ete(t){let e={...t.opts.constraints},r=e[ON.name];return delete e[ON.name],{...t,method:r,opts:{constraints:e}}}function xte(t){let e=` (${t.method})`,r=t.opts.constraints||{};return Object.keys(r).length!==0&&(e+=" "+JSON.stringify(r)),e+=Ste(t.metaData),e}function Rte(t){return t.reduce((e,r)=>{for(let i of e)if(CN(r.opts.constraints,i.opts.constraints)&&CN(r.metaData,i.metaData))return i.method+=", "+r.method,e;return e.push(r),e},[])}function Tte(t,e,r){let i=t.routes;return r.method===void 0&&(i=i.map(Ete)),i=i.map(s=>(s.metaData=_te(s,r),s)),r.method===void 0&&(i=Rte(i)),i.map(xte).join(`
${e}`)}function dd(t,e,r,i){if((t.isLeafNode||i.commonPrefix!==!1)&&(r=r||"(empty root node)",e=e[r]={},t.isLeafNode&&(e[IN]=Tte(t,r,i)),r=""),t.staticChildren)for(let s of Object.values(t.staticChildren))dd(s,e,r+s.prefix,i);if(t.parametricChildren)for(let s of Object.values(t.parametricChildren)){let n=Array.from(s.nodePaths).join("|");dd(s,e,r+n,i)}t.wildcardChild&&dd(t.wildcardChild,e,"*",i)}function Pte(t,e){let r={};return dd(t,r,t.prefix,e),$N(r)}kN.exports={prettyPrintTree:Pte}});var DN=_((Vpe,jN)=>{"use strict";var LN=function(){};LN.prototype=Object.create(null);jN.exports={NullObject:LN}});var MN=_((Gpe,FN)=>{"use strict";var{NullObject:Ate}=DN(),Cte=fd(),qb=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(e){return e===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(e)}addHandler(e,r){let i=r.params,s=r.opts.constraints||{},n={params:i,constraints:s,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(i)},o=Object.keys(s);o.length===0&&(this.unconstrainedHandler=n);for(let l of o)this.constraints.includes(l)||(l==="version"?this.constraints.unshift(l):this.constraints.push(l));let a=o.includes(Cte.name);if(!a&&this.handlers.length>=31)throw new Error("find-my-way supports a maximum of 31 route handlers per node when there are constraints, limit reached");this.handlers.push(n),this.handlers.sort((l,c)=>Object.keys(l.constraints).length-Object.keys(c.constraints).length),a||this._compileGetHandlerMatchingConstraints(e,s)}_compileCreateParamsObject(e){let r=[];r.push("const fn = function _createParamsObject (paramsArray) {"),r.push("const params = new NullObject()");for(let i=0;i<e.length;i++)r.push(`params['${e[i]}'] = paramsArray[${i}]`);return r.push("return params"),r.push("}"),r.push("return fn"),new Function("NullObject",r.join(`
`))(Ate)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(e,r){for(let i=0;i<this.handlers.length;i++){let n=this.handlers[i].constraints[r];if(n!==void 0){let o=e.get(n)||0;o|=1<<i,e.set(n,o)}}}_constrainedIndexBitmask(e){let r=0;for(let i=0;i<this.handlers.length;i++)this.handlers[i].constraints[e]!==void 0&&(r|=1<<i);return~r}_compileGetHandlerMatchingConstraints(e){this.constrainedHandlerStores={};for(let i of this.constraints){let s=e.newStoreForConstraint(i);this.constrainedHandlerStores[i]=s,this._buildConstraintStore(s,i)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let i of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(i)}
      value = derivedConstraints.${i}
      `);let n=e.strategies[i].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${i}.get(value) || 0
        candidates &= ${n}
      }
      if (candidates === 0) return null;
      `)}for(let i in e.strategies)e.strategies[i].mustMatchWhenDerived&&!this.constraints.includes(i)&&r.push(`if (derivedConstraints.${i} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};FN.exports=qb});var BN=_((Kpe,zN)=>{"use strict";var Ote=MN(),bd={STATIC:0,PARAMETRIC:1,WILDCARD:2},hd=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(e,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new Ote),this.isLeafNode=!0,this.routes.push(e),this.handlerStorage.addHandler(r,e)}},pd=class extends hd{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(e,r){let i=this.staticChildren[e.charAt(r)];return i===void 0||!i.matchPrefix(e,r)?null:i}getStaticChild(e,r=0){if(e.length===r)return this;let i=this.findStaticMatchingChild(e,r);return i?i.getStaticChild(e,r+i.prefix.length):null}createStaticChild(e){if(e.length===0)return this;let r=this.staticChildren[e.charAt(0)];if(r){let s=1;for(;s<r.prefix.length;s++)if(e.charCodeAt(s)!==r.prefix.charCodeAt(s)){r=r.split(this,s);break}return r.createStaticChild(e.slice(s))}let i=e.charAt(0);return this.staticChildren[i]=new md(e),this.staticChildren[i]}},md=class t extends pd{constructor(e){super(),this.prefix=e,this.wildcardChild=null,this.parametricChildren=[],this.kind=bd.STATIC,this._compilePrefixMatch()}getParametricChild(e){let r=e&&e.source,i=this.parametricChildren.find(s=>(s.regex&&s.regex.source)===r);return i||null}createParametricChild(e,r,i){let s=this.getParametricChild(e);return s?(s.nodePaths.add(i),s):(s=new yd(e,r,i),this.parametricChildren.push(s),this.parametricChildren.sort((n,o)=>n.isRegex?o.isRegex?n.staticSuffix===null?1:o.staticSuffix===null?-1:o.staticSuffix.endsWith(n.staticSuffix)?1:n.staticSuffix.endsWith(o.staticSuffix)?-1:0:-1:1),s)}getWildcardChild(){return this.wildcardChild}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new gd,this.wildcardChild}split(e,r){let i=this.prefix.slice(0,r),s=this.prefix.slice(r);this.prefix=s,this._compilePrefixMatch();let n=new t(i);return n.staticChildren[s.charAt(0)]=this,e.staticChildren[i.charAt(0)]=n,n}getNextNode(e,r,i,s){let n=this.findStaticMatchingChild(e,r),o=0;if(n===null){if(this.parametricChildren.length===0)return this.wildcardChild;n=this.parametricChildren[0],o=1}this.wildcardChild!==null&&i.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)i.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return n}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let e=[];for(let r=1;r<this.prefix.length;r++){let i=this.prefix.charCodeAt(r);e.push(`path.charCodeAt(i + ${r}) === ${i}`)}this.matchPrefix=new Function("path","i",`return ${e.join(" && ")}`)}},yd=class extends pd{constructor(e,r,i){super(),this.isRegex=!!e,this.regex=e||null,this.staticSuffix=r||null,this.kind=bd.PARAMETRIC,this.nodePaths=new Set([i])}getNextNode(e,r){return this.findStaticMatchingChild(e,r)}},gd=class extends hd{constructor(){super(),this.kind=bd.WILDCARD}getNextNode(){return null}};zN.exports={StaticNode:md,ParametricNode:yd,WildcardNode:gd,NODE_TYPES:bd}});var HN=_((Wpe,UN)=>{"use strict";var Ite=require("node:assert");function Pl(){if(!(this instanceof Pl))return new Pl;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}Pl.prototype.set=function(t,e){if(typeof t!="string")throw new TypeError("Version should be a string");let[r,i,s]=t.split(".",3);if(isNaN(r))throw new TypeError("Major version must be a numeric value");return r=Number(r),i=Number(i)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=e,this.store["*"]=e,this.store["x.x"]=e,this.store["x.x.x"]=e),i>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=i,this.store[`${r}.x`]=e,this.store[`${r}.x.x`]=e),s>=(this.maxPatches[`${r}.${i}`]||0)&&(this.maxPatches[`${r}.${i}`]=s,this.store[`${r}.${i}.x`]=e),this.store[`${r}.${i}.${s}`]=e,this};Pl.prototype.get=function(t){return this.store[t]};UN.exports={name:"version",mustMatchWhenDerived:!0,storage:Pl,validate(t){Ite(typeof t=="string","Version should be a string")}}});var GN=_((Jpe,VN)=>{"use strict";var $te=require("node:assert");function Nte(){let t={},e=[];return{get:r=>{let i=t[r];if(i)return i;for(let s of e)if(s.host.test(r))return s.value},set:(r,i)=>{r instanceof RegExp?e.push({host:r,value:i}):t[r]=i}}}VN.exports={name:"host",mustMatchWhenDerived:!1,storage:Nte,validate(t){$te(typeof t=="string"||Object.prototype.toString.call(t)==="[object RegExp]","Host should be a string or a RegExp")}}});var WN=_((Qpe,KN)=>{"use strict";var kte=HN(),qte=GN(),Lb=require("node:assert"),jb=class{constructor(e){if(this.strategies={version:kte,host:qte},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,e)for(let r of Object.values(e))this.addConstraintStrategy(r)}isStrategyUsed(e){return this.strategiesInUse.has(e)||this.asyncStrategiesInUse.has(e)}hasConstraintStrategy(e){let r=this.strategies[e];return r!==void 0?r.isCustom||this.isStrategyUsed(e):!1}addConstraintStrategy(e){if(Lb(typeof e.name=="string"&&e.name!=="","strategy.name is required."),Lb(e.storage&&typeof e.storage=="function","strategy.storage function is required."),Lb(e.deriveConstraint&&typeof e.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[e.name]&&this.strategies[e.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${e.name}.`);if(this.isStrategyUsed(e.name))throw new Error(`There already exists a route with ${e.name} constraint.`);e.isCustom=!0,e.isAsync=e.deriveConstraint.length===3,this.strategies[e.name]=e,e.mustMatchWhenDerived&&this.noteUsage({[e.name]:e})}deriveConstraints(e,r,i){let s=this.deriveSyncConstraints(e,r);if(i===void 0)return s;this.deriveAsyncConstraints(s,e,r,i)}deriveSyncConstraints(e,r){}noteUsage(e){if(e){let r=this.strategiesInUse.size;for(let i in e)this.strategies[i].isAsync?this.asyncStrategiesInUse.add(i):this.strategiesInUse.add(i);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(e){if(!this.strategies[e])throw new Error(`No strategy registered for constraint key ${e}`);return this.strategies[e].storage()}validateConstraints(e){for(let r in e){let i=e[r];if(typeof i>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let s=this.strategies[r];if(!s)throw new Error(`No strategy registered for constraint key ${r}`);s.validate&&s.validate(i)}}deriveAsyncConstraints(e,r,i,s){let n=this.asyncStrategiesInUse.size;if(n===0){s(null,e);return}e=e||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,i,(l,c)=>{if(l!==null){s(l);return}e[o]=c,--n===0&&s(null,e)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let e=["return {"];for(let r of this.strategiesInUse){let i=this.strategies[r];i.isCustom?e.push(`  ${i.name}: this.strategies.${r}.deriveConstraint(req, ctx),`):r==="version"?e.push("   version: req.headers['accept-version'],"):e.push("   host: req.headers.host || req.headers[':authority'],")}e.push("}"),this.deriveSyncConstraints=new Function("req","ctx",e.join(`
`)).bind(this)}};KN.exports=jb});var QN=_((Ype,JN)=>{"use strict";var Lte=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];JN.exports=Lte});var ZN=_((Xpe,XN)=>{"use strict";function YN(t,e){return t===50?e===53?"%":e===51?"#":e===52?"$":e===54?"&":e===66||e===98?"+":e===67||e===99?",":e===70||e===102?"/":null:t===51?e===65||e===97?":":e===66||e===98?";":e===68||e===100?"=":e===70||e===102?"?":null:t===52&&e===48?"@":null}function jte(t,e){let r=!1,i=!1,s="";for(let o=1;o<t.length;o++){let a=t.charCodeAt(o);if(a===37){let l=t.charCodeAt(o+1),c=t.charCodeAt(o+2);YN(l,c)===null?r=!0:(i=!0,l===50&&c===53&&(r=!0,t=t.slice(0,o+1)+"25"+t.slice(o+1),o+=2),o+=2)}else if(a===63||a===35||a===59&&e){s=t.slice(o+1),t=t.slice(0,o);break}}return{path:r?decodeURI(t):t,querystring:s,shouldDecodeParam:i}}function Dte(t){let e=t.indexOf("%");if(e===-1)return t;let r="",i=e;for(let s=e;s<t.length;s++)if(t.charCodeAt(s)===37){let n=t.charCodeAt(s+1),o=t.charCodeAt(s+2),a=YN(n,o);r+=t.slice(i,s)+a,i=s+3}return t.slice(0,e)+r+t.slice(i)}XN.exports={safeDecodeURI:jte,safeDecodeURIComponent:Dte}});var Bb=_((Zpe,ak)=>{"use strict";var Xe=require("node:assert"),Fte=iN(),vd=PN(),Fb=Ma(),{prettyPrintTree:Mte}=qN(),{StaticNode:ek,NODE_TYPES:tk}=BN(),zte=WN(),jo=QN(),Db=fd(),{safeDecodeURI:Bte,safeDecodeURIComponent:rk}=ZN(),ik=/^https?:\/\/.*?\//,gn=/(\/:[^/()]*?)\?(\/?)/;if(!vd(ik))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!vd(gn))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function Ke(t){if(!(this instanceof Ke))return new Ke(t);t=t||{},this._opts=t,t.defaultRoute?(Xe(typeof t.defaultRoute=="function","The default route must be a function"),this.defaultRoute=t.defaultRoute):this.defaultRoute=null,t.onBadUrl?(Xe(typeof t.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=t.onBadUrl):this.onBadUrl=null,t.buildPrettyMeta?(Xe(typeof t.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=t.buildPrettyMeta):this.buildPrettyMeta=Ute,t.querystringParser?(Xe(typeof t.querystringParser=="function","querystringParser must be a function"),this.querystringParser=t.querystringParser):this.querystringParser=e=>e.length===0?{}:Fte.parse(e),this.caseSensitive=t.caseSensitive===void 0?!0:t.caseSensitive,this.ignoreTrailingSlash=t.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=t.ignoreDuplicateSlashes||!1,this.maxParamLength=t.maxParamLength||100,this.allowUnsafeRegex=t.allowUnsafeRegex||!1,this.constrainer=new zte(t.constraints),this.useSemicolonDelimiter=t.useSemicolonDelimiter||!1,this.routes=[],this.trees={}}Ke.prototype.on=function(e,r,i,s,n){typeof i=="function"&&(s!==void 0&&(n=s),s=i,i={}),Xe(typeof r=="string","Path should be a string"),Xe(r.length>0,"The path could not be empty"),Xe(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),Xe(typeof s=="function","Handler should be a function");let o=r.match(gn);if(o){Xe(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let c=r.replace(gn,"$1$2"),u=r.replace(gn,"$2")||"/";this.on(e,c,i,s,n),this.on(e,u,i,s,n);return}let a=r;this.ignoreDuplicateSlashes&&(r=Mb(r)),this.ignoreTrailingSlash&&(r=zb(r));let l=Array.isArray(e)?e:[e];for(let c of l)Xe(typeof c=="string","Method should be a string"),Xe(jo.includes(c),`Method '${c}' is not an http method.`),this._on(c,r,i,s,n,a)};Ke.prototype._on=function(e,r,i,s,n){let o={};i.constraints!==void 0&&(Xe(typeof i.constraints=="object"&&i.constraints!==null,"Constraints should be an object"),Object.keys(i.constraints).length!==0&&(o=i.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[e]===void 0&&(this.trees[e]=new ek("/"));let a=r;if(a==="*"&&this.trees[e].prefix.length!==0){let p=this.trees[e];this.trees[e]=new ek(""),this.trees[e].staticChildren["/"]=p}let l=this.trees[e],c=l.prefix.length,u=[];for(let p=0;p<=a.length;p++){if(a.charCodeAt(p)===58&&a.charCodeAt(p+1)===58){p++;continue}let d=a.charCodeAt(p)===58&&a.charCodeAt(p+1)!==58,h=a.charCodeAt(p)===42;if(d||h||p===a.length&&p!==c){let m=a.slice(c,p);this.caseSensitive||(m=m.toLowerCase()),m=m.replaceAll("::",":"),m=m.replaceAll("%","%25"),l=l.createStaticChild(m)}if(d){let m=!1,v=!0,g="",w=[],b=p+1;for(let y=b;;y++){let E=a.charCodeAt(y),x=E===40,S=E===45||E===46,R=E===47||y===a.length;if(x||S||R){let T=a.slice(b,y);if(u.push(T),m=m||x||S,x){let O=ok(a,y),P=a.slice(y,O+1);this.allowUnsafeRegex||Xe(vd(new RegExp(P)),`The regex '${P}' is not safe!`),w.push(nk(P)),y=O+1,v=!0}else w.push(v?"(.*?)":`(${g}|(?:(?!${g}).)*)`),v=!1;let C=y;for(;y<a.length;y++){let O=a.charCodeAt(y);if(O===47)break;if(O===58)if(a.charCodeAt(y+1)===58)y++;else break}let q=a.slice(C,y);if(q&&(q=q.replaceAll("::",":"),q=q.replaceAll("%","%25"),w.push(g=sk(q))),b=y+1,R||a.charCodeAt(y)===47||y===a.length){let O=m?"()"+q:q,P=a.slice(p,y);a=a.slice(0,p+1)+O+a.slice(y),p+=O.length;let D=m?new RegExp("^"+w.join("")+"$"):null;l=l.createParametricChild(D,q||null,P),c=p+1;break}}}}else if(h&&(u.push("*"),l=l.createWildcardChild(),c=p+1,p!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let p of this.routes){let d=p.opts.constraints||{};if(p.method===e&&p.pattern===a&&Fb(d,o))throw new Error(`Method '${e}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let f={method:e,path:r,pattern:a,params:u,opts:i,handler:s,store:n};this.routes.push(f),l.addRoute(f,this.constrainer)};Ke.prototype.hasRoute=function(e,r,i){return this.findRoute(e,r,i)!==null};Ke.prototype.findRoute=function(e,r,i={}){if(this.trees[e]===void 0)return null;let s=r,n=this.trees[e],o=n.prefix.length,a=[];for(let l=0;l<=s.length;l++){if(s.charCodeAt(l)===58&&s.charCodeAt(l+1)===58){l++;continue}let c=s.charCodeAt(l)===58&&s.charCodeAt(l+1)!==58,u=s.charCodeAt(l)===42;if(c||u||l===s.length&&l!==o){let f=s.slice(o,l);if(this.caseSensitive||(f=f.toLowerCase()),f=f.replaceAll("::",":"),f=f.replaceAll("%","%25"),n=n.getStaticChild(f),n===null)return null}if(c){let f=!1,p=!0,d="",h=[],m=l+1;for(let v=m;;v++){let g=s.charCodeAt(v),w=g===40,b=g===45||g===46,y=g===47||v===s.length;if(w||b||y){let E=s.slice(m,v);if(a.push(E),f=f||w||b,w){let R=ok(s,v),T=s.slice(v,R+1);this.allowUnsafeRegex||Xe(vd(new RegExp(T)),`The regex '${T}' is not safe!`),h.push(nk(T)),v=R+1,p=!1}else h.push(p?"(.*?)":`(${d}|(?:(?!${d}).)*)`),p=!1;let x=v;for(;v<s.length;v++){let R=s.charCodeAt(v);if(R===47)break;if(R===58)if(s.charCodeAt(v+1)===58)v++;else break}let S=s.slice(x,v);if(S&&(S=S.replaceAll("::",":"),S=S.replaceAll("%","%25"),h.push(d=sk(S))),m=v+1,y||s.charCodeAt(v)===47||v===s.length){let R=f?"()"+S:S,T=s.slice(l,v);s=s.slice(0,l+1)+R+s.slice(v),l+=R.length;let C=f?new RegExp("^"+h.join("")+"$"):null;if(n=n.getParametricChild(C,S||null,T),n===null)return null;o=l+1;break}}}}else if(u&&(a.push("*"),n=n.getWildcardChild(),o=l+1,l!==s.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(s=s.toLowerCase());for(let l of this.routes){let c=l.opts.constraints||{};if(l.method===e&&l.pattern===s&&Fb(c,i))return{handler:l.handler,store:l.store,params:l.params}}return null};Ke.prototype.hasConstraintStrategy=function(t){return this.constrainer.hasConstraintStrategy(t)};Ke.prototype.addConstraintStrategy=function(t){this.constrainer.addConstraintStrategy(t),this._rebuild(this.routes)};Ke.prototype.reset=function(){this.trees={},this.routes=[]};Ke.prototype.off=function(e,r,i){Xe(typeof r=="string","Path should be a string"),Xe(r.length>0,"The path could not be empty"),Xe(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),Xe(typeof i>"u"||typeof i=="object"&&!Array.isArray(i)&&i!==null,"Constraints should be an object or undefined.");let s=r.match(gn);if(s){Xe(r.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(gn,"$1$2"),a=r.replace(gn,"$2");this.off(e,o,i),this.off(e,a,i);return}this.ignoreDuplicateSlashes&&(r=Mb(r)),this.ignoreTrailingSlash&&(r=zb(r));let n=Array.isArray(e)?e:[e];for(let o of n)this._off(o,r,i)};Ke.prototype._off=function(e,r,i){Xe(typeof e=="string","Method should be a string"),Xe(jo.includes(e),`Method '${e}' is not an http method.`);function s(l){return e!==l.method||r!==l.path}function n(l){return s(l)||!Fb(i,l.opts.constraints||{})}let o=i?n:s,a=this.routes.filter(o);this._rebuild(a)};Ke.prototype.lookup=function(e,r,i,s){if(typeof i=="function"&&(s=i,i=void 0),s===void 0){let n=this.constrainer.deriveConstraints(e,i),o=this.find(e.method,e.url,n);return this.callHandler(o,e,r,i)}this.constrainer.deriveConstraints(e,i,(n,o)=>{if(n!==null){s(n);return}try{let a=this.find(e.method,e.url,o),l=this.callHandler(a,e,r,i);s(null,l)}catch(a){s(a)}})};Ke.prototype.callHandler=function(e,r,i,s){return e===null?this._defaultRoute(r,i,s):s===void 0?e.handler(r,i,e.params,e.store,e.searchParams):e.handler.call(s,r,i,e.params,e.store,e.searchParams)};Ke.prototype.find=function(e,r,i){let s=this.trees[e];if(s===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(ik,"/")),this.ignoreDuplicateSlashes&&(r=Mb(r));let n,o,a;try{n=Bte(r,this.useSemicolonDelimiter),r=n.path,o=n.querystring,a=n.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=zb(r));let l=r;this.caseSensitive===!1&&(r=r.toLowerCase());let c=this.maxParamLength,u=s.prefix.length,f=[],p=r.length,d=[];for(;;){if(u===p&&s.isLeafNode){let g=s.handlerStorage.getMatchingHandler(i);if(g!==null)return{handler:g.handler,store:g.store,params:g._createParamsObject(f),searchParams:this.querystringParser(o)}}let h=s.getNextNode(r,u,d,f.length);if(h===null){if(d.length===0)return null;let g=d.pop();u=g.brotherPathIndex,f.splice(g.paramsCount),h=g.brotherNode}if(s=h,s.kind===tk.STATIC){u+=s.prefix.length;continue}if(s.kind===tk.WILDCARD){let g=l.slice(u);a&&(g=rk(g)),f.push(g),u=p;continue}let m=l.indexOf("/",u);m===-1&&(m=p);let v=l.slice(u,m);if(a&&(v=rk(v)),s.isRegex){let g=s.regex.exec(v);if(g===null)continue;for(let w=1;w<g.length;w++){let b=g[w];if(b.length>c)return null;f.push(b)}}else{if(v.length>c)return null;f.push(v)}u=m}};Ke.prototype._rebuild=function(t){this.reset();for(let e of t){let{method:r,path:i,opts:s,handler:n,store:o}=e;this._on(r,i,s,n,o)}};Ke.prototype._defaultRoute=function(t,e,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(t,e):this.defaultRoute.call(r,t,e);e.statusCode=404,e.end()};Ke.prototype._onBadUrl=function(t){if(this.onBadUrl===null)return null;let e=this.onBadUrl;return{handler:(r,i,s)=>e(t,r,i),params:{},store:null}};Ke.prototype.prettyPrint=function(t={}){let e=t.method;t.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(e===void 0){let{version:i,host:s,...n}=this.constrainer.strategies;n[Db.name]=Db;let o=new Ke({...this._opts,constraints:n}),a=this.routes.map(l=>{let c={...l.opts.constraints,[Db.name]:l.method};return{...l,method:"MERGED",opts:{constraints:c}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[e];return r==null?"(empty tree)":Mte(r,t)};for(let t in jo){if(!jo.hasOwnProperty(t))continue;let e=jo[t],r=e.toLowerCase();Ke.prototype[r]=function(i,s,n){return this.on(e,i,s,n)}}Ke.prototype.all=function(t,e,r){this.on(jo,t,e,r)};ak.exports=Ke;function sk(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Mb(t){return t.replace(/\/\/+/g,"/")}function zb(t){return t.length>1&&t.charCodeAt(t.length-1)===47?t.slice(0,-1):t}function nk(t){return t.charCodeAt(1)===94&&(t=t.slice(0,1)+t.slice(2)),t.charCodeAt(t.length-2)===36&&(t=t.slice(0,t.length-2)+t.slice(t.length-1)),t}function ok(t,e){let r=1;for(;e<t.length;){if(e++,t.charCodeAt(e)===92){e++;continue}if(t.charCodeAt(e)===41?r--:t.charCodeAt(e)===40&&r++,!r)return e}throw new TypeError('Invalid regexp expression in "'+t+'"')}function Ute(t){return t?t.store?Object.assign({},t.store):{}:{}}});var ck=_((eme,lk)=>{"use strict";function Ub(t,e,r,i){if(r===void 0)return e.header("content-length","0"),i(null,null);if(typeof r.resume=="function")return r.on("error",n=>{e.log.error({err:n},"Error on Stream found for HEAD route")}),r.resume(),i(null,null);let s=""+Buffer.byteLength(r);e.header("content-length",s),i(null,null)}function Hte(t){return t==null?Ub:Array.isArray(t)?[...t,Ub]:[t,Ub]}lk.exports={parseHeadOnSendHandlers:Hte}});var Rk=_((tme,xk)=>{"use strict";var Vte=Bb(),Gte=zu(),uk=Lp(),{onRequestAbortHookRunner:Kte,lifecycleHooks:fk,preParsingHookRunner:Wte,onTimeoutHookRunner:Jte,onRequestHookRunner:Qte}=ls(),{normalizeSchema:Yte}=Ea(),{parseHeadOnSendHandlers:Xte}=ck(),{compileSchemasForValidation:Zte,compileSchemasForSerialization:ere}=Ip(),{FST_ERR_SCH_VALIDATION_BUILD:tre,FST_ERR_SCH_SERIALIZATION_BUILD:rre,FST_ERR_DUPLICATED_ROUTE:ire,FST_ERR_INVALID_URL:sre,FST_ERR_HOOK_INVALID_HANDLER:dk,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:nre,FST_ERR_ROUTE_DUPLICATED_HANDLER:ore,FST_ERR_ROUTE_HANDLER_NOT_FN:hk,FST_ERR_ROUTE_MISSING_HANDLER:are,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:lre,FST_ERR_ROUTE_METHOD_INVALID:cre,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:ure,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:fre,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:Hb}=Et(),{kRoutePrefix:dre,kSupportedHTTPMethods:Kb,kLogLevel:hre,kLogSerializers:pk,kHooks:mk,kSchemaController:pre,kOptions:yk,kReplySerializerDefault:Vb,kReplyIsError:mre,kRequestPayloadStream:yre,kDisableRequestLogging:gre,kSchemaErrorFormatter:bre,kErrorHandler:gk,kHasBeenDecorated:bk,kRequestAcceptVersion:Gb,kRouteByFastify:vre,kRouteContext:vk}=pt(),{buildErrorHandler:wre}=xa(),{createChildLogger:_re}=Sa(),{getGenReqId:Sre}=td();function Ere(t){let e=Vte(t.config),r,i,s,n,o,a,l,c,u,f,p,d,h=!1;return{setup(S,R){r=R.avvio,i=R.fourOhFour,s=R.logger,n=R.hasLogger,o=R.setupResponseListeners,a=R.throwIfAlreadyStarted,p=S.exposeHeadRoutes,l=S.disableRequestLogging,c=S.ignoreTrailingSlash,u=S.ignoreDuplicateSlashes,f=Object.hasOwn(S,"return503OnClosing")?S.return503OnClosing:!0,d=R.keepAliveConnections},routing:e.lookup.bind(e),route:E,hasRoute:b,prepareRoute:w,routeHandler:x,closeRoutes:()=>{h=!0},printRoutes:e.prettyPrint.bind(e),addConstraintStrategy:m,hasConstraintStrategy:v,isAsyncConstraint:g,findRoute:y};function m(S){return a("Cannot add constraint strategy!"),e.addConstraintStrategy(S)}function v(S){return e.hasConstraintStrategy(S)}function g(){return e.constrainer.asyncStrategiesInUse.size>0}function w({method:S,url:R,options:T,handler:C,isFastify:q}){if(typeof R!="string")throw new sre(typeof R);if(!C&&typeof T=="function")C=T,T={};else if(C&&typeof C=="function"){if(Object.prototype.toString.call(T)!=="[object Object]")throw new nre(S,R);if(T.handler)throw typeof T.handler=="function"?new ore(S,R):new hk(S,R)}return T=Object.assign({},T,{method:S,url:R,path:R,handler:C||T&&T.handler}),E.call(this,{options:T,isFastify:q})}function b({options:S}){let R=S.method?.toUpperCase()??"";return e.hasRoute(R,S.url||"",S.constraints)}function y(S){let R=e.find(S.method,S.url||"",S.constraints);return R?{handler:R.handler,params:R.params,searchParams:R.searchParams}:null}function E({options:S,isFastify:R}){a("Cannot add route!");let T={...S},C=T.url||T.path||"";if(!T.handler)throw new are(T.method,C);if(T.errorHandler!==void 0&&typeof T.errorHandler!="function")throw new hk(T.method,C);Ek(T.bodyLimit);let q=T.exposeHeadRoute??p,O=!1,P=!1;if(Array.isArray(T.method))for(let K=0;K<T.method.length;++K)T.method[K]=wk.call(this,T.method[K]),_k.call(this,T.method[K],C,T.schema),O=T.method.includes("GET"),P=T.method.includes("HEAD");else T.method=wk.call(this,T.method),_k.call(this,T.method,C,T.schema),O=T.method==="GET",P=T.method==="HEAD";let D=q&&O?{...S}:null,te=this[dre];if(C==="/"&&te.length>0&&T.method!=="HEAD")switch(T.prefixTrailingSlash){case"slash":L.call(this,{path:C,isFastify:R});break;case"no-slash":L.call(this,{path:"",isFastify:R});break;case"both":default:L.call(this,{path:"",isFastify:R}),c!==!0&&(u!==!0||!te.endsWith("/"))&&L.call(this,{path:C,prefixing:!0,isFastify:R})}else C[0]==="/"&&te.endsWith("/")?L.call(this,{path:C.slice(1),isFastify:R}):L.call(this,{path:C,isFastify:R});return this;function L({path:K,prefixing:Re=!1,isFastify:z=!1}){let Te=te+K;if(T.url=Te,T.path=Te,T.routePath=K,T.prefix=te,T.logLevel=T.logLevel||this[hre],(this[pk]||T.logSerializers)&&(T.logSerializers=Object.assign(Object.create(this[pk]),T.logSerializers)),T.attachValidation==null&&(T.attachValidation=!1),Re===!1)for(let xe of this[mk].onRoute)xe.call(this,T);for(let xe of fk)if(T&&xe in T){if(Array.isArray(T[xe]))for(let Ve of T[xe]){if(typeof Ve!="function")throw new dk(xe,Object.prototype.toString.call(Ve));if(xe==="onSend"||xe==="preSerialization"||xe==="onError"||xe==="preParsing"){if(Ve.constructor.name==="AsyncFunction"&&Ve.length===4)throw new Hb}else if(xe==="onRequestAbort"){if(Ve.constructor.name==="AsyncFunction"&&Ve.length!==1)throw new Hb}else if(Ve.constructor.name==="AsyncFunction"&&Ve.length===3)throw new Hb}else if(T[xe]!==void 0&&typeof T[xe]!="function")throw new dk(xe,Object.prototype.toString.call(T[xe]))}let ht=T.constraints||{},we={...T.config,url:Te,method:T.method},se=new Gte({schema:T.schema,handler:T.handler.bind(this),config:we,errorHandler:T.errorHandler,childLoggerFactory:T.childLoggerFactory,bodyLimit:T.bodyLimit,logLevel:T.logLevel,logSerializers:T.logSerializers,attachValidation:T.attachValidation,schemaErrorFormatter:T.schemaErrorFormatter,replySerializer:this[Vb],validatorCompiler:T.validatorCompiler,serializerCompiler:T.serializerCompiler,exposeHeadRoute:q,prefixTrailingSlash:T.prefixTrailingSlash||"both",server:this,isFastify:z}),Ce=e.findRoute("HEAD",T.url,ht)!==null;try{e.on(T.method,T.url,{constraints:ht},x,se)}catch(xe){if(!se[vre])throw xe.message.includes(`Method '${T.method}' already declared for route`)?new ire(T.method,T.url):xe}if(this.after((xe,Ve)=>{se.errorHandler=T.errorHandler?wre(this[gk],T.errorHandler):this[gk],se._parserOptions.limit=T.bodyLimit||null,se.logLevel=T.logLevel,se.logSerializers=T.logSerializers,se.attachValidation=T.attachValidation,se[Vb]=this[Vb],se.schemaErrorFormatter=T.schemaErrorFormatter||this[bre]||se.schemaErrorFormatter,r.once("preReady",()=>{for(let ue of fk){let rr=this[mk][ue].concat(T[ue]||[]).map(ua=>ua.bind(this));se[ue]=rr.length?rr:null}for(;!se.Request[bk]&&se.Request.parent;)se.Request=se.Request.parent;for(;!se.Reply[bk]&&se.Reply.parent;)se.Reply=se.Reply.parent;if(i.setContext(this,se),T.schema){se.schema=Yte(se.schema,this.initialConfig);let ue=this[pre];!T.validatorCompiler&&(T.schema.body||T.schema.headers||T.schema.querystring||T.schema.params)&&ue.setupValidator(this[yk]);try{let rr=typeof T?.validatorCompiler=="function"||ue.isCustomValidatorCompiler;Zte(se,T.validatorCompiler||ue.validatorCompiler,rr)}catch(rr){throw new tre(T.method,Te,rr.message)}T.schema.response&&!T.serializerCompiler&&ue.setupSerializer(this[yk]);try{ere(se,T.serializerCompiler||ue.serializerCompiler)}catch(rr){throw new rre(T.method,Te,rr.message)}}}),Ve(xe)}),q&&O&&!P&&!Ce){let xe=Xte(D.onSend);w.call(this,{method:"HEAD",url:K,options:{...D,onSend:xe},isFastify:!0})}}}function x(S,R,T,C,q){let O=Sre(C.server,S),P={level:C.logLevel};C.logSerializers&&(P.serializers=C.logSerializers);let D=_re(C,s,S,O,P);if(D[gre]=l,h===!0&&(S.httpVersionMajor!==2&&R.setHeader("Connection","close"),f)){let Re={"Content-Type":"application/json","Content-Length":"80"};R.writeHead(503,Re),R.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),D.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(S.headers.connection||"")==="keep-alive"&&d.has(S.socket)===!1&&(d.add(S.socket),S.socket.on("close",Tre.bind({keepAliveConnections:d,socket:S.socket}))),S.headers[Gb]!==void 0&&(S.headers["accept-version"]=S.headers[Gb],S.headers[Gb]=void 0);let L=new C.Request(O,T,S,q,D,C),K=new C.Reply(R,L,D);l===!1&&D.info({req:L},"incoming request"),(n===!0||C.onResponse!==null)&&o(K),C.onRequest!==null?Qte(C.onRequest,L,K,Sk):Sk(null,L,K),C.onRequestAbort!==null&&S.on("close",()=>{S.aborted&&Kte(C.onRequestAbort,L,xre.bind(null,K))}),C.onTimeout!==null&&(L.raw.socket._meta||L.raw.socket.on("timeout",Rre),L.raw.socket._meta={context:C,request:L,reply:K})}}function xre(t,e){e&&t.log.error({err:e},"onRequestAborted hook failed")}function Rre(){let{context:t,request:e,reply:r}=this._meta;Jte(t.onTimeout,e,r,Pre)}function wk(t){if(typeof t!="string")throw new cre;if(t=t.toUpperCase(),!this[Kb].bodyless.has(t)&&!this[Kb].bodywith.has(t))throw new lre(t);return t}function _k(t,e,r){if(this[Kb].bodyless.has(t)&&r?.body)throw new ure(t,e)}function Ek(t){if(t!==void 0&&(!Number.isInteger(t)||t<=0))throw new fre(t)}function Sk(t,e,r){if(r.sent!==!0){if(t!=null){r[mre]=!0,r.send(t);return}e[yre]=e.raw,e[vk].preParsing!==null?Wte(e[vk].preParsing,e,r,uk.bind(e.server)):uk.call(e.server,null,e,r)}}function Tre(){this.keepAliveConnections.delete(this.socket)}function Pre(){}xk.exports={buildRouting:Ere,validateBodyLimitOption:Ek}});var $k=_((rme,Ik)=>{"use strict";var Are=Bb(),Tk=ku(),Pk=Mu(),Cre=zu(),{kRoutePrefix:Ore,kCanSetNotFoundHandler:Al,kFourOhFourLevelInstance:Cl,kFourOhFourContext:_i,kHooks:Ire,kErrorHandler:Ak}=pt(),{lifecycleHooks:$re}=ls(),{buildErrorHandler:Nre}=xa(),{FST_ERR_NOT_FOUND:kre}=Et(),{createChildLogger:Ck}=Sa(),{getGenReqId:Ok}=td();function qre(t){let{logger:e,disableRequestLogging:r}=t,i=Are({onBadUrl:a(),defaultRoute:f}),s=null;return{router:i,setNotFoundHandler:c,setContext:l,arrange404:n};function n(p){p[Cl]=p,p[Al]=!0,i.onBadUrl=i.onBadUrl.bind(p),i.defaultRoute=i.defaultRoute.bind(p)}function o(p,d){let{url:h,method:m}=p.raw,v=`Route ${m}:${h} not found`;r||p.log.info(v),d.code(404).send({message:v,error:"Not Found",statusCode:404})}function a(){return function(d,h,m){let v=this[Cl][_i],g=Ok(v.server,h),w=Ck(v,e,h,g),b=new Pk(g,null,h,null,w,v),y=new Tk(m,b,w);s(b,y)}}function l(p,d){let h=Object.assign({},p[_i]);h.onSend=d.onSend,d[_i]=h}function c(p,d,h,m){this[Al]===void 0&&(this[Al]=!0),this[_i]===void 0&&(this[_i]=null);let v=this,g=this[Ore]||"/";if(this[Al]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${g}'`);typeof p=="object"&&(p.preHandler&&(Array.isArray(p.preHandler)?p.preHandler=p.preHandler.map(w=>w.bind(v)):p.preHandler=p.preHandler.bind(v)),p.preValidation&&(Array.isArray(p.preValidation)?p.preValidation=p.preValidation.map(w=>w.bind(v)):p.preValidation=p.preValidation.bind(v))),typeof p=="function"&&(d=p,p=void 0),p=p||{},d?(this[Cl][Al]=!1,d=d.bind(this),s=d):(d=o,s=o),this.after((w,b)=>{u.call(this,g,p,d,h,m),b(w)})}function u(p,d,h,m,v){let g=new Cre({schema:d.schema,handler:h,config:d.config||{},server:this});if(m.once("preReady",()=>{let w=this[_i];for(let b of $re){let y=this[Ire][b].concat(d[b]||[]).map(E=>E.bind(this));w[b]=y.length?y:null}w.errorHandler=d.errorHandler?Nre(this[Ak],d.errorHandler):this[Ak]}),this[_i]!==null&&p==="/"){Object.assign(this[_i],g);return}this[Cl][_i]=g,i.all(p+(p.endsWith("/")?"*":"/*"),v,g),i.all(p,v,g)}function f(p,d){let h=this[Cl][_i],m=Ok(h.server,p),v=Ck(h,e,p,m);v.info({req:p},"incoming request");let g=new Pk(m,null,p,null,v,h),w=new Tk(d,g,v);g.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),g.log.warn(i.prettyPrint()),w.code(404).send(new kre)}}Ik.exports=qre});var Nk=_((ime,wd)=>{"use strict";wd.exports=Oe;wd.exports.default=Oe;var Lre={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{type:"boolean"},{type:"string"}],default:!1},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},useSemicolonDelimiter:{type:"boolean",default:!1},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},jre=Object.prototype.hasOwnProperty,Dre=new RegExp("idle","u");function Oe(t,{instancePath:e="",parentData:r,parentDataProperty:i,rootData:s=t}={}){let n=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){t.connectionTimeout===void 0&&(t.connectionTimeout=0),t.keepAliveTimeout===void 0&&(t.keepAliveTimeout=72e3),t.maxRequestsPerSocket===void 0&&(t.maxRequestsPerSocket=0),t.requestTimeout===void 0&&(t.requestTimeout=0),t.bodyLimit===void 0&&(t.bodyLimit=1048576),t.caseSensitive===void 0&&(t.caseSensitive=!0),t.allowUnsafeRegex===void 0&&(t.allowUnsafeRegex=!1),t.ignoreTrailingSlash===void 0&&(t.ignoreTrailingSlash=!1),t.ignoreDuplicateSlashes===void 0&&(t.ignoreDuplicateSlashes=!1),t.disableRequestLogging===void 0&&(t.disableRequestLogging=!1),t.maxParamLength===void 0&&(t.maxParamLength=100),t.onProtoPoisoning===void 0&&(t.onProtoPoisoning="error"),t.onConstructorPoisoning===void 0&&(t.onConstructorPoisoning="error"),t.pluginTimeout===void 0&&(t.pluginTimeout=1e4),t.requestIdHeader===void 0&&(t.requestIdHeader=!1),t.requestIdLogLabel===void 0&&(t.requestIdLogLabel="reqId"),t.http2SessionTimeout===void 0&&(t.http2SessionTimeout=72e3),t.exposeHeadRoutes===void 0&&(t.exposeHeadRoutes=!0),t.useSemicolonDelimiter===void 0&&(t.useSemicolonDelimiter=!1);let h=o;for(let m in t)jre.call(Lre.properties,m)||delete t[m];if(h===o){let m=t.connectionTimeout,v=o;if(!(typeof m=="number"&&!(m%1)&&!isNaN(m)&&isFinite(m))){let g=typeof m,w;if(w===void 0)if(g==="boolean"||m===null||g==="string"&&m&&m==+m&&!(m%1))w=+m;else return Oe.errors=[{instancePath:e+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;w!==void 0&&(m=w,t!==void 0&&(t.connectionTimeout=w))}var a=v===o;if(a){let g=t.keepAliveTimeout,w=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g))){let y=typeof g,E;if(E===void 0)if(y==="boolean"||g===null||y==="string"&&g&&g==+g&&!(g%1))E=+g;else return Oe.errors=[{instancePath:e+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;E!==void 0&&(g=E,t!==void 0&&(t.keepAliveTimeout=E))}var a=w===o;if(a){if(t.forceCloseConnections!==void 0){let y=t.forceCloseConnections,E=o,x=o,S=!1,R=null,T=o;if(typeof y!="string"){let O=typeof y,P;if(P===void 0)if(O=="number"||O=="boolean")P=""+y;else if(y===null)P="";else{let D={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[D]:n.push(D),o++}P!==void 0&&(y=P,t!==void 0&&(t.forceCloseConnections=P))}if(o===T&&typeof y=="string"&&!Dre.test(y)){let O={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};n===null?n=[O]:n.push(O),o++}var l=T===o;l&&(S=!0,R=0);let C=o;if(typeof y!="boolean"){let O;if(O===void 0)if(y==="false"||y===0||y===null)O=!1;else if(y==="true"||y===1)O=!0;else{let P={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};n===null?n=[P]:n.push(P),o++}O!==void 0&&(y=O,t!==void 0&&(t.forceCloseConnections=O))}var l=C===o;if(l&&S?(S=!1,R=[R,1]):l&&(S=!0,R=1),S)o=x,n!==null&&(x?n.length=x:n=null);else{let O={instancePath:e+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:R},message:"must match exactly one schema in oneOf"};return n===null?n=[O]:n.push(O),o++,Oe.errors=n,!1}var a=E===o}else var a=!0;if(a){let y=t.maxRequestsPerSocket,E=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))&&y!==null){let S=typeof y,R;if(R===void 0)if(S==="boolean"||y===null||S==="string"&&y&&y==+y&&!(y%1))R=+y;else if(y===""||y===0||y===!1)R=null;else return Oe.errors=[{instancePath:e+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;R!==void 0&&(y=R,t!==void 0&&(t.maxRequestsPerSocket=R))}var a=E===o;if(a){let S=t.requestTimeout,R=o;if(!(typeof S=="number"&&!(S%1)&&!isNaN(S)&&isFinite(S))){let C=typeof S,q;if(q===void 0)if(C==="boolean"||S===null||C==="string"&&S&&S==+S&&!(S%1))q=+S;else return Oe.errors=[{instancePath:e+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;q!==void 0&&(S=q,t!==void 0&&(t.requestTimeout=q))}var a=R===o;if(a){let C=t.bodyLimit,q=o;if(!(typeof C=="number"&&!(C%1)&&!isNaN(C)&&isFinite(C))){let P=typeof C,D;if(D===void 0)if(P==="boolean"||C===null||P==="string"&&C&&C==+C&&!(C%1))D=+C;else return Oe.errors=[{instancePath:e+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;D!==void 0&&(C=D,t!==void 0&&(t.bodyLimit=D))}var a=q===o;if(a){let P=t.caseSensitive,D=o;if(typeof P!="boolean"){let L;if(L===void 0)if(P==="false"||P===0||P===null)L=!1;else if(P==="true"||P===1)L=!0;else return Oe.errors=[{instancePath:e+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;L!==void 0&&(P=L,t!==void 0&&(t.caseSensitive=L))}var a=D===o;if(a){let L=t.allowUnsafeRegex,K=o;if(typeof L!="boolean"){let z;if(z===void 0)if(L==="false"||L===0||L===null)z=!1;else if(L==="true"||L===1)z=!0;else return Oe.errors=[{instancePath:e+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;z!==void 0&&(L=z,t!==void 0&&(t.allowUnsafeRegex=z))}var a=K===o;if(a){if(t.http2!==void 0){let z=t.http2,Te=o;if(typeof z!="boolean"){let we;if(we===void 0)if(z==="false"||z===0||z===null)we=!1;else if(z==="true"||z===1)we=!0;else return Oe.errors=[{instancePath:e+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;we!==void 0&&(z=we,t!==void 0&&(t.http2=we))}var a=Te===o}else var a=!0;if(a){if(t.https!==void 0){let z=t.https,Te=o,ht=o,we=!0,se=o,wt=o,Ce=o,xe=o,Ve=!1,ue=null,rr=o;if(typeof z!="boolean"){let I;if(I===void 0)if(z==="false"||z===0||z===null)I=!1;else if(z==="true"||z===1)I=!0;else{let j={};n===null?n=[j]:n.push(j),o++}I!==void 0&&(z=I,t!==void 0&&(t.https=I))}var c=rr===o;c&&(Ve=!0,ue=0);let ua=o;if(z!==null){let I;if(I===void 0)if(z===""||z===0||z===!1)I=null;else{let j={};n===null?n=[j]:n.push(j),o++}I!==void 0&&(z=I,t!==void 0&&(t.https=I))}var c=ua===o;if(c&&Ve)Ve=!1,ue=[ue,1];else{c&&(Ve=!0,ue=1);let I=o;if(o===I)if(z&&typeof z=="object"&&!Array.isArray(z)){let U;if(z.allowHTTP1===void 0&&(U="allowHTTP1")){let Y={};n===null?n=[Y]:n.push(Y),o++}else{let Y=o;for(let he in z)he!=="allowHTTP1"&&delete z[he];if(Y===o&&z.allowHTTP1!==void 0){let he=z.allowHTTP1;if(typeof he!="boolean"){let W;if(W===void 0)if(he==="false"||he===0||he===null)W=!1;else if(he==="true"||he===1)W=!0;else{let Fe={};n===null?n=[Fe]:n.push(Fe),o++}W!==void 0&&(he=W,z!==void 0&&(z.allowHTTP1=W))}}}}else{let U={};n===null?n=[U]:n.push(U),o++}var c=I===o;c&&Ve?(Ve=!1,ue=[ue,2]):c&&(Ve=!0,ue=2)}if(Ve)o=xe,n!==null&&(xe?n.length=xe:n=null);else{let I={};n===null?n=[I]:n.push(I),o++}var u=Ce===o;if(u){let I={};n===null?n=[I]:n.push(I),o++}else o=wt,n!==null&&(wt?n.length=wt:n=null);var f=se===o;if(o=ht,n!==null&&(ht?n.length=ht:n=null),f){let I=o;t.https=!0;var f=I===o;we=f}if(!we){let I={instancePath:e+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return n===null?n=[I]:n.push(I),o++,Oe.errors=n,!1}var a=Te===o}else var a=!0;if(a){let z=t.ignoreTrailingSlash,Te=o;if(typeof z!="boolean"){let we;if(we===void 0)if(z==="false"||z===0||z===null)we=!1;else if(z==="true"||z===1)we=!0;else return Oe.errors=[{instancePath:e+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;we!==void 0&&(z=we,t!==void 0&&(t.ignoreTrailingSlash=we))}var a=Te===o;if(a){let we=t.ignoreDuplicateSlashes,se=o;if(typeof we!="boolean"){let Ce;if(Ce===void 0)if(we==="false"||we===0||we===null)Ce=!1;else if(we==="true"||we===1)Ce=!0;else return Oe.errors=[{instancePath:e+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Ce!==void 0&&(we=Ce,t!==void 0&&(t.ignoreDuplicateSlashes=Ce))}var a=se===o;if(a){let Ce=t.disableRequestLogging,xe=o;if(typeof Ce!="boolean"){let ue;if(ue===void 0)if(Ce==="false"||Ce===0||Ce===null)ue=!1;else if(Ce==="true"||Ce===1)ue=!0;else return Oe.errors=[{instancePath:e+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;ue!==void 0&&(Ce=ue,t!==void 0&&(t.disableRequestLogging=ue))}var a=xe===o;if(a){let ue=t.maxParamLength,rr=o;if(!(typeof ue=="number"&&!(ue%1)&&!isNaN(ue)&&isFinite(ue))){let ni=typeof ue,I;if(I===void 0)if(ni==="boolean"||ue===null||ni==="string"&&ue&&ue==+ue&&!(ue%1))I=+ue;else return Oe.errors=[{instancePath:e+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;I!==void 0&&(ue=I,t!==void 0&&(t.maxParamLength=I))}var a=rr===o;if(a){let ni=t.onProtoPoisoning,I=o;if(typeof ni!="string"){let U=typeof ni,Y;if(Y===void 0)if(U=="number"||U=="boolean")Y=""+ni;else if(ni===null)Y="";else return Oe.errors=[{instancePath:e+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Y!==void 0&&(ni=Y,t!==void 0&&(t.onProtoPoisoning=Y))}var a=I===o;if(a){let U=t.onConstructorPoisoning,Y=o;if(typeof U!="string"){let W=typeof U,Fe;if(Fe===void 0)if(W=="number"||W=="boolean")Fe=""+U;else if(U===null)Fe="";else return Oe.errors=[{instancePath:e+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Fe!==void 0&&(U=Fe,t!==void 0&&(t.onConstructorPoisoning=Fe))}var a=Y===o;if(a){let W=t.pluginTimeout,Fe=o;if(!(typeof W=="number"&&!(W%1)&&!isNaN(W)&&isFinite(W))){let Je=typeof W,Li;if(Li===void 0)if(Je==="boolean"||W===null||Je==="string"&&W&&W==+W&&!(W%1))Li=+W;else return Oe.errors=[{instancePath:e+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Li!==void 0&&(W=Li,t!==void 0&&(t.pluginTimeout=Li))}var a=Fe===o;if(a){let Je=t.requestIdHeader,Li=o,mp=o,zn=!1,f2=o;if(typeof Je!="boolean"){let _t;if(_t===void 0)if(Je==="false"||Je===0||Je===null)_t=!1;else if(Je==="true"||Je===1)_t=!0;else{let Bc={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};n===null?n=[Bc]:n.push(Bc),o++}_t!==void 0&&(Je=_t,t!==void 0&&(t.requestIdHeader=_t))}var p=f2===o;if(zn=zn||p,!zn){let _t=o;if(typeof Je!="string"){let ES=typeof Je,Ge;if(Ge===void 0)if(ES=="number"||ES=="boolean")Ge=""+Je;else if(Je===null)Ge="";else{let Ur={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[Ur]:n.push(Ur),o++}Ge!==void 0&&(Je=Ge,t!==void 0&&(t.requestIdHeader=Ge))}var p=_t===o;zn=zn||p}if(zn)o=mp,n!==null&&(mp?n.length=mp:n=null);else{let _t={instancePath:e+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return n===null?n=[_t]:n.push(_t),o++,Oe.errors=n,!1}var a=Li===o;if(a){let _t=t.requestIdLogLabel,Bc=o;if(typeof _t!="string"){let Ge=typeof _t,Ur;if(Ur===void 0)if(Ge=="number"||Ge=="boolean")Ur=""+_t;else if(_t===null)Ur="";else return Oe.errors=[{instancePath:e+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ur!==void 0&&(_t=Ur,t!==void 0&&(t.requestIdLogLabel=Ur))}var a=Bc===o;if(a){let Ge=t.http2SessionTimeout,Ur=o;if(!(typeof Ge=="number"&&!(Ge%1)&&!isNaN(Ge)&&isFinite(Ge))){let oi=typeof Ge,Hs;if(Hs===void 0)if(oi==="boolean"||Ge===null||oi==="string"&&Ge&&Ge==+Ge&&!(Ge%1))Hs=+Ge;else return Oe.errors=[{instancePath:e+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Hs!==void 0&&(Ge=Hs,t!==void 0&&(t.http2SessionTimeout=Hs))}var a=Ur===o;if(a){let oi=t.exposeHeadRoutes,Hs=o;if(typeof oi!="boolean"){let ir;if(ir===void 0)if(oi==="false"||oi===0||oi===null)ir=!1;else if(oi==="true"||oi===1)ir=!0;else return Oe.errors=[{instancePath:e+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;ir!==void 0&&(oi=ir,t!==void 0&&(t.exposeHeadRoutes=ir))}var a=Hs===o;if(a){let ir=t.useSemicolonDelimiter,d2=o;if(typeof ir!="boolean"){let xr;if(xr===void 0)if(ir==="false"||ir===0||ir===null)xr=!1;else if(ir==="true"||ir===1)xr=!0;else return Oe.errors=[{instancePath:e+"/useSemicolonDelimiter",schemaPath:"#/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;xr!==void 0&&(ir=xr,t!==void 0&&(t.useSemicolonDelimiter=xr))}var a=d2===o;if(a)if(t.constraints!==void 0){let xr=t.constraints,xS=o;if(o===xS)if(xr&&typeof xr=="object"&&!Array.isArray(xr))for(let Uc in xr){let Hr=xr[Uc],RS=o;if(o===RS)if(Hr&&typeof Hr=="object"&&!Array.isArray(Hr)){let Bn;if(Hr.name===void 0&&(Bn="name")||Hr.storage===void 0&&(Bn="storage")||Hr.validate===void 0&&(Bn="validate")||Hr.deriveConstraint===void 0&&(Bn="deriveConstraint"))return Oe.errors=[{instancePath:e+"/constraints/"+Uc.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:Bn},message:"must have required property '"+Bn+"'"}],!1;if(Hr.name!==void 0){let fa=Hr.name;if(typeof fa!="string"){let TS=typeof fa,Un;if(Un===void 0)if(TS=="number"||TS=="boolean")Un=""+fa;else if(fa===null)Un="";else return Oe.errors=[{instancePath:e+"/constraints/"+Uc.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Un!==void 0&&(fa=Un,Hr!==void 0&&(Hr.name=Un))}}}else return Oe.errors=[{instancePath:e+"/constraints/"+Uc.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=RS===o;if(!d)break}else return Oe.errors=[{instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=xS===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}else return Oe.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Oe.errors=n,o===0}wd.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:!1,requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0,useSemicolonDelimiter:!1}});var kk=_((sme,Sd)=>{"use strict";var _d=Nk(),Fre=xu()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:Mre}=Et();function zre(t){let e=Fre(t);if(!_d(e)){let r=new Mre(JSON.stringify(_d.errors.map(i=>i.message)));throw r.errors=_d.errors,r}return Wb(e)}function Wb(t){let e=Object.getOwnPropertyNames(t);for(let r of e){let i=t[r];ArrayBuffer.isView(i)&&!(i instanceof DataView)||(t[r]=i&&typeof i=="object"?Wb(i):i)}return Object.freeze(t)}Sd.exports=zre;Sd.exports.defaultInitOptions=_d.defaultInitOptions;Sd.exports.utils={deepFreezeObject:Wb}});var Uk=_((nme,Bk)=>{"use strict";var{kAvvioBoot:Bre,kChildren:qk,kRoutePrefix:Lk,kLogLevel:jk,kLogSerializers:Jb,kHooks:Qb,kSchemaController:Do,kContentTypeParser:Dk,kReply:Fk,kRequest:Mk,kFourOhFour:Ure,kPluginNameChain:zk}=pt(),Hre=ku(),Vre=Mu(),Gre=tb(),Kre=uy(),{buildHooks:Wre}=ls(),Ol=Rb();Bk.exports=function(e,r,i){let s=Ol.registerPlugin.call(e,r),n=Ol.getPluginName(r)||Ol.getFuncPreview(r);if(s)return e[zk].push(n),e;let o=Object.create(e);e[qk].push(o),o.ready=e[Bre].bind(o),o[qk]=[],o[Fk]=Hre.buildReply(o[Fk]),o[Mk]=Vre.buildRequest(o[Mk]),o[Dk]=Kre.helpers.buildContentTypeParser(o[Dk]),o[Qb]=Wre(o[Qb]),o[Lk]=Jre(o[Lk],i.prefix),o[jk]=i.logLevel||o[jk],o[Do]=Gre.buildSchemaController(e[Do]),o.getSchema=o[Do].getSchema.bind(o[Do]),o.getSchemas=o[Do].getSchemas.bind(o[Do]),o[Ol.kRegisteredPlugins]=Object.create(o[Ol.kRegisteredPlugins]),o[zk]=[n],(o[Jb]||i.logSerializers)&&(o[Jb]=Object.assign(Object.create(o[Jb]),i.logSerializers)),i.prefix&&o[Ure].arrange404(o);for(let a of o[Qb].onRegister)a.call(e,o,i);return o};function Jre(t,e){return e?(t.endsWith("/")&&e[0]==="/"?e=e.slice(1):e[0]!=="/"&&(e="/"+e),t+e):t}});var Vk=_((ome,Hk)=>{"use strict";Hk.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var Wk=_(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.parse=rie;Ed.serialize=iie;var Qre=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Yre=/^[\u0021-\u003A\u003C-\u007E]*$/,Xre=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Zre=/^[\u0020-\u003A\u003D-\u007E]*$/,eie=Object.prototype.toString,tie=(()=>{let t=function(){};return t.prototype=Object.create(null),t})();function rie(t,e){let r=new tie,i=t.length;if(i<2)return r;let s=e?.decode||sie,n=0;do{let o=t.indexOf("=",n);if(o===-1)break;let a=t.indexOf(";",n),l=a===-1?i:a;if(o>l){n=t.lastIndexOf(";",o-1)+1;continue}let c=Gk(t,n,o),u=Kk(t,o,c),f=t.slice(c,u);if(r[f]===void 0){let p=Gk(t,o+1,l),d=Kk(t,l,p),h=s(t.slice(p,d));r[f]=h}n=l+1}while(n<i);return r}function Gk(t,e,r){do{let i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<r);return r}function Kk(t,e,r){for(;e>r;){let i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return r}function iie(t,e,r){let i=r?.encode||encodeURIComponent;if(!Qre.test(t))throw new TypeError(`argument name is invalid: ${t}`);let s=i(e);if(!Yre.test(s))throw new TypeError(`argument val is invalid: ${e}`);let n=t+"="+s;if(!r)return n;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);n+="; Max-Age="+r.maxAge}if(r.domain){if(!Xre.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);n+="; Domain="+r.domain}if(r.path){if(!Zre.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);n+="; Path="+r.path}if(r.expires){if(!nie(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);n+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(n+="; HttpOnly"),r.secure&&(n+="; Secure"),r.partitioned&&(n+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":n+="; Priority=Low";break;case"medium":n+="; Priority=Medium";break;case"high":n+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":n+="; SameSite=Strict";break;case"lax":n+="; SameSite=Lax";break;case"none":n+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return n}function sie(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function nie(t){return eie.call(t)==="[object Date]"}});var Yk=_((lme,Qk)=>{"use strict";var{URL:Jk}=require("node:url"),Yb="http://localhost";Qk.exports=function(e,r){(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]")&&e.startsWith("//")&&(e=Yb+e);let i=typeof e=="object"?Object.assign(new Jk(Yb),e):new Jk(e,Yb);if(typeof r=="string"){r=new URLSearchParams(r);for(let s of r.keys()){i.searchParams.delete(s);for(let n of r.getAll(s))i.searchParams.append(s,n)}}else{let s=Object.assign({},e.query,r);for(let n in s){let o=s[n];if(Array.isArray(o)){i.searchParams.delete(n);for(let a of o)i.searchParams.append(n,a)}else i.searchParams.set(n,o)}}return i}});var Xk=_((cme,Xb)=>{"use strict";var{randomUUID:oie}=require("node:crypto"),{Readable:aie}=require("node:stream"),Fo;function lie(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}function cie(t){Fo=Fo??new TextEncoder;let e=`----formdata-${oie()}`,r=`--${e}\r
Content-Disposition: form-data`;let i=l=>l.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),s=l=>l.replace(/\r?\n|\r/g,`\r
`),n=new Uint8Array([13,10]);async function*o(){for(let[l,c]of t)if(typeof c=="string")yield Fo.encode(`${r}; name="${i(s(l))}"\r
\r
`),yield Fo.encode(`${s(c)}\r
`);else{let u=`${r}; name="${i(s(l))}"`;c.name&&(u+=`; filename="${i(c.name)}"`),u+=`\r
Content-Type: ${c.type||"application/octet-stream"}\r
\r
`,yield Fo.encode(u),c.stream?yield*c.stream():yield c,yield n}yield Fo.encode(`--${e}--`)}return{stream:aie.from(o()),contentType:`multipart/form-data; boundary=${e}`}}Xb.exports.isFormDataLike=lie;Xb.exports.formDataToStream=cie});var tq=_((ume,xd)=>{"use strict";var{Readable:Zk,addAbortSignal:uie}=require("node:stream"),ev=require("node:util"),fie=Wk(),die=require("node:assert"),{createDeprecation:hie}=Pp(),pie=Yk(),{isFormDataLike:mie,formDataToStream:yie}=Xk(),{EventEmitter:gie}=require("node:events"),bie=hie({name:"FastifyDeprecationLightMyRequest",code:"FST_LIGHTMYREQUEST_DEP01",message:'You are accessing "request.connection", use "request.socket" instead.'});function vie(t){return t.port?t.host:t.hostname+(t.protocol==="https:"?":443":":80")}var Zb=class extends gie{constructor(e){super(),this.remoteAddress=e}};function eq(t){return new e(this);function e(r){Ps.call(r,{...t,Request:void 0}),Object.assign(this,r);for(let i of Object.keys(Ps.prototype))this.constructor.prototype[i]=Ps.prototype[i];return ev.inherits(this.constructor,t.Request),this}}function Ps(t){Zk.call(this,{autoDestroy:!1});let e=pie(t.url||t.path,t.query);this.url=e.pathname+e.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=t.method?t.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=t.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let l=r[o];die(l!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+l}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||t.authority||vie(e),t.cookies){let{cookies:o}=t,a=Object.keys(o).map(l=>fie.serialize(l,o[l]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new Zb(t.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return bie(),this.socket},configurable:!0});let i=t.payload||t.body||null,s=i&&typeof i.resume=="function";if(mie(i)){let o=yie(i);i=o.stream,s=!0,this.headers["content-type"]=o.contentType,this.headers["transfer-encoding"]="chunked"}i&&typeof i!="string"&&!s&&!Buffer.isBuffer(i)&&(i=JSON.stringify(i),"content-type"in this.headers||(this.headers["content-type"]="application/json")),i&&!s&&!Object.hasOwn(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(i)?i.length:Buffer.byteLength(i)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:i,isDone:!1,simulate:t.simulate||{},payloadAsStream:t.payloadAsStream,signal:t.signal};let n=t.signal;n&&uie(n,this);{let o=this._lightMyRequest.payload;o?._readableState?(this._read=wie,o.on("error",a=>{this.destroy(a)}),o.on("end",()=>{this.push(null)})):this._read=_ie}return this}function wie(){let t=this._lightMyRequest.payload,e=!0,r=!1,i;for(;e&&(i=t.read());)r=!0,e=this.push(i);e&&!r&&this._lightMyRequest.payload.once("readable",this._read.bind(this))}function _ie(){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})}ev.inherits(Ps,Zk);ev.inherits(eq,Ps);Ps.prototype.destroy=function(t){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,t&&(this._error=!0,process.nextTick(()=>this.emit("error",t))),process.nextTick(()=>this.emit("close")))};xd.exports=Ps;xd.exports.Request=Ps;xd.exports.CustomRequest=eq});var iq=_((fme,Il)=>{"use strict";var Rd={decodeValues:!0,map:!1,silent:!1};function tv(t){return typeof t=="string"&&!!t.trim()}function rv(t,e){var r=t.split(";").filter(tv),i=r.shift(),s=Sie(i),n=s.name,o=s.value;e=e?Object.assign({},Rd,e):Rd;try{o=e.decodeValues?decodeURIComponent(o):o}catch(l){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",l)}var a={name:n,value:o};return r.forEach(function(l){var c=l.split("="),u=c.shift().trimLeft().toLowerCase(),f=c.join("=");u==="expires"?a.expires=new Date(f):u==="max-age"?a.maxAge=parseInt(f,10):u==="secure"?a.secure=!0:u==="httponly"?a.httpOnly=!0:u==="samesite"?a.sameSite=f:u==="partitioned"?a.partitioned=!0:a[u]=f}),a}function Sie(t){var e="",r="",i=t.split("=");return i.length>1?(e=i.shift(),r=i.join("=")):r=t,{name:e,value:r}}function rq(t,e){if(e=e?Object.assign({},Rd,e):Rd,!t)return e.map?{}:[];if(t.headers)if(typeof t.headers.getSetCookie=="function")t=t.headers.getSetCookie();else if(t.headers["set-cookie"])t=t.headers["set-cookie"];else{var r=t.headers[Object.keys(t.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&t.headers.cookie&&!e.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),t=r}if(Array.isArray(t)||(t=[t]),e.map){var i={};return t.filter(tv).reduce(function(s,n){var o=rv(n,e);return s[o.name]=o,s},i)}else return t.filter(tv).map(function(s){return rv(s,e)})}function Eie(t){if(Array.isArray(t))return t;if(typeof t!="string")return[];var e=[],r=0,i,s,n,o,a;function l(){for(;r<t.length&&/\s/.test(t.charAt(r));)r+=1;return r<t.length}function c(){return s=t.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<t.length;){for(i=r,a=!1;l();)if(s=t.charAt(r),s===","){for(n=r,r+=1,l(),o=r;r<t.length&&c();)r+=1;r<t.length&&t.charAt(r)==="="?(a=!0,r=o,e.push(t.substring(i,n)),i=r):r=n+1}else r+=1;(!a||r>=t.length)&&e.push(t.substring(i,t.length))}return e}Il.exports=rq;Il.exports.parse=rq;Il.exports.parseString=rv;Il.exports.splitCookiesString=Eie});var lq=_((dme,aq)=>{"use strict";var $l=require("node:http"),{Writable:xie,Readable:sq,addAbortSignal:Rie}=require("node:stream"),Tie=require("node:util"),Pie=iq();function As(t,e,r){if($l.ServerResponse.call(this,t),t._lightMyRequest?.payloadAsStream){let a=this.emit.bind(this,"drain");this._lightMyRequest={headers:null,trailers:{},stream:new sq({read:a})};let l=t._lightMyRequest.signal;l&&Rie(l,this._lightMyRequest.stream)}else this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]};this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(Aie()),this._promiseCallback=typeof r=="function";let i=!1,s=a=>{if(!i){if(i=!0,this._promiseCallback)return process.nextTick(()=>e(a));process.nextTick(()=>e(null,a))}};this._lightMyRequest.onEndSuccess=s;let n=!1,o=a=>{if(i){this._lightMyRequest.stream&&!n&&(a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._lightMyRequest.stream.destroy(a),this._lightMyRequest.stream.on("error",()=>{}));return}if(i=!0,a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._promiseCallback)return process.nextTick(()=>r(a));process.nextTick(()=>e(a,null))};this._lightMyRequest.stream?this.once("finish",()=>{n=!0,this._lightMyRequest.stream.push(null)}):this.once("finish",()=>{let a=nq(this);a.raw.req=t,s(a)}),this.connection.once("error",o),this.once("error",o),this.once("close",o)}Tie.inherits(As,$l.ServerResponse);As.prototype.setTimeout=function(t,e){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},t),this.on("timeout",e),this};As.prototype.writeHead=function(){let t=$l.ServerResponse.prototype.writeHead.apply(this,arguments);return oq(this),this._lightMyRequest.stream&&this._lightMyRequest.onEndSuccess(nq(this)),t};As.prototype.write=function(t,e,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),$l.ServerResponse.prototype.write.call(this,t,e,r),this._lightMyRequest.stream?this._lightMyRequest.stream.push(Buffer.from(t,e)):(this._lightMyRequest.payloadChunks.push(Buffer.from(t,e)),!0)};As.prototype.end=function(t,e,r){t&&this.write(t,e),$l.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};As.prototype.destroy=function(t){this.destroyed||(this.destroyed=!0,t&&process.nextTick(()=>this.emit("error",t)),process.nextTick(()=>this.emit("close")))};As.prototype.addTrailers=function(t){for(let e in t)this._lightMyRequest.trailers[e.toLowerCase().trim()]=t[e].toString().trim()};function nq(t){t._lightMyRequest.headers===null&&oq(t),Cie(t);let e={raw:{res:t},headers:t._lightMyRequest.headers,statusCode:t.statusCode,statusMessage:t.statusMessage,trailers:{},get cookies(){return Pie.parse(this)}};if(e.trailers=t._lightMyRequest.trailers,t._lightMyRequest.payloadChunks){let r=Buffer.concat(t._lightMyRequest.payloadChunks);e.rawPayload=r,e.payload=r.toString(),e.body=e.payload,e.json=function(){return JSON.parse(e.payload)}}else e.json=function(){throw new Error("Response payload is not available with payloadAsStream: true")};return e.stream=function(){return t._lightMyRequest.stream?t._lightMyRequest.stream:sq.from(t._lightMyRequest.payloadChunks)},e}function Aie(){return new xie({write(t,e,r){setImmediate(r)}})}function Cie(t){let e=t._lightMyRequest.headers;for(let r of Object.keys(e)){let i=e[r];Array.isArray(i)?e[r]=i.map(s=>""+s):e[r]=""+i}}function oq(t){t._lightMyRequest.headers=Object.assign({},t.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(e=>{let r=new RegExp("\\r\\n"+e+": ([^\\r]*)\\r\\n"),i=t._header?.match(r);i&&(t._lightMyRequest.headers[e.toLowerCase()]=i[1])})}aq.exports=As});var cq=_((hme,iv)=>{"use strict";iv.exports=st;iv.exports.default=st;var Oie={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","query","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function st(t,{instancePath:e="",parentData:r,parentDataProperty:i,rootData:s=t}={}){let n=null,o=0,a=o,l=!1,c=null,u=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let y;if(t.url===void 0&&(y="url")){let E={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};n===null?n=[E]:n.push(E),o++}}var p=u===o;p&&(l=!0,c=0);let f=o;if(t&&typeof t=="object"&&!Array.isArray(t)){let y;if(t.path===void 0&&(y="path")){let E={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};n===null?n=[E]:n.push(E),o++}}var p=f===o;if(p&&l?(l=!1,c=[c,1]):p&&(l=!0,c=1),l)o=a,n!==null&&(a?n.length=a:n=null);else{let y={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf"};return n===null?n=[y]:n.push(y),o++,st.errors=n,!1}if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.url!==void 0){let y=t.url,E=o,x=o,S=!1,R=null,T=o;if(typeof y!="string"){let q=typeof y,O;if(O===void 0)if(q=="number"||q=="boolean")O=""+y;else if(y===null)O="";else{let P={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[P]:n.push(P),o++}O!==void 0&&(y=O,t!==void 0&&(t.url=O))}var h=T===o;h&&(S=!0,R=0);let C=o;if(o===C)if(y&&typeof y=="object"&&!Array.isArray(y)){let q;if(y.pathname===void 0&&(q="pathname")){let O={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:q},message:"must have required property '"+q+"'"};n===null?n=[O]:n.push(O),o++}else{if(y.protocol!==void 0){let O=y.protocol,P=o;if(typeof O!="string"){let D=typeof O,te;if(te===void 0)if(D=="number"||D=="boolean")te=""+O;else if(O===null)te="";else{let L={instancePath:e+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[L]:n.push(L),o++}te!==void 0&&(O=te,y!==void 0&&(y.protocol=te))}var d=P===o}else var d=!0;if(d){if(y.hostname!==void 0){let O=y.hostname,P=o;if(typeof O!="string"){let te=typeof O,L;if(L===void 0)if(te=="number"||te=="boolean")L=""+O;else if(O===null)L="";else{let K={instancePath:e+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[K]:n.push(K),o++}L!==void 0&&(O=L,y!==void 0&&(y.hostname=L))}var d=P===o}else var d=!0;if(d)if(y.pathname!==void 0){let O=y.pathname,P=o;if(typeof O!="string"){let te=typeof O,L;if(L===void 0)if(te=="number"||te=="boolean")L=""+O;else if(O===null)L="";else{let K={instancePath:e+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[K]:n.push(K),o++}L!==void 0&&(O=L,y!==void 0&&(y.pathname=L))}var d=P===o}else var d=!0}}}else{let q={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};n===null?n=[q]:n.push(q),o++}var h=C===o;if(h&&S?(S=!1,R=[R,1]):h&&(S=!0,R=1),S)o=x,n!==null&&(x?n.length=x:n=null);else{let q={instancePath:e+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:R},message:"must match exactly one schema in oneOf"};return n===null?n=[q]:n.push(q),o++,st.errors=n,!1}var m=E===o}else var m=!0;if(m){if(t.path!==void 0){let y=t.path,E=o,x=o,S=!1,R=null,T=o;if(typeof y!="string"){let O=typeof y,P;if(P===void 0)if(O=="number"||O=="boolean")P=""+y;else if(y===null)P="";else{let D={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[D]:n.push(D),o++}P!==void 0&&(y=P,t!==void 0&&(t.path=P))}var g=T===o;g&&(S=!0,R=0);let C=o;if(o===C)if(y&&typeof y=="object"&&!Array.isArray(y)){let O;if(y.pathname===void 0&&(O="pathname")){let P={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:O},message:"must have required property '"+O+"'"};n===null?n=[P]:n.push(P),o++}else{if(y.protocol!==void 0){let P=y.protocol,D=o;if(typeof P!="string"){let te=typeof P,L;if(L===void 0)if(te=="number"||te=="boolean")L=""+P;else if(P===null)L="";else{let K={instancePath:e+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[K]:n.push(K),o++}L!==void 0&&(P=L,y!==void 0&&(y.protocol=L))}var v=D===o}else var v=!0;if(v){if(y.hostname!==void 0){let P=y.hostname,D=o;if(typeof P!="string"){let L=typeof P,K;if(K===void 0)if(L=="number"||L=="boolean")K=""+P;else if(P===null)K="";else{let Re={instancePath:e+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[Re]:n.push(Re),o++}K!==void 0&&(P=K,y!==void 0&&(y.hostname=K))}var v=D===o}else var v=!0;if(v)if(y.pathname!==void 0){let P=y.pathname,D=o;if(typeof P!="string"){let L=typeof P,K;if(K===void 0)if(L=="number"||L=="boolean")K=""+P;else if(P===null)K="";else{let Re={instancePath:e+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[Re]:n.push(Re),o++}K!==void 0&&(P=K,y!==void 0&&(y.pathname=K))}var v=D===o}else var v=!0}}}else{let O={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};n===null?n=[O]:n.push(O),o++}var g=C===o;if(g&&S?(S=!1,R=[R,1]):g&&(S=!0,R=1),S)o=x,n!==null&&(x?n.length=x:n=null);else{let O={instancePath:e+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:R},message:"must match exactly one schema in oneOf"};return n===null?n=[O]:n.push(O),o++,st.errors=n,!1}var m=E===o}else var m=!0;if(m){if(t.cookies!==void 0){let y=t.cookies,E=o;if(o===E&&!(y&&typeof y=="object"&&!Array.isArray(y)))return st.errors=[{instancePath:e+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=E===o}else var m=!0;if(m){if(t.headers!==void 0){let y=t.headers,E=o;if(o===E&&!(y&&typeof y=="object"&&!Array.isArray(y)))return st.errors=[{instancePath:e+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=E===o}else var m=!0;if(m){if(t.query!==void 0){let y=t.query,E=o,x=o,S=!1,R=o;if(o===R&&!(y&&typeof y=="object"&&!Array.isArray(y))){let C={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};n===null?n=[C]:n.push(C),o++}var w=R===o;if(S=S||w,!S){let C=o;if(typeof y!="string"){let O=typeof y,P;if(P===void 0)if(O=="number"||O=="boolean")P=""+y;else if(y===null)P="";else{let D={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};n===null?n=[D]:n.push(D),o++}P!==void 0&&(y=P,t!==void 0&&(t.query=P))}var w=C===o;S=S||w}if(S)o=x,n!==null&&(x?n.length=x:n=null);else{let C={instancePath:e+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return n===null?n=[C]:n.push(C),o++,st.errors=n,!1}var m=E===o}else var m=!0;if(m){if(t.simulate!==void 0){let y=t.simulate,E=o;if(o===E)if(y&&typeof y=="object"&&!Array.isArray(y)){if(y.end!==void 0){let S=y.end,R=o;if(typeof S!="boolean"){let T;if(T===void 0)if(S==="false"||S===0||S===null)T=!1;else if(S==="true"||S===1)T=!0;else return st.errors=[{instancePath:e+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;T!==void 0&&(S=T,y!==void 0&&(y.end=T))}var b=R===o}else var b=!0;if(b){if(y.split!==void 0){let S=y.split,R=o;if(typeof S!="boolean"){let C;if(C===void 0)if(S==="false"||S===0||S===null)C=!1;else if(S==="true"||S===1)C=!0;else return st.errors=[{instancePath:e+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;C!==void 0&&(S=C,y!==void 0&&(y.split=C))}var b=R===o}else var b=!0;if(b){if(y.error!==void 0){let S=y.error,R=o;if(typeof S!="boolean"){let C;if(C===void 0)if(S==="false"||S===0||S===null)C=!1;else if(S==="true"||S===1)C=!0;else return st.errors=[{instancePath:e+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;C!==void 0&&(S=C,y!==void 0&&(y.error=C))}var b=R===o}else var b=!0;if(b)if(y.close!==void 0){let S=y.close,R=o;if(typeof S!="boolean"){let C;if(C===void 0)if(S==="false"||S===0||S===null)C=!1;else if(S==="true"||S===1)C=!0;else return st.errors=[{instancePath:e+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;C!==void 0&&(S=C,y!==void 0&&(y.close=C))}var b=R===o}else var b=!0}}}else return st.errors=[{instancePath:e+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=E===o}else var m=!0;if(m){if(t.authority!==void 0){let y=t.authority,E=o;if(typeof y!="string"){let S=typeof y,R;if(R===void 0)if(S=="number"||S=="boolean")R=""+y;else if(y===null)R="";else return st.errors=[{instancePath:e+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;R!==void 0&&(y=R,t!==void 0&&(t.authority=R))}var m=E===o}else var m=!0;if(m){if(t.remoteAddress!==void 0){let y=t.remoteAddress,E=o;if(typeof y!="string"){let S=typeof y,R;if(R===void 0)if(S=="number"||S=="boolean")R=""+y;else if(y===null)R="";else return st.errors=[{instancePath:e+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;R!==void 0&&(y=R,t!==void 0&&(t.remoteAddress=R))}var m=E===o}else var m=!0;if(m){if(t.method!==void 0){let y=t.method,E=o;if(typeof y!="string"){let S=typeof y,R;if(R===void 0)if(S=="number"||S=="boolean")R=""+y;else if(y===null)R="";else return st.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;R!==void 0&&(y=R,t!==void 0&&(t.method=R))}if(!(y==="ACL"||y==="BIND"||y==="CHECKOUT"||y==="CONNECT"||y==="COPY"||y==="DELETE"||y==="GET"||y==="HEAD"||y==="LINK"||y==="LOCK"||y==="M-SEARCH"||y==="MERGE"||y==="MKACTIVITY"||y==="MKCALENDAR"||y==="MKCOL"||y==="MOVE"||y==="NOTIFY"||y==="OPTIONS"||y==="PATCH"||y==="POST"||y==="PROPFIND"||y==="PROPPATCH"||y==="PURGE"||y==="PUT"||y==="QUERY"||y==="REBIND"||y==="REPORT"||y==="SEARCH"||y==="SOURCE"||y==="SUBSCRIBE"||y==="TRACE"||y==="UNBIND"||y==="UNLINK"||y==="UNLOCK"||y==="UNSUBSCRIBE"||y==="acl"||y==="bind"||y==="checkout"||y==="connect"||y==="copy"||y==="delete"||y==="get"||y==="head"||y==="link"||y==="lock"||y==="m-search"||y==="merge"||y==="mkactivity"||y==="mkcalendar"||y==="mkcol"||y==="move"||y==="notify"||y==="options"||y==="patch"||y==="post"||y==="propfind"||y==="proppatch"||y==="purge"||y==="put"||y==="query"||y==="rebind"||y==="report"||y==="search"||y==="source"||y==="subscribe"||y==="trace"||y==="unbind"||y==="unlink"||y==="unlock"||y==="unsubscribe"))return st.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:Oie.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=E===o}else var m=!0;if(m)if(t.validate!==void 0){let y=t.validate,E=o;if(typeof y!="boolean"){let S;if(S===void 0)if(y==="false"||y===0||y===null)S=!1;else if(y==="true"||y===1)S=!0;else return st.errors=[{instancePath:e+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;S!==void 0&&(y=S,t!==void 0&&(t.validate=S))}var m=E===o}else var m=!0}}}}}}}}}else return st.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return st.errors=n,o===0}});var dq=_((pme,kl)=>{"use strict";var Iie=require("node:assert"),sv=tq(),Td=lq(),Ad="The dispatch function has already been invoked",uq=cq();function nv(t,e,r){return r===void 0?new Nl(t,e):Pd(t,e,r)}function $ie(t,e){let r=t._lightMyRequest.payload;if(!r||r._readableState||typeof r.resume!="function")return e();let i=[];r.on("data",s=>i.push(Buffer.from(s))),r.on("end",()=>{let s=Buffer.concat(i);return t.headers["content-length"]=t.headers["content-length"]||""+s.length,delete t.headers["transfer-encoding"],t._lightMyRequest.payload=s,e()}),r.resume()}function fq(t,e,r,i){return r.once("error",function(s){this.destroyed&&i.destroy(s)}),r.once("close",function(){this.destroyed&&!this._error&&i.destroy()}),$ie(r,()=>t.call(e,r,i))}function Pd(t,e,r){if(e=typeof e=="string"?{url:e}:e,e.validate!==!1&&(Iie(typeof t=="function","dispatchFunc should be a function"),!uq(e)))throw new Error(uq.errors.map(o=>o.message));let i=e.server||{},s=e.Request?sv.CustomRequest:sv;if(t.request&&t.request.app===t&&(Object.setPrototypeOf(Object.getPrototypeOf(t.request),s.prototype),Object.setPrototypeOf(Object.getPrototypeOf(t.response),Td.prototype)),typeof r=="function"){let n=new s(e),o=new Td(n,r);return fq(t,i,n,o)}else return new Promise((n,o)=>{let a=new s(e),l=new Td(a,n,o);fq(t,i,a,l)})}function Nl(t,e){typeof e=="string"?this.option={url:e}:this.option=Object.assign({},e),this.dispatch=t,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var Nie=["delete","get","head","options","patch","post","put","trace"];Nie.forEach(t=>{Nl.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(Ad);return this.option.url=e,this.option.method=t.toUpperCase(),this}});var kie=["body","cookies","headers","payload","query"];kie.forEach(t=>{Nl.prototype[t]=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(Ad);return this.option[t]=e,this}});Nl.prototype.end=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(Ad);if(this._hasInvoked=!0,typeof t=="function")Pd(this.dispatch,this.option,t);else return this._promise=Pd(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(t=>{t!=="constructor"&&(Nl.prototype[t]=function(...e){if(!this._promise){if(this._hasInvoked===!0)throw new Error(Ad);this._hasInvoked=!0,this._promise=Pd(this.dispatch,this.option)}return this._promise[t](...e)})});function qie(t){return t instanceof sv||t instanceof Td||t?.constructor?.name==="_CustomLMRRequest"}kl.exports=nv;kl.exports.default=nv;kl.exports.inject=nv;kl.exports.isInjection=qie});var Aq=_((mme,Fl)=>{"use strict";var Lie="5.2.1",jie=fE(),Cd=require("node:http"),Die=require("node:diagnostics_channel"),ql,{kAvvioBoot:Ll,kChildren:ov,kServerBindings:hq,kBodyLimit:Fie,kSupportedHTTPMethods:bn,kRoutePrefix:pq,kLogLevel:Mie,kLogSerializers:zie,kHooks:av,kSchemaController:Cs,kRequestAcceptVersion:Bie,kReplySerializerDefault:mq,kContentTypeParser:Uie,kReply:Hie,kRequest:Vie,kFourOhFour:Gie,kState:Ze,kOptions:lv,kPluginNameChain:jl,kSchemaErrorFormatter:cv,kErrorHandler:Od,kKeepAliveConnections:uv,kChildLoggerFactory:fv,kGenReqId:dv}=pt(),{createServer:Kie}=IE(),Dl=ku(),Id=Mu(),Wie=zu(),Mo=Zm(),vn=uy(),yq=tb(),{Hooks:Jie,hookRunnerApplication:gq,supportedHooks:hv}=ls(),{createChildLogger:bq,defaultChildLoggerFactory:Qie,createLogger:Yie}=Sa(),vq=Rb(),{getGenReqId:wq,reqIdGenFactory:_q}=td(),{buildRouting:Xie,validateBodyLimitOption:Zie}=Rk(),ese=$k(),Pq=kk(),tse=Uk(),rse=Vk(),{appendStackTrace:ise,AVVIO_ERRORS_MAP:Sq,...wn}=Et(),{defaultInitOptions:gr}=Pq,{FST_ERR_ASYNC_CONSTRAINT:sse,FST_ERR_BAD_URL:nse,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:ose,FST_ERR_OPTIONS_NOT_OBJ:ase,FST_ERR_QSP_NOT_FN:lse,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:cse,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:use,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:fse,FST_ERR_INSTANCE_ALREADY_LISTENING:dse,FST_ERR_REOPENED_CLOSE_SERVER:hse,FST_ERR_ROUTE_REWRITE_NOT_STR:pse,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:Eq,FST_ERR_ERROR_HANDLER_NOT_FN:mse,FST_ERR_ROUTE_METHOD_INVALID:yse}=wn,{buildErrorHandler:xq}=xa(),Rq=Die.channel("fastify.initialization");function gse(t){let e={};return["errorHandler","logLevel","logSerializers"].concat(hv).forEach(i=>{e[i]=t.store[i]}),Object.assign({},e)}function pv(t){if(t&&typeof t!="object")throw new ase;if(t=Object.assign({},t),t.querystringParser&&typeof t.querystringParser!="function")throw new lse(typeof t.querystringParser);if(t.schemaController&&t.schemaController.bucket&&typeof t.schemaController.bucket!="function")throw new cse(typeof t.schemaController.bucket);Zie(t.bodyLimit);let e=typeof t.requestIdHeader=="string"&&t.requestIdHeader.length!==0?t.requestIdHeader.toLowerCase():t.requestIdHeader===!0&&"request-id",r=_q(e,t.genReqId),i=t.requestIdLogLabel||"reqId",s=t.bodyLimit||gr.bodyLimit,n=t.disableRequestLogging||!1,o=Object.assign({customOptions:{},plugins:[]},t.ajv),a=t.frameworkErrors;if(!o.customOptions||Object.prototype.toString.call(o.customOptions)!=="[object Object]")throw new use(typeof o.customOptions);if(!o.plugins||!Array.isArray(o.plugins))throw new fse(typeof o.plugins);let{logger:l,hasLogger:c}=Yie(t);t.connectionTimeout=t.connectionTimeout||gr.connectionTimeout,t.keepAliveTimeout=t.keepAliveTimeout||gr.keepAliveTimeout,t.maxRequestsPerSocket=t.maxRequestsPerSocket||gr.maxRequestsPerSocket,t.requestTimeout=t.requestTimeout||gr.requestTimeout,t.logger=l,t.requestIdHeader=e,t.requestIdLogLabel=i,t.disableRequestLogging=n,t.ajv=o,t.clientErrorHandler=t.clientErrorHandler||L;let u=Pq(t);t.exposeHeadRoutes=u.exposeHeadRoutes;let f=Xie({config:{defaultRoute:K,onBadUrl:Re,constraints:t.constraints,ignoreTrailingSlash:t.ignoreTrailingSlash||gr.ignoreTrailingSlash,ignoreDuplicateSlashes:t.ignoreDuplicateSlashes||gr.ignoreDuplicateSlashes,maxParamLength:t.maxParamLength||gr.maxParamLength,caseSensitive:t.caseSensitive,allowUnsafeRegex:t.allowUnsafeRegex||gr.allowUnsafeRegex,buildPrettyMeta:gse,querystringParser:t.querystringParser,useSemicolonDelimiter:t.useSemicolonDelimiter??gr.useSemicolonDelimiter}}),p=ese(t),d=rr(f,t);t.http2SessionTimeout=u.http2SessionTimeout;let{server:h,listen:m}=Kie(t,d),v=typeof h.closeAllConnections=="function",g=typeof h.closeIdleConnections=="function",w=t.forceCloseConnections;if(w==="idle"&&!g)throw new ose;typeof w!="boolean"&&(w=g?"idle":!1);let b=!v&&w===!0?new Set:rse(),y=Dl.setupResponseListeners,E=yq.buildSchemaController(null,t.schemaController),x={[Ze]:{listening:!1,closing:!1,started:!1,ready:!1,booting:!1,readyPromise:null},[uv]:b,[bn]:{bodyless:new Set(["GET","HEAD","TRACE"]),bodywith:new Set(["DELETE","OPTIONS","PATCH","PUT","POST"])},[lv]:t,[ov]:[],[hq]:[],[Fie]:s,[pq]:"",[Mie]:"",[zie]:null,[av]:new Jie,[Cs]:E,[cv]:null,[Od]:xq(),[fv]:Qie,[mq]:null,[Uie]:new vn(s,t.onProtoPoisoning||gr.onProtoPoisoning,t.onConstructorPoisoning||gr.onConstructorPoisoning),[Hie]:Dl.buildReply(Dl),[Vie]:Id.buildRequest(Id,t.trustProxy),[Gie]:p,[vq.kRegisteredPlugins]:[],[jl]:["fastify"],[Ll]:null,[dv]:r,routing:d,delete:function(j,U,Y){return f.prepareRoute.call(this,{method:"DELETE",url:j,options:U,handler:Y})},get:function(j,U,Y){return f.prepareRoute.call(this,{method:"GET",url:j,options:U,handler:Y})},head:function(j,U,Y){return f.prepareRoute.call(this,{method:"HEAD",url:j,options:U,handler:Y})},trace:function(j,U,Y){return f.prepareRoute.call(this,{method:"TRACE",url:j,options:U,handler:Y})},patch:function(j,U,Y){return f.prepareRoute.call(this,{method:"PATCH",url:j,options:U,handler:Y})},post:function(j,U,Y){return f.prepareRoute.call(this,{method:"POST",url:j,options:U,handler:Y})},put:function(j,U,Y){return f.prepareRoute.call(this,{method:"PUT",url:j,options:U,handler:Y})},options:function(j,U,Y){return f.prepareRoute.call(this,{method:"OPTIONS",url:j,options:U,handler:Y})},all:function(j,U,Y){return f.prepareRoute.call(this,{method:this.supportedMethods,url:j,options:U,handler:Y})},route:function(j){return f.route.call(this,{options:j})},hasRoute:function(j){return f.hasRoute.call(this,{options:j})},findRoute:function(j){return f.findRoute(j)},log:l,withTypeProvider:P,addHook:D,addSchema:te,getSchema:E.getSchema.bind(E),getSchemas:E.getSchemas.bind(E),setValidatorCompiler:ht,setSerializerCompiler:se,setSchemaController:wt,setReplySerializer:Ce,setSchemaErrorFormatter:we,setGenReqId:ua,addContentTypeParser:vn.helpers.addContentTypeParser,hasContentTypeParser:vn.helpers.hasContentTypeParser,getDefaultJsonParser:vn.defaultParsers.getDefaultJsonParser,defaultTextParser:vn.defaultParsers.defaultTextParser,removeContentTypeParser:vn.helpers.removeContentTypeParser,removeAllContentTypeParsers:vn.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(I){return this[vq.kRegisteredPlugins].includes(I)||this[jl].includes(I)},listen:m,server:h,addresses:function(){let I=this[hq].map(j=>j.address());return I.push(this.server.address()),I.filter(j=>j)},decorate:Mo.add,hasDecorator:Mo.exist,decorateReply:Mo.decorateReply,decorateRequest:Mo.decorateRequest,hasRequestDecorator:Mo.existRequest,hasReplyDecorator:Mo.existReply,addHttpMethod:ni,inject:q,printRoutes:ue,setNotFoundHandler:Te,setErrorHandler:xe,setChildLoggerFactory:Ve,initialConfig:u,addConstraintStrategy:f.addConstraintStrategy.bind(f),hasConstraintStrategy:f.hasConstraintStrategy.bind(f)};Object.defineProperties(x,{listeningOrigin:{get(){let I=this.addresses().slice(-1).pop();if(typeof I=="string")return I;let j=I.family==="IPv6"?`[${I.address}]`:I.address;return`${this[lv].https?"https":"http"}://${j}:${I.port}`}},pluginName:{configurable:!0,get(){return this[jl].length>1?this[jl].join(" -> "):this[jl][0]}},prefix:{configurable:!0,get(){return this[pq]}},validatorCompiler:{configurable:!0,get(){return this[Cs].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[Cs].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[fv]}},version:{configurable:!0,get(){return Lie}},errorHandler:{configurable:!0,get(){return this[Od].func}},genReqId:{configurable:!0,get(){return this[dv]}},supportedMethods:{configurable:!1,get(){return[...this[bn].bodyless,...this[bn].bodywith]}}}),t.schemaErrorFormatter&&(Tq(t.schemaErrorFormatter),x[cv]=t.schemaErrorFormatter.bind(x));let S=Number(t.pluginTimeout),R=jie(x,{autostart:!1,timeout:isNaN(S)===!1?S:gr.pluginTimeout,expose:{use:"register"}});R.override=tse,R.on("start",()=>x[Ze].started=!0),x[Ll]=x.ready,x.ready=O,x.printPlugins=R.prettyPrint.bind(R),R.once("preReady",()=>{x.onClose((I,j)=>{x[Ze].closing=!0,f.closeRoutes(),gq("preClose",x[Ll],x,function(){if(x[Ze].listening){if(w==="idle")I.server.closeIdleConnections();else if(v&&w)I.server.closeAllConnections();else if(w===!0)for(let U of x[uv])U.destroy(),x[uv].delete(U)}!t.serverFactory||x[Ze].listening?I.server.close(function(U){U&&U.code!=="ERR_SERVER_NOT_RUNNING"?j(null):j()}):process.nextTick(j,null)})})});let T=new Wie({server:x,config:{}});return x.setNotFoundHandler(),p.arrange404(x),f.setup(t,{avvio:R,fourOhFour:p,logger:l,hasLogger:c,setupResponseListeners:y,throwIfAlreadyStarted:C,keepAliveConnections:b}),h.on("clientError",t.clientErrorHandler.bind(x)),Rq.hasSubscribers&&Rq.publish({fastify:x}),"asyncDispose"in Symbol&&(x[Symbol.asyncDispose]=function(){return x.close()}),x;function C(I){if(x[Ze].started)throw new dse(I)}function q(I,j){if(ql===void 0&&(ql=dq()),x[Ze].started){if(x[Ze].closing){let U=new hse;if(j){j(U);return}else return Promise.reject(U)}return ql(d,I,j)}if(j)this.ready(U=>{U?j(U,null):ql(d,I,j)});else return ql((U,Y)=>{this.ready(function(he){if(he){Y.emit("error",he);return}d(U,Y)})},I)}function O(I){if(this[Ze].readyPromise!==null){if(I!=null){this[Ze].readyPromise.then(()=>I(null,x),I);return}return this[Ze].readyPromise}let j,U;if(process.nextTick(Y),this[Ze].readyPromise=new Promise(function(W,Fe){j=W,U=Fe}),I)this[Ze].readyPromise.then(()=>I(null,x),I);else return this[Ze].readyPromise;function Y(){x[Ll]((W,Fe)=>{W||x[Ze].started||x[Ze].ready||x[Ze].booting?he(W):(x[Ze].booting=!0,gq("onReady",x[Ll],x,he)),Fe()})}function he(W){if(W=W!=null&&Sq[W.code]!=null?ise(W,new Sq[W.code](W.message)):W,W)return U(W);j(x),x[Ze].booting=!1,x[Ze].ready=!0,x[Ze].promise=null}}function P(){return this}function D(I,j){if(C('Cannot call "addHook"!'),j==null)throw new wn.FST_ERR_HOOK_INVALID_HANDLER(I,j);if(I==="onSend"||I==="preSerialization"||I==="onError"||I==="preParsing"){if(j.constructor.name==="AsyncFunction"&&j.length===4)throw new wn.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(I==="onReady"||I==="onListen"){if(j.constructor.name==="AsyncFunction"&&j.length!==0)throw new wn.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(I==="onRequestAbort"){if(j.constructor.name==="AsyncFunction"&&j.length!==1)throw new wn.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(j.constructor.name==="AsyncFunction"&&j.length===3)throw new wn.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return I==="onClose"?this.onClose(j.bind(this)):I==="onReady"||I==="onListen"||I==="onRoute"?this[av].add(I,j):this.after((Y,he)=>{U.call(this,I,j),he(Y)}),this;function U(Y,he){this[av].add(Y,he),this[ov].forEach(W=>U.call(W,Y,he))}}function te(I){return C('Cannot call "addSchema"!'),this[Cs].add(I),this[ov].forEach(j=>j.addSchema(I)),this}function L(I,j){if(I.code==="ECONNRESET"||j.destroyed)return;let U,Y,he,W;I.code==="ERR_HTTP_REQUEST_TIMEOUT"?(Y="408",he=Cd.STATUS_CODES[Y],U=`{"error":"${he}","message":"Client Timeout","statusCode":408}`,W="timeout"):I.code==="HPE_HEADER_OVERFLOW"?(Y="431",he=Cd.STATUS_CODES[Y],U=`{"error":"${he}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,W="header_overflow"):(Y="400",he=Cd.STATUS_CODES[Y],U=`{"error":"${he}","message":"Client Error","statusCode":400}`,W="error"),this.log.trace({err:I},`client ${W}`),j.writable&&j.write(`HTTP/1.1 ${Y} ${he}\r
Content-Length: ${U.length}\r
Content-Type: application/json\r
\r
${U}`),j.destroy(I)}function K(I,j){I.headers["accept-version"]!==void 0&&(I.headers[Bie]=I.headers["accept-version"],I.headers["accept-version"]=void 0),p.router.lookup(I,j)}function Re(I,j,U){if(a){let he=wq(T.server,j),W=bq(T,l,j,he),Fe=new Id(he,null,j,null,W,T),qi=new Dl(U,Fe,W);return n===!1&&W.info({req:Fe},"incoming request"),a(new nse(I),Fe,qi)}let Y=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${I}' is not a valid url component","statusCode":400}`;U.writeHead(400,{"Content-Type":"application/json","Content-Length":Y.length}),U.end(Y)}function z(I,j,U){if(I!==!1)return function(he){if(he){if(a){let Fe=wq(T.server,j),qi=bq(T,l,j,Fe),Je=new Id(Fe,null,j,null,qi,T),Li=new Dl(U,Je,qi);return n===!1&&qi.info({req:Je},"incoming request"),a(new sse,Je,Li)}let W='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';U.writeHead(500,{"Content-Type":"application/json","Content-Length":W.length}),U.end(W)}}}function Te(I,j){return C('Cannot call "setNotFoundHandler"!'),p.setNotFoundHandler.call(this,I,j,R,f.routeHandler),this}function ht(I){return C('Cannot call "setValidatorCompiler"!'),this[Cs].setValidatorCompiler(I),this}function we(I){return C('Cannot call "setSchemaErrorFormatter"!'),Tq(I),this[cv]=I.bind(this),this}function se(I){return C('Cannot call "setSerializerCompiler"!'),this[Cs].setSerializerCompiler(I),this}function wt(I){C('Cannot call "setSchemaController"!');let j=this[Cs],U=yq.buildSchemaController(j,Object.assign({},j.opts,I));return this[Cs]=U,this.getSchema=U.getSchema.bind(U),this.getSchemas=U.getSchemas.bind(U),this}function Ce(I){return C('Cannot call "setReplySerializer"!'),this[mq]=I,this}function xe(I){if(C('Cannot call "setErrorHandler"!'),typeof I!="function")throw new mse;return this[Od]=xq(this[Od],I.bind(this)),this}function Ve(I){return C('Cannot call "setChildLoggerFactory"!'),this[fv]=I,this}function ue(I={}){return I.includeMeta=I.includeHooks?I.includeMeta?hv.concat(I.includeMeta):hv:I.includeMeta,f.printRoutes(I)}function rr(I,{rewriteUrl:j,logger:U}){let Y;return function(W,Fe){if(Y===void 0&&(Y=I.isAsyncConstraint()),j){W.originalUrl=W.url;let qi=j.call(x,W);if(typeof qi=="string")W.url=qi;else{let Je=new pse(W.url,typeof qi);W.destroy(Je)}}I.routing(W,Fe,z(Y,W,Fe))}}function ua(I){return C('Cannot call "setGenReqId"!'),this[dv]=_q(this[lv].requestIdHeader,I),this}function ni(I,{hasBody:j=!1}={}){if(typeof I!="string"||Cd.METHODS.indexOf(I)===-1)throw new yse;j===!0?(this[bn].bodywith.add(I),this[bn].bodyless.delete(I)):(this[bn].bodywith.delete(I),this[bn].bodyless.add(I));let U=I.toLowerCase();return this.hasDecorator(U)||this.decorate(U,function(Y,he,W){return f.prepareRoute.call(this,{method:I,url:Y,options:he,handler:W})}),this}}function Tq(t){if(typeof t!="function")throw new Eq(typeof t);if(t.constructor.name==="AsyncFunction")throw new Eq("AsyncFunction")}Fl.exports=pv;Fl.exports.errorCodes=wn;Fl.exports.fastify=pv;Fl.exports.default=pv});var pj=_((yEe,Qw)=>{"use strict";var Jse=/at\s{1}(?:.*\.)?plugin\s{1}.*\n\s*(.*)/,Qse=/(\w*(\.\w*)*)\..*/;Qw.exports=function(e){if(e.name.length>0)return e.name;let r=Error.stackTraceLimit;Error.stackTraceLimit=10;try{throw new Error("anonymous function")}catch(i){return Error.stackTraceLimit=r,hj(i.stack)}};function hj(t){let e=t.match(Jse);return e?e[1].split(/[/\\]/).slice(-1)[0].match(Qse)[1]:"anonymous"}Qw.exports.extractPluginName=hj});var yj=_((gEe,mj)=>{"use strict";mj.exports=function(e){return e[0]==="@"&&(e=e.slice(1).replace("/","-")),e.replace(/-(.)/g,function(r,i){return i.toUpperCase()})}});var fh=_((bEe,uh)=>{"use strict";var Yse=pj(),Xse=yj(),Zse=0;function Yw(t,e={}){let r=!1;if(t.default!==void 0&&(t=t.default),typeof t!="function")throw new TypeError(`fastify-plugin expects a function, instead got a '${typeof t}'`);if(typeof e=="string"&&(e={fastify:e}),typeof e!="object"||Array.isArray(e)||e===null)throw new TypeError("The options object should be an object");if(e.fastify!==void 0&&typeof e.fastify!="string")throw new TypeError(`fastify-plugin expects a version string, instead got '${typeof e.fastify}'`);e.name||(r=!0,e.name=Yse(t)+"-auto-"+Zse++),t[Symbol.for("skip-override")]=e.encapsulate!==!0,t[Symbol.for("fastify.display-name")]=e.name,t[Symbol.for("plugin-meta")]=e,t.default||(t.default=t);let i=Xse(e.name);return!r&&!t[i]&&(t[i]=t),t}uh.exports=Yw;uh.exports.default=Yw;uh.exports.fastifyPlugin=Yw});var bj=_((vEe,gj)=>{"use strict";function Ai(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Ai.prototype[Symbol.iterator]=function(){return this});Ai.of=function(){var t=arguments,e=t.length,r=0;return new Ai(function(){return r>=e?{done:!0}:{done:!1,value:t[r++]}})};Ai.empty=function(){var t=new Ai(function(){return{done:!0}});return t};Ai.fromSequence=function(t){var e=0,r=t.length;return new Ai(function(){return e>=r?{done:!0}:{done:!1,value:t[e++]}})};Ai.is=function(t){return t instanceof Ai?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};gj.exports=Ai});var vj=_(Xw=>{"use strict";Xw.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Xw.SYMBOL_SUPPORT=typeof Symbol<"u"});var Zw=_((_Ee,_j)=>{"use strict";var wj=vj(),ene=wj.ARRAY_BUFFER_SUPPORT,tne=wj.SYMBOL_SUPPORT;_j.exports=function(e,r){var i,s,n,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof r!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||ene&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(n=0,o=e.length;n<o;n++)r(e[n],n);return}if(typeof e.forEach=="function"){e.forEach(r);return}if(tne&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,n=0;a=i.next(),a.done!==!0;)r(a.value,n),n++;return}for(s in e)e.hasOwnProperty(s)&&r(e[s],s)}});var e_=_(Ci=>{"use strict";var rne=Math.pow(2,8)-1,ine=Math.pow(2,16)-1,sne=Math.pow(2,32)-1,nne=Math.pow(2,7)-1,one=Math.pow(2,15)-1,ane=Math.pow(2,31)-1;Ci.getPointerArray=function(t){var e=t-1;if(e<=rne)return Uint8Array;if(e<=ine)return Uint16Array;if(e<=sne)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};Ci.getSignedPointerArray=function(t){var e=t-1;return e<=nne?Int8Array:e<=one?Int16Array:e<=ane?Int32Array:Float64Array};Ci.getNumberType=function(t){return t===(t|0)?Math.sign(t)===-1?t<=127&&t>=-128?Int8Array:t<=32767&&t>=-32768?Int16Array:Int32Array:t<=255?Uint8Array:t<=65535?Uint16Array:Uint32Array:Float64Array};var lne={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};Ci.getMinimalRepresentation=function(t,e){var r=null,i=0,s,n,o,a,l;for(a=0,l=t.length;a<l;a++)o=e?e(t[a]):t[a],n=Ci.getNumberType(o),s=lne[n.name],s>i&&(i=s,r=n);return r};Ci.isTypedArray=function(t){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t)};Ci.concat=function(){var t=0,e,r,i;for(e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var s=new arguments[0].constructor(t);for(e=0,r=0;e<i;e++)s.set(arguments[e],r),r+=arguments[e].length;return s};Ci.indices=function(t){for(var e=Ci.getPointerArray(t),r=new e(t),i=0;i<t;i++)r[i]=i;return r}});var xj=_(lc=>{"use strict";var Sj=Zw(),Ej=e_();function cne(t){return Array.isArray(t)||Ej.isTypedArray(t)}function t_(t){if(typeof t.length=="number")return t.length;if(typeof t.size=="number")return t.size}function une(t){var e=t_(t),r=typeof e=="number"?new Array(e):[],i=0;return Sj(t,function(s){r[i++]=s}),r}function fne(t){var e=t_(t),r=typeof e=="number"?Ej.getPointerArray(e):Array,i=typeof e=="number"?new Array(e):[],s=typeof e=="number"?new r(e):[],n=0;return Sj(t,function(o){i[n]=o,s[n]=n++}),[i,s]}lc.isArrayLike=cne;lc.guessLength=t_;lc.toArray=une;lc.toArrayWithIndices=fne});var Tj=_((xEe,Rj)=>{"use strict";var r_=bj(),dne=Zw(),hne=e_(),pne=xj();function ct(t,e,r){if(arguments.length<2&&(r=t,t=null,e=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var i=hne.getPointerArray(r);this.forward=new i(r),this.backward=new i(r),this.K=typeof t=="function"?new t(r):new Array(r),this.V=typeof e=="function"?new e(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items={}}ct.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};ct.prototype.splayOnTop=function(t){var e=this.head;if(this.head===t)return this;var r=this.backward[t],i=this.forward[t];return this.tail===t?this.tail=r:this.backward[i]=r,this.forward[r]=i,this.backward[e]=t,this.head=t,this.forward[t]=e,this};ct.prototype.set=function(t,e){var r=this.items[t];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=e;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[t]=r,this.K[r]=t,this.V[r]=e,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};ct.prototype.setpop=function(t,e){var r=null,i=null,s=this.items[t];return typeof s<"u"?(this.splayOnTop(s),r=this.V[s],this.V[s]=e,{evicted:!1,key:t,value:r}):(this.size<this.capacity?s=this.size++:(s=this.tail,this.tail=this.backward[s],r=this.V[s],i=this.K[s],delete this.items[i]),this.items[t]=s,this.K[s]=t,this.V[s]=e,this.forward[s]=this.head,this.backward[this.head]=s,this.head=s,i?{evicted:!0,key:i,value:r}:null)};ct.prototype.has=function(t){return t in this.items};ct.prototype.get=function(t){var e=this.items[t];if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};ct.prototype.peek=function(t){var e=this.items[t];if(!(typeof e>"u"))return this.V[e]};ct.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var r=0,i=this.size,s=this.head,n=this.K,o=this.V,a=this.forward;r<i;)t.call(e,o[s],n[s],this),s=a[s],r++};ct.prototype.keys=function(){var t=0,e=this.size,r=this.head,i=this.K,s=this.forward;return new r_(function(){if(t>=e)return{done:!0};var n=i[r];return t++,t<e&&(r=s[r]),{done:!1,value:n}})};ct.prototype.values=function(){var t=0,e=this.size,r=this.head,i=this.V,s=this.forward;return new r_(function(){if(t>=e)return{done:!0};var n=i[r];return t++,t<e&&(r=s[r]),{done:!1,value:n}})};ct.prototype.entries=function(){var t=0,e=this.size,r=this.head,i=this.K,s=this.V,n=this.forward;return new r_(function(){if(t>=e)return{done:!0};var o=i[r],a=s[r];return t++,t<e&&(r=n[r]),{done:!1,value:[o,a]}})};typeof Symbol<"u"&&(ct.prototype[Symbol.iterator]=ct.prototype.entries);ct.prototype.inspect=function(){for(var t=new Map,e=this.entries(),r;r=e.next(),!r.done;)t.set(r.value[0],r.value[1]);return Object.defineProperty(t,"constructor",{value:ct,enumerable:!1}),t};typeof Symbol<"u"&&(ct.prototype[Symbol.for("nodejs.util.inspect.custom")]=ct.prototype.inspect);ct.from=function(t,e,r,i){if(arguments.length<2){if(i=pne.guessLength(t),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,r=null);var s=new ct(e,r,i);return dne(t,function(n,o){s.set(o,n)}),s};Rj.exports=ct});var Aj=_((REe,cc)=>{"use strict";var mne=Tj(),yne=/^[!#$%&'*+\-.^\w`|~]+$/u;function gne(t){if(yne.test(t)===!1)throw new TypeError("Fieldname contains invalid characters.")}function Pj(t){t=t.trim().toLowerCase();let e=[];if(t.length!==0)if(t.indexOf(",")===-1)e.push(t);else{let r=t.length,i=0,s=0,n;for(i;i<r;++i)n=t[i],n===" "?s=i+1:n===","&&(s!==i&&e.push(t.slice(s,i)),s=i+1);s!==i&&e.push(t.slice(s,i))}return e}function i_(t){let e=new mne(1e3);return gne(t),function(r){let i=r.getHeader("Vary");if(!i){r.header("Vary",t);return}if(i==="*")return;if(t==="*"){r.header("Vary","*");return}if(Array.isArray(i)&&(i=i.join(", ")),!e.has(i)){let n=Pj(i);n.indexOf("*")!==-1?e.set(i,"*"):n.indexOf(t.toLowerCase())===-1?e.set(i,i+", "+t):e.set(i,null)}let s=e.get(i);s!==null&&r.header("Vary",s)}}cc.exports.createAddFieldnameToVary=i_;cc.exports.addOriginToVaryHeader=i_("Origin");cc.exports.addAccessControlRequestHeadersToVaryHeader=i_("Access-Control-Request-Headers");cc.exports.parse=Pj});var Nj=_((TEe,hh)=>{"use strict";var bne=fh(),{addAccessControlRequestHeadersToVaryHeader:vne,addOriginToVaryHeader:wne}=Aj(),n_={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",hook:"onRequest",preflightContinue:!1,optionsSuccessStatus:204,credentials:!1,exposedHeaders:null,allowedHeaders:null,maxAge:null,preflight:!0,strictPreflight:!0},_ne=["onRequest","preParsing","preValidation","preHandler","preSerialization","onSend"],s_=["preSerialization","preParsing","onSend"];function Ij(t,e){_ne.indexOf(t)===-1&&e(new TypeError("@fastify/cors: Invalid hook option provided."))}function Sne(t,e,r){t.decorateRequest("corsPreflightEnabled",!1);let i=!0;if(typeof e=="function")Cj(e,t,{hook:n_.hook},r);else if(e.delegator){let{delegator:s,...n}=e;Cj(s,t,n,r)}else{e.hideOptionsRoute!==void 0&&(i=e.hideOptionsRoute);let s=dh(e);Ij(s.hook,r),s_.indexOf(s.hook)!==-1?t.addHook(s.hook,function(o,a,l,c){uc(t,s,o,a,c)}):t.addHook(s.hook,function(o,a,l){uc(t,s,o,a,l)})}t.options("*",{schema:{hide:i}},(s,n)=>{if(!s.corsPreflightEnabled){n.callNotFound();return}n.send()}),r()}function Cj(t,e,r,i){let s=r?.hook||n_.hook;Ij(s,i),t.length===2?s_.indexOf(s)!==-1?e.addHook(s,function(o,a,l,c){Oj(t,e,o,a,c)}):e.addHook(s,function(o,a,l){Oj(t,e,o,a,l)}):s_.indexOf(s)!==-1?e.addHook(s,function(o,a,l,c){let u=t(o);if(u&&typeof u.then=="function"){u.then(f=>uc(e,dh(f,!0),o,a,c)).catch(c);return}c(new Error("Invalid CORS origin option"))}):e.addHook(s,function(o,a,l){let c=t(o);if(c&&typeof c.then=="function"){c.then(u=>uc(e,dh(u,!0),o,a,l)).catch(l);return}l(new Error("Invalid CORS origin option"))})}function Oj(t,e,r,i,s){t(r,(n,o)=>{n?s(n):uc(e,dh(o,!0),r,i,s)})}function dh(t,e){let r={...n_,...t};return Array.isArray(t.origin)&&t.origin.indexOf("*")!==-1&&(r.origin="*"),Number.isInteger(r.cacheControl)?r.cacheControl=`max-age=${r.cacheControl}`:typeof r.cacheControl!="string"&&(r.cacheControl=null),r.dynamic=e||!1,r}function uc(t,e,r,i,s){(typeof e.origin!="string"&&e.origin!==!1||e.dynamic)&&wne(i),(typeof e.origin=="function"?Rne(t,e.origin):(o,a)=>a(null,e.origin))(r,(o,a)=>{if(o!==null)return s(o);if(a===!1||r.routeOptions.config?.cors===!1)return s();if(!a)return s(new Error("Invalid CORS origin option"));if(Ene(r,i,a,e),r.raw.method==="OPTIONS"&&e.preflight===!0){if(e.strictPreflight===!0&&(!r.headers.origin||!r.headers["access-control-request-method"])){i.status(400).type("text/plain").send("Invalid Preflight Request");return}if(r.corsPreflightEnabled=!0,xne(r,i,e),!e.preflightContinue){i.code(e.optionsSuccessStatus).header("Content-Length","0").send();return}}return s()})}function Ene(t,e,r,i){let s=Tne(t.headers.origin,r);s&&e.header("Access-Control-Allow-Origin",s),i.credentials&&e.header("Access-Control-Allow-Credentials","true"),i.exposedHeaders!==null&&e.header("Access-Control-Expose-Headers",Array.isArray(i.exposedHeaders)?i.exposedHeaders.join(", "):i.exposedHeaders)}function xne(t,e,r){if(e.header("Access-Control-Allow-Methods",Array.isArray(r.methods)?r.methods.join(", "):r.methods),r.allowedHeaders===null){vne(e);let i=t.headers["access-control-request-headers"];i!==void 0&&e.header("Access-Control-Allow-Headers",i)}else e.header("Access-Control-Allow-Headers",Array.isArray(r.allowedHeaders)?r.allowedHeaders.join(", "):r.allowedHeaders);r.maxAge!==null&&e.header("Access-Control-Max-Age",String(r.maxAge)),r.cacheControl&&e.header("Cache-Control",r.cacheControl)}function Rne(t,e){return function(r,i){let s=e.call(t,r.headers.origin,i);s&&typeof s.then=="function"&&s.then(n=>i(null,n),i)}}function Tne(t,e){return typeof e=="string"?e:$j(t,e)?t:!1}function $j(t,e){if(Array.isArray(e)){for(let r=0;r<e.length;++r)if($j(t,e[r]))return!0;return!1}else return typeof e=="string"?t===e:e instanceof RegExp?(e.lastIndex=0,e.test(t)):!!e}var o_=bne(Sne,{fastify:"5.x",name:"@fastify/cors"});hh.exports=o_;hh.exports.fastifyCors=o_;hh.exports.default=o_});var a_=_((CEe,Lj)=>{"use strict";var{EventEmitter:Pne}=require("node:events"),{inherits:Ane}=require("node:util");function Cn(t){if(typeof t=="string"&&(t=Buffer.from(t)),!Buffer.isBuffer(t))throw new TypeError("The needle has to be a String or a Buffer.");let e=t.length,r=e-1;if(e===0)throw new Error("The needle cannot be an empty String/Buffer.");if(e>256)throw new Error("The needle cannot have a length bigger than 256.");this.maxMatches=1/0,this.matches=0,this._occ=new Uint8Array(256).fill(e),this._lookbehind_size=0,this._needle=t,this._bufpos=0,this._lookbehind=Buffer.alloc(r);for(var i=0;i<r;++i)this._occ[t[i]]=r-i}Ane(Cn,Pne);Cn.prototype.reset=function(){this._lookbehind_size=0,this.matches=0,this._bufpos=0};Cn.prototype.push=function(t,e){Buffer.isBuffer(t)||(t=Buffer.from(t,"binary"));let r=t.length;this._bufpos=e||0;let i;for(;i!==r&&this.matches<this.maxMatches;)i=this._sbmh_feed(t);return i};Cn.prototype._sbmh_feed=function(t){let e=t.length,r=this._needle,i=r.length,s=i-1,n=r[s],o=-this._lookbehind_size,a;if(o<0){for(;o<0&&o<=e-i;){if(a=t[o+s],a===n&&this._sbmh_memcmp(t,o,s))return this._lookbehind_size=0,++this.matches,this.emit("info",!0),this._bufpos=o+i;o+=this._occ[a]}for(;o<0&&!this._sbmh_memcmp(t,o,e-o);)++o;if(o>=0)this.emit("info",!1,this._lookbehind,0,this._lookbehind_size),this._lookbehind_size=0;else{let l=this._lookbehind_size+o;return l>0&&this.emit("info",!1,this._lookbehind,0,l),this._lookbehind_size-=l,this._lookbehind.copy(this._lookbehind,0,l,this._lookbehind_size),t.copy(this._lookbehind,this._lookbehind_size),this._lookbehind_size+=e,this._bufpos=e,e}}if(o=t.indexOf(r,o+this._bufpos),o!==-1)return++this.matches,o===0?this.emit("info",!0):this.emit("info",!0,t,this._bufpos,o),this._bufpos=o+i;for(o=e-s,o<0&&(o=0);o!==e&&(t[o]!==r[0]||Buffer.compare(t.subarray(o+1,e),r.subarray(1,e-o))!==0);)++o;return o!==e&&(t.copy(this._lookbehind,0,o,e),this._lookbehind_size=e-o),o!==0&&this.emit("info",!1,t,this._bufpos,o),this._bufpos=e,e};Cn.prototype._sbmh_lookup_char=function(t,e){return e<0?this._lookbehind[this._lookbehind_size+e]:t[e]};Cn.prototype._sbmh_memcmp=function(t,e,r){for(var i=0;i<r;++i)if(this._sbmh_lookup_char(t,e+i)!==this._needle[i])return!1;return!0};Lj.exports=Cn});var Fj=_((OEe,Dj)=>{"use strict";var Cne=require("node:util").inherits,jj=require("node:stream").Readable;function l_(t){jj.call(this,t)}Cne(l_,jj);l_.prototype._read=function(t){};Dj.exports=l_});var ph=_((IEe,Mj)=>{"use strict";Mj.exports=function(e,r,i){if(!e||e[r]===void 0||e[r]===null)return i;if(typeof e[r]!="number"||isNaN(e[r]))throw new TypeError("Limit "+r+" is not a valid number");return e[r]}});var Hj=_(($Ee,Uj)=>{"use strict";var Bj=require("node:events").EventEmitter,One=require("node:util").inherits,zj=ph(),Ine=a_(),$ne=Buffer.from(`\r
\r
`),Nne=/\r\n/g,kne=/^([^:]+):[ \t]?([\x00-\xFF]+)?$/;function ea(t){Bj.call(this),t=t||{};let e=this;this.nread=0,this.maxed=!1,this.npairs=0,this.maxHeaderPairs=zj(t,"maxHeaderPairs",2e3),this.maxHeaderSize=zj(t,"maxHeaderSize",80*1024),this.buffer="",this.header={},this.finished=!1,this.ss=new Ine($ne),this.ss.on("info",function(r,i,s,n){i&&!e.maxed&&(e.nread+n-s>=e.maxHeaderSize?(n=e.maxHeaderSize-e.nread+s,e.nread=e.maxHeaderSize,e.maxed=!0):e.nread+=n-s,e.buffer+=i.toString("binary",s,n)),r&&e._finish()})}One(ea,Bj);ea.prototype.push=function(t){let e=this.ss.push(t);if(this.finished)return e};ea.prototype.reset=function(){this.finished=!1,this.buffer="",this.header={},this.ss.reset()};ea.prototype._finish=function(){this.buffer&&this._parseHeader(),this.ss.matches=this.ss.maxMatches;let t=this.header;this.header={},this.buffer="",this.finished=!0,this.nread=this.npairs=0,this.maxed=!1,this.emit("header",t)};ea.prototype._parseHeader=function(){if(this.npairs===this.maxHeaderPairs)return;let t=this.buffer.split(Nne),e=t.length,r,i;for(var s=0;s<e;++s){if(t[s].length===0)continue;if((t[s][0]==="	"||t[s][0]===" ")&&i){this.header[i][this.header[i].length-1]+=t[s];continue}let n=t[s].indexOf(":");if(n===-1||n===0)return;if(r=kne.exec(t[s]),i=r[1].toLowerCase(),this.header[i]=this.header[i]||[],this.header[i].push(r[2]||""),++this.npairs===this.maxHeaderPairs)break}};Uj.exports=ea});var u_=_((NEe,Gj)=>{"use strict";var c_=require("node:stream").Writable,qne=require("node:util").inherits,Lne=a_(),Vj=Fj(),jne=Hj(),Dne=45,Fne=Buffer.from("-"),Mne=Buffer.from(`\r
`),zne=function(){};function ti(t){if(!(this instanceof ti))return new ti(t);if(c_.call(this,t),!t||!t.headerFirst&&typeof t.boundary!="string")throw new TypeError("Boundary required");typeof t.boundary=="string"?this.setBoundary(t.boundary):this._bparser=void 0,this._headerFirst=t.headerFirst,this._dashes=0,this._parts=0,this._finished=!1,this._realFinish=!1,this._isPreamble=!0,this._justMatched=!1,this._firstWrite=!0,this._inHeader=!0,this._part=void 0,this._cb=void 0,this._ignoreData=!1,this._partOpts={highWaterMark:t.partHwm},this._pause=!1;let e=this;this._hparser=new jne(t),this._hparser.on("header",function(r){e._inHeader=!1,e._part.emit("header",r)})}qne(ti,c_);ti.prototype.emit=function(t){if(t==="finish"&&!this._realFinish){if(!this._finished){let e=this;process.nextTick(function(){if(e.emit("error",new Error("Unexpected end of multipart data")),e._part&&!e._ignoreData){let r=e._isPreamble?"Preamble":"Part";e._part.emit("error",new Error(r+" terminated early due to unexpected end of multipart data")),e._part.push(null),process.nextTick(function(){e._realFinish=!0,e.emit("finish"),e._realFinish=!1});return}e._realFinish=!0,e.emit("finish"),e._realFinish=!1})}}else c_.prototype.emit.apply(this,arguments)};ti.prototype._write=function(t,e,r){if(!this._hparser&&!this._bparser)return r();if(this._headerFirst&&this._isPreamble){this._part||(this._part=new Vj(this._partOpts),this.listenerCount("preamble")!==0?this.emit("preamble",this._part):this._ignore());let i=this._hparser.push(t);if(!this._inHeader&&i!==void 0&&i<t.length)t=t.slice(i);else return r()}this._firstWrite&&(this._bparser.push(Mne),this._firstWrite=!1),this._bparser.push(t),this._pause?this._cb=r:r()};ti.prototype.reset=function(){this._part=void 0,this._bparser=void 0,this._hparser=void 0};ti.prototype.setBoundary=function(t){let e=this;this._bparser=new Lne(`\r
--`+t),this._bparser.on("info",function(r,i,s,n){e._oninfo(r,i,s,n)})};ti.prototype._ignore=function(){this._part&&!this._ignoreData&&(this._ignoreData=!0,this._part.on("error",zne),this._part.resume())};ti.prototype._oninfo=function(t,e,r,i){let s,n=this,o=0,a,l=!0;if(!this._part&&this._justMatched&&e){for(;this._dashes<2&&r+o<i;)if(e[r+o]===Dne)++o,++this._dashes;else{this._dashes&&(s=Fne),this._dashes=0;break}if(this._dashes===2&&(r+o<i&&this.listenerCount("trailer")!==0&&this.emit("trailer",e.slice(r+o,i)),this.reset(),this._finished=!0,n._parts===0&&(n._realFinish=!0,n.emit("finish"),n._realFinish=!1)),this._dashes)return}this._justMatched&&(this._justMatched=!1),this._part||(this._part=new Vj(this._partOpts),this._part._read=function(c){n._unpause()},this._isPreamble&&this.listenerCount("preamble")!==0?this.emit("preamble",this._part):this._isPreamble!==!0&&this.listenerCount("part")!==0?this.emit("part",this._part):this._ignore(),this._isPreamble||(this._inHeader=!0)),e&&r<i&&!this._ignoreData&&(this._isPreamble||!this._inHeader?(s&&(l=this._part.push(s)),l=this._part.push(e.slice(r,i)),l||(this._pause=!0)):!this._isPreamble&&this._inHeader&&(s&&this._hparser.push(s),a=this._hparser.push(e.slice(r,i)),!this._inHeader&&a!==void 0&&a<i&&this._oninfo(!1,e,r+a,i))),t&&(this._hparser.reset(),this._isPreamble?this._isPreamble=!1:r!==i&&(++this._parts,this._part.on("end",function(){--n._parts===0&&(n._finished?(n._realFinish=!0,n.emit("finish"),n._realFinish=!1):n._unpause())})),this._part.push(null),this._part=void 0,this._ignoreData=!1,this._justMatched=!0,this._dashes=0)};ti.prototype._unpause=function(){if(this._pause&&(this._pause=!1,this._cb)){let t=this._cb;this._cb=void 0,t()}};Gj.exports=ti});var mh=_((f_,Jj)=>{"use strict";var Kj=new TextDecoder("utf-8"),Wj=new Map([["utf-8",Kj],["utf8",Kj]]);function Bne(t){let e;for(;;)switch(t){case"utf-8":case"utf8":return fc.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return fc.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return fc.utf16le;case"base64":return fc.base64;default:if(e===void 0){e=!0,t=t.toLowerCase();continue}return fc.other.bind(t)}}var fc={utf8:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=Buffer.from(t,e)),t.utf8Slice(0,t.length)),latin1:(t,e)=>t.length===0?"":typeof t=="string"?t:t.latin1Slice(0,t.length),utf16le:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=Buffer.from(t,e)),t.ucs2Slice(0,t.length)),base64:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=Buffer.from(t,e)),t.base64Slice(0,t.length)),other:(t,e)=>{if(t.length===0)return"";if(typeof t=="string"&&(t=Buffer.from(t,e)),Wj.has(f_.toString()))try{return Wj.get(f_).decode(t)}catch{}return typeof t=="string"?t:t.toString()}};function Une(t,e,r){return t&&Bne(r)(t,e)}Jj.exports=Une});var h_=_((kEe,eD)=>{"use strict";var yh=mh(),Qj=/%[a-fA-F0-9][a-fA-F0-9]/g,Hne={"%00":"\0","%01":"","%02":"","%03":"","%04":"","%05":"","%06":"","%07":"\x07","%08":"\b","%09":"	","%0a":`
`,"%0A":`
`,"%0b":"\v","%0B":"\v","%0c":"\f","%0C":"\f","%0d":"\r","%0D":"\r","%0e":"","%0E":"","%0f":"","%0F":"","%10":"","%11":"","%12":"","%13":"","%14":"","%15":"","%16":"","%17":"","%18":"","%19":"","%1a":"","%1A":"","%1b":"\x1B","%1B":"\x1B","%1c":"","%1C":"","%1d":"","%1D":"","%1e":"","%1E":"","%1f":"","%1F":"","%20":" ","%21":"!","%22":'"',"%23":"#","%24":"$","%25":"%","%26":"&","%27":"'","%28":"(","%29":")","%2a":"*","%2A":"*","%2b":"+","%2B":"+","%2c":",","%2C":",","%2d":"-","%2D":"-","%2e":".","%2E":".","%2f":"/","%2F":"/","%30":"0","%31":"1","%32":"2","%33":"3","%34":"4","%35":"5","%36":"6","%37":"7","%38":"8","%39":"9","%3a":":","%3A":":","%3b":";","%3B":";","%3c":"<","%3C":"<","%3d":"=","%3D":"=","%3e":">","%3E":">","%3f":"?","%3F":"?","%40":"@","%41":"A","%42":"B","%43":"C","%44":"D","%45":"E","%46":"F","%47":"G","%48":"H","%49":"I","%4a":"J","%4A":"J","%4b":"K","%4B":"K","%4c":"L","%4C":"L","%4d":"M","%4D":"M","%4e":"N","%4E":"N","%4f":"O","%4F":"O","%50":"P","%51":"Q","%52":"R","%53":"S","%54":"T","%55":"U","%56":"V","%57":"W","%58":"X","%59":"Y","%5a":"Z","%5A":"Z","%5b":"[","%5B":"[","%5c":"\\","%5C":"\\","%5d":"]","%5D":"]","%5e":"^","%5E":"^","%5f":"_","%5F":"_","%60":"`","%61":"a","%62":"b","%63":"c","%64":"d","%65":"e","%66":"f","%67":"g","%68":"h","%69":"i","%6a":"j","%6A":"j","%6b":"k","%6B":"k","%6c":"l","%6C":"l","%6d":"m","%6D":"m","%6e":"n","%6E":"n","%6f":"o","%6F":"o","%70":"p","%71":"q","%72":"r","%73":"s","%74":"t","%75":"u","%76":"v","%77":"w","%78":"x","%79":"y","%7a":"z","%7A":"z","%7b":"{","%7B":"{","%7c":"|","%7C":"|","%7d":"}","%7D":"}","%7e":"~","%7E":"~","%7f":"\x7F","%7F":"\x7F","%80":"\x80","%81":"\x81","%82":"\x82","%83":"\x83","%84":"\x84","%85":"\x85","%86":"\x86","%87":"\x87","%88":"\x88","%89":"\x89","%8a":"\x8A","%8A":"\x8A","%8b":"\x8B","%8B":"\x8B","%8c":"\x8C","%8C":"\x8C","%8d":"\x8D","%8D":"\x8D","%8e":"\x8E","%8E":"\x8E","%8f":"\x8F","%8F":"\x8F","%90":"\x90","%91":"\x91","%92":"\x92","%93":"\x93","%94":"\x94","%95":"\x95","%96":"\x96","%97":"\x97","%98":"\x98","%99":"\x99","%9a":"\x9A","%9A":"\x9A","%9b":"\x9B","%9B":"\x9B","%9c":"\x9C","%9C":"\x9C","%9d":"\x9D","%9D":"\x9D","%9e":"\x9E","%9E":"\x9E","%9f":"\x9F","%9F":"\x9F","%a0":"\xA0","%A0":"\xA0","%a1":"\xA1","%A1":"\xA1","%a2":"\xA2","%A2":"\xA2","%a3":"\xA3","%A3":"\xA3","%a4":"\xA4","%A4":"\xA4","%a5":"\xA5","%A5":"\xA5","%a6":"\xA6","%A6":"\xA6","%a7":"\xA7","%A7":"\xA7","%a8":"\xA8","%A8":"\xA8","%a9":"\xA9","%A9":"\xA9","%aa":"\xAA","%Aa":"\xAA","%aA":"\xAA","%AA":"\xAA","%ab":"\xAB","%Ab":"\xAB","%aB":"\xAB","%AB":"\xAB","%ac":"\xAC","%Ac":"\xAC","%aC":"\xAC","%AC":"\xAC","%ad":"\xAD","%Ad":"\xAD","%aD":"\xAD","%AD":"\xAD","%ae":"\xAE","%Ae":"\xAE","%aE":"\xAE","%AE":"\xAE","%af":"\xAF","%Af":"\xAF","%aF":"\xAF","%AF":"\xAF","%b0":"\xB0","%B0":"\xB0","%b1":"\xB1","%B1":"\xB1","%b2":"\xB2","%B2":"\xB2","%b3":"\xB3","%B3":"\xB3","%b4":"\xB4","%B4":"\xB4","%b5":"\xB5","%B5":"\xB5","%b6":"\xB6","%B6":"\xB6","%b7":"\xB7","%B7":"\xB7","%b8":"\xB8","%B8":"\xB8","%b9":"\xB9","%B9":"\xB9","%ba":"\xBA","%Ba":"\xBA","%bA":"\xBA","%BA":"\xBA","%bb":"\xBB","%Bb":"\xBB","%bB":"\xBB","%BB":"\xBB","%bc":"\xBC","%Bc":"\xBC","%bC":"\xBC","%BC":"\xBC","%bd":"\xBD","%Bd":"\xBD","%bD":"\xBD","%BD":"\xBD","%be":"\xBE","%Be":"\xBE","%bE":"\xBE","%BE":"\xBE","%bf":"\xBF","%Bf":"\xBF","%bF":"\xBF","%BF":"\xBF","%c0":"\xC0","%C0":"\xC0","%c1":"\xC1","%C1":"\xC1","%c2":"\xC2","%C2":"\xC2","%c3":"\xC3","%C3":"\xC3","%c4":"\xC4","%C4":"\xC4","%c5":"\xC5","%C5":"\xC5","%c6":"\xC6","%C6":"\xC6","%c7":"\xC7","%C7":"\xC7","%c8":"\xC8","%C8":"\xC8","%c9":"\xC9","%C9":"\xC9","%ca":"\xCA","%Ca":"\xCA","%cA":"\xCA","%CA":"\xCA","%cb":"\xCB","%Cb":"\xCB","%cB":"\xCB","%CB":"\xCB","%cc":"\xCC","%Cc":"\xCC","%cC":"\xCC","%CC":"\xCC","%cd":"\xCD","%Cd":"\xCD","%cD":"\xCD","%CD":"\xCD","%ce":"\xCE","%Ce":"\xCE","%cE":"\xCE","%CE":"\xCE","%cf":"\xCF","%Cf":"\xCF","%cF":"\xCF","%CF":"\xCF","%d0":"\xD0","%D0":"\xD0","%d1":"\xD1","%D1":"\xD1","%d2":"\xD2","%D2":"\xD2","%d3":"\xD3","%D3":"\xD3","%d4":"\xD4","%D4":"\xD4","%d5":"\xD5","%D5":"\xD5","%d6":"\xD6","%D6":"\xD6","%d7":"\xD7","%D7":"\xD7","%d8":"\xD8","%D8":"\xD8","%d9":"\xD9","%D9":"\xD9","%da":"\xDA","%Da":"\xDA","%dA":"\xDA","%DA":"\xDA","%db":"\xDB","%Db":"\xDB","%dB":"\xDB","%DB":"\xDB","%dc":"\xDC","%Dc":"\xDC","%dC":"\xDC","%DC":"\xDC","%dd":"\xDD","%Dd":"\xDD","%dD":"\xDD","%DD":"\xDD","%de":"\xDE","%De":"\xDE","%dE":"\xDE","%DE":"\xDE","%df":"\xDF","%Df":"\xDF","%dF":"\xDF","%DF":"\xDF","%e0":"\xE0","%E0":"\xE0","%e1":"\xE1","%E1":"\xE1","%e2":"\xE2","%E2":"\xE2","%e3":"\xE3","%E3":"\xE3","%e4":"\xE4","%E4":"\xE4","%e5":"\xE5","%E5":"\xE5","%e6":"\xE6","%E6":"\xE6","%e7":"\xE7","%E7":"\xE7","%e8":"\xE8","%E8":"\xE8","%e9":"\xE9","%E9":"\xE9","%ea":"\xEA","%Ea":"\xEA","%eA":"\xEA","%EA":"\xEA","%eb":"\xEB","%Eb":"\xEB","%eB":"\xEB","%EB":"\xEB","%ec":"\xEC","%Ec":"\xEC","%eC":"\xEC","%EC":"\xEC","%ed":"\xED","%Ed":"\xED","%eD":"\xED","%ED":"\xED","%ee":"\xEE","%Ee":"\xEE","%eE":"\xEE","%EE":"\xEE","%ef":"\xEF","%Ef":"\xEF","%eF":"\xEF","%EF":"\xEF","%f0":"\xF0","%F0":"\xF0","%f1":"\xF1","%F1":"\xF1","%f2":"\xF2","%F2":"\xF2","%f3":"\xF3","%F3":"\xF3","%f4":"\xF4","%F4":"\xF4","%f5":"\xF5","%F5":"\xF5","%f6":"\xF6","%F6":"\xF6","%f7":"\xF7","%F7":"\xF7","%f8":"\xF8","%F8":"\xF8","%f9":"\xF9","%F9":"\xF9","%fa":"\xFA","%Fa":"\xFA","%fA":"\xFA","%FA":"\xFA","%fb":"\xFB","%Fb":"\xFB","%fB":"\xFB","%FB":"\xFB","%fc":"\xFC","%Fc":"\xFC","%fC":"\xFC","%FC":"\xFC","%fd":"\xFD","%Fd":"\xFD","%fD":"\xFD","%FD":"\xFD","%fe":"\xFE","%Fe":"\xFE","%fE":"\xFE","%FE":"\xFE","%ff":"\xFF","%Ff":"\xFF","%fF":"\xFF","%FF":"\xFF"};function Yj(t){return Hne[t]}var gh=0,Xj=1,d_=2,Zj=3;function Vne(t){let e=[],r=gh,i="",s=!1,n=!1,o=0,a="",l=t.length;for(var c=0;c<l;++c){let u=t[c];if(u==="\\"&&s)if(n)n=!1;else{n=!0;continue}else if(u==='"')if(n)n=!1;else{s?(s=!1,r=gh):s=!0;continue}else if(n&&s&&(a+="\\"),n=!1,(r===d_||r===Zj)&&u==="'"){r===d_?(r=Zj,i=a.substring(1)):r=Xj,a="";continue}else if(r===gh&&(u==="*"||u==="=")&&e.length){r=u==="*"?d_:Xj,e[o]=[a,void 0],a="";continue}else if(!s&&u===";"){r=gh,i?(a.length&&(a=yh(a.replace(Qj,Yj),"binary",i)),i=""):a.length&&(a=yh(a,"binary","utf8")),e[o]===void 0?e[o]=a:e[o][1]=a,a="",++o;continue}else if(!s&&(u===" "||u==="	"))continue;a+=u}return i&&a.length?a=yh(a.replace(Qj,Yj),"binary",i):a&&(a=yh(a,"binary","utf8")),e[o]===void 0?a&&(e[o]=a):e[o][1]=a,e}eD.exports=Vne});var rD=_((qEe,tD)=>{"use strict";tD.exports=function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;--r)switch(e.charCodeAt(r)){case 47:case 92:return e=e.slice(r+1),e===".."||e==="."?"":e}return e===".."||e==="."?"":e}});var oD=_((LEe,nD)=>{"use strict";var{Readable:sD}=require("node:stream"),{inherits:Gne}=require("node:util"),Kne=u_(),iD=h_(),Wne=mh(),Jne=rD(),On=ph(),Qne=/^boundary$/i,Yne=/^form-data$/i,Xne=/^charset$/i,Zne=/^filename$/i,eoe=/^name$/i;bh.detect=/^multipart\/form-data/i;function bh(t,e){let r,i,s=this,n,o=e.limits,a=e.isPartAFile||((q,O,P)=>O==="application/octet-stream"||P!==void 0),l=e.parsedConType||[],c=e.defCharset||"utf8",u=e.preservePath,f={highWaterMark:e.fileHwm};for(r=0,i=l.length;r<i;++r)if(Array.isArray(l[r])&&Qne.test(l[r][0])){n=l[r][1];break}function p(){x===0&&T&&!t._done&&(T=!1,s.end())}if(typeof n!="string")throw new Error("Multipart: Boundary not found");let d=On(o,"fieldSize",1*1024*1024),h=On(o,"fileSize",1/0),m=On(o,"files",1/0),v=On(o,"fields",1/0),g=On(o,"parts",1/0),w=On(o,"headerPairs",2e3),b=On(o,"headerSize",80*1024),y=0,E=0,x=0,S,R,T=!1;this._needDrain=!1,this._pause=!1,this._cb=void 0,this._nparts=0,this._boy=t;let C={boundary:n,maxHeaderPairs:w,maxHeaderSize:b,partHwm:f.highWaterMark,highWaterMark:e.highWaterMark};this.parser=new Kne(C),this.parser.on("drain",function(){if(s._needDrain=!1,s._cb&&!s._pause){let q=s._cb;s._cb=void 0,q()}}).on("part",function q(O){if(++s._nparts>g)return s.parser.removeListener("part",q),s.parser.on("part",ta),t.hitPartsLimit=!0,t.emit("partsLimit"),ta(O);if(R){let P=R;P.emit("end"),P.removeAllListeners("end")}O.on("header",function(P){let D,te,L,K,Re,z,Te=0;if(P["content-type"]&&(L=iD(P["content-type"][0]),L[0])){for(D=L[0].toLowerCase(),r=0,i=L.length;r<i;++r)if(Xne.test(L[r][0])){K=L[r][1].toLowerCase();break}}if(D===void 0&&(D="text/plain"),K===void 0&&(K=c),P["content-disposition"]){if(L=iD(P["content-disposition"][0]),!Yne.test(L[0]))return ta(O);for(r=0,i=L.length;r<i;++r)eoe.test(L[r][0])?te=L[r][1]:Zne.test(L[r][0])&&(z=L[r][1],u||(z=Jne(z)))}else return ta(O);P["content-transfer-encoding"]?Re=P["content-transfer-encoding"][0].toLowerCase():Re="7bit";let ht,we;if(a(te,D,z)){if(y===m)return t.hitFilesLimit||(t.hitFilesLimit=!0,t.emit("filesLimit")),ta(O);if(++y,t.listenerCount("file")===0){s.parser._ignore();return}++x;let se=new p_(f);S=se,se.on("end",function(){if(--x,s._pause=!1,p(),s._cb&&!s._needDrain){let wt=s._cb;s._cb=void 0,wt()}}),se._read=function(wt){if(s._pause&&(s._pause=!1,s._cb&&!s._needDrain)){let Ce=s._cb;s._cb=void 0,Ce()}},t.emit("file",te,se,z,Re,D),ht=function(wt){if((Te+=wt.length)>h){let Ce=h-Te+wt.length;Ce>0&&se.push(wt.slice(0,Ce)),se.truncated=!0,se.bytesRead=h,O.removeAllListeners("data"),se.emit("limit");return}else se.push(wt)||(s._pause=!0);se.bytesRead=Te},we=function(){S=void 0,se.push(null)}}else{if(E===v)return t.hitFieldsLimit||(t.hitFieldsLimit=!0,t.emit("fieldsLimit")),ta(O);++E,++x;let se="",wt=!1;R=O,ht=function(Ce){if((Te+=Ce.length)>d){let xe=d-(Te-Ce.length);se+=Ce.toString("binary",0,xe),wt=!0,O.removeAllListeners("data")}else se+=Ce.toString("binary")},we=function(){R=void 0,se.length&&(se=Wne(se,"binary",K)),t.emit("field",te,se,!1,wt,Re,D),--x,p()}}O._readableState.sync=!1,O.on("data",ht),O.on("end",we)}).on("error",function(P){S&&S.emit("error",P)})}).on("error",function(q){t.emit("error",q)}).on("finish",function(){T=!0,p()})}bh.prototype.write=function(t,e){let r=this.parser.write(t);r&&!this._pause?e():(this._needDrain=!r,this._cb=e)};bh.prototype.end=function(){let t=this;t.parser.writable?t.parser.end():t._boy._done||process.nextTick(function(){t._boy._done=!0,t._boy.emit("finish")})};function ta(t){t.resume()}function p_(t){sD.call(this,t),this.bytesRead=0,this.truncated=!1}Gne(p_,sD);p_.prototype._read=function(t){};nD.exports=bh});var lD=_((jEe,aD)=>{"use strict";var toe=/\+/g,roe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function m_(){this.buffer=void 0}m_.prototype.write=function(t){t=t.replace(toe," ");let e="",r=0,i=0,s=t.length;for(;r<s;++r)this.buffer!==void 0?roe[t.charCodeAt(r)]?(this.buffer+=t[r],++i,this.buffer.length===2&&(e+=String.fromCharCode(parseInt(this.buffer,16)),this.buffer=void 0)):(e+="%"+this.buffer,this.buffer=void 0,--r):t[r]==="%"&&(r>i&&(e+=t.substring(i,r),i=r),this.buffer="",++i);return i<s&&this.buffer===void 0&&(e+=t.substring(i)),e};m_.prototype.reset=function(){this.buffer=void 0};aD.exports=m_});var uD=_((DEe,cD)=>{"use strict";var ioe=lD(),ra=mh(),y_=ph(),soe=/^charset$/i;vh.detect=/^application\/x-www-form-urlencoded/i;function vh(t,e){let r=e.limits,i=e.parsedConType;this.boy=t,this.fieldSizeLimit=y_(r,"fieldSize",1*1024*1024),this.fieldNameSizeLimit=y_(r,"fieldNameSize",100),this.fieldsLimit=y_(r,"fields",1/0);let s;for(var n=0,o=i.length;n<o;++n)if(Array.isArray(i[n])&&soe.test(i[n][0])){s=i[n][1].toLowerCase();break}s===void 0&&(s=e.defCharset||"utf8"),this.decoder=new ioe,this.charset=s,this._fields=0,this._state="key",this._checkingBytes=!0,this._bytesKey=0,this._bytesVal=0,this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._hitLimit=!1}vh.prototype.write=function(t,e){if(this._fields===this.fieldsLimit)return this.boy.hitFieldsLimit||(this.boy.hitFieldsLimit=!0,this.boy.emit("fieldsLimit")),e();let r,i,s,n=0,o=t.length;for(;n<o;)if(this._state==="key"){for(r=i=void 0,s=n;s<o;++s){if(this._checkingBytes||++n,t[s]===61){r=s;break}else if(t[s]===38){i=s;break}if(this._checkingBytes&&this._bytesKey===this.fieldNameSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesKey}if(r!==void 0)r>n&&(this._key+=this.decoder.write(t.toString("binary",n,r))),this._state="val",this._hitLimit=!1,this._checkingBytes=!0,this._val="",this._bytesVal=0,this._valTrunc=!1,this.decoder.reset(),n=r+1;else if(i!==void 0){++this._fields;let a,l=this._keyTrunc;if(i>n?a=this._key+=this.decoder.write(t.toString("binary",n,i)):a=this._key,this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),a.length&&this.boy.emit("field",ra(a,"binary",this.charset),"",l,!1),n=i+1,this._fields===this.fieldsLimit)return e()}else this._hitLimit?(s>n&&(this._key+=this.decoder.write(t.toString("binary",n,s))),n=s,(this._bytesKey=this._key.length)===this.fieldNameSizeLimit&&(this._checkingBytes=!1,this._keyTrunc=!0)):(n<o&&(this._key+=this.decoder.write(t.toString("binary",n))),n=o)}else{for(i=void 0,s=n;s<o;++s){if(this._checkingBytes||++n,t[s]===38){i=s;break}if(this._checkingBytes&&this._bytesVal===this.fieldSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesVal}if(i!==void 0){if(++this._fields,i>n&&(this._val+=this.decoder.write(t.toString("binary",n,i))),this.boy.emit("field",ra(this._key,"binary",this.charset),ra(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this._state="key",this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),n=i+1,this._fields===this.fieldsLimit)return e()}else this._hitLimit?(s>n&&(this._val+=this.decoder.write(t.toString("binary",n,s))),n=s,(this._val===""&&this.fieldSizeLimit===0||(this._bytesVal=this._val.length)===this.fieldSizeLimit)&&(this._checkingBytes=!1,this._valTrunc=!0)):(n<o&&(this._val+=this.decoder.write(t.toString("binary",n))),n=o)}e()};vh.prototype.end=function(){this.boy._done||(this._state==="key"&&this._key.length>0?this.boy.emit("field",ra(this._key,"binary",this.charset),"",this._keyTrunc,!1):this._state==="val"&&this.boy.emit("field",ra(this._key,"binary",this.charset),ra(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this.boy._done=!0,this.boy.emit("finish"))};cD.exports=vh});var hD=_((FEe,dc)=>{"use strict";var g_=require("node:stream").Writable,{inherits:noe}=require("node:util"),ooe=u_(),fD=oD(),dD=uD(),aoe=h_();function rs(t){if(!(this instanceof rs))return new rs(t);if(typeof t!="object")throw new TypeError("Busboy expected an options-Object.");if(typeof t.headers!="object")throw new TypeError("Busboy expected an options-Object with headers-attribute.");if(typeof t.headers["content-type"]!="string")throw new TypeError("Missing Content-Type-header.");let{headers:e,...r}=t;this.opts={autoDestroy:!1,...r},g_.call(this,this.opts),this._done=!1,this._parser=this.getParserByHeaders(e),this._finished=!1}noe(rs,g_);rs.prototype.emit=function(t){if(t==="finish"){if(this._done){if(this._finished)return}else{this._parser?.end();return}this._finished=!0}g_.prototype.emit.apply(this,arguments)};rs.prototype.getParserByHeaders=function(t){let e=aoe(t["content-type"]),r={defCharset:this.opts.defCharset,fileHwm:this.opts.fileHwm,headers:t,highWaterMark:this.opts.highWaterMark,isPartAFile:this.opts.isPartAFile,limits:this.opts.limits,parsedConType:e,preservePath:this.opts.preservePath};if(fD.detect.test(e[0]))return new fD(this,r);if(dD.detect.test(e[0]))return new dD(this,r);throw new Error("Unsupported Content-Type.")};rs.prototype._write=function(t,e,r){this._parser.write(t,r)};dc.exports=rs;dc.exports.default=rs;dc.exports.Busboy=rs;dc.exports.Dicer=ooe});var yD=_((MEe,mD)=>{"use strict";var is=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],In=Math.random;function pD(){return is[255*In()|0]+is[255*In()|0]+is[255*In()|0]+is[255*In()|0]+is[255*In()|0]+is[255*In()|0]+is[255*In()|0]}mD.exports.generateId=function(){let e=0,r=pD();return function(){return e===255?(r=pD())+is[e=0]:r+is[++e]}}()});var bD=_((zEe,gD)=>{"use strict";gD.exports=function(e){return new Promise((r,i)=>{e.on("data",()=>{}),e.on("close",()=>{r()}),e.on("end",()=>{r()}),e.on("error",s=>{i(s)})})}});var wD=_((BEe,wh)=>{"use strict";var vD=Object.getPrototypeOf({});function b_(t){function e(g){return g!=="constructor"&&g!=="prototype"&&g!=="__proto__"}function r(g){let w=0,b=g.length,y=new Array(b);for(w;w<b;++w)y[w]=d(g[w]);return y}function i(g){let w={};if(l&&Object.getPrototypeOf(g)!==vD)return l(g);let b=a(g),y,E,x;for(y=0,E=b.length;y<E;++y)e(x=b[y])&&(w[x]=d(g[x]));return w}function s(g,w){let b=g.length,y=w.length,E=0,x=new Array(b+y);for(E;E<b;++E)x[E]=d(g[E]);for(E=0;E<y;++E)x[E+b]=d(w[E]);return x}let n=Object.prototype.propertyIsEnumerable;function o(g){let w=Object.keys(g),b=Object.getOwnPropertySymbols(g);for(let y=0,E=b.length;y<E;++y)n.call(g,b[y])&&w.push(b[y]);return w}let a=t?.symbols?o:Object.keys,l=typeof t?.cloneProtoObject=="function"?t.cloneProtoObject:void 0;function c(g){return typeof g=="object"&&g!==null&&!(g instanceof RegExp)&&!(g instanceof Date)}function u(g){return typeof g!="object"||g===null}let f=typeof Buffer<"u"?g=>typeof g!="object"||g===null||g instanceof RegExp||g instanceof Date||g instanceof Buffer:g=>typeof g!="object"||g===null||g instanceof RegExp||g instanceof Date,p=t&&typeof t.mergeArray=="function"?t.mergeArray({clone:d,deepmerge:m,getKeys:a,isMergeableObject:c}):s;function d(g){return c(g)?Array.isArray(g)?r(g):i(g):g}function h(g,w){let b={},y=a(g),E=a(w),x,S,R;for(x=0,S=y.length;x<S;++x)e(R=y[x])&&E.indexOf(R)===-1&&(b[R]=d(g[R]));for(x=0,S=E.length;x<S;++x)e(R=E[x])&&(R in g?y.indexOf(R)!==-1&&(l&&c(w[R])&&Object.getPrototypeOf(w[R])!==vD?b[R]=l(w[R]):b[R]=m(g[R],w[R])):b[R]=d(w[R]));return b}function m(g,w){let b=Array.isArray(w),y=Array.isArray(g);return u(w)?w:f(g)?d(w):b&&y?p(g,w):b!==y?d(w):h(g,w)}function v(){switch(arguments.length){case 0:return{};case 1:return d(arguments[0]);case 2:return m(arguments[0],arguments[1])}let g;for(let w=0,b=arguments.length;w<b;++w)g=m(g,arguments[w]);return g}return t?.all?v:m}wh.exports=b_;wh.exports.default=b_;wh.exports.deepmerge=b_});var AD=_((UEe,hc)=>{"use strict";var loe=hD(),coe=require("node:os"),uoe=fh(),{createWriteStream:foe}=require("node:fs"),{unlink:doe}=require("node:fs/promises"),_D=require("node:path"),{generateId:hoe}=yD(),ss=Vc(),poe=bD(),moe=wD()({all:!0}),{PassThrough:yoe,Readable:goe}=require("node:stream"),{pipeline:boe}=require("node:stream/promises"),voe=sy(),__=Symbol("multipart"),_h=Symbol("multipartHandler"),SD=ss("FST_PARTS_LIMIT","reach parts limit",413),ED=ss("FST_FILES_LIMIT","reach files limit",413),xD=ss("FST_FIELDS_LIMIT","reach fields limit",413),v_=ss("FST_REQ_FILE_TOO_LARGE","request file too large",413),w_=ss("FST_PROTO_VIOLATION","prototype property is not allowed as field name",400),RD=ss("FST_INVALID_MULTIPART_CONTENT_TYPE","the request is not multipart",406),TD=ss("FST_INVALID_JSON_FIELD_ERROR","a request field is not a valid JSON as declared by its Content-Type",406),PD=ss("FST_FILE_BUFFER_NOT_FOUND","the file buffer was not found",500),woe=ss("FST_NO_FORM_DATA","FormData is not available",500);function _oe(t,e,r){t[__]=!0,r()}function Soe(t){try{return new loe(t)}catch(e){let r=new yoe;return process.nextTick(function(){r.emit("error",e)}),r}}function S_(t,e,r){e.limits={...e.limits,parts:e.limits?.parts||1e3,fileSize:e.limits?.fileSize||t.initialConfig.bodyLimit};let i=e.attachFieldsToBody;(i===!0||i==="keyValues")&&(typeof e.sharedSchemaId=="string"&&i===!0&&t.addSchema({$id:e.sharedSchemaId,type:"object",properties:{fieldname:{type:"string"},encoding:{type:"string"},filename:{type:"string"},mimetype:{type:"string"}}}),t.addHook("preValidation",async function(d){if(d.isMultipart()){for await(let h of d.parts())d.body=h.fields,h.file&&(e.onFile?await e.onFile.call(d,h):await h.toBuffer());if(i==="keyValues"){let h={};if(d.body){let m=Object.keys(d.body);for(let v=0;v<m.length;++v){let g=m[v],w=d.body[g];if(w.value!==void 0)h[g]=w.value;else if(w._buf)h[g]=w._buf;else if(Array.isArray(w)){let b=[];for(let y=0;y<w.length;++y){let E=w[y];E.value!==void 0?b.push(E.value):E._buf&&b.push(E._buf)}b.length&&(h[g]=b)}}}d.body=h}}}),globalThis.FormData&&!t.hasRequestDecorator("formData")&&t.decorateRequest("formData",async function(){let d=new FormData;for(let m in this.body){let v=this.body[m];if(Array.isArray(v))for(let g of v)await h(m,g);else await h(m,v)}async function h(m,v){v.type==="file"||i==="keyValues"&&Buffer.isBuffer(v)?d.append(m,new Blob([await v.toBuffer()],{type:v.mimetype}),v.filename):d.append(m,v.value)}return d})),t.hasRequestDecorator("formData")||t.decorateRequest("formData",async function(){throw new woe});let s=typeof e.throwFileSizeLimit=="boolean"?e.throwFileSizeLimit:!0;t.decorate("multipartErrors",{PartsLimitError:SD,FilesLimitError:ED,FieldsLimitError:xD,PrototypeViolationError:w_,InvalidMultipartContentTypeError:RD,RequestFileTooLargeError:v_,FileBufferNotFoundError:PD}),t.addContentTypeParser("multipart/form-data",_oe),t.decorateRequest(__,!1),t.decorateRequest(_h,o),t.decorateRequest("parts",p),t.decorateRequest("isMultipart",n),t.decorateRequest("tmpUploads",null),t.decorateRequest("savedRequestFiles",null),t.decorateRequest("file",u),t.decorateRequest("files",f),t.decorateRequest("saveRequestFiles",a),t.decorateRequest("cleanRequestFiles",c),t.addHook("onResponse",async d=>{await d.cleanRequestFiles()});function n(){return this[__]}function o(d={}){if(!this.isMultipart())throw new RD;this.log.debug("starting multipart parsing");let h=[],m=null,v=P=>{m?(m(P),m=null):h.push(P)},g=P=>{if(h.length>0){let D=h[0];h=h.slice(1),P(D)}else m=P},w=()=>new Promise((P,D)=>{g(te=>{te instanceof Error?te.message==="Unexpected end of multipart data"?P(null):D(te):P(te)})}),b={},y=null,E=null,x=this.raw,S=moe({headers:x.headers},e,d);this.log.trace({busboyOptions:S},"Providing options to busboy");let R=Soe(S);x.on("close",O),x.on("error",O),R.on("field",T).on("file",C).on("end",O).on("finish",O).on("close",O).on("error",O),R.on("partsLimit",function(){let P=new SD;q(P),process.nextTick(()=>O(P))}),R.on("filesLimit",function(){let P=new ED;q(P),process.nextTick(()=>O(P))}),R.on("fieldsLimit",function(){let P=new xD;q(P),process.nextTick(()=>O(P))}),x.pipe(R);function T(P,D,te,L,K,Re){if(P in Object.prototype){q(new w_);return}if(Re.startsWith("application/json")){if(L){q(new TD);return}try{D=voe.parse(D),Re="application/json"}catch{q(new TD);return}}let z={type:"field",fieldname:P,mimetype:Re,encoding:K,value:D,fieldnameTruncated:te,valueTruncated:L,fields:b};b[P]===void 0?b[P]=z:Array.isArray(b[P])?b[P].push(z):b[P]=[b[P],z],v(z)}function C(P,D,te,L,K){if(P in Object.prototype){poe(D).catch(()=>{}),q(new w_);return}let Re=typeof d.throwFileSizeLimit=="boolean"?d.throwFileSizeLimit:s,z={type:"file",fieldname:P,filename:te,encoding:L,mimetype:K,file:D,fields:b,_buf:null,async toBuffer(){if(this._buf)return this._buf;let Te=[],ht;for await(let we of this.file)Te.push(we),Re&&this.file.truncated&&(ht=new v_,ht.part=this,q(ht),Te.length=0);if(ht)throw ht;return this._buf=Buffer.concat(Te),this._buf}};Re&&D.on("limit",function(){let Te=new v_;Te.part=z,q(Te)}),b[P]===void 0?b[P]=z:Array.isArray(b[P])?b[P].push(z):b[P]=[b[P],z],E=D,v(z)}function q(P){y=P,E=null}function O(P){x.unpipe(R),(P||x.aborted)&&E&&(E.destroy(),E=null),v(P||y||null)}return w}async function a(d){if(this.savedRequestFiles)return this.savedRequestFiles;let h;if(i===!0){if(!this.body)return[];h=l.call(this,this.body)}else h=await this.files(d);this.savedRequestFiles=[];let m=d?.tmpdir||coe.tmpdir();this.tmpUploads=[];let v=0;for await(let g of h){let w=_D.join(m,hoe()+_D.extname(g.filename||"file"+v++)),b=foe(w);try{this.tmpUploads.push(w),await boe(g.file,b),this.savedRequestFiles.push({...g,filepath:w})}catch(y){throw this.log.error({err:y},"save request file"),y}}return this.savedRequestFiles}function*l(d){try{let h=Array.isArray(d)?d:Object.values(d);for(let m=0;m<h.length;++m){let v=h[m];if(Array.isArray(v))for(let g of l.call(this,v))yield g;if(v.file){if(!v._buf)throw new PD;v.file=goe.from(v._buf),yield v}}}catch(h){throw this.log.error({err:h},"save request file failed"),h}}async function c(){if(this.tmpUploads)for(let d=0;d<this.tmpUploads.length;++d){let h=this.tmpUploads[d];try{await doe(h)}catch(m){this.log.error(m,"Could not delete file")}}}async function u(d){let h=this[_h](d),m;for(;(m=await h())!=null;)if(m.file)return m}async function*f(d){let h=this[_h](d),m;for(;(m=await h())!=null;)m.file&&(yield m)}async function*p(d){let h=this[_h](d),m;for(;(m=await h())!=null;)yield m}r()}function Eoe(t){return t.addKeyword({keyword:"isFile",compile:(e,r)=>(r.type="string",r.format="binary",delete r.isFile,i=>!!i.file),error:{message:"should be a file"}})}hc.exports=uoe(S_,{fastify:"5.x",name:"@fastify/multipart"});hc.exports.default=S_;hc.exports.fastifyMultipart=S_;hc.exports.ajvFilePlugin=Eoe});var ND=_((HEe,$D)=>{"use strict";$D.exports=OD;function OD(t,e,r){t instanceof RegExp&&(t=CD(t,r)),e instanceof RegExp&&(e=CD(e,r));var i=ID(t,e,r);return i&&{start:i[0],end:i[1],pre:r.slice(0,i[0]),body:r.slice(i[0]+t.length,i[1]),post:r.slice(i[1]+e.length)}}function CD(t,e){var r=e.match(t);return r?r[0]:null}OD.range=ID;function ID(t,e,r){var i,s,n,o,a,l=r.indexOf(t),c=r.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(t===e)return[l,c];for(i=[],n=r.length;u>=0&&!a;)u==l?(i.push(u),l=r.indexOf(t,u+1)):i.length==1?a=[i.pop(),c]:(s=i.pop(),s<n&&(n=s,o=c),c=r.indexOf(e,u+1)),u=l<c&&l>=0?l:c;i.length&&(a=[n,o])}return a}});var zD=_((VEe,MD)=>{"use strict";var kD=ND();MD.exports=Toe;var qD="\0SLASH"+Math.random()+"\0",LD="\0OPEN"+Math.random()+"\0",x_="\0CLOSE"+Math.random()+"\0",jD="\0COMMA"+Math.random()+"\0",DD="\0PERIOD"+Math.random()+"\0";function E_(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function xoe(t){return t.split("\\\\").join(qD).split("\\{").join(LD).split("\\}").join(x_).split("\\,").join(jD).split("\\.").join(DD)}function Roe(t){return t.split(qD).join("\\").split(LD).join("{").split(x_).join("}").split(jD).join(",").split(DD).join(".")}function FD(t){if(!t)return[""];var e=[],r=kD("{","}",t);if(!r)return t.split(",");var i=r.pre,s=r.body,n=r.post,o=i.split(",");o[o.length-1]+="{"+s+"}";var a=FD(n);return n.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Toe(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),pc(xoe(t),!0).map(Roe)):[]}function Poe(t){return"{"+t+"}"}function Aoe(t){return/^-?0\d/.test(t)}function Coe(t,e){return t<=e}function Ooe(t,e){return t>=e}function pc(t,e){var r=[],i=kD("{","}",t);if(!i)return[t];var s=i.pre,n=i.post.length?pc(i.post,!1):[""];if(/\$$/.test(i.pre))for(var o=0;o<n.length;o++){var a=s+"{"+i.body+"}"+n[o];r.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),u=l||c,f=i.body.indexOf(",")>=0;if(!u&&!f)return i.post.match(/,.*\}/)?(t=i.pre+"{"+i.body+x_+i.post,pc(t)):[t];var p;if(u)p=i.body.split(/\.\./);else if(p=FD(i.body),p.length===1&&(p=pc(p[0],!1).map(Poe),p.length===1))return n.map(function(C){return i.pre+p[0]+C});var d;if(u){var h=E_(p[0]),m=E_(p[1]),v=Math.max(p[0].length,p[1].length),g=p.length==3?Math.abs(E_(p[2])):1,w=Coe,b=m<h;b&&(g*=-1,w=Ooe);var y=p.some(Aoe);d=[];for(var E=h;w(E,m);E+=g){var x;if(c)x=String.fromCharCode(E),x==="\\"&&(x="");else if(x=String(E),y){var S=v-x.length;if(S>0){var R=new Array(S+1).join("0");E<0?x="-"+R+x.slice(1):x=R+x}}d.push(x)}}else{d=[];for(var T=0;T<p.length;T++)d.push.apply(d,pc(p[T],!1))}for(var T=0;T<d.length;T++)for(var o=0;o<n.length;o++){var a=s+d[T]+n[o];(!e||u||a)&&r.push(a)}}return r}});var BD=_(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});Sh.assertValidPattern=void 0;var Ioe=1024*64,$oe=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>Ioe)throw new TypeError("pattern is too long")};Sh.assertValidPattern=$oe});var HD=_(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});Eh.parseClass=void 0;var Noe={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},mc=t=>t.replace(/[[\]\\-]/g,"\\$&"),koe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),UD=t=>t.join(""),qoe=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let i=[],s=[],n=r+1,o=!1,a=!1,l=!1,c=!1,u=r,f="";e:for(;n<t.length;){let m=t.charAt(n);if((m==="!"||m==="^")&&n===r+1){c=!0,n++;continue}if(m==="]"&&o&&!l){u=n+1;break}if(o=!0,m==="\\"&&!l){l=!0,n++;continue}if(m==="["&&!l){for(let[v,[g,w,b]]of Object.entries(Noe))if(t.startsWith(v,n)){if(f)return["$.",!1,t.length-r,!0];n+=v.length,b?s.push(g):i.push(g),a=a||w;continue e}}if(l=!1,f){m>f?i.push(mc(f)+"-"+mc(m)):m===f&&i.push(mc(m)),f="",n++;continue}if(t.startsWith("-]",n+1)){i.push(mc(m+"-")),n+=2;continue}if(t.startsWith("-",n+1)){f=m,n+=2;continue}i.push(mc(m)),n++}if(u<n)return["",!1,0,!1];if(!i.length&&!s.length)return["$.",!1,t.length-r,!0];if(s.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!c){let m=i[0].length===2?i[0].slice(-1):i[0];return[koe(m),!1,u-r,!1]}let p="["+(c?"^":"")+UD(i)+"]",d="["+(c?"":"^")+UD(s)+"]";return[i.length&&s.length?"("+p+"|"+d+")":i.length?p:d,a,u-r,!0]};Eh.parseClass=qoe});var Rh=_(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.unescape=void 0;var Loe=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");xh.unescape=Loe});var P_=_(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.AST=void 0;var joe=HD(),Th=Rh(),Doe=new Set(["!","?","+","*","@"]),VD=t=>Doe.has(t),Foe="(?!(?:^|/)\\.\\.?(?:$|/))",Ph="(?!\\.)",Moe=new Set(["[","."]),zoe=new Set(["..","."]),Boe=new Set("().*{}+?[]^$\\!"),Uoe=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),T_="[^/]",GD=T_+"*?",KD=T_+"+?",R_=class t{type;#e;#t;#n=!1;#r=[];#o;#y;#c;#f=!1;#a;#l;#i=!1;constructor(e,r,i={}){this.type=e,e&&(this.#t=!0),this.#o=r,this.#e=this.#o?this.#o.#e:this,this.#a=this.#e===this?i:this.#e.#a,this.#c=this.#e===this?[]:this.#e.#c,e==="!"&&!this.#e.#f&&this.#c.push(this),this.#y=this.#o?this.#o.#r.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#l=this.#r.map(e=>String(e)).join("")}#h(){if(this!==this.#e)throw new Error("should only call on root");if(this.#f)return this;this.toString(),this.#f=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let r=e,i=r.#o;for(;i;){for(let s=r.#y+1;!i.type&&s<i.#r.length;s++)for(let n of e.#r){if(typeof n=="string")throw new Error("string part in extglob AST??");n.copyIn(i.#r[s])}r=i,i=r.#o}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#o===this))throw new Error("invalid part: "+r);this.#r.push(r)}}toJSON(){let e=this.type===null?this.#r.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#r.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#f&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#y===0)return!0;let e=this.#o;for(let r=0;r<this.#y;r++){let i=e.#r[r];if(!(i instanceof t&&i.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#r.length:0;return this.#y===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let i of this.#r)r.copyIn(i);return r}static#b(e,r,i,s){let n=!1,o=!1,a=-1,l=!1;if(r.type===null){let d=i,h="";for(;d<e.length;){let m=e.charAt(d++);if(n||m==="\\"){n=!n,h+=m;continue}if(o){d===a+1?(m==="^"||m==="!")&&(l=!0):m==="]"&&!(d===a+2&&l)&&(o=!1),h+=m;continue}else if(m==="["){o=!0,a=d,l=!1,h+=m;continue}if(!s.noext&&VD(m)&&e.charAt(d)==="("){r.push(h),h="";let v=new t(m,r);d=t.#b(e,v,d,s),r.push(v);continue}h+=m}return r.push(h),d}let c=i+1,u=new t(null,r),f=[],p="";for(;c<e.length;){let d=e.charAt(c++);if(n||d==="\\"){n=!n,p+=d;continue}if(o){c===a+1?(d==="^"||d==="!")&&(l=!0):d==="]"&&!(c===a+2&&l)&&(o=!1),p+=d;continue}else if(d==="["){o=!0,a=c,l=!1,p+=d;continue}if(VD(d)&&e.charAt(c)==="("){u.push(p),p="";let h=new t(d,u);u.push(h),c=t.#b(e,h,c,s);continue}if(d==="|"){u.push(p),p="",f.push(u),u=new t(null,r);continue}if(d===")")return p===""&&r.#r.length===0&&(r.#i=!0),u.push(p),p="",r.push(...f,u),c;p+=d}return r.type=null,r.#t=void 0,r.#r=[e.substring(i-1)],c}static fromGlob(e,r={}){let i=new t(null,void 0,r);return t.#b(e,i,0,r),i}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,i,s,n]=this.toRegExpSource();if(!(s||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return i;let a=(this.#a.nocase?"i":"")+(n?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#h(),!this.type){let l=this.isStart()&&this.isEnd(),c=this.#r.map(d=>{let[h,m,v,g]=typeof d=="string"?t.#d(d,this.#t,l):d.toRegExpSource(e);return this.#t=this.#t||v,this.#n=this.#n||g,h}).join(""),u="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&zoe.has(this.#r[0]))){let h=Moe,m=r&&h.has(c.charAt(0))||c.startsWith("\\.")&&h.has(c.charAt(2))||c.startsWith("\\.\\.")&&h.has(c.charAt(4)),v=!r&&!e&&h.has(c.charAt(0));u=m?Foe:v?Ph:""}let f="";return this.isEnd()&&this.#e.#f&&this.#o?.type==="!"&&(f="(?:$|\\/)"),[u+c+f,(0,Th.unescape)(c),this.#t=!!this.#t,this.#n]}let i=this.type==="*"||this.type==="+",s=this.type==="!"?"(?:(?!(?:":"(?:",n=this.#p(r);if(this.isStart()&&this.isEnd()&&!n&&this.type!=="!"){let l=this.toString();return this.#r=[l],this.type=null,this.#t=void 0,[l,(0,Th.unescape)(this.toString()),!1,!1]}let o=!i||e||r||!Ph?"":this.#p(!0);o===n&&(o=""),o&&(n=`(?:${n})(?:${o})*?`);let a="";if(this.type==="!"&&this.#i)a=(this.isStart()&&!r?Ph:"")+KD;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Ph:"")+GD+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=s+n+l}return[a,(0,Th.unescape)(n),this.#t=!!this.#t,this.#n]}#p(e){return this.#r.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[i,s,n,o]=r.toRegExpSource(e);return this.#n=this.#n||o,i}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#d(e,r,i=!1){let s=!1,n="",o=!1;for(let a=0;a<e.length;a++){let l=e.charAt(a);if(s){s=!1,n+=(Boe.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?n+="\\\\":s=!0;continue}if(l==="["){let[c,u,f,p]=(0,joe.parseClass)(e,a);if(f){n+=c,o=o||u,a+=f-1,r=r||p;continue}}if(l==="*"){i&&e==="*"?n+=KD:n+=GD,r=!0;continue}if(l==="?"){n+=T_,r=!0;continue}n+=Uoe(l)}return[n,(0,Th.unescape)(e),!!r,o]}};Ah.AST=R_});var A_=_(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.escape=void 0;var Hoe=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");Ch.escape=Hoe});var Ds=_(J=>{"use strict";var Voe=J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(J,"__esModule",{value:!0});J.unescape=J.escape=J.AST=J.Minimatch=J.match=J.makeRe=J.braceExpand=J.defaults=J.filter=J.GLOBSTAR=J.sep=J.minimatch=void 0;var Goe=Voe(zD()),Oh=BD(),QD=P_(),Koe=A_(),Woe=Rh(),Joe=(t,e,r={})=>((0,Oh.assertValidPattern)(e),!r.nocomment&&e.charAt(0)==="#"?!1:new $n(e,r).match(t));J.minimatch=Joe;var Qoe=/^\*+([^+@!?\*\[\(]*)$/,Yoe=t=>e=>!e.startsWith(".")&&e.endsWith(t),Xoe=t=>e=>e.endsWith(t),Zoe=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),eae=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),tae=/^\*+\.\*+$/,rae=t=>!t.startsWith(".")&&t.includes("."),iae=t=>t!=="."&&t!==".."&&t.includes("."),sae=/^\.\*+$/,nae=t=>t!=="."&&t!==".."&&t.startsWith("."),oae=/^\*+$/,aae=t=>t.length!==0&&!t.startsWith("."),lae=t=>t.length!==0&&t!=="."&&t!=="..",cae=/^\?+([^+@!?\*\[\(]*)?$/,uae=([t,e=""])=>{let r=YD([t]);return e?(e=e.toLowerCase(),i=>r(i)&&i.toLowerCase().endsWith(e)):r},fae=([t,e=""])=>{let r=XD([t]);return e?(e=e.toLowerCase(),i=>r(i)&&i.toLowerCase().endsWith(e)):r},dae=([t,e=""])=>{let r=XD([t]);return e?i=>r(i)&&i.endsWith(e):r},hae=([t,e=""])=>{let r=YD([t]);return e?i=>r(i)&&i.endsWith(e):r},YD=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},XD=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},ZD=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",WD={win32:{sep:"\\"},posix:{sep:"/"}};J.sep=ZD==="win32"?WD.win32.sep:WD.posix.sep;J.minimatch.sep=J.sep;J.GLOBSTAR=Symbol("globstar **");J.minimatch.GLOBSTAR=J.GLOBSTAR;var pae="[^/]",mae=pae+"*?",yae="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",gae="(?:(?!(?:\\/|^)\\.).)*?",bae=(t,e={})=>r=>(0,J.minimatch)(r,t,e);J.filter=bae;J.minimatch.filter=J.filter;var Mr=(t,e={})=>Object.assign({},t,e),vae=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return J.minimatch;let e=J.minimatch;return Object.assign((i,s,n={})=>e(i,s,Mr(t,n)),{Minimatch:class extends e.Minimatch{constructor(s,n={}){super(s,Mr(t,n))}static defaults(s){return e.defaults(Mr(t,s)).Minimatch}},AST:class extends e.AST{constructor(s,n,o={}){super(s,n,Mr(t,o))}static fromGlob(s,n={}){return e.AST.fromGlob(s,Mr(t,n))}},unescape:(i,s={})=>e.unescape(i,Mr(t,s)),escape:(i,s={})=>e.escape(i,Mr(t,s)),filter:(i,s={})=>e.filter(i,Mr(t,s)),defaults:i=>e.defaults(Mr(t,i)),makeRe:(i,s={})=>e.makeRe(i,Mr(t,s)),braceExpand:(i,s={})=>e.braceExpand(i,Mr(t,s)),match:(i,s,n={})=>e.match(i,s,Mr(t,n)),sep:e.sep,GLOBSTAR:J.GLOBSTAR})};J.defaults=vae;J.minimatch.defaults=J.defaults;var wae=(t,e={})=>((0,Oh.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,Goe.default)(t));J.braceExpand=wae;J.minimatch.braceExpand=J.braceExpand;var _ae=(t,e={})=>new $n(t,e).makeRe();J.makeRe=_ae;J.minimatch.makeRe=J.makeRe;var Sae=(t,e,r={})=>{let i=new $n(e,r);return t=t.filter(s=>i.match(s)),i.options.nonull&&!t.length&&t.push(e),t};J.match=Sae;J.minimatch.match=J.match;var JD=/[?*]|[+@!]\(.*?\)|\[|\]/,Eae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),$n=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){(0,Oh.assertValidPattern)(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||ZD,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...n)=>console.error(...n)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(n=>this.slashSplit(n));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let s=this.globParts.map((n,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=n[0]===""&&n[1]===""&&(n[2]==="?"||!JD.test(n[2]))&&!JD.test(n[3]),c=/^[a-z]:/i.test(n[0]);if(l)return[...n.slice(0,4),...n.slice(4).map(u=>this.parse(u))];if(c)return[n[0],...n.slice(1).map(u=>this.parse(u))]}return n.map(l=>this.parse(l))});if(this.debug(this.pattern,s),this.set=s.filter(n=>n.indexOf(!1)===-1),this.isWindows)for(let n=0;n<this.set.length;n++){let o=this.set[n];o[0]===""&&o[1]===""&&this.globParts[n][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let i=0;i<e.length;i++)for(let s=0;s<e[i].length;s++)e[i][s]==="**"&&(e[i][s]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let s=i;for(;r[s+1]==="**";)s++;s!==i&&r.splice(i,s-i)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((i,s)=>{let n=i[i.length-1];return s==="**"&&n==="**"?i:s===".."&&n&&n!==".."&&n!=="."&&n!=="**"?(i.pop(),i):(i.push(s),i)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let s=1;s<e.length-1;s++){let n=e[s];s===1&&n===""&&e[0]===""||(n==="."||n==="")&&(r=!0,e.splice(s,1),s--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let i=0;for(;(i=e.indexOf("..",i+1))!==-1;){let s=e[i-1];s&&s!=="."&&s!==".."&&s!=="**"&&(r=!0,e.splice(i-1,2),i-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let i of e){let s=-1;for(;(s=i.indexOf("**",s+1))!==-1;){let o=s;for(;i[o+1]==="**";)o++;o>s&&i.splice(s+1,o-s);let a=i[s+1],l=i[s+2],c=i[s+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;r=!0,i.splice(s,1);let u=i.slice(0);u[s]="**",e.push(u),s--}if(!this.preserveMultipleSlashes){for(let o=1;o<i.length-1;o++){let a=i[o];o===1&&a===""&&i[0]===""||(a==="."||a==="")&&(r=!0,i.splice(o,1),o--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(r=!0,i.pop())}let n=0;for(;(n=i.indexOf("..",n+1))!==-1;){let o=i[n-1];if(o&&o!=="."&&o!==".."&&o!=="**"){r=!0;let l=n===1&&i[n+1]==="**"?["."]:[];i.splice(n-1,2,...l),i.length===0&&i.push(""),n-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let i=r+1;i<e.length;i++){let s=this.partsMatch(e[r],e[i],!this.preserveMultipleSlashes);if(s){e[r]=[],e[i]=s;break}}return e.filter(r=>r.length)}partsMatch(e,r,i=!1){let s=0,n=0,o=[],a="";for(;s<e.length&&n<r.length;)if(e[s]===r[n])o.push(a==="b"?r[n]:e[s]),s++,n++;else if(i&&e[s]==="**"&&r[n]===e[s+1])o.push(e[s]),s++;else if(i&&r[n]==="**"&&e[s]===r[n+1])o.push(r[n]),n++;else if(e[s]==="*"&&r[n]&&(this.options.dot||!r[n].startsWith("."))&&r[n]!=="**"){if(a==="b")return!1;a="a",o.push(e[s]),s++,n++}else if(r[n]==="*"&&e[s]&&(this.options.dot||!e[s].startsWith("."))&&e[s]!=="**"){if(a==="a")return!1;a="b",o.push(r[n]),s++,n++}else return!1;return e.length===r.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,i=0;for(let s=0;s<e.length&&e.charAt(s)==="!";s++)r=!r,i++;i&&(this.pattern=e.slice(i)),this.negate=r}matchOne(e,r,i=!1){let s=this.options;if(this.isWindows){let m=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!m&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),g=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),w=!g&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),b=v?3:m?0:void 0,y=w?3:g?0:void 0;if(typeof b=="number"&&typeof y=="number"){let[E,x]=[e[b],r[y]];E.toLowerCase()===x.toLowerCase()&&(r[y]=E,y>b?r=r.slice(y):b>y&&(e=e.slice(b)))}}let{optimizationLevel:n=1}=this.options;n>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var o=0,a=0,l=e.length,c=r.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var u=r[a],f=e[o];if(this.debug(r,u,f),u===!1)return!1;if(u===J.GLOBSTAR){this.debug("GLOBSTAR",[r,u,f]);var p=o,d=a+1;if(d===c){for(this.debug("** at the end");o<l;o++)if(e[o]==="."||e[o]===".."||!s.dot&&e[o].charAt(0)===".")return!1;return!0}for(;p<l;){var h=e[p];if(this.debug(`
globstar while`,e,p,r,d,h),this.matchOne(e.slice(p),r.slice(d),i))return this.debug("globstar found match!",p,l,h),!0;if(h==="."||h===".."||!s.dot&&h.charAt(0)==="."){this.debug("dot detected!",e,p,r,d);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(i&&(this.debug(`
>>> no match, partial?`,e,p,r,d),p===l))}let m;if(typeof u=="string"?(m=f===u,this.debug("string match",u,f,m)):(m=u.test(f),this.debug("pattern match",u,f,m)),!m)return!1}if(o===l&&a===c)return!0;if(o===l)return i;if(a===c)return o===l-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,J.braceExpand)(this.pattern,this.options)}parse(e){(0,Oh.assertValidPattern)(e);let r=this.options;if(e==="**")return J.GLOBSTAR;if(e==="")return"";let i,s=null;(i=e.match(oae))?s=r.dot?lae:aae:(i=e.match(Qoe))?s=(r.nocase?r.dot?eae:Zoe:r.dot?Xoe:Yoe)(i[1]):(i=e.match(cae))?s=(r.nocase?r.dot?fae:uae:r.dot?dae:hae)(i):(i=e.match(tae))?s=r.dot?iae:rae:(i=e.match(sae))&&(s=nae);let n=QD.AST.fromGlob(e,this.options).toMMPattern();return s&&typeof n=="object"&&Reflect.defineProperty(n,"test",{value:s}),n}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,i=r.noglobstar?mae:r.dot?yae:gae,s=new Set(r.nocase?["i"]:[]),n=e.map(l=>{let c=l.map(u=>{if(u instanceof RegExp)for(let f of u.flags.split(""))s.add(f);return typeof u=="string"?Eae(u):u===J.GLOBSTAR?J.GLOBSTAR:u._src});return c.forEach((u,f)=>{let p=c[f+1],d=c[f-1];u!==J.GLOBSTAR||d===J.GLOBSTAR||(d===void 0?p!==void 0&&p!==J.GLOBSTAR?c[f+1]="(?:\\/|"+i+"\\/)?"+p:c[f]=i:p===void 0?c[f-1]=d+"(?:\\/|"+i+")?":p!==J.GLOBSTAR&&(c[f-1]=d+"(?:\\/|\\/"+i+"\\/)"+p,c[f+1]=J.GLOBSTAR))}),c.filter(u=>u!==J.GLOBSTAR).join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];n="^"+o+n+a+"$",this.negate&&(n="^(?!"+n+").+$");try{this.regexp=new RegExp(n,[...s].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let i=this.options;this.isWindows&&(e=e.split("\\").join("/"));let s=this.slashSplit(e);this.debug(this.pattern,"split",s);let n=this.set;this.debug(this.pattern,"set",n);let o=s[s.length-1];if(!o)for(let a=s.length-2;!o&&a>=0;a--)o=s[a];for(let a=0;a<n.length;a++){let l=n[a],c=s;if(i.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,r))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(e){return J.minimatch.defaults(e).Minimatch}};J.Minimatch=$n;var xae=P_();Object.defineProperty(J,"AST",{enumerable:!0,get:function(){return xae.AST}});var Rae=A_();Object.defineProperty(J,"escape",{enumerable:!0,get:function(){return Rae.escape}});var Tae=Rh();Object.defineProperty(J,"unescape",{enumerable:!0,get:function(){return Tae.unescape}});J.minimatch.AST=QD.AST;J.minimatch.Minimatch=$n;J.minimatch.escape=Koe.escape;J.minimatch.unescape=Woe.unescape});var sF=_($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.LRUCache=void 0;var ia=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,tF=new Set,C_=typeof process=="object"&&process?process:{},rF=(t,e,r,i)=>{typeof C_.emitWarning=="function"?C_.emitWarning(t,e,r,i):console.error(`[${r}] ${e}: ${t}`)},Ih=globalThis.AbortController,eF=globalThis.AbortSignal;if(typeof Ih>"u"){eF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,s){this._onabort.push(s)}},Ih=class{constructor(){e()}signal=new eF;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let s of this.signal._onabort)s(i);this.signal.onabort?.(i)}}};let t=C_.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,rF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Pae=t=>!tF.has(t),rxe=Symbol("type"),Fs=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),iF=t=>Fs(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?sa:null:null,sa=class extends Array{constructor(e){super(e),this.fill(0)}},O_=class t{heap;length;static#e=!1;static create(e){let r=iF(e);if(!r)return[];t.#e=!0;let i=new t(e,r);return t.#e=!1,i}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},I_=class t{#e;#t;#n;#r;#o;#y;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#f;#a;#l;#i;#h;#b;#p;#d;#E;#g;#x;#R;#w;#_;#S;#m;static unsafeExposeInternals(e){return{starts:e.#R,ttls:e.#w,sizes:e.#x,keyMap:e.#a,keyList:e.#l,valList:e.#i,next:e.#h,prev:e.#b,get head(){return e.#p},get tail(){return e.#d},free:e.#E,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,i,s,n)=>e.#D(r,i,s,n),moveToTail:r=>e.#M(r),indexes:r=>e.#P(r),rindexes:r=>e.#A(r),isStale:r=>e.#v(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#f}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#y}get dispose(){return this.#n}get disposeAfter(){return this.#r}constructor(e){let{max:r=0,ttl:i,ttlResolution:s=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:f,noUpdateTTL:p,maxSize:d=0,maxEntrySize:h=0,sizeCalculation:m,fetchMethod:v,memoMethod:g,noDeleteOnFetchRejection:w,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:E,ignoreFetchAbort:x}=e;if(r!==0&&!Fs(r))throw new TypeError("max option must be a nonnegative integer");let S=r?iF(r):Array;if(!S)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=d,this.maxEntrySize=h||this.#t,this.sizeCalculation=m,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#y=g,v!==void 0&&typeof v!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=v,this.#S=!!v,this.#a=new Map,this.#l=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#h=new S(r),this.#b=new S(r),this.#p=0,this.#d=0,this.#E=O_.create(r),this.#c=0,this.#f=0,typeof c=="function"&&(this.#n=c),typeof u=="function"?(this.#r=u,this.#g=[]):(this.#r=void 0,this.#g=void 0),this.#_=!!this.#n,this.#m=!!this.#r,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!w,this.allowStaleOnFetchRejection=!!y,this.allowStaleOnFetchAbort=!!E,this.ignoreFetchAbort=!!x,this.maxEntrySize!==0){if(this.#t!==0&&!Fs(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Fs(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#O()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Fs(s)||s===0?s:1,this.ttlAutopurge=!!n,this.ttl=i||0,this.ttl){if(!Fs(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#C()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let R="LRU_CACHE_UNBOUNDED";Pae(R)&&(tF.add(R),rF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",R,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#C(){let e=new sa(this.#e),r=new sa(this.#e);this.#w=e,this.#R=r,this.#$=(n,o,a=ia.now())=>{if(r[n]=o!==0?a:0,e[n]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#v(n)&&this.#I(this.#l[n],"expire")},o+1);l.unref&&l.unref()}},this.#T=n=>{r[n]=e[n]!==0?ia.now():0},this.#s=(n,o)=>{if(e[o]){let a=e[o],l=r[o];if(!a||!l)return;n.ttl=a,n.start=l,n.now=i||s();let c=n.now-l;n.remainingTTL=a-c}};let i=0,s=()=>{let n=ia.now();if(this.ttlResolution>0){i=n;let o=setTimeout(()=>i=0,this.ttlResolution);o.unref&&o.unref()}return n};this.getRemainingTTL=n=>{let o=this.#a.get(n);if(o===void 0)return 0;let a=e[o],l=r[o];if(!a||!l)return 1/0;let c=(i||s())-l;return a-c},this.#v=n=>{let o=r[n],a=e[n];return!!a&&!!o&&(i||s())-o>a}}#T=()=>{};#s=()=>{};#$=()=>{};#v=()=>!1;#O(){let e=new sa(this.#e);this.#f=0,this.#x=e,this.#N=r=>{this.#f-=e[r],e[r]=0},this.#q=(r,i,s,n)=>{if(this.#u(i))return 0;if(!Fs(s))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(s=n(i,r),!Fs(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#k=(r,i,s)=>{if(e[r]=i,this.#t){let n=this.#t-e[r];for(;this.#f>n;)this.#j(!0)}this.#f+=e[r],s&&(s.entrySize=i,s.totalCalculatedSize=this.#f)}}#N=e=>{};#k=(e,r,i)=>{};#q=(e,r,i,s)=>{if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#P({allowStale:e=this.allowStale}={}){if(this.#c)for(let r=this.#d;!(!this.#L(r)||((e||!this.#v(r))&&(yield r),r===this.#p));)r=this.#b[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#c)for(let r=this.#p;!(!this.#L(r)||((e||!this.#v(r))&&(yield r),r===this.#d));)r=this.#h[r]}#L(e){return e!==void 0&&this.#a.get(this.#l[e])===e}*entries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*rentries(){for(let e of this.#A())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*keys(){for(let e of this.#P()){let r=this.#l[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#l[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#A())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let i of this.#P()){let s=this.#i[i],n=this.#u(s)?s.__staleWhileFetching:s;if(n!==void 0&&e(n,this.#l[i],this))return this.get(this.#l[i],r)}}forEach(e,r=this){for(let i of this.#P()){let s=this.#i[i],n=this.#u(s)?s.__staleWhileFetching:s;n!==void 0&&e.call(r,n,this.#l[i],this)}}rforEach(e,r=this){for(let i of this.#A()){let s=this.#i[i],n=this.#u(s)?s.__staleWhileFetching:s;n!==void 0&&e.call(r,n,this.#l[i],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#v(r)&&(this.#I(this.#l[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;if(s===void 0)return;let n={value:s};if(this.#w&&this.#R){let o=this.#w[r],a=this.#R[r];if(o&&a){let l=o-(ia.now()-a);n.ttl=l,n.start=Date.now()}}return this.#x&&(n.size=this.#x[r]),n}dump(){let e=[];for(let r of this.#P({allowStale:!0})){let i=this.#l[r],s=this.#i[r],n=this.#u(s)?s.__staleWhileFetching:s;if(n===void 0||i===void 0)continue;let o={value:n};if(this.#w&&this.#R){o.ttl=this.#w[r];let a=ia.now()-this.#R[r];o.start=Math.floor(Date.now()-a)}this.#x&&(o.size=this.#x[r]),e.unshift([i,o])}return e}load(e){this.clear();for(let[r,i]of e){if(i.start){let s=Date.now()-i.start;i.start=ia.now()-s}this.set(r,i.value,i)}}set(e,r,i={}){if(r===void 0)return this.delete(e),this;let{ttl:s=this.ttl,start:n,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=i,{noUpdateTTL:c=this.noUpdateTTL}=i,u=this.#q(e,r,i.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#I(e,"set"),this;let f=this.#c===0?void 0:this.#a.get(e);if(f===void 0)f=this.#c===0?this.#d:this.#E.length!==0?this.#E.pop():this.#c===this.#e?this.#j(!1):this.#c,this.#l[f]=e,this.#i[f]=r,this.#a.set(e,f),this.#h[this.#d]=f,this.#b[f]=this.#d,this.#d=f,this.#c++,this.#k(f,u,l),l&&(l.set="add"),c=!1;else{this.#M(f);let p=this.#i[f];if(r!==p){if(this.#S&&this.#u(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:d}=p;d!==void 0&&!o&&(this.#_&&this.#n?.(d,e,"set"),this.#m&&this.#g?.push([d,e,"set"]))}else o||(this.#_&&this.#n?.(p,e,"set"),this.#m&&this.#g?.push([p,e,"set"]));if(this.#N(f),this.#k(f,u,l),this.#i[f]=r,l){l.set="replace";let d=p&&this.#u(p)?p.__staleWhileFetching:p;d!==void 0&&(l.oldValue=d)}}else l&&(l.set="update")}if(s!==0&&!this.#w&&this.#C(),this.#w&&(c||this.#$(f,s,n),l&&this.#s(l,f)),!o&&this.#m&&this.#g){let p=this.#g,d;for(;d=p?.shift();)this.#r?.(...d)}return this}pop(){try{for(;this.#c;){let e=this.#i[this.#p];if(this.#j(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#g){let e=this.#g,r;for(;r=e?.shift();)this.#r?.(...r)}}}#j(e){let r=this.#p,i=this.#l[r],s=this.#i[r];return this.#S&&this.#u(s)?s.__abortController.abort(new Error("evicted")):(this.#_||this.#m)&&(this.#_&&this.#n?.(s,i,"evict"),this.#m&&this.#g?.push([s,i,"evict"])),this.#N(r),e&&(this.#l[r]=void 0,this.#i[r]=void 0,this.#E.push(r)),this.#c===1?(this.#p=this.#d=0,this.#E.length=0):this.#p=this.#h[r],this.#a.delete(i),this.#c--,r}has(e,r={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:s}=r,n=this.#a.get(e);if(n!==void 0){let o=this.#i[n];if(this.#u(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#v(n))s&&(s.has="stale",this.#s(s,n));else return i&&this.#T(n),s&&(s.has="hit",this.#s(s,n)),!0}else s&&(s.has="miss");return!1}peek(e,r={}){let{allowStale:i=this.allowStale}=r,s=this.#a.get(e);if(s===void 0||!i&&this.#v(s))return;let n=this.#i[s];return this.#u(n)?n.__staleWhileFetching:n}#D(e,r,i,s){let n=r===void 0?void 0:this.#i[r];if(this.#u(n))return n;let o=new Ih,{signal:a}=i;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:i,context:s},c=(m,v=!1)=>{let{aborted:g}=o.signal,w=i.ignoreFetchAbort&&m!==void 0;if(i.status&&(g&&!v?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,w&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),g&&!w&&!v)return f(o.signal.reason);let b=d;return this.#i[r]===d&&(m===void 0?b.__staleWhileFetching?this.#i[r]=b.__staleWhileFetching:this.#I(e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,m,l.options))),m},u=m=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=m),f(m)),f=m=>{let{aborted:v}=o.signal,g=v&&i.allowStaleOnFetchAbort,w=g||i.allowStaleOnFetchRejection,b=w||i.noDeleteOnFetchRejection,y=d;if(this.#i[r]===d&&(!b||y.__staleWhileFetching===void 0?this.#I(e,"fetch"):g||(this.#i[r]=y.__staleWhileFetching)),w)return i.status&&y.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),y.__staleWhileFetching;if(y.__returned===y)throw m},p=(m,v)=>{let g=this.#o?.(e,n,l);g&&g instanceof Promise&&g.then(w=>m(w===void 0?void 0:w),v),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(m(void 0),i.allowStaleOnFetchAbort&&(m=w=>c(w,!0)))})};i.status&&(i.status.fetchDispatched=!0);let d=new Promise(p).then(c,u),h=Object.assign(d,{__abortController:o,__staleWhileFetching:n,__returned:void 0});return r===void 0?(this.set(e,h,{...l.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=h,h}#u(e){if(!this.#S)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Ih}async fetch(e,r={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:h=this.allowStaleOnFetchAbort,context:m,forceRefresh:v=!1,status:g,signal:w}=r;if(!this.#S)return g&&(g.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:n,status:g});let b={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:n,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:h,ignoreFetchAbort:d,status:g,signal:w},y=this.#a.get(e);if(y===void 0){g&&(g.fetch="miss");let E=this.#D(e,y,b,m);return E.__returned=E}else{let E=this.#i[y];if(this.#u(E)){let C=i&&E.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",C&&(g.returnedStale=!0)),C?E.__staleWhileFetching:E.__returned=E}let x=this.#v(y);if(!v&&!x)return g&&(g.fetch="hit"),this.#M(y),s&&this.#T(y),g&&this.#s(g,y),E;let S=this.#D(e,y,b,m),T=S.__staleWhileFetching!==void 0&&i;return g&&(g.fetch=x?"stale":"refresh",T&&x&&(g.returnedStale=!0)),T?S.__staleWhileFetching:S.__returned=S}}async forceFetch(e,r={}){let i=await this.fetch(e,r);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(e,r={}){let i=this.#y;if(!i)throw new Error("no memoMethod provided to constructor");let{context:s,forceRefresh:n,...o}=r,a=this.get(e,o);if(!n&&a!==void 0)return a;let l=i(e,a,{options:o,context:s});return this.set(e,l,o),l}get(e,r={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:o}=r,a=this.#a.get(e);if(a!==void 0){let l=this.#i[a],c=this.#u(l);return o&&this.#s(o,a),this.#v(a)?(o&&(o.get="stale"),c?(o&&i&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),i?l.__staleWhileFetching:void 0):(n||this.#I(e,"expire"),o&&i&&(o.returnedStale=!0),i?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#M(a),s&&this.#T(a),l))}else o&&(o.get="miss")}#F(e,r){this.#b[r]=e,this.#h[e]=r}#M(e){e!==this.#d&&(e===this.#p?this.#p=this.#h[e]:this.#F(this.#b[e],this.#h[e]),this.#F(this.#d,e),this.#d=e)}delete(e){return this.#I(e,"delete")}#I(e,r){let i=!1;if(this.#c!==0){let s=this.#a.get(e);if(s!==void 0)if(i=!0,this.#c===1)this.#z(r);else{this.#N(s);let n=this.#i[s];if(this.#u(n)?n.__abortController.abort(new Error("deleted")):(this.#_||this.#m)&&(this.#_&&this.#n?.(n,e,r),this.#m&&this.#g?.push([n,e,r])),this.#a.delete(e),this.#l[s]=void 0,this.#i[s]=void 0,s===this.#d)this.#d=this.#b[s];else if(s===this.#p)this.#p=this.#h[s];else{let o=this.#b[s];this.#h[o]=this.#h[s];let a=this.#h[s];this.#b[a]=this.#b[s]}this.#c--,this.#E.push(s)}}if(this.#m&&this.#g?.length){let s=this.#g,n;for(;n=s?.shift();)this.#r?.(...n)}return i}clear(){return this.#z("delete")}#z(e){for(let r of this.#A({allowStale:!0})){let i=this.#i[r];if(this.#u(i))i.__abortController.abort(new Error("deleted"));else{let s=this.#l[r];this.#_&&this.#n?.(i,s,e),this.#m&&this.#g?.push([i,s,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#l.fill(void 0),this.#w&&this.#R&&(this.#w.fill(0),this.#R.fill(0)),this.#x&&this.#x.fill(0),this.#p=0,this.#d=0,this.#E.length=0,this.#f=0,this.#c=0,this.#m&&this.#g){let r=this.#g,i;for(;i=r?.shift();)this.#r?.(...i)}}};$h.LRUCache=I_});var F_=_(tr=>{"use strict";var Aae=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tr,"__esModule",{value:!0});tr.Minipass=tr.isWritable=tr.isReadable=tr.isStream=void 0;var nF=typeof process=="object"&&process?process:{stdout:null,stderr:null},D_=require("node:events"),cF=Aae(require("node:stream")),Cae=require("node:string_decoder"),Oae=t=>!!t&&typeof t=="object"&&(t instanceof Fh||t instanceof cF.default||(0,tr.isReadable)(t)||(0,tr.isWritable)(t));tr.isStream=Oae;var Iae=t=>!!t&&typeof t=="object"&&t instanceof D_.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==cF.default.Writable.prototype.pipe;tr.isReadable=Iae;var $ae=t=>!!t&&typeof t=="object"&&t instanceof D_.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";tr.isWritable=$ae;var ns=Symbol("EOF"),os=Symbol("maybeEmitEnd"),Ms=Symbol("emittedEnd"),Nh=Symbol("emittingEnd"),yc=Symbol("emittedError"),kh=Symbol("closed"),oF=Symbol("read"),qh=Symbol("flush"),aF=Symbol("flushChunk"),ri=Symbol("encoding"),na=Symbol("decoder"),gt=Symbol("flowing"),gc=Symbol("paused"),oa=Symbol("resume"),bt=Symbol("buffer"),er=Symbol("pipes"),vt=Symbol("bufferLength"),$_=Symbol("bufferPush"),Lh=Symbol("bufferShift"),Gt=Symbol("objectMode"),rt=Symbol("destroyed"),N_=Symbol("error"),k_=Symbol("emitData"),lF=Symbol("emitEnd"),q_=Symbol("emitEnd2"),Oi=Symbol("async"),L_=Symbol("abort"),jh=Symbol("aborted"),bc=Symbol("signal"),Nn=Symbol("dataListeners"),Sr=Symbol("discarded"),vc=t=>Promise.resolve().then(t),Nae=t=>t(),kae=t=>t==="end"||t==="finish"||t==="prefinish",qae=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Lae=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Dh=class{src;dest;opts;ondrain;constructor(e,r,i){this.src=e,this.dest=r,this.opts=i,this.ondrain=()=>e[oa](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},j_=class extends Dh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,i){super(e,r,i),this.proxyErrors=s=>r.emit("error",s),e.on("error",this.proxyErrors)}},jae=t=>!!t.objectMode,Dae=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Fh=class extends D_.EventEmitter{[gt]=!1;[gc]=!1;[er]=[];[bt]=[];[Gt];[ri];[Oi];[na];[ns]=!1;[Ms]=!1;[Nh]=!1;[kh]=!1;[yc]=null;[vt]=0;[rt]=!1;[bc];[jh]=!1;[Nn]=0;[Sr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");jae(r)?(this[Gt]=!0,this[ri]=null):Dae(r)?(this[ri]=r.encoding,this[Gt]=!1):(this[Gt]=!1,this[ri]=null),this[Oi]=!!r.async,this[na]=this[ri]?new Cae.StringDecoder(this[ri]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[bt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[er]});let{signal:i}=r;i&&(this[bc]=i,i.aborted?this[L_]():i.addEventListener("abort",()=>this[L_]()))}get bufferLength(){return this[vt]}get encoding(){return this[ri]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Gt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Oi]}set async(e){this[Oi]=this[Oi]||!!e}[L_](){this[jh]=!0,this.emit("abort",this[bc]?.reason),this.destroy(this[bc]?.reason)}get aborted(){return this[jh]}set aborted(e){}write(e,r,i){if(this[jh])return!1;if(this[ns])throw new Error("write after end");if(this[rt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(i=r,r="utf8"),r||(r="utf8");let s=this[Oi]?vc:Nae;if(!this[Gt]&&!Buffer.isBuffer(e)){if(Lae(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(qae(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Gt]?(this[gt]&&this[vt]!==0&&this[qh](!0),this[gt]?this.emit("data",e):this[$_](e),this[vt]!==0&&this.emit("readable"),i&&s(i),this[gt]):e.length?(typeof e=="string"&&!(r===this[ri]&&!this[na]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[ri]&&(e=this[na].write(e)),this[gt]&&this[vt]!==0&&this[qh](!0),this[gt]?this.emit("data",e):this[$_](e),this[vt]!==0&&this.emit("readable"),i&&s(i),this[gt]):(this[vt]!==0&&this.emit("readable"),i&&s(i),this[gt])}read(e){if(this[rt])return null;if(this[Sr]=!1,this[vt]===0||e===0||e&&e>this[vt])return this[os](),null;this[Gt]&&(e=null),this[bt].length>1&&!this[Gt]&&(this[bt]=[this[ri]?this[bt].join(""):Buffer.concat(this[bt],this[vt])]);let r=this[oF](e||null,this[bt][0]);return this[os](),r}[oF](e,r){if(this[Gt])this[Lh]();else{let i=r;e===i.length||e===null?this[Lh]():typeof i=="string"?(this[bt][0]=i.slice(e),r=i.slice(0,e),this[vt]-=e):(this[bt][0]=i.subarray(e),r=i.subarray(0,e),this[vt]-=e)}return this.emit("data",r),!this[bt].length&&!this[ns]&&this.emit("drain"),r}end(e,r,i){return typeof e=="function"&&(i=e,e=void 0),typeof r=="function"&&(i=r,r="utf8"),e!==void 0&&this.write(e,r),i&&this.once("end",i),this[ns]=!0,this.writable=!1,(this[gt]||!this[gc])&&this[os](),this}[oa](){this[rt]||(!this[Nn]&&!this[er].length&&(this[Sr]=!0),this[gc]=!1,this[gt]=!0,this.emit("resume"),this[bt].length?this[qh]():this[ns]?this[os]():this.emit("drain"))}resume(){return this[oa]()}pause(){this[gt]=!1,this[gc]=!0,this[Sr]=!1}get destroyed(){return this[rt]}get flowing(){return this[gt]}get paused(){return this[gc]}[$_](e){this[Gt]?this[vt]+=1:this[vt]+=e.length,this[bt].push(e)}[Lh](){return this[Gt]?this[vt]-=1:this[vt]-=this[bt][0].length,this[bt].shift()}[qh](e=!1){do;while(this[aF](this[Lh]())&&this[bt].length);!e&&!this[bt].length&&!this[ns]&&this.emit("drain")}[aF](e){return this.emit("data",e),this[gt]}pipe(e,r){if(this[rt])return e;this[Sr]=!1;let i=this[Ms];return r=r||{},e===nF.stdout||e===nF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,i?r.end&&e.end():(this[er].push(r.proxyErrors?new j_(this,e,r):new Dh(this,e,r)),this[Oi]?vc(()=>this[oa]()):this[oa]()),e}unpipe(e){let r=this[er].find(i=>i.dest===e);r&&(this[er].length===1?(this[gt]&&this[Nn]===0&&(this[gt]=!1),this[er]=[]):this[er].splice(this[er].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let i=super.on(e,r);if(e==="data")this[Sr]=!1,this[Nn]++,!this[er].length&&!this[gt]&&this[oa]();else if(e==="readable"&&this[vt]!==0)super.emit("readable");else if(kae(e)&&this[Ms])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[yc]){let s=r;this[Oi]?vc(()=>s.call(this,this[yc])):s.call(this,this[yc])}return i}removeListener(e,r){return this.off(e,r)}off(e,r){let i=super.off(e,r);return e==="data"&&(this[Nn]=this.listeners("data").length,this[Nn]===0&&!this[Sr]&&!this[er].length&&(this[gt]=!1)),i}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Nn]=0,!this[Sr]&&!this[er].length&&(this[gt]=!1)),r}get emittedEnd(){return this[Ms]}[os](){!this[Nh]&&!this[Ms]&&!this[rt]&&this[bt].length===0&&this[ns]&&(this[Nh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[kh]&&this.emit("close"),this[Nh]=!1)}emit(e,...r){let i=r[0];if(e!=="error"&&e!=="close"&&e!==rt&&this[rt])return!1;if(e==="data")return!this[Gt]&&!i?!1:this[Oi]?(vc(()=>this[k_](i)),!0):this[k_](i);if(e==="end")return this[lF]();if(e==="close"){if(this[kh]=!0,!this[Ms]&&!this[rt])return!1;let n=super.emit("close");return this.removeAllListeners("close"),n}else if(e==="error"){this[yc]=i,super.emit(N_,i);let n=!this[bc]||this.listeners("error").length?super.emit("error",i):!1;return this[os](),n}else if(e==="resume"){let n=super.emit("resume");return this[os](),n}else if(e==="finish"||e==="prefinish"){let n=super.emit(e);return this.removeAllListeners(e),n}let s=super.emit(e,...r);return this[os](),s}[k_](e){for(let i of this[er])i.dest.write(e)===!1&&this.pause();let r=this[Sr]?!1:super.emit("data",e);return this[os](),r}[lF](){return this[Ms]?!1:(this[Ms]=!0,this.readable=!1,this[Oi]?(vc(()=>this[q_]()),!0):this[q_]())}[q_](){if(this[na]){let r=this[na].end();if(r){for(let i of this[er])i.dest.write(r);this[Sr]||super.emit("data",r)}}for(let r of this[er])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Gt]||(e.dataLength=0);let r=this.promise();return this.on("data",i=>{e.push(i),this[Gt]||(e.dataLength+=i.length)}),await r,e}async concat(){if(this[Gt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[ri]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(rt,()=>r(new Error("stream destroyed"))),this.on("error",i=>r(i)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Sr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let s=this.read();if(s!==null)return Promise.resolve({done:!1,value:s});if(this[ns])return r();let n,o,a=f=>{this.off("data",l),this.off("end",c),this.off(rt,u),r(),o(f)},l=f=>{this.off("error",a),this.off("end",c),this.off(rt,u),this.pause(),n({value:f,done:!!this[ns]})},c=()=>{this.off("error",a),this.off("data",l),this.off(rt,u),r(),n({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,p)=>{o=p,n=f,this.once(rt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Sr]=!1;let e=!1,r=()=>(this.pause(),this.off(N_,r),this.off(rt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),i=()=>{if(e)return r();let s=this.read();return s===null?r():{done:!1,value:s}};return this.once("end",r),this.once(N_,r),this.once(rt,r),{next:i,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[rt])return e?this.emit("error",e):this.emit(rt),this;this[rt]=!0,this[Sr]=!0,this[bt].length=0,this[vt]=0;let r=this;return typeof r.close=="function"&&!this[kh]&&r.close(),e?this.emit("error",e):this.emit(rt),this}static get isStream(){return tr.isStream}};tr.Minipass=Fh});var xF=_(Ie=>{"use strict";var Fae=Ie&&Ie.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Mae=Ie&&Ie.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zae=Ie&&Ie.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Fae(e,t,r);return Mae(e,t),e};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.PathScurry=Ie.Path=Ie.PathScurryDarwin=Ie.PathScurryPosix=Ie.PathScurryWin32=Ie.PathScurryBase=Ie.PathPosix=Ie.PathWin32=Ie.PathBase=Ie.ChildrenCache=Ie.ResolveCache=void 0;var mF=sF(),Hh=require("node:path"),Bae=require("node:url"),_c=require("fs"),Uae=zae(require("node:fs")),Hae=_c.realpathSync.native,Mh=require("node:fs/promises"),uF=F_(),Sc={lstatSync:_c.lstatSync,readdir:_c.readdir,readdirSync:_c.readdirSync,readlinkSync:_c.readlinkSync,realpathSync:Hae,promises:{lstat:Mh.lstat,readdir:Mh.readdir,readlink:Mh.readlink,realpath:Mh.realpath}},yF=t=>!t||t===Sc||t===Uae?Sc:{...Sc,...t,promises:{...Sc.promises,...t.promises||{}}},gF=/^\\\\\?\\([a-z]:)\\?$/i,Vae=t=>t.replace(/\//g,"\\").replace(gF,"$1\\"),Gae=/[\\\/]/,Br=0,bF=1,vF=2,Ii=4,wF=6,_F=8,kn=10,SF=12,zr=15,wc=~zr,M_=16,fF=32,Ec=64,ii=128,zh=256,Uh=512,dF=Ec|ii|Uh,Kae=1023,z_=t=>t.isFile()?_F:t.isDirectory()?Ii:t.isSymbolicLink()?kn:t.isCharacterDevice()?vF:t.isBlockDevice()?wF:t.isSocket()?SF:t.isFIFO()?bF:Br,hF=new Map,xc=t=>{let e=hF.get(t);if(e)return e;let r=t.normalize("NFKD");return hF.set(t,r),r},pF=new Map,Bh=t=>{let e=pF.get(t);if(e)return e;let r=xc(t.toLowerCase());return pF.set(t,r),r},Rc=class extends mF.LRUCache{constructor(){super({max:256})}};Ie.ResolveCache=Rc;var Vh=class extends mF.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}};Ie.ChildrenCache=Vh;var EF=Symbol("PathScurry setAsCwd"),Nt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#n;get mode(){return this.#n}#r;get nlink(){return this.#r}#o;get uid(){return this.#o}#y;get gid(){return this.#y}#c;get rdev(){return this.#c}#f;get blksize(){return this.#f}#a;get ino(){return this.#a}#l;get size(){return this.#l}#i;get blocks(){return this.#i}#h;get atimeMs(){return this.#h}#b;get mtimeMs(){return this.#b}#p;get ctimeMs(){return this.#p}#d;get birthtimeMs(){return this.#d}#E;get atime(){return this.#E}#g;get mtime(){return this.#g}#x;get ctime(){return this.#x}#R;get birthtime(){return this.#R}#w;#_;#S;#m;#C;#T;#s;#$;#v;#O;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Br,i,s,n,o,a){this.name=e,this.#w=n?Bh(e):xc(e),this.#s=r&Kae,this.nocase=n,this.roots=s,this.root=i||this,this.#$=o,this.#S=a.fullpath,this.#C=a.relative,this.#T=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=yF(a.fs)}depth(){return this.#_!==void 0?this.#_:this.parent?this.#_=this.parent.depth()+1:this.#_=0}childrenCache(){return this.#$}resolve(e){if(!e)return this;let r=this.getRootString(e),s=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#N(s):this.#N(s)}#N(e){let r=this;for(let i of e)r=r.child(i);return r}children(){let e=this.#$.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#$.set(this,r),this.#s&=~M_,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let i=this.children(),s=this.nocase?Bh(e):xc(e);for(let l of i)if(l.#w===s)return l;let n=this.parent?this.sep:"",o=this.#S?this.#S+n+e:void 0,a=this.newChild(e,Br,{...r,parent:this,fullpath:o});return this.canReaddir()||(a.#s|=ii),i.push(a),a}relative(){if(this.isCWD)return"";if(this.#C!==void 0)return this.#C;let e=this.name,r=this.parent;if(!r)return this.#C=this.name;let i=r.relative();return i+(!i||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#T!==void 0)return this.#T;let e=this.name,r=this.parent;if(!r)return this.#T=this.fullpathPosix();let i=r.relativePosix();return i+(!i||!r.parent?"":"/")+e}fullpath(){if(this.#S!==void 0)return this.#S;let e=this.name,r=this.parent;if(!r)return this.#S=this.name;let s=r.fullpath()+(r.parent?this.sep:"")+e;return this.#S=s}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let s=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(s)?this.#m=`//?/${s}`:this.#m=s}let e=this.parent,r=e.fullpathPosix(),i=r+(!r||!e.parent?"":"/")+this.name;return this.#m=i}isUnknown(){return(this.#s&zr)===Br}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#s&zr)===_F}isDirectory(){return(this.#s&zr)===Ii}isCharacterDevice(){return(this.#s&zr)===vF}isBlockDevice(){return(this.#s&zr)===wF}isFIFO(){return(this.#s&zr)===bF}isSocket(){return(this.#s&zr)===SF}isSymbolicLink(){return(this.#s&kn)===kn}lstatCached(){return this.#s&fF?this:void 0}readlinkCached(){return this.#v}realpathCached(){return this.#O}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#v)return!0;if(!this.parent)return!1;let e=this.#s&zr;return!(e!==Br&&e!==kn||this.#s&zh||this.#s&ii)}calledReaddir(){return!!(this.#s&M_)}isENOENT(){return!!(this.#s&ii)}isNamed(e){return this.nocase?this.#w===Bh(e):this.#w===xc(e)}async readlink(){let e=this.#v;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),i=(await this.parent.realpath())?.resolve(r);if(i)return this.#v=i}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#v;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),i=this.parent.realpathSync()?.resolve(r);if(i)return this.#v=i}catch(r){this.#u(r.code);return}}#k(e){this.#s|=M_;for(let r=e.provisional;r<e.length;r++){let i=e[r];i&&i.#q()}}#q(){this.#s&ii||(this.#s=(this.#s|ii)&wc,this.#P())}#P(){let e=this.children();e.provisional=0;for(let r of e)r.#q()}#A(){this.#s|=Uh,this.#L()}#L(){if(this.#s&Ec)return;let e=this.#s;(e&zr)===Ii&&(e&=wc),this.#s=e|Ec,this.#P()}#j(e=""){e==="ENOTDIR"||e==="EPERM"?this.#L():e==="ENOENT"?this.#q():this.children().provisional=0}#D(e=""){e==="ENOTDIR"?this.parent.#L():e==="ENOENT"&&this.#q()}#u(e=""){let r=this.#s;r|=zh,e==="ENOENT"&&(r|=ii),(e==="EINVAL"||e==="UNKNOWN")&&(r&=wc),this.#s=r,e==="ENOTDIR"&&this.parent&&this.parent.#L()}#F(e,r){return this.#I(e,r)||this.#M(e,r)}#M(e,r){let i=z_(e),s=this.newChild(e.name,i,{parent:this}),n=s.#s&zr;return n!==Ii&&n!==kn&&n!==Br&&(s.#s|=Ec),r.unshift(s),r.provisional++,s}#I(e,r){for(let i=r.provisional;i<r.length;i++){let s=r[i];if((this.nocase?Bh(e.name):xc(e.name))===s.#w)return this.#z(e,s,i,r)}}#z(e,r,i,s){let n=r.name;return r.#s=r.#s&wc|z_(e),n!==e.name&&(r.name=e.name),i!==s.provisional&&(i===s.length-1?s.pop():s.splice(i,1),s.unshift(r)),s.provisional++,r}async lstat(){if((this.#s&ii)===0)try{return this.#V(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#D(e.code)}}lstatSync(){if((this.#s&ii)===0)try{return this.#V(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#D(e.code)}}#V(e){let{atime:r,atimeMs:i,birthtime:s,birthtimeMs:n,blksize:o,blocks:a,ctime:l,ctimeMs:c,dev:u,gid:f,ino:p,mode:d,mtime:h,mtimeMs:m,nlink:v,rdev:g,size:w,uid:b}=e;this.#E=r,this.#h=i,this.#R=s,this.#d=n,this.#f=o,this.#i=a,this.#x=l,this.#p=c,this.#t=u,this.#y=f,this.#a=p,this.#n=d,this.#g=h,this.#b=m,this.#r=v,this.#c=g,this.#l=w,this.#o=b;let y=z_(e);this.#s=this.#s&wc|y|fF,y!==Br&&y!==Ii&&y!==kn&&(this.#s|=Ec)}#U=[];#H=!1;#G(e){this.#H=!1;let r=this.#U.slice();this.#U.length=0,r.forEach(i=>i(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let i=this.children();if(this.calledReaddir()){let n=i.slice(0,i.provisional);r?e(null,n):queueMicrotask(()=>e(null,n));return}if(this.#U.push(e),this.#H)return;this.#H=!0;let s=this.fullpath();this.#e.readdir(s,{withFileTypes:!0},(n,o)=>{if(n)this.#j(n.code),i.provisional=0;else{for(let a of o)this.#F(a,i);this.#k(i)}this.#G(i.slice(0,i.provisional))})}#B;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#B)await this.#B;else{let i=()=>{};this.#B=new Promise(s=>i=s);try{for(let s of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#F(s,e);this.#k(e)}catch(s){this.#j(s.code),e.provisional=0}this.#B=void 0,i()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let i of this.#e.readdirSync(r,{withFileTypes:!0}))this.#F(i,e);this.#k(e)}catch(i){this.#j(i.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#s&dF)return!1;let e=zr&this.#s;return e===Br||e===Ii||e===kn}shouldWalk(e,r){return(this.#s&Ii)===Ii&&!(this.#s&dF)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#O)return this.#O;if(!((Uh|zh|ii)&this.#s))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#O=this.resolve(e)}catch{this.#A()}}realpathSync(){if(this.#O)return this.#O;if(!((Uh|zh|ii)&this.#s))try{let e=this.#e.realpathSync(this.fullpath());return this.#O=this.resolve(e)}catch{this.#A()}}[EF](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),i=[],s=this;for(;s&&s.parent;)r.add(s),s.#C=i.join(this.sep),s.#T=i.join("/"),s=s.parent,i.push("..");for(s=e;s&&s.parent&&!r.has(s);)s.#C=void 0,s.#T=void 0,s=s.parent}};Ie.PathBase=Nt;var Tc=class t extends Nt{sep="\\";splitSep=Gae;constructor(e,r=Br,i,s,n,o,a){super(e,r,i,s,n,o,a)}newChild(e,r=Br,i={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(e){return Hh.win32.parse(e).root}getRoot(e){if(e=Vae(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,i]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=i;return this.roots[e]=new Cc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(gF,"$1\\"),e===r}};Ie.PathWin32=Tc;var Pc=class t extends Nt{splitSep="/";sep="/";constructor(e,r=Br,i,s,n,o,a){super(e,r,i,s,n,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Br,i={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),i)}};Ie.PathPosix=Pc;var Ac=class{root;rootPath;roots;cwd;#e;#t;#n;nocase;#r;constructor(e=process.cwd(),r,i,{nocase:s,childrenCacheSize:n=16*1024,fs:o=Sc}={}){this.#r=yF(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,Bae.fileURLToPath)(e));let a=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new Rc,this.#t=new Rc,this.#n=new Vh(n);let l=a.substring(this.rootPath.length).split(i);if(l.length===1&&!l[0]&&l.pop(),s===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=s,this.root=this.newRoot(this.#r),this.roots[this.rootPath]=this.root;let c=this.root,u=l.length-1,f=r.sep,p=this.rootPath,d=!1;for(let h of l){let m=u--;c=c.child(h,{relative:new Array(m).fill("..").join(f),relativePosix:new Array(m).fill("..").join("/"),fullpath:p+=(d?"":f)+h}),d=!0}this.cwd=c}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#n}resolve(...e){let r="";for(let n=e.length-1;n>=0;n--){let o=e[n];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let i=this.#e.get(r);if(i!==void 0)return i;let s=this.cwd.resolve(r).fullpath();return this.#e.set(r,s),s}resolvePosix(...e){let r="";for(let n=e.length-1;n>=0;n--){let o=e[n];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let i=this.#t.get(r);if(i!==void 0)return i;let s=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,s),s}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e,e=this.cwd);let{withFileTypes:i}=r;if(e.canReaddir()){let s=await e.readdir();return i?s:s.map(n=>n.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e,e=this.cwd);let{withFileTypes:i=!0}=r;return e.canReaddir()?i?e.readdirSync():e.readdirSync().map(s=>s.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e.withFileTypes,e=this.cwd);let i=await e.readlink();return r?i:i?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e.withFileTypes,e=this.cwd);let i=e.readlinkSync();return r?i:i?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e.withFileTypes,e=this.cwd);let i=await e.realpath();return r?i:i?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e.withFileTypes,e=this.cwd);let i=e.realpathSync();return r?i:i?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e,e=this.cwd);let{withFileTypes:i=!0,follow:s=!1,filter:n,walkFilter:o}=r,a=[];(!n||n(e))&&a.push(i?e:e.fullpath());let l=new Set,c=(f,p)=>{l.add(f),f.readdirCB((d,h)=>{if(d)return p(d);let m=h.length;if(!m)return p();let v=()=>{--m===0&&p()};for(let g of h)(!n||n(g))&&a.push(i?g:g.fullpath()),s&&g.isSymbolicLink()?g.realpath().then(w=>w?.isUnknown()?w.lstat():w).then(w=>w?.shouldWalk(l,o)?c(w,v):v()):g.shouldWalk(l,o)?c(g,v):v()},!0)},u=e;return new Promise((f,p)=>{c(u,d=>{if(d)return p(d);f(a)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e,e=this.cwd);let{withFileTypes:i=!0,follow:s=!1,filter:n,walkFilter:o}=r,a=[];(!n||n(e))&&a.push(i?e:e.fullpath());let l=new Set([e]);for(let c of l){let u=c.readdirSync();for(let f of u){(!n||n(f))&&a.push(i?f:f.fullpath());let p=f;if(f.isSymbolicLink()){if(!(s&&(p=f.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(l,o)&&l.add(p)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e,e=this.cwd);let{withFileTypes:i=!0,follow:s=!1,filter:n,walkFilter:o}=r;(!n||n(e))&&(yield i?e:e.fullpath());let a=new Set([e]);for(let l of a){let c=l.readdirSync();for(let u of c){(!n||n(u))&&(yield i?u:u.fullpath());let f=u;if(u.isSymbolicLink()){if(!(s&&(f=u.realpathSync())))continue;f.isUnknown()&&f.lstatSync()}f.shouldWalk(a,o)&&a.add(f)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e,e=this.cwd);let{withFileTypes:i=!0,follow:s=!1,filter:n,walkFilter:o}=r,a=new uF.Minipass({objectMode:!0});(!n||n(e))&&a.write(i?e:e.fullpath());let l=new Set,c=[e],u=0,f=()=>{let p=!1;for(;!p;){let d=c.shift();if(!d){u===0&&a.end();return}u++,l.add(d);let h=(v,g,w=!1)=>{if(v)return a.emit("error",v);if(s&&!w){let b=[];for(let y of g)y.isSymbolicLink()&&b.push(y.realpath().then(E=>E?.isUnknown()?E.lstat():E));if(b.length){Promise.all(b).then(()=>h(null,g,!0));return}}for(let b of g)b&&(!n||n(b))&&(a.write(i?b:b.fullpath())||(p=!0));u--;for(let b of g){let y=b.realpathCached()||b;y.shouldWalk(l,o)&&c.push(y)}p&&!a.flowing?a.once("drain",f):m||f()},m=!0;d.readdirCB(h,!0),m=!1}};return f(),a}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Nt||(r=e,e=this.cwd);let{withFileTypes:i=!0,follow:s=!1,filter:n,walkFilter:o}=r,a=new uF.Minipass({objectMode:!0}),l=new Set;(!n||n(e))&&a.write(i?e:e.fullpath());let c=[e],u=0,f=()=>{let p=!1;for(;!p;){let d=c.shift();if(!d){u===0&&a.end();return}u++,l.add(d);let h=d.readdirSync();for(let m of h)(!n||n(m))&&(a.write(i?m:m.fullpath())||(p=!0));u--;for(let m of h){let v=m;if(m.isSymbolicLink()){if(!(s&&(v=m.realpathSync())))continue;v.isUnknown()&&v.lstatSync()}v.shouldWalk(l,o)&&c.push(v)}}p&&!a.flowing&&a.once("drain",f)};return f(),a}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[EF](r)}};Ie.PathScurryBase=Ac;var Cc=class extends Ac{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:i=!0}=r;super(e,Hh.win32,"\\",{...r,nocase:i}),this.nocase=i;for(let s=this.cwd;s;s=s.parent)s.nocase=this.nocase}parseRootPath(e){return Hh.win32.parse(e).root.toUpperCase()}newRoot(e){return new Tc(this.rootPath,Ii,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};Ie.PathScurryWin32=Cc;var Oc=class extends Ac{sep="/";constructor(e=process.cwd(),r={}){let{nocase:i=!1}=r;super(e,Hh.posix,"/",{...r,nocase:i}),this.nocase=i}parseRootPath(e){return"/"}newRoot(e){return new Pc(this.rootPath,Ii,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};Ie.PathScurryPosix=Oc;var Gh=class extends Oc{constructor(e=process.cwd(),r={}){let{nocase:i=!0}=r;super(e,{...r,nocase:i})}};Ie.PathScurryDarwin=Gh;Ie.Path=process.platform==="win32"?Tc:Pc;Ie.PathScurry=process.platform==="win32"?Cc:process.platform==="darwin"?Gh:Oc});var U_=_(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});Kh.Pattern=void 0;var Wae=Ds(),Jae=t=>t.length>=1,Qae=t=>t.length>=1,B_=class t{#e;#t;#n;length;#r;#o;#y;#c;#f;#a;#l=!0;constructor(e,r,i,s){if(!Jae(e))throw new TypeError("empty pattern list");if(!Qae(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#n=i,this.#r=s,this.#n===0){if(this.isUNC()){let[n,o,a,l,...c]=this.#e,[u,f,p,d,...h]=this.#t;c[0]===""&&(c.shift(),h.shift());let m=[n,o,a,l,""].join("/"),v=[u,f,p,d,""].join("/");this.#e=[m,...c],this.#t=[v,...h],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[n,...o]=this.#e,[a,...l]=this.#t;o[0]===""&&(o.shift(),l.shift());let c=n+"/",u=a+"/";this.#e=[c,...o],this.#t=[u,...l],this.length=this.#e.length}}}pattern(){return this.#e[this.#n]}isString(){return typeof this.#e[this.#n]=="string"}isGlobstar(){return this.#e[this.#n]===Wae.GLOBSTAR}isRegExp(){return this.#e[this.#n]instanceof RegExp}globString(){return this.#y=this.#y||(this.#n===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#n).join("/"))}hasMore(){return this.length>this.#n+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new t(this.#e,this.#t,this.#n+1,this.#r),this.#o.#a=this.#a,this.#o.#f=this.#f,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#f!==void 0?this.#f:this.#f=this.#r==="win32"&&this.#n===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=this.#r==="win32"&&this.#n===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#n===0?e:""}checkFollowGlobstar(){return!(this.#n===0||!this.isGlobstar()||!this.#l)}markFollowGlobstar(){return this.#n===0||!this.isGlobstar()||!this.#l?!1:(this.#l=!1,!0)}};Kh.Pattern=B_});var V_=_(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});Wh.Ignore=void 0;var RF=Ds(),Yae=U_(),Xae=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",H_=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:i,noext:s,noglobstar:n,platform:o=Xae}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:r,nocase:i,noext:s,noglobstar:n,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let r=new RF.Minimatch(e,this.mmopts);for(let i=0;i<r.set.length;i++){let s=r.set[i],n=r.globParts[i];if(!s||!n)throw new Error("invalid pattern object");for(;s[0]==="."&&n[0]===".";)s.shift(),n.shift();let o=new Yae.Pattern(s,n,0,this.platform),a=new RF.Minimatch(o.globString(),this.mmopts),l=n[n.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),l&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let r=e.fullpath(),i=`${r}/`,s=e.relative()||".",n=`${s}/`;for(let o of this.relative)if(o.match(s)||o.match(n))return!0;for(let o of this.absolute)if(o.match(r)||o.match(i))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",i=(e.relative()||".")+"/";for(let s of this.relativeChildren)if(s.match(i))return!0;for(let s of this.absoluteChildren)if(s.match(r))return!0;return!1}};Wh.Ignore=H_});var PF=_($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.Processor=$i.SubWalks=$i.MatchRecord=$i.HasWalkedCache=void 0;var TF=Ds(),Jh=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let i=e.fullpath(),s=this.store.get(i);s?s.add(r.globString()):this.store.set(i,new Set([r.globString()]))}};$i.HasWalkedCache=Jh;var Qh=class{store=new Map;add(e,r,i){let s=(r?2:0)|(i?1:0),n=this.store.get(e);this.store.set(e,n===void 0?s:s&n)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}};$i.MatchRecord=Qh;var Yh=class{store=new Map;add(e,r){if(!e.canReaddir())return;let i=this.store.get(e);i?i.find(s=>s.globString()===r.globString())||i.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};$i.SubWalks=Yh;var G_=class t{hasWalkedCache;matches=new Qh;subwalks=new Yh;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Jh}processPatterns(e,r){this.patterns=r;let i=r.map(s=>[e,s]);for(let[s,n]of i){this.hasWalkedCache.storeWalked(s,n);let o=n.root(),a=n.isAbsolute()&&this.opts.absolute!==!1;if(o){s=s.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let f=n.rest();if(f)n=f;else{this.matches.add(s,!0,!1);continue}}if(s.isENOENT())continue;let l,c,u=!1;for(;typeof(l=n.pattern())=="string"&&(c=n.rest());)s=s.resolve(l),n=c,u=!0;if(l=n.pattern(),c=n.rest(),u){if(this.hasWalkedCache.hasWalked(s,n))continue;this.hasWalkedCache.storeWalked(s,n)}if(typeof l=="string"){let f=l===".."||l===""||l===".";this.matches.add(s.resolve(l),a,f);continue}else if(l===TF.GLOBSTAR){(!s.isSymbolicLink()||this.follow||n.checkFollowGlobstar())&&this.subwalks.add(s,n);let f=c?.pattern(),p=c?.rest();if(!c||(f===""||f===".")&&!p)this.matches.add(s,a,f===""||f===".");else if(f===".."){let d=s.parent||s;p?this.hasWalkedCache.hasWalked(d,p)||this.subwalks.add(d,p):this.matches.add(d,a,!0)}}else l instanceof RegExp&&this.subwalks.add(s,n)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let i=this.subwalks.get(e),s=this.child();for(let n of r)for(let o of i){let a=o.isAbsolute(),l=o.pattern(),c=o.rest();l===TF.GLOBSTAR?s.testGlobstar(n,o,c,a):l instanceof RegExp?s.testRegExp(n,l,c,a):s.testString(n,l,c,a)}return s}testGlobstar(e,r,i,s){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,s,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(i&&r.checkFollowGlobstar()?this.subwalks.add(e,i):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),i){let n=i.pattern();if(typeof n=="string"&&n!==".."&&n!==""&&n!==".")this.testString(e,n,i.rest(),s);else if(n===".."){let o=e.parent||e;this.subwalks.add(o,i)}else n instanceof RegExp&&this.testRegExp(e,n,i.rest(),s)}}testRegExp(e,r,i,s){r.test(e.name)&&(i?this.subwalks.add(e,i):this.matches.add(e,s,!1))}testString(e,r,i,s){e.isNamed(r)&&(i?this.subwalks.add(e,i):this.matches.add(e,s,!1))}};$i.Processor=G_});var OF=_(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.GlobStream=zs.GlobWalker=zs.GlobUtil=void 0;var Zae=F_(),AF=V_(),CF=PF(),ele=(t,e)=>typeof t=="string"?new AF.Ignore([t],e):Array.isArray(t)?new AF.Ignore(t,e):t,Ic=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#n;signal;maxDepth;includeChildMatches;constructor(e,r,i){if(this.patterns=e,this.path=r,this.opts=i,this.#n=!i.posix&&i.platform==="win32"?"\\":"/",this.includeChildMatches=i.includeChildMatches!==!1,(i.ignore||!this.includeChildMatches)&&(this.#t=ele(i.ignore??[],i),!this.includeChildMatches&&typeof this.#t.add!="function")){let s="cannot ignore child matches, ignore lacks add() method.";throw new Error(s)}this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#r(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||await e.realpath(),!i)return;e=i}let n=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){let o=await n.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(n,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#r(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||e.realpathSync(),!i)return;e=i}let n=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){let o=n.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(n,r)}matchFinish(e,r){if(this.#r(e))return;if(!this.includeChildMatches&&this.#t?.add){let n=`${e.relativePosix()}/**`;this.#t.add(n)}let i=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let s=this.opts.mark&&e.isDirectory()?this.#n:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(i){let n=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(n+s)}else{let n=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!n.startsWith(".."+this.#n)?"."+this.#n:"";this.matchEmit(n?o+n+s:"."+s)}}async match(e,r,i){let s=await this.matchCheck(e,i);s&&this.matchFinish(s,r)}matchSync(e,r,i){let s=this.matchCheckSync(e,i);s&&this.matchFinish(s,r)}walkCB(e,r,i){this.signal?.aborted&&i(),this.walkCB2(e,r,new CF.Processor(this.opts),i)}walkCB2(e,r,i,s){if(this.#o(e))return s();if(this.signal?.aborted&&s(),this.paused){this.onResume(()=>this.walkCB2(e,r,i,s));return}i.processPatterns(e,r);let n=1,o=()=>{--n===0&&s()};for(let[a,l,c]of i.matches.entries())this.#r(a)||(n++,this.match(a,l,c).then(()=>o()));for(let a of i.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;n++;let l=a.readdirCached();a.calledReaddir()?this.walkCB3(a,l,i,o):a.readdirCB((c,u)=>this.walkCB3(a,u,i,o),!0)}o()}walkCB3(e,r,i,s){i=i.filterEntries(e,r);let n=1,o=()=>{--n===0&&s()};for(let[a,l,c]of i.matches.entries())this.#r(a)||(n++,this.match(a,l,c).then(()=>o()));for(let[a,l]of i.subwalks.entries())n++,this.walkCB2(a,l,i.child(),o);o()}walkCBSync(e,r,i){this.signal?.aborted&&i(),this.walkCB2Sync(e,r,new CF.Processor(this.opts),i)}walkCB2Sync(e,r,i,s){if(this.#o(e))return s();if(this.signal?.aborted&&s(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,i,s));return}i.processPatterns(e,r);let n=1,o=()=>{--n===0&&s()};for(let[a,l,c]of i.matches.entries())this.#r(a)||this.matchSync(a,l,c);for(let a of i.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;n++;let l=a.readdirSync();this.walkCB3Sync(a,l,i,o)}o()}walkCB3Sync(e,r,i,s){i=i.filterEntries(e,r);let n=1,o=()=>{--n===0&&s()};for(let[a,l,c]of i.matches.entries())this.#r(a)||this.matchSync(a,l,c);for(let[a,l]of i.subwalks.entries())n++,this.walkCB2Sync(a,l,i.child(),o);o()}};zs.GlobUtil=Ic;var K_=class extends Ic{matches=new Set;constructor(e,r,i){super(e,r,i)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};zs.GlobWalker=K_;var W_=class extends Ic{results;constructor(e,r,i){super(e,r,i),this.results=new Zae.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};zs.GlobStream=W_});var Q_=_(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.Glob=void 0;var tle=Ds(),rle=require("node:url"),Xh=xF(),ile=U_(),Zh=OF(),sle=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",J_=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,rle.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=r.platform||sle,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=r.platform==="win32"?Xh.PathScurryWin32:r.platform==="darwin"?Xh.PathScurryDarwin:r.platform?Xh.PathScurryPosix:Xh.PathScurry;this.scurry=new l(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let i=this.platform==="darwin"||this.platform==="win32",s={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},n=this.pattern.map(l=>new tle.Minimatch(l,s)),[o,a]=n.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=o.map((l,c)=>{let u=a[c];if(!u)throw new Error("invalid pattern object");return new ile.Pattern(l,u,0,this.platform)})}async walk(){return[...await new Zh.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Zh.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Zh.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Zh.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};ep.Glob=J_});var Y_=_(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.hasMagic=void 0;var nle=Ds(),ole=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new nle.Minimatch(r,e).hasMagic())return!0;return!1};tp.hasMagic=ole});var kF=_(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.glob=ge.sync=ge.iterate=ge.iterateSync=ge.stream=ge.streamSync=ge.Ignore=ge.hasMagic=ge.Glob=ge.unescape=ge.escape=void 0;ge.globStreamSync=$c;ge.globStream=X_;ge.globSync=Z_;ge.globIterateSync=Nc;ge.globIterate=eS;var IF=Ds(),qn=Q_(),ale=Y_(),NF=Ds();Object.defineProperty(ge,"escape",{enumerable:!0,get:function(){return NF.escape}});Object.defineProperty(ge,"unescape",{enumerable:!0,get:function(){return NF.unescape}});var lle=Q_();Object.defineProperty(ge,"Glob",{enumerable:!0,get:function(){return lle.Glob}});var cle=Y_();Object.defineProperty(ge,"hasMagic",{enumerable:!0,get:function(){return cle.hasMagic}});var ule=V_();Object.defineProperty(ge,"Ignore",{enumerable:!0,get:function(){return ule.Ignore}});function $c(t,e={}){return new qn.Glob(t,e).streamSync()}function X_(t,e={}){return new qn.Glob(t,e).stream()}function Z_(t,e={}){return new qn.Glob(t,e).walkSync()}async function $F(t,e={}){return new qn.Glob(t,e).walk()}function Nc(t,e={}){return new qn.Glob(t,e).iterateSync()}function eS(t,e={}){return new qn.Glob(t,e).iterate()}ge.streamSync=$c;ge.stream=Object.assign(X_,{sync:$c});ge.iterateSync=Nc;ge.iterate=Object.assign(eS,{sync:Nc});ge.sync=Object.assign(Z_,{stream:$c,iterate:Nc});ge.glob=Object.assign($F,{glob:$F,globSync:Z_,sync:ge.sync,globStream:X_,stream:ge.stream,globStreamSync:$c,streamSync:ge.streamSync,globIterate:eS,iterate:ge.iterate,globIterateSync:Nc,iterateSync:ge.iterateSync,Glob:qn.Glob,hasMagic:ale.hasMagic,escape:IF.escape,unescape:IF.unescape});ge.glob.glob=ge.glob});var tS=_((hxe,qF)=>{"use strict";function fle(t){let e=t.length;return e>21&&t.indexOf("application/javascript")===0||e>14&&t.indexOf("application/json")===0||e>5&&t.indexOf("text/")===0}qF.exports.isUtf8MimeType=fle});var jF=_((pxe,LF)=>{"use strict";function rp(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}rp.prototype.define=function(t,e){for(let r in t){let i=t[r].map(function(s){return s.toLowerCase()});r=r.toLowerCase();for(let s=0;s<i.length;s++){let n=i[s];if(n[0]!=="*"){if(!e&&n in this._types)throw new Error('Attempt to change mapping for "'+n+'" extension from "'+this._types[n]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+n+'" from the list of extensions for "'+r+'".');this._types[n]=r}}if(e||!this._extensions[r]){let s=i[0];this._extensions[r]=s[0]!=="*"?s:s.substr(1)}}};rp.prototype.getType=function(t){t=String(t);let e=t.replace(/^.*[/\\]/,"").toLowerCase(),r=e.replace(/^.*\./,"").toLowerCase(),i=e.length<t.length;return(r.length<e.length-1||!i)&&this._types[r]||null};rp.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null};LF.exports=rp});var FF=_((mxe,DF)=>{"use strict";DF.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var zF=_((yxe,MF)=>{"use strict";MF.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}});var rS=_((gxe,BF)=>{"use strict";var dle=jF();BF.exports=new dle(FF(),zF())});var HF=_((bxe,UF)=>{"use strict";var hle=/["'&<>]/;UF.exports=ple;function ple(t){var e=""+t,r=hle.exec(e);if(!r)return e;var i,s="",n=0,o=0;for(n=r.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}o!==n&&(s+=e.substring(o,n)),o=n+1,s+=i}return o!==n?s+e.substring(o,n):s}});var VF=_(sS=>{"use strict";var mle=/^(-?(?:\d+)?\.?\d+) *(m(?:illiseconds?|s(?:ecs?)?))?(s(?:ec(?:onds?|s)?)?)?(m(?:in(?:utes?|s)?)?)?(h(?:ours?|rs?)?)?(d(?:ays?)?)?(w(?:eeks?|ks?)?)?(y(?:ears?|rs?)?)?$/,ip=1e3,sp=ip*60,np=sp*60,qc=np*24,iS=qc*365.25;function yle(t){var e,r=t.toLowerCase().match(mle);if(r!=null&&(e=parseFloat(r[1])))return r[3]!=null?e*ip:r[4]!=null?e*sp:r[5]!=null?e*np:r[6]!=null?e*qc:r[7]!=null?e*qc*7:r[8]!=null?e*iS:e}function kc(t,e,r,i){var s=(t|0)===t?t:~~(t+.5);return e+s+(i?" "+r+(s!=1?"s":""):r[0])}function gle(t,e){var r=t<0?"-":"",i=t<0?-t:t;return i<ip?t+(e?" ms":"ms"):i<sp?kc(i/ip,r,"second",e):i<np?kc(i/sp,r,"minute",e):i<qc?kc(i/np,r,"hour",e):i<iS?kc(i/qc,r,"day",e):kc(i/iS,r,"year",e)}sS.format=gle;sS.parse=yle});var KF=_((wxe,GF)=>{"use strict";function ble(t){if(t[0]!=="/"||t[1]!=="/")return t;for(let e=2,r=t.length;e<r;++e)if(t[e]!=="/")return t.slice(e-1)}GF.exports.collapseLeadingSlashes=ble});var JF=_((_xe,WF)=>{"use strict";function vle(t){for(let e=0,r=t.length;e<r;++e)if(t[e].length!==1&&t[e][0]===".")return!0;return!1}WF.exports.containsDotFile=vle});var YF=_(QF=>{"use strict";function wle(t,e,r){return t+" "+(r?r.start+"-"+r.end:"*")+"/"+e}QF.contentRange=wle});var ZF=_(XF=>{"use strict";function _le(t,e){let r=`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>`+t+`</title>
</head>
<body>
<pre>`+e+`</pre>
</body>
</html>
`;return[r,Buffer.byteLength(r)]}XF.createHtmlDocument=_le});var tM=_((xxe,eM)=>{"use strict";function Sle(t,e){if(typeof t=="string")return[t];if(t===!1)return[];if(Array.isArray(t)){for(let r=0,i=t.length;r<i;++r)if(typeof t[r]!="string")throw new TypeError(e+" must be array of strings or false");return t}else throw new TypeError(e+" must be array of strings or false")}eM.exports.normalizeList=Sle});var iM=_((Rxe,rM)=>{"use strict";function Ele(t,e){let r=e.slice(e.indexOf("=")+1),i=[],s=r.length,n=0,o=0,a=0,l,c,u=r.indexOf(","),f=r.indexOf("-"),p=-1;for(;u===-1&&(u=s),l=parseInt(r.slice(p+1,f),10),c=parseInt(r.slice(f+1,u),10),l!==l?(l=t-c,c=t-1):(c!==c||c>t-1)&&(c=t-1),l===l&&c===c&&l>-1&&l<=c&&i.push({start:l,end:c,index:a++}),u!==s;)p=u++,f=r.indexOf("-",u),u=r.indexOf(",",u);if(a<2)return i;for(i.sort(Rle),o=a,a=0,n=1;n<o;){let d=i[n++],h=i[a];d.start>h.end+1?i[++a]=d:d.end>h.end&&(h.end=d.end,h.index>d.index&&(h.index=d.index))}return i.length=a+1,i.sort(xle),i}function xle(t,e){return t.index-e.index}function Rle(t,e){return t.start-e.start}rM.exports.parseBytesRange=Ele});var oM=_((Txe,nM)=>{"use strict";var sM=String.prototype.slice;function Tle(t,e){let r=0,i=0,s;for(let n=0,o=t.length;n<o;n++)switch(t.charCodeAt(n)){case 32:i===r&&(i=r=n+1);break;case 44:if(i!==r&&(s=e(sM.call(t,i,r)),s!==void 0))return s;i=r=n+1;break;default:r=n+1;break}if(i!==r)return e(sM.call(t,i,r))}nM.exports.parseTokenList=Tle});var fM=_((Pxe,uM)=>{"use strict";var Ple=require("path").relative;uM.exports=$le;var Ale=process.cwd();function lM(t,e){for(var r=t.split(/[ ,]+/),i=String(e).toLowerCase(),s=0;s<r.length;s++){var n=r[s];if(n&&(n==="*"||n.toLowerCase()===i))return!0}return!1}function Cle(t,e,r){var i=Object.getOwnPropertyDescriptor(t,e),s=i.value;return i.get=function(){return s},i.writable&&(i.set=function(o){return s=o}),delete i.value,delete i.writable,Object.defineProperty(t,e,i),i}function Ole(t){for(var e="",r=0;r<t;r++)e+=", arg"+r;return e.substr(2)}function Ile(t){var e=this.name+": "+this.namespace;this.message&&(e+=" deprecated "+this.message);for(var r=0;r<t.length;r++)e+=`
    at `+t[r].toString();return e}function $le(t){if(!t)throw new TypeError("argument namespace is required");var e=ap(),r=aa(e[1]),i=r[0];function s(n){op.call(s,n)}return s._file=i,s._ignored=kle(t),s._namespace=t,s._traced=qle(t),s._warned=Object.create(null),s.function=Fle,s.property=Mle,s}function Nle(t,e){var r=typeof t.listenerCount!="function"?t.listeners(e).length:t.listenerCount(e);return r>0}function kle(t){if(process.noDeprecation)return!0;var e=process.env.NO_DEPRECATION||"";return lM(e,t)}function qle(t){if(process.traceDeprecation)return!0;var e=process.env.TRACE_DEPRECATION||"";return lM(e,t)}function op(t,e){var r=Nle(process,"deprecation");if(!(!r&&this._ignored)){var i,s,n,o,a=0,l=!1,c=ap(),u=this._file;for(e?(o=e,n=aa(c[1]),n.name=o.name,u=n[0]):(a=2,o=aa(c[a]),n=o);a<c.length;a++)if(i=aa(c[a]),s=i[0],s===u)l=!0;else if(s===this._file)u=this._file;else if(l)break;var f=i?o.join(":")+"__"+i.join(":"):void 0;if(!(f!==void 0&&f in this._warned)){this._warned[f]=!0;var p=t;if(p||(p=n===o||!n.name?aM(o):aM(n)),r){var d=cM(this._namespace,p,c.slice(a));process.emit("deprecation",d);return}var h=process.stderr.isTTY?jle:Lle,m=h.call(this,p,i,c.slice(a));process.stderr.write(m+`
`,"utf8")}}}function aa(t){var e=t.getFileName()||"<anonymous>",r=t.getLineNumber(),i=t.getColumnNumber();t.isEval()&&(e=t.getEvalOrigin()+", "+e);var s=[e,r,i];return s.callSite=t,s.name=t.getFunctionName(),s}function aM(t){var e=t.callSite,r=t.name;r||(r="<anonymous@"+nS(t)+">");var i=e.getThis(),s=i&&e.getTypeName();return s==="Object"&&(s=void 0),s==="Function"&&(s=i.name||s),s&&e.getMethodName()?s+"."+r:r}function Lle(t,e,r){var i=new Date().toUTCString(),s=i+" "+this._namespace+" deprecated "+t;if(this._traced){for(var n=0;n<r.length;n++)s+=`
    at `+r[n].toString();return s}return e&&(s+=" at "+nS(e)),s}function jle(t,e,r){var i="\x1B[36;1m"+this._namespace+"\x1B[22;39m \x1B[33;1mdeprecated\x1B[22;39m \x1B[0m"+t+"\x1B[39m";if(this._traced){for(var s=0;s<r.length;s++)i+=`
    \x1B[36mat `+r[s].toString()+"\x1B[39m";return i}return e&&(i+=" \x1B[36m"+nS(e)+"\x1B[39m"),i}function nS(t){return Ple(Ale,t[0])+":"+t[1]+":"+t[2]}function ap(){var t=Error.stackTraceLimit,e={},r=Error.prepareStackTrace;Error.prepareStackTrace=Dle,Error.stackTraceLimit=Math.max(10,t),Error.captureStackTrace(e);var i=e.stack.slice(1);return Error.prepareStackTrace=r,Error.stackTraceLimit=t,i}function Dle(t,e){return e}function Fle(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");var r=Ole(t.length),i=ap(),s=aa(i[1]);s.name=t.name;var n=new Function("fn","log","deprecate","message","site",`"use strict"
return function (`+r+`) {log.call(deprecate, message, site)
return fn.apply(this, arguments)
}`)(t,op,this,e,s);return n}function Mle(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var i=Object.getOwnPropertyDescriptor(t,e);if(!i)throw new TypeError("must call property on owner object");if(!i.configurable)throw new TypeError("property must be configurable");var s=this,n=ap(),o=aa(n[1]);o.name=e,"value"in i&&(i=Cle(t,e,r));var a=i.get,l=i.set;typeof a=="function"&&(i.get=function(){return op.call(s,r,o),a.apply(this,arguments)}),typeof l=="function"&&(i.set=function(){return op.call(s,r,o),l.apply(this,arguments)}),Object.defineProperty(t,e,i)}function cM(t,e,r){var i=new Error,s;return Object.defineProperty(i,"constructor",{value:cM}),Object.defineProperty(i,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(i,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(i,"namespace",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(i,"stack",{configurable:!0,enumerable:!1,get:function(){return s!==void 0?s:s=Ile.call(this,r)},set:function(o){s=o}}),i}});var hM=_((Axe,dM)=>{"use strict";dM.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?zle:Ble);function zle(t,e){return t.__proto__=e,t}function Ble(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}});var pM=_((Cxe,Ule)=>{Ule.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var gM=_((Oxe,yM)=>{"use strict";var oS=pM();yM.exports=si;si.message=oS;si.code=Hle(oS);si.codes=Vle(oS);si.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};si.empty={204:!0,205:!0,304:!0};si.retry={502:!0,503:!0,504:!0};function Hle(t){var e={};return Object.keys(t).forEach(function(i){var s=t[i],n=Number(i);e[s.toLowerCase()]=n}),e}function Vle(t){return Object.keys(t).map(function(r){return Number(r)})}function Gle(t){var e=t.toLowerCase();if(!Object.prototype.hasOwnProperty.call(si.code,e))throw new Error('invalid status message: "'+t+'"');return si.code[e]}function mM(t){if(!Object.prototype.hasOwnProperty.call(si.message,t))throw new Error("invalid status code: "+t);return si.message[t]}function si(t){if(typeof t=="number")return mM(t);if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);return isNaN(e)?Gle(t):mM(e)}});var bM=_((Ixe,aS)=>{"use strict";typeof Object.create=="function"?aS.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:aS.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}}});var vM=_(($xe,cS)=>{"use strict";try{if(lS=require("util"),typeof lS.inherits!="function")throw"";cS.exports=lS.inherits}catch{cS.exports=bM()}var lS});var _M=_((Nxe,wM)=>{"use strict";wM.exports=Kle;function Kle(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}});var TM=_((kxe,Ln)=>{"use strict";var Wle=fM()("http-errors"),SM=hM(),la=gM(),uS=vM(),Jle=_M();Ln.exports=lp;Ln.exports.HttpError=Qle();Ln.exports.isHttpError=Xle(Ln.exports.HttpError);ece(Ln.exports,la.codes,Ln.exports.HttpError);function EM(t){return+(String(t).charAt(0)+"00")}function lp(){for(var t,e,r=500,i={},s=0;s<arguments.length;s++){var n=arguments[s],o=typeof n;if(o==="object"&&n instanceof Error)t=n,r=t.status||t.statusCode||r;else if(o==="number"&&s===0)r=n;else if(o==="string")e=n;else if(o==="object")i=n;else throw new TypeError("argument #"+(s+1)+" unsupported type "+o)}typeof r=="number"&&(r<400||r>=600)&&Wle("non-error status code; use only 4xx or 5xx status codes"),(typeof r!="number"||!la.message[r]&&(r<400||r>=600))&&(r=500);var a=lp[r]||lp[EM(r)];t||(t=a?new a(e):new Error(e||la.message[r]),Error.captureStackTrace(t,lp)),(!a||!(t instanceof a)||t.status!==r)&&(t.expose=r<500,t.status=t.statusCode=r);for(var l in i)l!=="status"&&l!=="statusCode"&&(t[l]=i[l]);return t}function Qle(){function t(){throw new TypeError("cannot construct abstract class")}return uS(t,Error),t}function Yle(t,e,r){var i=RM(e);function s(n){var o=n??la.message[r],a=new Error(o);return Error.captureStackTrace(a,s),SM(a,s.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:i,writable:!0}),a}return uS(s,t),xM(s,i),s.prototype.status=r,s.prototype.statusCode=r,s.prototype.expose=!0,s}function Xle(t){return function(r){return!r||typeof r!="object"?!1:r instanceof t?!0:r instanceof Error&&typeof r.expose=="boolean"&&typeof r.statusCode=="number"&&r.status===r.statusCode}}function Zle(t,e,r){var i=RM(e);function s(n){var o=n??la.message[r],a=new Error(o);return Error.captureStackTrace(a,s),SM(a,s.prototype),Object.defineProperty(a,"message",{enumerable:!0,configurable:!0,value:o,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:i,writable:!0}),a}return uS(s,t),xM(s,i),s.prototype.status=r,s.prototype.statusCode=r,s.prototype.expose=!1,s}function xM(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function ece(t,e,r){e.forEach(function(s){var n,o=Jle(la.message[s]);switch(EM(s)){case 400:n=Yle(r,o,s);break;case 500:n=Zle(r,o,s);break}n&&(t[s]=n,t[o]=n)})}function RM(t){return t.substr(-5)!=="Error"?t+"Error":t}});var AM=_((qxe,PM)=>{"use strict";var fS=TM();function tce(t,e){return e?e instanceof Error?fS(t,e,{expose:!1}):fS(t,e):fS(t)}PM.exports.createHttpError=tce});var FM=_((Lxe,DM)=>{"use strict";var NM=require("node:fs"),Lc=require("node:path"),rce=require("node:stream"),Kt=require("node:util").debuglog("send"),ice=Pb(),sce=HF(),CM=rS(),nce=VF(),{collapseLeadingSlashes:oce}=KF(),{containsDotFile:ace}=JF(),{contentRange:OM}=YF(),{createHtmlDocument:jn}=ZF(),{isUtf8MimeType:lce}=tS(),{normalizeList:IM}=tM(),{parseBytesRange:cce}=iM(),{parseTokenList:kM}=oM(),{createHttpError:uce}=AM(),fce=Lc.extname,qM=Lc.join,dS=Lc.normalize,LM=Lc.resolve,cp=Lc.sep,up=rce.Readable,dce=/^ *bytes=/,hce=60*60*24*365*1e3,$M=/(?:^|[\\/])\.\.(?:[\\/]|$)/,pce={400:jn("Error","Bad Request"),403:jn("Error","Forbidden"),404:jn("Error","Not Found"),412:jn("Error","Precondition Failed"),416:jn("Error","Range Not Satisfiable"),500:jn("Error","Internal Server Error")},mce=["allow","ignore","deny"];function yce(t){let e;return typeof t=="string"?e=nce.parse(t):e=Number(t),e!==e?0:Math.min(Math.max(0,e),hce)}function gce(t){t=t??{};let e=t.acceptRanges!==void 0?!!t.acceptRanges:!0,r=t.cacheControl!==void 0?!!t.cacheControl:!0,i=t.contentType!==void 0?!!t.contentType:!0,s=t.etag!==void 0?!!t.etag:!0,n=t.dotfiles!==void 0?mce.indexOf(t.dotfiles):1;if(n===-1)throw new TypeError('dotfiles option must be "allow", "deny", or "ignore"');let o=t.extensions!==void 0?IM(t.extensions,"extensions option"):[],a=t.immutable!==void 0?!!t.immutable:!1,l=t.index!==void 0?IM(t.index,"index option"):["index.html"],c=t.lastModified!==void 0?!!t.lastModified:!0,u=yce(t.maxAge??t.maxage),f=t.maxContentRangeChunkSize!==void 0?Number(t.maxContentRangeChunkSize):null,p=t.root?LM(t.root):null;return{acceptRanges:e,cacheControl:r,contentType:i,etag:s,dotfiles:n,extensions:o,immutable:a,index:l,lastModified:c,maxage:u,maxContentRangeChunkSize:f,root:p,start:t.start,end:t.end}}function bce(t,e){let r=ice(t);if(r==null)return{statusCode:400};if(~r.indexOf("\0"))return{statusCode:400};let i;if(e!==null){if(r&&(r=dS("."+cp+r)),$M.test(r))return Kt('malicious path "%s"',r),{statusCode:403};i=r.split(cp),r=dS(qM(e,r))}else{if($M.test(r))return Kt('malicious path "%s"',r),{statusCode:403};i=dS(r).split(cp),r=LM(r)}return{path:r,parts:i}}function jM(t){return t[t.length-1]==="/"}function vce(t){return t.headers["if-match"]||t.headers["if-unmodified-since"]||t.headers["if-none-match"]||t.headers["if-modified-since"]}function wce(t,e){if("cache-control"in t.headers&&t.headers["cache-control"].indexOf("no-cache")!==-1)return!1;if("if-none-match"in t.headers){let r=t.headers["if-none-match"];if(r==="*")return!0;let i=e.ETag;if(typeof i!="string")return!1;let s=i.length;return!!kM(r,function(o){let a=o.length;if(s===a&&o===i||s>a&&"W/"+o===i)return!0})}if("if-modified-since"in t.headers){let r=t.headers["if-modified-since"],i=e["Last-Modified"];if(!i||Date.parse(i)<=Date.parse(r))return!0}return!1}function _ce(t,e){let r=t.headers["if-match"];if(r){let i=e.ETag;if(r!=="*"&&(kM(r,function(n){if(n===i||"W/"+n===i)return!0})||!1)!==!0)return!0}if("if-unmodified-since"in t.headers){let i=t.headers["if-unmodified-since"],s=Date.parse(i);if(s===s){let n=Date.parse(e["Last-Modified"]);if(n!==n||n>s)return!0}}return!1}function Sce(t,e){if(!("if-range"in t.headers))return!0;let r=t.headers["if-range"];if(r.indexOf('"')!==-1){let n=e.ETag;return n&&r.indexOf(n)!==-1||!1}let i=Date.parse(r);if(i!==i)return!1;let s=Date.parse(e["Last-Modified"]);return s!==s||s<=i}function hS(t){return new Promise(e=>{NM.stat(t,function(i,s){e({error:i,stat:s})})})}function Ni(t,e){let r={};if(e&&e.headers)for(let s in e.headers)r[s]=e.headers[s];let i=pce[t];return r["Content-Type"]="text/html; charset=utf-8",r["Content-Length"]=i[1],r["Content-Security-Policy"]="default-src 'none'",r["X-Content-Type-Options"]="nosniff",{statusCode:t,headers:r,stream:up.from(i[0]),type:"error",metadata:{error:uce(t,e)}}}function pS(t){switch(t.code){case"ENAMETOOLONG":case"ENOTDIR":case"ENOENT":return Ni(404,t);default:return Ni(500,t)}}function Ece(t,e,r){return Kt("not modified"),delete t["Content-Encoding"],delete t["Content-Language"],delete t["Content-Length"],delete t["Content-Range"],delete t["Content-Type"],{statusCode:304,headers:t,stream:up.from(""),type:"file",metadata:{path:e,stat:r}}}function mS(t,e,r,i){let s=r.size,n=i.start??0,o=200,a={};if(Kt('send "%s"',e),i.acceptRanges&&(Kt("accept ranges"),a["Accept-Ranges"]="bytes"),i.cacheControl){let c="public, max-age="+Math.floor(i.maxage/1e3);i.immutable&&(c+=", immutable"),Kt("cache-control %s",c),a["Cache-Control"]=c}if(i.lastModified){let c=r.mtime.toUTCString();Kt("modified %s",c),a["Last-Modified"]=c}if(i.etag){let c='W/"'+r.size.toString(16)+"-"+r.mtime.getTime().toString(16)+'"';Kt("etag %s",c),a.ETag=c}if(i.contentType){let c=CM.getType(e)||CM.default_type;Kt("content-type %s",c),c&&lce(c)&&(c+="; charset=utf-8"),c&&(a["Content-Type"]=c)}if(vce(t)){if(_ce(t,a))return Ni(412);if(wce(t,a))return Ece(a,e,r)}if(s=Math.max(0,s-n),i.end!==void 0){let c=i.end-n+1;s>c&&(s=c)}if(i.acceptRanges){let c=t.headers.range;if(c!==void 0&&dce.test(c))if(Sce(t,a)){let u=cce(s,c);if(u.length===0)return Kt("range unsatisfiable"),a["Content-Range"]=OM("bytes",s),Ni(416,{headers:{"Content-Range":a["Content-Range"]}});u.length===1&&(Kt("range %j",u),o=206,i.maxContentRangeChunkSize&&(u[0].end=Math.min(u[0].end,u[0].start+i.maxContentRangeChunkSize-1)),a["Content-Range"]=OM("bytes",s,u[0]),n+=u[0].start,s=u[0].end-u[0].start+1)}else Kt("range stale")}if(a["Content-Length"]=s,t.method==="HEAD")return{statusCode:o,headers:a,stream:up.from(""),type:"file",metadata:{path:e,stat:r}};let l=NM.createReadStream(e,{start:n,end:Math.max(n,n+s-1)});return{statusCode:o,headers:a,stream:l,type:"file",metadata:{path:e,stat:r}}}function xce(t,e){if(jM(e.path))return Ni(403);let r=encodeURI(oce(e.path+"/")),i=jn("Redirecting","Redirecting to "+sce(r)),s={};return s["Content-Type"]="text/html; charset=utf-8",s["Content-Length"]=i[1],s["Content-Security-Policy"]="default-src 'none'",s["X-Content-Type-Options"]="nosniff",s.Location=r,{statusCode:301,headers:s,stream:up.from(i[0]),type:"directory",metadata:{requestPath:e.path,path:t}}}async function Rce(t,e,r){let i;for(let s=0;s<r.index.length;s++){let n=r.index[s],o=qM(e,n),{error:a,stat:l}=await hS(o);if(a){i=a;continue}if(!l.isDirectory())return mS(t,o,l,r)}return i?pS(i):Ni(404)}async function Tce(t,e,r){let{error:i,stat:s}=await hS(e);if(i&&i.code==="ENOENT"&&!fce(e)&&e[e.length-1]!==cp){let n=i;for(let o=0;o<r.extensions.length;o++){let a=r.extensions[o],l=e+"."+a,{error:c,stat:u}=await hS(l);if(c){n=c;continue}if(u.isDirectory()){n=null;continue}return mS(t,l,u,r)}return n?pS(n):Ni(404)}return i?pS(i):s.isDirectory()?xce(e,r):mS(t,e,s,r)}async function Pce(t,e,r){let i=gce(r);i.path=e;let s=bce(e,i.root),{path:n,parts:o}=s;if(s.statusCode!==void 0)return Ni(s.statusCode);if((Kt.enabled||i.dotfiles!==0)&&ace(o))switch(i.dotfiles){case 0:Kt('allow dotfile "%s"',n);break;case 2:return Kt('deny dotfile "%s"',n),Ni(403);case 1:default:return Kt('ignore dotfile "%s"',n),Ni(404)}return i.index.length&&jM(e)?Rce(t,n,i):Tce(t,n,i)}DM.exports.send=Pce});var MM=_((jxe,ca)=>{"use strict";var Ace=tS().isUtf8MimeType,Cce=rS(),yS=FM().send;ca.exports=yS;ca.exports.default=yS;ca.exports.send=yS;ca.exports.isUtf8MimeType=Ace;ca.exports.mime=Cce});var zM=_((Dxe,Mc)=>{"use strict";function bS(t){if(!new.target)return new bS(t);let{supportedValues:e=[],cache:r}=t&&typeof t=="object"&&t||{};this.supportedValues=e,this.cache=r}bS.prototype.negotiate=function(t){return typeof t!="string"?null:this.cache?(this.cache.has(t)||this.cache.set(t,Fc(t,this.supportedValues)),this.cache.get(t)):Fc(t,this.supportedValues)};function Fc(t,e){if(!t||!Array.isArray(e)||e.length===0)return null;if(t==="*")return e[0];let r=null,i=1/0,s=0;function n(o,a){if(a===0||s>a)return!1;let l=o==="*"&&e[0]||o,c=e.indexOf(l);return c===-1?!1:c===0&&a===1?(r=l,!0):((s<a||i>c)&&(r=l,i=c,s=a),!1)}return Oce(t,n),r}var jc=0,Dc=1,fp=2,gS=3;function Oce(t,e){let r="",i,s=jc;for(let n=0,o=t.length;n<o;++n){let a=t[n];if(!(a===" "||a==="	")){if(a===";"){s===Dc&&(s=fp,i="");continue}else if(a===","){if(s===Dc){if(e(r,1)){s=gS;break}s=jc,r=""}else if(s===fp){if(e(r,parseFloat(i)||0)){s=gS;break}s=jc,r="",i=""}continue}else if(s===fp){if(a==="q"||a==="=")continue;if(a==="."||a==="1"||a==="0"||a==="2"||a==="3"||a==="4"||a==="5"||a==="6"||a==="7"||a==="8"||a==="9"){i+=a;continue}}else if(s===jc){s=Dc,r+=a;continue}if(s===Dc){let l=t[n-1];(l===" "||l==="	")&&(r=""),r+=a;continue}if(e(r,parseFloat(i)||0)){s=gS;break}s=jc,r=a,i=""}}s===Dc?e(r,1):s===fp&&e(r,parseFloat(i)||0)}Mc.exports=Fc;Mc.exports.default=Fc;Mc.exports.negotiate=Fc;Mc.exports.Negotiator=bS});var HM=_((vS,UM)=>{"use strict";var dp=require("buffer"),ki=dp.Buffer;function BM(t,e){for(var r in t)e[r]=t[r]}ki.from&&ki.alloc&&ki.allocUnsafe&&ki.allocUnsafeSlow?UM.exports=dp:(BM(dp,vS),vS.Buffer=Dn);function Dn(t,e,r){return ki(t,e,r)}Dn.prototype=Object.create(ki.prototype);BM(ki,Dn);Dn.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ki(t,e,r)};Dn.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=ki(t);return e!==void 0?typeof r=="string"?i.fill(e,r):i.fill(e):i.fill(0),i};Dn.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ki(t)};Dn.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return dp.SlowBuffer(t)}});var QM=_((Fxe,wS)=>{"use strict";wS.exports=zce;wS.exports.parse=Vce;var VM=require("path").basename,Ice=HM().Buffer,$ce=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g,Nce=/%[0-9A-Fa-f]{2}/,kce=/%([0-9A-Fa-f]{2})/g,KM=/[^\x20-\x7e\xa0-\xff]/g,qce=/\\([\u0000-\u007f])/g,Lce=/([\\"])/g,GM=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,jce=/^[\x20-\x7e\x80-\xff]+$/,Dce=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/,Fce=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,Mce=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function zce(t,e){var r=e||{},i=r.type||"attachment",s=Bce(t,r.fallback);return Uce(new JM(i,s))}function Bce(t,e){if(t!==void 0){var r={};if(typeof t!="string")throw new TypeError("filename must be a string");if(e===void 0&&(e=!0),typeof e!="string"&&typeof e!="boolean")throw new TypeError("fallback must be a string or boolean");if(typeof e=="string"&&KM.test(e))throw new TypeError("fallback must be ISO-8859-1 string");var i=VM(t),s=jce.test(i),n=typeof e!="string"?e&&WM(i):VM(e),o=typeof n=="string"&&n!==i;return(o||!s||Nce.test(i))&&(r["filename*"]=i),(s||o)&&(r.filename=o?n:i),r}}function Uce(t){var e=t.parameters,r=t.type;if(!r||typeof r!="string"||!Dce.test(r))throw new TypeError("invalid type");var i=String(r).toLowerCase();if(e&&typeof e=="object")for(var s,n=Object.keys(e).sort(),o=0;o<n.length;o++){s=n[o];var a=s.substr(-1)==="*"?Jce(e[s]):Wce(e[s]);i+="; "+s+"="+a}return i}function Hce(t){var e=Fce.exec(t);if(!e)throw new TypeError("invalid extended field value");var r=e[1].toLowerCase(),i=e[2],s,n=i.replace(kce,Gce);switch(r){case"iso-8859-1":s=WM(n);break;case"utf-8":s=Ice.from(n,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return s}function WM(t){return String(t).replace(KM,"?")}function Vce(t){if(!t||typeof t!="string")throw new TypeError("argument string is required");var e=Mce.exec(t);if(!e)throw new TypeError("invalid type format");var r=e[0].length,i=e[1].toLowerCase(),s,n=[],o={},a;for(r=GM.lastIndex=e[0].substr(-1)===";"?r-1:r;e=GM.exec(t);){if(e.index!==r)throw new TypeError("invalid parameter format");if(r+=e[0].length,s=e[1].toLowerCase(),a=e[2],n.indexOf(s)!==-1)throw new TypeError("invalid duplicate parameter");if(n.push(s),s.indexOf("*")+1===s.length){s=s.slice(0,-1),a=Hce(a),o[s]=a;continue}typeof o[s]!="string"&&(a[0]==='"'&&(a=a.substr(1,a.length-2).replace(qce,"$1")),o[s]=a)}if(r!==-1&&r!==t.length)throw new TypeError("invalid parameter format");return new JM(i,o)}function Gce(t,e){return String.fromCharCode(parseInt(e,16))}function Kce(t){return"%"+String(t).charCodeAt(0).toString(16).toUpperCase()}function Wce(t){var e=String(t);return'"'+e.replace(Lce,"\\$1")+'"'}function Jce(t){var e=String(t),r=encodeURIComponent(e).replace($ce,Kce);return"UTF-8''"+r}function JM(t,e){this.type=t,this.parameters=e}});var e2=_((Mxe,ZM)=>{"use strict";var Qce=require("node:os"),Er=require("node:path"),hp=require("node:fs/promises"),YM=gp(),XM=Math.max(1,Qce.cpus().length-1),Fn={_getExtendedInfo:async function(t,e){let r=t.split(Er.sep).length,i=await hp.readdir(t),s=async o=>{let a=Er.join(t,o),l;try{l=await hp.stat(a)}catch{return}l.isDirectory()?(e.totalFolderCount++,a.split(Er.sep).length===r+1&&e.folderCount++,await Fn._getExtendedInfo(a,e)):(e.totalSize+=l.size,e.totalFileCount++,a.split(Er.sep).length===r+1&&e.fileCount++,e.lastModified=Math.max(e.lastModified,l.mtimeMs))},n=YM.promise(s,XM);await Promise.all(i.map(o=>n.push(o)))},getExtendedInfo:async function(t){let e={totalSize:0,fileCount:0,totalFileCount:0,folderCount:0,totalFolderCount:0,lastModified:0};return await Fn._getExtendedInfo(t,e),e},list:async function(t,e,r){let i={dirs:[],files:[]},s=await hp.readdir(t);if((r==="deny"||r==="ignore")&&(s=s.filter(a=>a.charAt(0)!==".")),s.length<1)return i;let n=async a=>{let l;try{l=await hp.stat(Er.join(t,a))}catch{return}let c={name:a,stats:l};l.isDirectory()?(e.extendedFolderInfo&&(c.extendedInfo=await Fn.getExtendedInfo(Er.join(t,a))),i.dirs.push(c)):i.files.push(c)},o=YM.promise(n,XM);return await Promise.all(s.map(a=>o.push(a))),i.dirs.sort((a,l)=>a.name.localeCompare(l.name)),i.files.sort((a,l)=>a.name.localeCompare(l.name)),i},send:async function({reply:t,dir:e,options:r,route:i,prefix:s,dotfiles:n}){if(t.request.query.format==="html"&&typeof r.render!="function")throw new TypeError("The `list.render` option must be a function and is required with the URL parameter `format=html`");let o;try{o=await Fn.list(e,r,n)}catch{return t.callNotFound()}if((t.request.query.format||r.format)!=="html"){if(r.jsonFormat!=="extended"){let c={dirs:[],files:[]};o.dirs.forEach(u=>c.dirs.push(u.name)),o.files.forEach(u=>c.files.push(u.name)),await t.send(c)}else await t.send(o);return}let l=r.render(o.dirs.map(c=>Fn.htmlInfo(c,i,s,r)),o.files.map(c=>Fn.htmlInfo(c,i,s,r)));await t.type("text/html").send(l)},htmlInfo:function(t,e,r,i){return i.names?.includes(Er.basename(e))&&(e=Er.normalize(Er.join(e,".."))),{href:encodeURI(Er.join(r,e,t.name).replace(/\\/gu,"/")),name:t.name,stats:t.stats,extendedInfo:t.extendedInfo}},handle:function(t,e){return e.names?.includes(Er.basename(t))||((e.names?.includes("/")&&t[t.length-1]==="/")??!1)},path:function(t,e){let r=e[e.length-1]==="/"?e+"none":e;return Er.dirname(Er.join(t,r))},validateOptions:function(t){if(t.list){if(Array.isArray(t.root))return new TypeError("multi-root with list option is not supported");if(t.list.format&&t.list.format!=="json"&&t.list.format!=="html")return new TypeError("The `list.format` option must be json or html");if(t.list.names&&!Array.isArray(t.list.names))return new TypeError("The `list.names` option must be an array");if(t.list.jsonFormat!=null&&t.list.jsonFormat!=="names"&&t.list.jsonFormat!=="extended")return new TypeError("The `list.jsonFormat` option must be name or extended");if(t.list.format==="html"&&typeof t.list.render!="function")return new TypeError("The `list.render` option must be a function and is required with html format")}}};ZM.exports=Fn});var a2=_((zxe,pp)=>{"use strict";var Bs=require("node:path"),{fileURLToPath:t2}=require("node:url"),{statSync:o2}=require("node:fs"),{glob:Yce}=kF(),Xce=fh(),zc=MM(),Zce=zM(),eue=QM(),Mn=e2(),r2=/\/$/u,tue=/\*/gu,rue=["br","gzip","deflate"];zc.mime.default_type="application/octet-stream";async function SS(t,e){e.root=iue(e.root),sue(t,e.root);let r=e.setHeaders;if(r!==void 0&&typeof r!="function")throw new TypeError("The `setHeaders` option must be a function");let i=Mn.validateOptions(e);if(i)throw i;e.dotfiles===void 0&&(e.dotfiles="allow");let s={root:e.root,acceptRanges:e.acceptRanges,contentType:e.contentType,cacheControl:e.cacheControl,dotfiles:e.dotfiles,etag:e.etag,extensions:e.extensions,immutable:e.immutable,index:e.index,lastModified:e.lastModified,maxAge:e.maxAge},n=e.prefix??(e.prefix="/");e.prefixAvoidTrailingSlash||(n=n[n.length-1]==="/"?n:n+"/");let o={constraints:e.constraints,schema:{hide:e.schemaHide!==void 0?e.schemaHide:!0},logLevel:e.logLevel,errorHandler(f,p,d){if(f?.code==="ERR_STREAM_PREMATURE_CLOSE"){d.request.raw.destroy();return}t.errorHandler(f,p,d)}};if(e.decorateReply!==!1&&(t.decorateReply("sendFile",function(f,p,d){let h=typeof p=="object"?p:d,m=typeof p=="string"?p:h?.root;return l(this.request,this,f,m||s.root,0,h),this}),t.decorateReply("download",function(f,p,d={}){let{root:h,...m}=typeof p=="object"?p:d;return p=typeof p=="string"?p:f,this.header("content-disposition",eue(p)),l(this.request,this,f,h,0,m),this})),e.serve!==!1){if(e.wildcard&&typeof e.wildcard!="boolean")throw new TypeError('"wildcard" option must be a boolean');if(e.wildcard===void 0||e.wildcard===!0)t.route({...o,method:["HEAD","GET"],path:n+"*",handler(f,p){l(f,p,"/"+f.params["*"],s.root)}}),e.redirect===!0&&n!==e.prefix&&t.get(e.prefix,o,(f,p)=>{p.redirect(n2(f.raw.url),301)});else{let f=e.index===void 0?["index.html"]:[].concat(e.index),p=new Map,d=new Set,h=Array.isArray(s.root)?s.root:[s.root];for(let m of h){m=m.split(Bs.win32.sep).join(Bs.posix.sep),!m.endsWith("/")&&(m+="/");let v=await Yce("**/**",{cwd:m,absolute:!1,follow:!0,nodir:!0,dot:e.serveDotFiles});for(let g of v){g=g.split(Bs.win32.sep).join(Bs.posix.sep);let w=n+g;if(d.has(w))continue;d.add(w),c(o,w,`/${g}`,m);let b=Bs.posix.basename(w);f.includes(b)&&!p.has(b)&&p.set(Bs.posix.dirname(w),m)}}for(let[m,v]of p.entries()){let g=m+(m.endsWith("/")?"":"/"),w="/"+g.replace(n,"");c(o,g,w,v),e.redirect===!0&&c(o,g.replace(r2,""),w.replace(r2,""),v)}}}let a=e.allowedPath;async function l(f,p,d,h,m=0,v,g){let w=d,b=Object.assign({},s,v);if(h&&(Array.isArray(h)?b.root=h[m]:b.root=h),a&&!a(d,b.root,f))return p.callNotFound();let y,E=d;if(e.preCompressed&&(g||(g=new Set),y=oue(f.headers,g),y))if(d.endsWith("/")){if(d=_S(d,b.root,b.index),!d)return p.callNotFound();E=E+d+"."+s2(y)}else E=d+"."+s2(y);let{statusCode:x,headers:S,stream:R,type:T,metadata:C}=await zc(f.raw,encodeURI(E),b);switch(T){case"directory":{let q=C.path;if(e.list&&await Mn.send({reply:p,dir:q,options:e.list,route:d,prefix:n,dotfiles:e.dotfiles}).catch(O=>p.send(O)),e.redirect===!0)try{p.redirect(n2(f.raw.url),301)}catch(O){await p.send(O)}else{if(!d.endsWith("/")&&_S(d,b.root,b.index))return l(f,p,d+"/",h,void 0,void 0,g);p.callNotFound()}break}case"error":{if(x===403&&(!b.index||!b.index.length)&&E[E.length-1]==="/"&&e.list&&await Mn.send({reply:p,dir:Mn.path(e.root,d),options:e.list,route:d,prefix:n,dotfiles:e.dotfiles}).catch(q=>p.send(q)),C.error.code==="ENOENT"){if(e.preCompressed&&y&&e.redirect!==!0&&_S(d,b.root,b.index))return l(f,p,d+"/",h,void 0,void 0,g);if(e.list&&Mn.handle(d,e.list)){await Mn.send({reply:p,dir:Mn.path(e.root,d),options:e.list,route:d,prefix:n,dotfiles:e.dotfiles}).catch(q=>p.send(q));return}return Array.isArray(h)&&m<h.length-1?l(f,p,d,h,m+1):e.preCompressed&&!g.has(y)?(g.add(y),l(f,p,w,h,m,void 0,g)):p.callNotFound()}if(C.error.status===404)return p.callNotFound();await p.send(C.error);break}case"file":{let q=p.statusCode!==200?p.statusCode:x;p.code(q),r!==void 0&&r(p.raw,C.path,C.stat),p.headers(S),y&&(p.header("content-type",nue(d)),p.header("content-encoding",y)),await p.send(R);break}}}function c(f,p,d,h){let m=Object.assign({},f,{method:["HEAD","GET"],url:p,handler:u});m.config=m.config||{},m.config.file=d,m.config.rootPath=h,t.route(m)}async function u(f,p){let d=f.routeOptions?.config||f.routeConfig;return l(f,p,d.file,d.rootPath)}}function iue(t){if(t===void 0)return t;if(t instanceof URL&&t.protocol==="file:")return t2(t);if(Array.isArray(t)){let e=[];for(let r=0,i=t.length;r<i;++r)t[r]instanceof URL&&t[r].protocol==="file:"?e.push(t2(t[r])):e.push(t[r]);return e}return t}function sue(t,e){if(e===void 0)throw new Error('"root" option is required');if(Array.isArray(e)){if(!e.length)throw new Error('"root" option array requires one or more paths');if(new Set(e).size!==e.length)throw new Error('"root" option array contains one or more duplicate paths');e.map(r=>i2(t,r));return}if(typeof e=="string")return i2(t,e);throw new Error('"root" option must be a string or array of strings')}function i2(t,e){if(typeof e!="string")throw new TypeError('"root" option must be a string');if(Bs.isAbsolute(e)===!1)throw new Error('"root" option must be an absolute path');let r;try{r=o2(e)}catch(i){if(i.code==="ENOENT"){t.log.warn(`"root" path "${e}" must exist`);return}throw i}if(r.isDirectory()===!1)throw new Error('"root" option must point to a directory')}function nue(t){let e=zc.mime.getType(t)||zc.mime.default_type;return zc.isUtf8MimeType(e)?`${e}; charset=utf-8`:e}function _S(t,e,r=["index.html"]){return Array.isArray(r)?r.find(i=>{let s=Bs.join(e,t,i);try{return!o2(s).isDirectory()}catch{return!1}}):!1}function oue(t,e){if(!("accept-encoding"in t))return;let r=t["accept-encoding"].toLowerCase().replace(tue,"gzip");return Zce.negotiate(r,rue.filter(i=>!e.has(i)))}function s2(t){switch(t){case"br":return"br";case"gzip":return"gz"}}function n2(t){let e=0;for(;e<t.length&&!(t[e]!=="/"&&t[e]!=="\\");++e);t="/"+t.substr(e);try{let r=new URL(t,"http://localhost.com/"),i=r.pathname;return i+(i[i.length-1]!=="/"?"/":"")+(r.search||"")}catch{let r=new Error(`Invalid redirect URL: ${t}`);throw r.statusCode=400,r}}pp.exports=Xce(SS,{fastify:"5.x",name:"@fastify/static"});pp.exports.default=SS;pp.exports.fastifyStatic=SS});var v2={port:3337,apiPrefix:"/offline-api",allowLocalWebsitePort:4242,allowRealWebsiteToUseLocalApi:!0,purgeCardImagesOnStartup:!1,deleteDatabaseOnStartup:!1},w2={},_2={purgeCardImagesOnStartup:!1,deleteDatabaseOnStartup:!1},S2=process.env.NODE_ENV||"development",E2=S2==="production"?_2:w2,sr={...v2,...E2};var l2=kt(Aq());var JL=kt(require("better-sqlite3"));var tc=kt(require("better-sqlite3"),1);var $=Symbol.for("drizzle:entityKind"),yme=Symbol.for("drizzle:hasOwnEntityKind");function k(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,$))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if($ in r&&r[$]===e[$])return!0;r=Object.getPrototypeOf(r)}return!1}var mv=class{static[$]="ConsoleLogWriter";write(e){console.log(e)}},$d=class{static[$]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new mv}logQuery(e,r){let i=r.map(n=>{try{return JSON.stringify(n)}catch{return String(n)}}),s=i.length?` -- params: [${i.join(", ")}]`:"";this.writer.write(`Query: ${e}${s}`)}},Nd=class{static[$]="NoopLogger";logQuery(){}};var Ut=Symbol.for("drizzle:Name");var kd=Symbol.for("drizzle:Schema"),qd=Symbol.for("drizzle:Columns"),Cq=Symbol.for("drizzle:ExtraConfigColumns"),yv=Symbol.for("drizzle:OriginalName"),gv=Symbol.for("drizzle:BaseName"),Ld=Symbol.for("drizzle:IsAlias"),Oq=Symbol.for("drizzle:ExtraConfigBuilder"),bse=Symbol.for("drizzle:IsDrizzleTable"),B=class{static[$]="Table";static Symbol={Name:Ut,Schema:kd,OriginalName:yv,Columns:qd,ExtraConfigColumns:Cq,BaseName:gv,IsAlias:Ld,ExtraConfigBuilder:Oq};[Ut];[yv];[kd];[qd];[Cq];[gv];[Ld]=!1;[bse]=!0;[Oq]=void 0;constructor(e,r,i){this[Ut]=this[yv]=e,this[kd]=r,this[gv]=i}};function Os(t){return t[Ut]}function _n(t){return`${t[kd]??"public"}.${t[Ut]}`}var Ae=class{constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[$]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var zo=class{static[$]="ColumnBuilder";config;constructor(e,r,i){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var jd=class{static[$]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{let{name:i,columns:s,foreignColumns:n}=e();return{name:i,columns:s,foreignTable:n[0].table,foreignColumns:n}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new bv(e,this)}},bv=class{constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[$]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:r,foreignColumns:i}=this.reference(),s=r.map(a=>a.name),n=i.map(a=>a.name),o=[this.table[Ut],...s,i[0].table[Ut],...n];return e??`${o.join("_")}_fk`}};function Dd(t,...e){return t(...e)}function _v(t,e){return`${t[Ut]}_${e.join("_")}_unique`}var vv=class{constructor(e,r){this.name=r,this.columns=e}static[$]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new wv(e,this.columns,this.nullsNotDistinctConfig,this.name)}},Iq=class{static[$]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new vv(e,this.name)}},wv=class{constructor(e,r,i,s){this.table=e,this.columns=r,this.name=s??_v(this.table,this.columns.map(n=>n.name)),this.nullsNotDistinct=i}static[$]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function $q(t,e,r){for(let i=e;i<t.length;i++){let s=t[i];if(s==="\\"){i++;continue}if(s==='"')return[t.slice(e,i).replace(/\\/g,""),i+1];if(!r&&(s===","||s==="}"))return[t.slice(e,i).replace(/\\/g,""),i]}return[t.slice(e).replace(/\\/g,""),t.length]}function Nq(t,e=0){let r=[],i=e,s=!1;for(;i<t.length;){let n=t[i];if(n===","){(s||i===e)&&r.push(""),s=!0,i++;continue}if(s=!1,n==="\\"){i+=2;continue}if(n==='"'){let[l,c]=$q(t,i+1,!0);r.push(l),i=c;continue}if(n==="}")return[r,i+1];if(n==="{"){let[l,c]=Nq(t,i+1);r.push(l),i=c;continue}let[o,a]=$q(t,i,!1);r.push(o),i=a}return[r,i]}function kq(t){let[e]=Nq(t,1);return e}function Sv(t){return`{${t.map(e=>Array.isArray(e)?Sv(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Ml=class extends zo{foreignKeyConfigs=[];static[$]="PgColumnBuilder";array(e){return new xv(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:i,actions:s})=>Dd((n,o)=>{let a=new jd(()=>{let l=n();return{columns:[e],foreignColumns:[l]}});return o.onUpdate&&a.onUpdate(o.onUpdate),o.onDelete&&a.onDelete(o.onDelete),a.build(r)},i,s))}buildExtraConfigColumn(e){return new Ev(e,this.config)}},Bo=class extends Ae{constructor(e,r){r.uniqueName||(r.uniqueName=_v(e,[r.name])),super(e,r),this.table=e}static[$]="PgColumn"},Ev=class extends Bo{static[$]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},qq=class{static[$]="IndexedColumn";constructor(e,r,i,s){this.name=e,this.keyAsName=r,this.type=i,this.indexConfig=s}name;keyAsName;type;indexConfig},xv=class extends Ml{static[$]="PgArrayBuilder";constructor(e,r,i){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=i}build(e){let r=this.config.baseBuilder.build(e);return new Rv(e,this.config,r)}},Rv=class t extends Bo{constructor(e,r,i,s){super(e,r),this.baseColumn=i,this.range=s,this.size=r.size}size;static[$]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=kq(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){let i=e.map(s=>s===null?null:k(this.baseColumn,t)?this.baseColumn.mapToDriverValue(s,!0):this.baseColumn.mapToDriverValue(s));return r?i:Sv(i)}};var Lq=Symbol.for("drizzle:isPgEnum");function Dq(t){return!!t&&typeof t=="function"&&Lq in t&&t[Lq]===!0}var jq=class extends Ml{static[$]="PgEnumColumnBuilder";constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new Tv(e,this.config)}},Tv=class extends Bo{static[$]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}};var ut=class{static[$]="Subquery";constructor(e,r,i,s=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:i,isWith:s}}},Uo=class extends ut{static[$]="WithSubquery"};var Fq="0.38.4";var Pv,Av,Mq={startActiveSpan(t,e){return Pv?(Av||(Av=Pv.trace.getTracer("drizzle-orm",Fq)),Dd((r,i)=>i.startActiveSpan(t,s=>{try{return e(s)}catch(n){throw s.setStatus({code:r.SpanStatusCode.ERROR,message:n instanceof Error?n.message:"Unknown error"}),n}finally{s.end()}}),Pv,Av)):e()}};var We=Symbol.for("drizzle:ViewBaseConfig");var zq=class{static[$]="FakePrimitiveParam"};function Cv(t){return t!=null&&typeof t.getSQL=="function"}function vse(t){let e={sql:"",params:[]};for(let r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var nt=class{static[$]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new Q([this])}},Q=class t{constructor(e){this.queryChunks=e}static[$]="SQL";decoder=Uq;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Mq.startActiveSpan("drizzle.buildSQL",r=>{let i=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,r){let i=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:s,escapeName:n,escapeParam:o,prepareTyping:a,inlineParams:l,paramStartIndex:c}=i;return vse(e.map(u=>{if(k(u,nt))return{sql:u.value.join(""),params:[]};if(k(u,zl))return{sql:n(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){let f=[new nt("(")];for(let[p,d]of u.entries())f.push(d),p<u.length-1&&f.push(new nt(", "));return f.push(new nt(")")),this.buildQueryFromSourceParams(f,i)}if(k(u,t))return this.buildQueryFromSourceParams(u.queryChunks,{...i,inlineParams:l||u.shouldInlineParams});if(k(u,B)){let f=u[B.Symbol.Schema],p=u[B.Symbol.Name];return{sql:f===void 0?n(p):n(f)+"."+n(p),params:[]}}if(k(u,Ae)){let f=s.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:n(f),params:[]};let p=u.table[B.Symbol.Schema];return{sql:u.table[Ld]||p===void 0?n(u.table[B.Symbol.Name])+"."+n(f):n(p)+"."+n(u.table[B.Symbol.Name])+"."+n(f),params:[]}}if(k(u,br)){let f=u[We].schema,p=u[We].name;return{sql:f===void 0?n(p):n(f)+"."+n(p),params:[]}}if(k(u,fr)){if(k(u.value,es))return{sql:o(c.value++,u),params:[u],typings:["none"]};let f=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(k(f,t))return this.buildQueryFromSourceParams([f],i);if(l)return{sql:this.mapInlineParam(f,i),params:[]};let p=["none"];return a&&(p=[a(u.encoder)]),{sql:o(c.value++,f),params:[f],typings:p}}return k(u,es)?{sql:o(c.value++,u),params:[u],typings:["none"]}:k(u,t.Aliased)&&u.fieldAlias!==void 0?{sql:n(u.fieldAlias),params:[]}:k(u,ut)?u._.isWith?{sql:n(u._.alias),params:[]}:this.buildQueryFromSourceParams([new nt("("),u._.sql,new nt(") "),new zl(u._.alias)],i):Dq(u)?u.schema?{sql:n(u.schema)+"."+n(u.enumName),params:[]}:{sql:n(u.enumName),params:[]}:Cv(u)?u.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([u.getSQL()],i):this.buildQueryFromSourceParams([new nt("("),u.getSQL(),new nt(")")],i):l?{sql:this.mapInlineParam(u,i),params:[]}:{sql:o(c.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){let i=e.toString();return r(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},zl=class{constructor(e){this.value=e}static[$]="Name";brand;getSQL(){return new Q([this])}};function Bq(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}var Uq={mapFromDriverValue:t=>t},Hq={mapToDriverValue:t=>t},aye={...Uq,...Hq},fr=class{constructor(e,r=Hq){this.value=e,this.encoder=r}static[$]="Param";brand;getSQL(){return new Q([this])}};function A(t,...e){let r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new nt(t[0]));for(let[i,s]of e.entries())r.push(s,new nt(t[i+1]));return new Q(r)}(t=>{function e(){return new Q([])}t.empty=e;function r(l){return new Q(l)}t.fromList=r;function i(l){return new Q([new nt(l)])}t.raw=i;function s(l,c){let u=[];for(let[f,p]of l.entries())f>0&&c!==void 0&&u.push(c),u.push(p);return new Q(u)}t.join=s;function n(l){return new zl(l)}t.identifier=n;function o(l){return new es(l)}t.placeholder=o;function a(l,c){return new fr(l,c)}t.param=a})(A||(A={}));(t=>{class e{constructor(i,s){this.sql=i,this.fieldAlias=s}static[$]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(Q||(Q={}));var es=class{constructor(e){this.name=e}static[$]="Placeholder";getSQL(){return new Q([this])}};function Bl(t,e){return t.map(r=>{if(k(r,es)){if(!(r.name in e))throw new Error(`No value for placeholder "${r.name}" was provided`);return e[r.name]}if(k(r,fr)&&k(r.value,es)){if(!(r.value.name in e))throw new Error(`No value for placeholder "${r.value.name}" was provided`);return r.encoder.mapToDriverValue(e[r.value.name])}return r})}var wse=Symbol.for("drizzle:IsDrizzleView"),br=class{static[$]="View";[We];[wse]=!0;constructor({name:e,schema:r,selectedFields:i,query:s}){this[We]={name:e,originalName:e,schema:r,selectedFields:i,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new Q([this])}};Ae.prototype.getSQL=function(){return new Q([this])};B.prototype.getSQL=function(){return new Q([this])};ut.prototype.getSQL=function(){return new Q([this])};function Ov(t,e,r){let i={},s=t.reduce((n,{path:o,field:a},l)=>{let c;k(a,Ae)?c=a:k(a,Q)?c=a.decoder:c=a.sql.decoder;let u=n;for(let[f,p]of o.entries())if(f<o.length-1)p in u||(u[p]={}),u=u[p];else{let d=e[l],h=u[p]=d===null?null:c.mapFromDriverValue(d);if(r&&k(a,Ae)&&o.length===2){let m=o[0];m in i?typeof i[m]=="string"&&i[m]!==Os(a.table)&&(i[m]=!1):i[m]=h===null?Os(a.table):!1}}return n},{});if(r&&Object.keys(i).length>0)for(let[n,o]of Object.entries(i))typeof o=="string"&&!r[o]&&(s[n]=null);return s}function jr(t,e){return Object.entries(t).reduce((r,[i,s])=>{if(typeof i!="string")return r;let n=e?[...e,i]:[i];return k(s,Ae)||k(s,Q)||k(s,Q.Aliased)?r.push({path:n,field:s}):k(s,B)?r.push(...jr(s[B.Symbol.Columns],n)):r.push(...jr(s,n)),r},[])}function Ul(t,e){let r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(let[s,n]of r.entries())if(n!==i[s])return!1;return!0}function Fd(t,e){let r=Object.entries(e).filter(([,i])=>i!==void 0).map(([i,s])=>k(s,Q)||k(s,Ae)?[i,s]:[i,new fr(s,t[B.Symbol.Columns][i])]);if(r.length===0)throw new Error("No values to set");return Object.fromEntries(r)}function Vq(t,e){for(let r of e)for(let i of Object.getOwnPropertyNames(r.prototype))i!=="constructor"&&Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(r.prototype,i)||Object.create(null))}function Gq(t){return t[B.Symbol.Columns]}function Hl(t){return k(t,ut)?t._.alias:k(t,br)?t[We].name:k(t,Q)?void 0:t[B.Symbol.IsAlias]?t[B.Symbol.Name]:t[B.Symbol.BaseName]}function Is(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}function Kq(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.logger;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.logger;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}var Wq=Symbol.for("drizzle:PgInlineForeignKeys"),Jq=Symbol.for("drizzle:EnableRLS"),Md=class extends B{static[$]="PgTable";static Symbol=Object.assign({},B.Symbol,{InlineForeignKeys:Wq,EnableRLS:Jq});[Wq]=[];[Jq]=!1;[B.Symbol.ExtraConfigBuilder]=void 0};var zd=class{static[$]="PgPrimaryKeyBuilder";columns;name;constructor(e,r){this.columns=e,this.name=r}build(e){return new Iv(e,this.columns,this.name)}},Iv=class{constructor(e,r,i){this.table=e,this.columns=r,this.name=i}static[$]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[Md.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};function dr(t,e){return Bq(e)&&!Cv(t)&&!k(t,fr)&&!k(t,es)&&!k(t,Ae)&&!k(t,B)&&!k(t,br)?new fr(t,e):t}var ie=(t,e)=>A`${t} = ${dr(e,t)}`,Qq=(t,e)=>A`${t} <> ${dr(e,t)}`;function et(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new Q(e):new Q([new nt("("),A.join(e,new nt(" and ")),new nt(")")])}function Yq(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new Q(e):new Q([new nt("("),A.join(e,new nt(" or ")),new nt(")")])}function Xq(t){return A`not ${t}`}var Zq=(t,e)=>A`${t} > ${dr(e,t)}`,eL=(t,e)=>A`${t} >= ${dr(e,t)}`,tL=(t,e)=>A`${t} < ${dr(e,t)}`,rL=(t,e)=>A`${t} <= ${dr(e,t)}`;function Ht(t,e){return Array.isArray(e)?e.length===0?A`false`:A`${t} in ${e.map(r=>dr(r,t))}`:A`${t} in ${dr(e,t)}`}function iL(t,e){return Array.isArray(e)?e.length===0?A`true`:A`${t} not in ${e.map(r=>dr(r,t))}`:A`${t} not in ${dr(e,t)}`}function sL(t){return A`${t} is null`}function nL(t){return A`${t} is not null`}function oL(t){return A`exists ${t}`}function aL(t){return A`not exists ${t}`}function lL(t,e,r){return A`${t} between ${dr(e,t)} and ${dr(r,t)}`}function cL(t,e,r){return A`${t} not between ${dr(e,t)} and ${dr(r,t)}`}function Vl(t,e){return A`${t} like ${e}`}function uL(t,e){return A`${t} not like ${e}`}function fL(t,e){return A`${t} ilike ${e}`}function dL(t,e){return A`${t} not ilike ${e}`}function hL(t){return A`${t} asc`}function pL(t){return A`${t} desc`}var Bd=class{constructor(e,r,i){this.sourceTable=e,this.referencedTable=r,this.relationName=i,this.referencedTableName=r[B.Symbol.Name]}static[$]="Relation";referencedTableName;fieldName},Ud=class{constructor(e,r){this.table=e,this.config=r}static[$]="Relations"},$s=class t extends Bd{constructor(e,r,i,s){super(e,r,i?.relationName),this.config=i,this.isNullable=s}static[$]="One";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=e,r}},Gl=class t extends Bd{constructor(e,r,i){super(e,r,i?.relationName),this.config=i}static[$]="Many";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config);return r.fieldName=e,r}};function mL(){return{and:et,between:lL,eq:ie,exists:oL,gt:Zq,gte:eL,ilike:fL,inArray:Ht,isNull:sL,isNotNull:nL,like:Vl,lt:tL,lte:rL,ne:Qq,not:Xq,notBetween:cL,notExists:aL,notLike:uL,notIlike:dL,notInArray:iL,or:Yq,sql:A}}function yL(){return{sql:A,asc:hL,desc:pL}}function gL(t,e){Object.keys(t).length===1&&"default"in t&&!k(t.default,B)&&(t=t.default);let r={},i={},s={};for(let[n,o]of Object.entries(t))if(k(o,B)){let a=_n(o),l=i[a];r[a]=n,s[n]={tsName:n,dbName:o[B.Symbol.Name],schema:o[B.Symbol.Schema],columns:o[B.Symbol.Columns],relations:l?.relations??{},primaryKey:l?.primaryKey??[]};for(let u of Object.values(o[B.Symbol.Columns]))u.primary&&s[n].primaryKey.push(u);let c=o[B.Symbol.ExtraConfigBuilder]?.(o[B.Symbol.ExtraConfigColumns]);if(c)for(let u of Object.values(c))k(u,zd)&&s[n].primaryKey.push(...u.columns)}else if(k(o,Ud)){let a=_n(o.table),l=r[a],c=o.config(e(o.table)),u;for(let[f,p]of Object.entries(c))if(l){let d=s[l];d.relations[f]=p,u&&d.primaryKey.push(...u)}else a in i||(i[a]={relations:{},primaryKey:u}),i[a].relations[f]=p}return{tables:s,tableNamesMap:r}}function hr(t,e){return new Ud(t,r=>Object.fromEntries(Object.entries(e(r)).map(([i,s])=>[i,s.withFieldName(i)])))}function _se(t){return function(r,i){return new $s(t,r,i,i?.fields.reduce((s,n)=>s&&n.notNull,!0)??!1)}}function Sse(t){return function(r,i){return new Gl(t,r,i)}}function bL(t,e,r){if(k(r,$s)&&r.config)return{fields:r.config.fields,references:r.config.references};let i=e[_n(r.referencedTable)];if(!i)throw new Error(`Table "${r.referencedTable[B.Symbol.Name]}" not found in schema`);let s=t[i];if(!s)throw new Error(`Table "${i}" not found in schema`);let n=r.sourceTable,o=e[_n(n)];if(!o)throw new Error(`Table "${n[B.Symbol.Name]}" not found in schema`);let a=[];for(let l of Object.values(s.relations))(r.relationName&&r!==l&&l.relationName===r.relationName||!r.relationName&&l.referencedTable===r.sourceTable)&&a.push(l);if(a.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${i}"`):new Error(`There are multiple relations between "${i}" and "${r.sourceTable[B.Symbol.Name]}". Please specify relation name`);if(a[0]&&k(a[0],$s)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw new Error(`There is not enough information to infer relation "${o}.${r.fieldName}"`)}function vL(t){return{one:_se(t),many:Sse(t)}}function Hd(t,e,r,i,s=n=>n){let n={};for(let[o,a]of i.entries())if(a.isJson){let l=e.relations[a.tsKey],c=r[o],u=typeof c=="string"?JSON.parse(c):c;n[a.tsKey]=k(l,$s)?u&&Hd(t,t[a.relationTableTsKey],u,a.selection,s):u.map(f=>Hd(t,t[a.relationTableTsKey],f,a.selection,s))}else{let l=s(r[o]),c=a.field,u;k(c,Ae)?u=c:k(c,Q)?u=c.decoder:u=c.sql.decoder,n[a.tsKey]=l===null?null:u.mapFromDriverValue(l)}return n}var Sn=class{constructor(e){this.table=e}static[$]="ColumnAliasProxyHandler";get(e,r){return r==="table"?this.table:e[r]}},Ho=class{constructor(e,r){this.alias=e,this.replaceOriginalName=r}static[$]="TableAliasProxyHandler";get(e,r){if(r===B.Symbol.IsAlias)return!0;if(r===B.Symbol.Name)return this.alias;if(this.replaceOriginalName&&r===B.Symbol.OriginalName)return this.alias;if(r===We)return{...e[We],name:this.alias,isAlias:!0};if(r===B.Symbol.Columns){let s=e[B.Symbol.Columns];if(!s)return s;let n={};return Object.keys(s).map(o=>{n[o]=new Proxy(s[o],new Sn(new Proxy(e,this)))}),n}let i=e[r];return k(i,Ae)?new Proxy(i,new Sn(new Proxy(e,this))):i}},wL=class{constructor(e){this.alias=e}static[$]="RelationTableAliasProxyHandler";get(e,r){return r==="sourceTable"?Kl(e.sourceTable,this.alias):e[r]}};function Kl(t,e){return new Proxy(t,new Ho(e,!1))}function Si(t,e){return new Proxy(t,new Sn(new Proxy(t.table,new Ho(e,!1))))}function $v(t,e){return new Q.Aliased(Wl(t.sql,e),t.fieldAlias)}function Wl(t,e){return A.join(t.queryChunks.map(r=>k(r,Ae)?Si(r,e):k(r,Q)?Wl(r,e):k(r,Q.Aliased)?$v(r,e):r))}var ot=class t{static[$]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,r){if(r==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(r===We)return{...e[We],selectedFields:new Proxy(e[We].selectedFields,this)};if(typeof r=="symbol")return e[r];let s=(k(e,ut)?e._.selectedFields:k(e,br)?e[We].selectedFields:e)[r];if(k(s,Q.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!s.isSelectionField)return s.sql;let n=s.clone();return n.isSelectionField=!0,n}if(k(s,Q)){if(this.config.sqlBehavior==="sql")return s;throw new Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return k(s,Ae)?this.config.alias?new Proxy(s,new Sn(new Proxy(s.table,new Ho(this.config.alias,this.config.replaceOriginalName??!1)))):s:typeof s!="object"||s===null?s:new Proxy(s,new t(this.config))}};var Vt=class{static[$]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}then(e,r){return this.execute().then(e,r)}};var Vd=class{static[$]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(e,r){this.reference=()=>{let{name:i,columns:s,foreignColumns:n}=e();return{name:i,columns:s,foreignTable:n[0].table,foreignColumns:n}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new Nv(e,this)}},Nv=class{constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[$]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:r,foreignColumns:i}=this.reference(),s=r.map(a=>a.name),n=i.map(a=>a.name),o=[this.table[Ut],...s,i[0].table[Ut],...n];return e??`${o.join("_")}_fk`}};function jv(t,e){return`${t[Ut]}_${e.join("_")}_unique`}function Ns(t){return new qv(t)}var kv=class{constructor(e,r){this.name=r,this.columns=e}static[$]="SQLiteUniqueConstraintBuilder";columns;build(e){return new Lv(e,this.columns,this.name)}},qv=class{static[$]="SQLiteUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new kv(e,this.name)}},Lv=class{constructor(e,r,i){this.table=e,this.columns=r,this.name=i??jv(this.table,this.columns.map(s=>s.name))}static[$]="SQLiteUniqueConstraint";columns;name;getName(){return this.name}};var At=class extends zo{static[$]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,r){return this.config.generated={as:e,type:"always",mode:r?.mode??"virtual"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:i,actions:s})=>((n,o)=>{let a=new Vd(()=>{let l=n();return{columns:[e],foreignColumns:[l]}});return o.onUpdate&&a.onUpdate(o.onUpdate),o.onDelete&&a.onDelete(o.onDelete),a.build(r)})(i,s))}},tt=class extends Ae{constructor(e,r){r.uniqueName||(r.uniqueName=jv(e,[r.name])),super(e,r),this.table=e}static[$]="SQLiteColumn"};var Dv=class extends At{static[$]="SQLiteBigIntBuilder";constructor(e){super(e,"bigint","SQLiteBigInt")}build(e){return new Fv(e,this.config)}},Fv=class extends tt{static[$]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(e){if(Buffer.isBuffer(e))return BigInt(e.toString());if(e instanceof ArrayBuffer){let r=new TextDecoder;return BigInt(r.decode(e))}return BigInt(String.fromCodePoint(...e))}mapToDriverValue(e){return Buffer.from(e.toString())}},Mv=class extends At{static[$]="SQLiteBlobJsonBuilder";constructor(e){super(e,"json","SQLiteBlobJson")}build(e){return new zv(e,this.config)}},zv=class extends tt{static[$]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(e){if(Buffer.isBuffer(e))return JSON.parse(e.toString());if(e instanceof ArrayBuffer){let r=new TextDecoder;return JSON.parse(r.decode(e))}return JSON.parse(String.fromCodePoint(...e))}mapToDriverValue(e){return Buffer.from(JSON.stringify(e))}},Bv=class extends At{static[$]="SQLiteBlobBufferBuilder";constructor(e){super(e,"buffer","SQLiteBlobBuffer")}build(e){return new Uv(e,this.config)}},Uv=class extends tt{static[$]="SQLiteBlobBuffer";getSQLType(){return"blob"}};function _L(t,e){let{name:r,config:i}=Is(t,e);return i?.mode==="json"?new Mv(r):i?.mode==="bigint"?new Dv(r):new Bv(r)}var Hv=class extends At{static[$]="SQLiteCustomColumnBuilder";constructor(e,r,i){super(e,"custom","SQLiteCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=i}build(e){return new Vv(e,this.config)}},Vv=class extends tt{static[$]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function SL(t){return(e,r)=>{let{name:i,config:s}=Is(e,r);return new Hv(i,s,t)}}var Jl=class extends At{static[$]="SQLiteBaseIntegerBuilder";constructor(e,r,i){super(e,r,i),this.config.autoIncrement=!1}primaryKey(e){return e?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}},Ql=class extends tt{static[$]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}},Gv=class extends Jl{static[$]="SQLiteIntegerBuilder";constructor(e){super(e,"number","SQLiteInteger")}build(e){return new Kv(e,this.config)}},Kv=class extends Ql{static[$]="SQLiteInteger"},Wv=class extends Jl{static[$]="SQLiteTimestampBuilder";constructor(e,r){super(e,"date","SQLiteTimestamp"),this.config.mode=r}defaultNow(){return this.default(A`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(e){return new Jv(e,this.config)}},Jv=class extends Ql{static[$]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(e){return this.config.mode==="timestamp"?new Date(e*1e3):new Date(e)}mapToDriverValue(e){let r=e.getTime();return this.config.mode==="timestamp"?Math.floor(r/1e3):r}},Qv=class extends Jl{static[$]="SQLiteBooleanBuilder";constructor(e,r){super(e,"boolean","SQLiteBoolean"),this.config.mode=r}build(e){return new Yv(e,this.config)}},Yv=class extends Ql{static[$]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(e){return Number(e)===1}mapToDriverValue(e){return e?1:0}};function at(t,e){let{name:r,config:i}=Is(t,e);return i?.mode==="timestamp"||i?.mode==="timestamp_ms"?new Wv(r,i.mode):i?.mode==="boolean"?new Qv(r,i.mode):new Gv(r)}var Xv=class extends At{static[$]="SQLiteNumericBuilder";constructor(e){super(e,"string","SQLiteNumeric")}build(e){return new Zv(e,this.config)}},Zv=class extends tt{static[$]="SQLiteNumeric";getSQLType(){return"numeric"}};function EL(t){return new Xv(t??"")}var ew=class extends At{static[$]="SQLiteRealBuilder";constructor(e){super(e,"number","SQLiteReal")}build(e){return new tw(e,this.config)}},tw=class extends tt{static[$]="SQLiteReal";getSQLType(){return"real"}};function xL(t){return new ew(t??"")}var rw=class extends At{static[$]="SQLiteTextBuilder";constructor(e,r){super(e,"string","SQLiteText"),this.config.enumValues=r.enum,this.config.length=r.length}build(e){return new iw(e,this.config)}},iw=class extends tt{static[$]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(e,r){super(e,r)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}},sw=class extends At{static[$]="SQLiteTextJsonBuilder";constructor(e){super(e,"json","SQLiteTextJson")}build(e){return new nw(e,this.config)}},nw=class extends tt{static[$]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(e){return JSON.parse(e)}mapToDriverValue(e){return JSON.stringify(e)}};function Z(t,e={}){let{name:r,config:i}=Is(t,e);return i.mode==="json"?new sw(r):new rw(r,i)}function RL(){return{blob:_L,customType:SL,integer:at,numeric:EL,real:xL,text:Z}}var ow=Symbol.for("drizzle:SQLiteInlineForeignKeys"),Ct=class extends B{static[$]="SQLiteTable";static Symbol=Object.assign({},B.Symbol,{InlineForeignKeys:ow});[B.Symbol.Columns];[ow]=[];[B.Symbol.ExtraConfigBuilder]=void 0};function Ese(t,e,r,i,s=t){let n=new Ct(t,i,s),o=typeof e=="function"?e(RL()):e,a=Object.fromEntries(Object.entries(o).map(([c,u])=>{let f=u;f.setName(c);let p=f.build(n);return n[ow].push(...f.buildForeignKeys(p,n)),[c,p]})),l=Object.assign(n,a);return l[B.Symbol.Columns]=a,l[B.Symbol.ExtraConfigColumns]=a,r&&(l[Ct.Symbol.ExtraConfigBuilder]=r),l}var je=(t,e,r)=>Ese(t,e,r);var Yl=class extends Vt{constructor(e,r,i,s){super(),this.table=e,this.session=r,this.dialect=i,this.config={table:e,withList:s}}static[$]="SQLiteDelete";config;where(e){return this.config.where=e,this}orderBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.table[B.Symbol.Columns],new ot({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(r)?r:[r];this.config.orderBy=i}else{let r=e;this.config.orderBy=r}return this}limit(e){return this.config.limit=e,this}returning(e=this.table[Ct.Symbol.Columns]){return this.config.returning=jr(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e=!0){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0)}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(e){return this._prepare().execute(e)}$dynamic(){return this}};function xse(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(r=>r.toLowerCase()).join("_")}function Rse(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((r,i,s)=>{let n=s===0?i.toLowerCase():`${i[0].toUpperCase()}${i.slice(1)}`;return r+n},"")}function Tse(t){return t}var Gd=class{static[$]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?xse:e==="camelCase"?Rse:Tse}getColumnCasing(e){if(!e.keyAsName)return e.name;let r=e.table[B.Symbol.Schema]??"public",i=e.table[B.Symbol.OriginalName],s=`${r}.${i}.${e.name}`;return this.cache[s]||this.cacheTable(e.table),this.cache[s]}cacheTable(e){let r=e[B.Symbol.Schema]??"public",i=e[B.Symbol.OriginalName],s=`${r}.${i}`;if(!this.cachedTables[s]){for(let n of Object.values(e[B.Symbol.Columns])){let o=`${s}.${n.name}`;this.cache[o]=this.convert(n.name)}this.cachedTables[s]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var En=class extends Error{static[$]="DrizzleError";constructor({message:e,cause:r}){super(e),this.name="DrizzleError",this.cause=r}},Kd=class extends En{static[$]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var ks=class extends br{static[$]="SQLiteViewBase"};var xn=class{static[$]="SQLiteDialect";casing;constructor(e){this.casing=new Gd(e?.casing)}escapeName(e){return`"${e}"`}escapeParam(e){return"?"}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let r=[A`with `];for(let[i,s]of e.entries())r.push(A`${A.identifier(s._.alias)} as (${s._.sql})`),i<e.length-1&&r.push(A`, `);return r.push(A` `),A.join(r)}buildDeleteQuery({table:e,where:r,returning:i,withList:s,limit:n,orderBy:o}){let a=this.buildWithCTE(s),l=i?A` returning ${this.buildSelection(i,{isSingleTable:!0})}`:void 0,c=r?A` where ${r}`:void 0,u=this.buildOrderBy(o),f=this.buildLimit(n);return A`${a}delete from ${e}${c}${l}${u}${f}`}buildUpdateSet(e,r){let i=e[B.Symbol.Columns],s=Object.keys(i).filter(o=>r[o]!==void 0||i[o]?.onUpdateFn!==void 0),n=s.length;return A.join(s.flatMap((o,a)=>{let l=i[o],c=r[o]??A.param(l.onUpdateFn(),l),u=A`${A.identifier(this.casing.getColumnCasing(l))} = ${c}`;return a<n-1?[u,A.raw(", ")]:[u]}))}buildUpdateQuery({table:e,set:r,where:i,returning:s,withList:n,joins:o,from:a,limit:l,orderBy:c}){let u=this.buildWithCTE(n),f=this.buildUpdateSet(e,r),p=a&&A.join([A.raw(" from "),this.buildFromTable(a)]),d=this.buildJoins(o),h=s?A` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,m=i?A` where ${i}`:void 0,v=this.buildOrderBy(c),g=this.buildLimit(l);return A`${u}update ${e} set ${f}${p}${d}${m}${h}${v}${g}`}buildSelection(e,{isSingleTable:r=!1}={}){let i=e.length,s=e.flatMap(({field:n},o)=>{let a=[];if(k(n,Q.Aliased)&&n.isSelectionField)a.push(A.identifier(n.fieldAlias));else if(k(n,Q.Aliased)||k(n,Q)){let l=k(n,Q.Aliased)?n.sql:n;r?a.push(new Q(l.queryChunks.map(c=>k(c,Ae)?A.identifier(this.casing.getColumnCasing(c)):c))):a.push(l),k(n,Q.Aliased)&&a.push(A` as ${A.identifier(n.fieldAlias)}`)}else if(k(n,Ae)){let l=n.table[B.Symbol.Name];r?a.push(A.identifier(this.casing.getColumnCasing(n))):a.push(A`${A.identifier(l)}.${A.identifier(this.casing.getColumnCasing(n))}`)}return o<i-1&&a.push(A`, `),a});return A.join(s)}buildJoins(e){if(!e||e.length===0)return;let r=[];if(e)for(let[i,s]of e.entries()){i===0&&r.push(A` `);let n=s.table;if(k(n,Ct)){let o=n[Ct.Symbol.Name],a=n[Ct.Symbol.Schema],l=n[Ct.Symbol.OriginalName],c=o===l?void 0:s.alias;r.push(A`${A.raw(s.joinType)} join ${a?A`${A.identifier(a)}.`:void 0}${A.identifier(l)}${c&&A` ${A.identifier(c)}`} on ${s.on}`)}else r.push(A`${A.raw(s.joinType)} join ${n} on ${s.on}`);i<e.length-1&&r.push(A` `)}return A.join(r)}buildLimit(e){return typeof e=="object"||typeof e=="number"&&e>=0?A` limit ${e}`:void 0}buildOrderBy(e){let r=[];if(e)for(let[i,s]of e.entries())r.push(s),i<e.length-1&&r.push(A`, `);return r.length>0?A` order by ${A.join(r)}`:void 0}buildFromTable(e){return k(e,B)&&e[B.Symbol.OriginalName]!==e[B.Symbol.Name]?A`${A.identifier(e[B.Symbol.OriginalName])} ${A.identifier(e[B.Symbol.Name])}`:e}buildSelectQuery({withList:e,fields:r,fieldsFlat:i,where:s,having:n,table:o,joins:a,orderBy:l,groupBy:c,limit:u,offset:f,distinct:p,setOperators:d}){let h=i??jr(r);for(let P of h)if(k(P.field,Ae)&&Os(P.field.table)!==(k(o,ut)?o._.alias:k(o,ks)?o[We].name:k(o,Q)?void 0:Os(o))&&!(D=>a?.some(({alias:te})=>te===(D[B.Symbol.IsAlias]?Os(D):D[B.Symbol.BaseName])))(P.field.table)){let D=Os(P.field.table);throw new Error(`Your "${P.path.join("->")}" field references a column "${D}"."${P.field.name}", but the table "${D}" is not part of the query! Did you forget to join it?`)}let m=!a||a.length===0,v=this.buildWithCTE(e),g=p?A` distinct`:void 0,w=this.buildSelection(h,{isSingleTable:m}),b=this.buildFromTable(o),y=this.buildJoins(a),E=s?A` where ${s}`:void 0,x=n?A` having ${n}`:void 0,S=[];if(c)for(let[P,D]of c.entries())S.push(D),P<c.length-1&&S.push(A`, `);let R=S.length>0?A` group by ${A.join(S)}`:void 0,T=this.buildOrderBy(l),C=this.buildLimit(u),q=f?A` offset ${f}`:void 0,O=A`${v}select${g} ${w} from ${b}${y}${E}${R}${x}${T}${C}${q}`;return d.length>0?this.buildSetOperations(O,d):O}buildSetOperations(e,r){let[i,...s]=r;if(!i)throw new Error("Cannot pass undefined values to any set operator");return s.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:i}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:i}),s)}buildSetOperationQuery({leftSelect:e,setOperator:{type:r,isAll:i,rightSelect:s,limit:n,orderBy:o,offset:a}}){let l=A`${e.getSQL()} `,c=A`${s.getSQL()}`,u;if(o&&o.length>0){let h=[];for(let m of o)if(k(m,tt))h.push(A.identifier(m.name));else if(k(m,Q)){for(let v=0;v<m.queryChunks.length;v++){let g=m.queryChunks[v];k(g,tt)&&(m.queryChunks[v]=A.identifier(this.casing.getColumnCasing(g)))}h.push(A`${m}`)}else h.push(A`${m}`);u=A` order by ${A.join(h,A`, `)}`}let f=typeof n=="object"||typeof n=="number"&&n>=0?A` limit ${n}`:void 0,p=A.raw(`${r} ${i?"all ":""}`),d=a?A` offset ${a}`:void 0;return A`${l}${p}${c}${u}${f}${d}`}buildInsertQuery({table:e,values:r,onConflict:i,returning:s,withList:n,select:o}){let a=[],l=e[B.Symbol.Columns],c=Object.entries(l).filter(([m,v])=>!v.shouldDisableInsert()),u=c.map(([,m])=>A.identifier(this.casing.getColumnCasing(m)));if(o){let m=r;k(m,Q)?a.push(m):a.push(m.getSQL())}else{let m=r;a.push(A.raw("values "));for(let[v,g]of m.entries()){let w=[];for(let[b,y]of c){let E=g[b];if(E===void 0||k(E,fr)&&E.value===void 0){let x;if(y.default!==null&&y.default!==void 0)x=k(y.default,Q)?y.default:A.param(y.default,y);else if(y.defaultFn!==void 0){let S=y.defaultFn();x=k(S,Q)?S:A.param(S,y)}else if(!y.default&&y.onUpdateFn!==void 0){let S=y.onUpdateFn();x=k(S,Q)?S:A.param(S,y)}else x=A`null`;w.push(x)}else w.push(E)}a.push(w),v<m.length-1&&a.push(A`, `)}}let f=this.buildWithCTE(n),p=A.join(a),d=s?A` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,h=i?A` on conflict ${i}`:void 0;return A`${f}insert into ${e} ${u} ${p}${h}${d}`}sqlToQuery(e,r){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:r})}buildRelationalQuery({fullSchema:e,schema:r,tableNamesMap:i,table:s,tableConfig:n,queryConfig:o,tableAlias:a,nestedQueryRelation:l,joinOn:c}){let u=[],f,p,d=[],h,m=[];if(o===!0)u=Object.entries(n.columns).map(([w,b])=>({dbKey:b.name,tsKey:w,field:Si(b,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let g=Object.fromEntries(Object.entries(n.columns).map(([S,R])=>[S,Si(R,a)]));if(o.where){let S=typeof o.where=="function"?o.where(g,mL()):o.where;h=S&&Wl(S,a)}let w=[],b=[];if(o.columns){let S=!1;for(let[R,T]of Object.entries(o.columns))T!==void 0&&R in n.columns&&(!S&&T===!0&&(S=!0),b.push(R));b.length>0&&(b=S?b.filter(R=>o.columns?.[R]===!0):Object.keys(n.columns).filter(R=>!b.includes(R)))}else b=Object.keys(n.columns);for(let S of b){let R=n.columns[S];w.push({tsKey:S,value:R})}let y=[];o.with&&(y=Object.entries(o.with).filter(S=>!!S[1]).map(([S,R])=>({tsKey:S,queryConfig:R,relation:n.relations[S]})));let E;if(o.extras){E=typeof o.extras=="function"?o.extras(g,{sql:A}):o.extras;for(let[S,R]of Object.entries(E))w.push({tsKey:S,value:$v(R,a)})}for(let{tsKey:S,value:R}of w)u.push({dbKey:k(R,Q.Aliased)?R.fieldAlias:n.columns[S].name,tsKey:S,field:k(R,Ae)?Si(R,a):R,relationTableTsKey:void 0,isJson:!1,selection:[]});let x=typeof o.orderBy=="function"?o.orderBy(g,yL()):o.orderBy??[];Array.isArray(x)||(x=[x]),d=x.map(S=>k(S,Ae)?Si(S,a):Wl(S,a)),f=o.limit,p=o.offset;for(let{tsKey:S,queryConfig:R,relation:T}of y){let C=bL(r,i,T),q=_n(T.referencedTable),O=i[q],P=`${a}_${S}`,D=et(...C.fields.map((K,Re)=>ie(Si(C.references[Re],P),Si(K,a)))),te=this.buildRelationalQuery({fullSchema:e,schema:r,tableNamesMap:i,table:e[O],tableConfig:r[O],queryConfig:k(T,$s)?R===!0?{limit:1}:{...R,limit:1}:R,tableAlias:P,joinOn:D,nestedQueryRelation:T}),L=A`(${te.sql})`.as(S);u.push({dbKey:S,tsKey:S,field:L,relationTableTsKey:O,isJson:!0,selection:te.selection})}}if(u.length===0)throw new En({message:`No fields selected for table "${n.tsName}" ("${a}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});let v;if(h=et(c,h),l){let g=A`json_array(${A.join(u.map(({field:y})=>k(y,tt)?A.identifier(this.casing.getColumnCasing(y)):k(y,Q.Aliased)?y.sql:y),A`, `)})`;k(l,Gl)&&(g=A`coalesce(json_group_array(${g}), json_array())`);let w=[{dbKey:"data",tsKey:"data",field:g.as("data"),isJson:!0,relationTableTsKey:n.tsName,selection:u}];f!==void 0||p!==void 0||d.length>0?(v=this.buildSelectQuery({table:Kl(s,a),fields:{},fieldsFlat:[{path:[],field:A.raw("*")}],where:h,limit:f,offset:p,orderBy:d,setOperators:[]}),h=void 0,f=void 0,p=void 0,d=void 0):v=Kl(s,a),v=this.buildSelectQuery({table:k(v,Ct)?v:new ut(v,{},a),fields:{},fieldsFlat:w.map(({field:y})=>({path:[],field:k(y,Ae)?Si(y,a):y})),joins:m,where:h,limit:f,offset:p,orderBy:d,setOperators:[]})}else v=this.buildSelectQuery({table:Kl(s,a),fields:{},fieldsFlat:u.map(({field:g})=>({path:[],field:k(g,Ae)?Si(g,a):g})),joins:m,where:h,limit:f,offset:p,orderBy:d,setOperators:[]});return{tableTsKey:n.tsName,sql:v,selection:u}}},Vo=class extends xn{static[$]="SQLiteSyncDialect";migrate(e,r,i){let s=i===void 0||typeof i=="string"?"__drizzle_migrations":i.migrationsTable??"__drizzle_migrations",n=A`
			CREATE TABLE IF NOT EXISTS ${A.identifier(s)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;r.run(n);let a=r.values(A`SELECT id, hash, created_at FROM ${A.identifier(s)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;r.run(A`BEGIN`);try{for(let l of e)if(!a||Number(a[2])<l.folderMillis){for(let c of l.sql)r.run(A.raw(c));r.run(A`INSERT INTO ${A.identifier(s)} ("hash", "created_at") VALUES(${l.hash}, ${l.folderMillis})`)}r.run(A`COMMIT`)}catch(l){throw r.run(A`ROLLBACK`),l}}},TL=class extends xn{static[$]="SQLiteAsyncDialect";async migrate(e,r,i){let s=i===void 0||typeof i=="string"?"__drizzle_migrations":i.migrationsTable??"__drizzle_migrations",n=A`
			CREATE TABLE IF NOT EXISTS ${A.identifier(s)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await r.run(n);let a=(await r.values(A`SELECT id, hash, created_at FROM ${A.identifier(s)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await r.transaction(async l=>{for(let c of e)if(!a||Number(a[2])<c.folderMillis){for(let u of c.sql)await l.run(A.raw(u));await l.run(A`INSERT INTO ${A.identifier(s)} ("hash", "created_at") VALUES(${c.hash}, ${c.folderMillis})`)}})}};var Wd=class{static[$]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Dr=class{static[$]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,this.withList=e.withList,this.distinct=e.distinct}from(e){let r=!!this.fields,i;return this.fields?i=this.fields:k(e,ut)?i=Object.fromEntries(Object.keys(e._.selectedFields).map(s=>[s,e[s]])):k(e,ks)?i=e[We].selectedFields:k(e,Q)?i={}:i=Gq(e),new Jd({table:e,fields:i,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}},aw=class extends Wd{static[$]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:e,fields:r,isPartialSelect:i,session:s,dialect:n,withList:o,distinct:a}){super(),this.config={withList:o,table:e,fields:{...r},distinct:a,setOperators:[]},this.isPartialSelect=i,this.session=s,this.dialect=n,this._={selectedFields:r},this.tableName=Hl(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e){return(r,i)=>{let s=this.tableName,n=Hl(r);if(typeof n=="string"&&this.config.joins?.some(o=>o.alias===n))throw new Error(`Alias "${n}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof s=="string"&&(this.config.fields={[s]:this.config.fields}),typeof n=="string"&&!k(r,Q))){let o=k(r,ut)?r._.selectedFields:k(r,br)?r[We].selectedFields:r[B.Symbol.Columns];this.config.fields[n]=o}if(typeof i=="function"&&(i=i(new Proxy(this.config.fields,new ot({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:i,table:r,joinType:e,alias:n}),typeof n=="string")switch(e){case"left":{this.joinsNotNullableMap[n]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[n]=!0;break}case"inner":{this.joinsNotNullableMap[n]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[n]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(e,r){return i=>{let s=typeof i=="function"?i(Pse()):i;if(!Ul(this.getSelectedFields(),s.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:r,rightSelect:s}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new ot({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new ot({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new ot({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new ot({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(r)?r:[r];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=i:this.config.orderBy=i}else{let r=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(e){return new Proxy(new ut(this.getSQL(),this.config.fields,e),new ot({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new ot({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}},Jd=class extends aw{static[$]="SQLiteSelect";_prepare(e=!0){if(!this.session)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");let r=jr(this.config.fields),i=this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),r,"all",!0);return i.joinsNotNullableMap=this.joinsNotNullableMap,i}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(){return this.all()}};Vq(Jd,[Vt]);function Qd(t,e){return(r,i,...s)=>{let n=[i,...s].map(o=>({type:t,isAll:e,rightSelect:o}));for(let o of n)if(!Ul(r.getSelectedFields(),o.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(n)}}var Pse=()=>({union:Ase,unionAll:Cse,intersect:Ose,except:Ise}),Ase=Qd("union",!1),Cse=Qd("union",!0),Ose=Qd("intersect",!1),Ise=Qd("except",!1);var Go=class{static[$]="SQLiteQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=k(e,xn)?e:void 0,this.dialectConfig=k(e,xn)?void 0:e}$with(e){let r=this;return{as(i){return typeof i=="function"&&(i=i(r)),new Proxy(new Uo(i.getSQL(),i.getSelectedFields(),e,!0),new ot({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}}with(...e){let r=this;function i(n){return new Dr({fields:n??void 0,session:void 0,dialect:r.getDialect(),withList:e})}function s(n){return new Dr({fields:n??void 0,session:void 0,dialect:r.getDialect(),withList:e,distinct:!0})}return{select:i,selectDistinct:s}}select(e){return new Dr({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Dr({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new Vo(this.dialectConfig)),this.dialect}};var Xl=class{constructor(e,r,i,s){this.table=e,this.session=r,this.dialect=i,this.withList=s}static[$]="SQLiteInsertBuilder";values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let r=e.map(i=>{let s={},n=this.table[B.Symbol.Columns];for(let o of Object.keys(i)){let a=i[o];s[o]=k(a,Q)?a:new fr(a,n[o])}return s});return new Yd(this.table,r,this.session,this.dialect,this.withList)}select(e){let r=typeof e=="function"?e(new Go):e;if(!k(r,Q)&&!Ul(this.table[qd],r._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new Yd(this.table,r,this.session,this.dialect,this.withList,!0)}},Yd=class extends Vt{constructor(e,r,i,s,n,o){super(),this.session=i,this.dialect=s,this.config={table:e,values:r,withList:n,select:o}}static[$]="SQLiteInsert";config;returning(e=this.config.table[Ct.Symbol.Columns]){return this.config.returning=jr(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=A`do nothing`;else{let r=Array.isArray(e.target)?A`${e.target}`:A`${[e.target]}`,i=e.where?A` where ${e.where}`:A``;this.config.onConflict=A`${r} do nothing${i}`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=e.where?A` where ${e.where}`:void 0,i=e.targetWhere?A` where ${e.targetWhere}`:void 0,s=e.setWhere?A` where ${e.setWhere}`:void 0,n=Array.isArray(e.target)?A`${e.target}`:A`${[e.target]}`,o=this.dialect.buildUpdateSet(this.config.table,Fd(this.config.table,e.set));return this.config.onConflict=A`${n}${i} do update set ${o}${r}${s}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e=!0){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0)}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}};var Zl=class{constructor(e,r,i,s){this.table=e,this.session=r,this.dialect=i,this.withList=s}static[$]="SQLiteUpdateBuilder";set(e){return new lw(this.table,Fd(this.table,e),this.session,this.dialect,this.withList)}},lw=class extends Vt{constructor(e,r,i,s,n){super(),this.session=i,this.dialect=s,this.config={set:r,table:e,withList:n,joins:[]}}static[$]="SQLiteUpdate";config;from(e){return this.config.from=e,this}createJoin(e){return(r,i)=>{let s=Hl(r);if(typeof s=="string"&&this.config.joins.some(n=>n.alias===s))throw new Error(`Alias "${s}" is already used in this query`);if(typeof i=="function"){let n=this.config.from?k(r,Ct)?r[B.Symbol.Columns]:k(r,ut)?r._.selectedFields:k(r,ks)?r[We].selectedFields:void 0:void 0;i=i(new Proxy(this.config.table[B.Symbol.Columns],new ot({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),n&&new Proxy(n,new ot({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:i,table:r,joinType:e,alias:s}),this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}orderBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.table[B.Symbol.Columns],new ot({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(r)?r:[r];this.config.orderBy=i}else{let r=e;this.config.orderBy=r}return this}limit(e){return this.config.limit=e,this}returning(e=this.config.table[Ct.Symbol.Columns]){return this.config.returning=jr(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e=!0){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0)}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}};var Xd=class t extends Q{constructor(e){super(t.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.session=e.session,this.sql=t.buildCount(e.source,e.filters)}sql;static[$]="SQLiteCountBuilderAsync";[Symbol.toStringTag]="SQLiteCountBuilderAsync";session;static buildEmbeddedCount(e,r){return A`(select count(*) from ${e}${A.raw(" where ").if(r)}${r})`}static buildCount(e,r){return A`select count(*) from ${e}${A.raw(" where ").if(r)}${r}`}then(e,r){return Promise.resolve(this.session.count(this.sql)).then(e,r)}catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}};var Zd=class{constructor(e,r,i,s,n,o,a,l){this.mode=e,this.fullSchema=r,this.schema=i,this.tableNamesMap=s,this.table=n,this.tableConfig=o,this.dialect=a,this.session=l}static[$]="SQLiteAsyncRelationalQueryBuilder";findMany(e){return this.mode==="sync"?new eh(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many"):new ec(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return this.mode==="sync"?new eh(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first"):new ec(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},ec=class extends Vt{constructor(e,r,i,s,n,o,a,l,c){super(),this.fullSchema=e,this.schema=r,this.tableNamesMap=i,this.table=s,this.tableConfig=n,this.dialect=o,this.session=a,this.config=l,this.mode=c}static[$]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(e=!1){let{query:r,builtQuery:i}=this._toSQL();return this.session[e?"prepareOneTimeQuery":"prepareQuery"](i,void 0,this.mode==="first"?"get":"all",!0,(s,n)=>{let o=s.map(a=>Hd(this.schema,this.tableConfig,a,r.selection,n));return this.mode==="first"?o[0]:o})}prepare(){return this._prepare(!1)}_toSQL(){let e=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),r=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return this.mode==="first"?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}},eh=class extends ec{static[$]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}};var Rn=class extends Vt{constructor(e,r,i,s,n){super(),this.execute=e,this.getSQL=r,this.dialect=s,this.mapBatchResult=n,this.config={action:i}}static[$]="SQLiteRaw";config;getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(e,r){return r?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var Ko=class{constructor(e,r,i,s){this.resultKind=e,this.dialect=r,this.session=i,this._=s?{schema:s.schema,fullSchema:s.fullSchema,tableNamesMap:s.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={};let n=this.query;if(this._.schema)for(let[o,a]of Object.entries(this._.schema))n[o]=new Zd(e,s.fullSchema,this._.schema,this._.tableNamesMap,s.fullSchema[o],a,r,i)}static[$]="BaseSQLiteDatabase";query;$with(e){let r=this;return{as(i){return typeof i=="function"&&(i=i(new Go(r.dialect))),new Proxy(new Uo(i.getSQL(),i.getSelectedFields(),e,!0),new ot({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}}$count(e,r){return new Xd({source:e,filters:r,session:this.session})}with(...e){let r=this;function i(l){return new Dr({fields:l??void 0,session:r.session,dialect:r.dialect,withList:e})}function s(l){return new Dr({fields:l??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:!0})}function n(l){return new Zl(l,r.session,r.dialect,e)}function o(l){return new Xl(l,r.session,r.dialect,e)}function a(l){return new Yl(l,r.session,r.dialect,e)}return{select:i,selectDistinct:s,update:n,insert:o,delete:a}}select(e){return new Dr({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Dr({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(e){return new Zl(e,this.session,this.dialect)}insert(e){return new Xl(e,this.session,this.dialect)}delete(e){return new Yl(e,this.session,this.dialect)}run(e){let r=typeof e=="string"?A.raw(e):e.getSQL();return this.resultKind==="async"?new Rn(async()=>this.session.run(r),()=>r,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(r)}all(e){let r=typeof e=="string"?A.raw(e):e.getSQL();return this.resultKind==="async"?new Rn(async()=>this.session.all(r),()=>r,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(r)}get(e){let r=typeof e=="string"?A.raw(e):e.getSQL();return this.resultKind==="async"?new Rn(async()=>this.session.get(r),()=>r,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(r)}values(e){let r=typeof e=="string"?A.raw(e):e.getSQL();return this.resultKind==="async"?new Rn(async()=>this.session.values(r),()=>r,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(r)}transaction(e,r){return this.session.transaction(e,r)}};var cw=class extends Vt{constructor(e){super(),this.resultCb=e}static[$]="ExecuteResultSync";async execute(){return this.resultCb()}sync(){return this.resultCb()}},th=class{constructor(e,r,i){this.mode=e,this.executeMethod=r,this.query=i}static[$]="PreparedQuery";joinsNotNullableMap;getQuery(){return this.query}mapRunResult(e,r){return e}mapAllResult(e,r){throw new Error("Not implemented")}mapGetResult(e,r){throw new Error("Not implemented")}execute(e){return this.mode==="async"?this[this.executeMethod](e):new cw(()=>this[this.executeMethod](e))}mapResult(e,r){switch(this.executeMethod){case"run":return this.mapRunResult(e,r);case"all":return this.mapAllResult(e,r);case"get":return this.mapGetResult(e,r)}}},rh=class{constructor(e){this.dialect=e}static[$]="SQLiteSession";prepareOneTimeQuery(e,r,i,s){return this.prepareQuery(e,r,i,s)}run(e){let r=this.dialect.sqlToQuery(e);try{return this.prepareOneTimeQuery(r,void 0,"run",!1).run()}catch(i){throw new En({cause:i,message:`Failed to run the query '${r.sql}'`})}}extractRawRunValueFromBatchResult(e){return e}all(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).all()}extractRawAllValueFromBatchResult(e){throw new Error("Not implemented")}get(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).get()}extractRawGetValueFromBatchResult(e){throw new Error("Not implemented")}values(e){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(e),void 0,"run",!1).values()}async count(e){return(await this.values(e))[0][0]}extractRawValuesValueFromBatchResult(e){throw new Error("Not implemented")}},ih=class extends Ko{constructor(e,r,i,s,n=0){super(e,r,i,s),this.schema=s,this.nestedIndex=n}static[$]="SQLiteTransaction";rollback(){throw new Kd}};var sh=class extends rh{constructor(e,r,i,s={}){super(r),this.client=e,this.schema=i,this.logger=s.logger??new Nd}static[$]="BetterSQLiteSession";logger;prepareQuery(e,r,i,s,n){let o=this.client.prepare(e.sql);return new fw(o,e,this.logger,r,i,s,n)}transaction(e,r={}){let i=new uw("sync",this.dialect,this,this.schema);return this.client.transaction(e)[r.behavior??"deferred"](i)}},uw=class t extends ih{static[$]="BetterSQLiteTransaction";transaction(e){let r=`sp${this.nestedIndex}`,i=new t("sync",this.dialect,this.session,this.schema,this.nestedIndex+1);this.session.run(A.raw(`savepoint ${r}`));try{let s=e(i);return this.session.run(A.raw(`release savepoint ${r}`)),s}catch(s){throw this.session.run(A.raw(`rollback to savepoint ${r}`)),s}}},fw=class extends th{constructor(e,r,i,s,n,o,a){super("sync",n,r),this.stmt=e,this.logger=i,this.fields=s,this._isResponseInArrayMode=o,this.customResultMapper=a}static[$]="BetterSQLitePreparedQuery";run(e){let r=Bl(this.query.params,e??{});return this.logger.logQuery(this.query.sql,r),this.stmt.run(...r)}all(e){let{fields:r,joinsNotNullableMap:i,query:s,logger:n,stmt:o,customResultMapper:a}=this;if(!r&&!a){let c=Bl(s.params,e??{});return n.logQuery(s.sql,c),o.all(...c)}let l=this.values(e);return a?a(l):l.map(c=>Ov(r,c,i))}get(e){let r=Bl(this.query.params,e??{});this.logger.logQuery(this.query.sql,r);let{fields:i,stmt:s,joinsNotNullableMap:n,customResultMapper:o}=this;if(!i&&!o)return s.get(...r);let a=s.raw().get(...r);if(a)return o?o([a]):Ov(i,a,n)}values(e){let r=Bl(this.query.params,e??{});return this.logger.logQuery(this.query.sql,r),this.stmt.raw().all(...r)}isResponseInArrayMode(){return this._isResponseInArrayMode}};var dw=class extends Ko{static[$]="BetterSQLite3Database"};function Wo(t,e={}){let r=new Vo({casing:e.casing}),i;e.logger===!0?i=new $d:e.logger!==!1&&(i=e.logger);let s;if(e.schema){let a=gL(e.schema,vL);s={fullSchema:e.schema,schema:a.tables,tableNamesMap:a.tableNamesMap}}let n=new sh(t,r,s,{logger:i}),o=new dw("sync",r,n,s);return o.$client=t,o}function nh(...t){if(t[0]===void 0||typeof t[0]=="string"){let e=t[0]===void 0?new tc.default:new tc.default(t[0]);return Wo(e,t[1])}if(Kq(t[0])){let{connection:e,client:r,...i}=t[0];if(r)return Wo(r,i);if(typeof e=="object"){let{source:n,...o}=e,a=new tc.default(n,o);return Wo(a,i)}let s=new tc.default(e);return Wo(s,i)}return Wo(t[0],t[1])}(t=>{function e(r){return Wo({},r)}t.mock=e})(nh||(nh={}));var PL=kt(require("node:crypto"),1),oh=kt(require("node:fs"),1);function AL(t){let e=t.migrationsFolder,r=[],i=`${e}/meta/_journal.json`;if(!oh.default.existsSync(i))throw new Error("Can't find meta/_journal.json file");let s=oh.default.readFileSync(`${e}/meta/_journal.json`).toString(),n=JSON.parse(s);for(let o of n.entries){let a=`${e}/${o.tag}.sql`;try{let l=oh.default.readFileSync(`${e}/${o.tag}.sql`).toString(),c=l.split("--> statement-breakpoint").map(u=>u);r.push({sql:c,bps:o.breakpoints,folderMillis:o.when,hash:PL.default.createHash("sha256").update(l).digest("hex")})}catch{throw new Error(`No file ${a} found in ${e} folder`)}}return r}function CL(t,e){let r=AL(e);t.dialect.migrate(r,t.session,e)}var Ei=kt(require("path"));function $se(){return process.env.NODE_ENV==="production"?"/app":Ei.default.join(__dirname,"..","..")}var OL=$se(),hw=Ei.default.join(OL,"data"),pw=Ei.default.join(OL,"system");console.log("[SYSTEM] data path: ",hw);console.log("[SYSTEM] system path: ",pw);var ah=Ei.default.join(hw,"assets"),rc="/public",Jo=Ei.default.join(ah,rc),mw="http://localhost:"+sr.port,yw=mw+sr.apiPrefix;var Nse="jellytavern.db",gw=Ei.default.join(hw,"database"),Tn=Ei.default.join(gw,Nse),bw=Ei.default.join(pw,"db-migrations"),IL=Ei.default.join(pw,"db-ts-files","theSchema.ts");var ae=je("cards",{id:Z({length:32}).primaryKey(),name:Z({length:128}).notNull(),visibility:at().notNull().$type().default(1),createTime:at({mode:"timestamp"}).notNull(),updateTime:at({mode:"timestamp"}).notNull(),isDraft:at().notNull().$type().default(0)});var xi=je("cardAiConfigs",{id:Z({length:32}).primaryKey(),cardId:Z({length:32}).notNull().references(()=>ae.id,{onDelete:"cascade"}),promptParts:Z().notNull()});var Ot=je("cardImages",{id:Z({length:32}).primaryKey(),src:Z().notNull(),type:at().notNull().$type(),order:at().notNull().default(1),isDraft:at().notNull().$type().default(0)});var Ri=je("cardPresentations",{id:Z({length:32}).primaryKey(),cardId:Z({length:32}).notNull().references(()=>ae.id,{onDelete:"cascade"}),description:Z(),shortName:Z(),shortDescription:Z()});var vr=je("tags",{id:Z({length:32}).primaryKey(),tag:Z({length:64}).notNull().unique(),tagType:at().notNull().$type()});var pr=je("cardsTags",{id:Z({length:32}).primaryKey(),tagId:Z({length:32}).notNull().references(()=>vr.id,{onDelete:"cascade"}),cardId:Z({length:32}).notNull().references(()=>ae.id,{onDelete:"cascade"})},t=>({uniqueCardTagCombo:Ns().on(t.tagId,t.cardId)}));var De=je("stories",{id:Z({length:32}).primaryKey(),cardSourcesJson:Z(),storyEntriesJson:Z().notNull().default("[]"),starterPrompt:Z().notNull().default(""),storyProvider:Z().notNull().default(""),storySettingsJson:Z().notNull().default("{}"),createTime:at({mode:"timestamp"}).notNull(),updateTime:at({mode:"timestamp"}).notNull()});var yt=je("storyCardSources",{id:at().primaryKey(),storyId:Z({length:32}).notNull().references(()=>De.id,{onDelete:"cascade"}),cardId:Z({length:32}).notNull(),cardSource:Z({length:32}).notNull()},t=>({uniqueCardTagCombo:Ns().on(t.storyId,t.cardId)}));var wr=je("storyProviderParameterConfigs",{id:Z({length:32}).primaryKey(),provider:Z().notNull(),uiJson:Z().notNull(),paramsJson:Z().notNull()});var Zt=je("starterPrompts",{id:Z({length:32}).primaryKey(),cardId:Z({length:32}).notNull().references(()=>ae.id,{onDelete:"cascade"}),summary:Z().notNull(),prompt:Z().notNull(),initialAutoGenerate:at().notNull().$type().default(0)});var Ti=je("books",{id:Z({length:32}).primaryKey(),name:Z().notNull(),dataJson:Z().notNull().default("{}")});var ft=je("cardCardImages",{id:Z({length:32}).primaryKey(),imageId:Z({length:32}).notNull().references(()=>Ot.id,{onDelete:"cascade"}),cardId:Z({length:32}).notNull().references(()=>ae.id,{onDelete:"cascade"})},t=>({uniqueCardTagCombo:Ns().on(t.imageId,t.cardId)}));var $L=hr(ae,({one:t,many:e})=>({presentation:t(Ri),aiConfig:t(xi),images:e(ft),starterPrompts:e(Zt),tags:e(pr),storyReferences:e(yt),books:e(Ti)})),NL=hr(Ri,({one:t})=>({card:t(ae,{fields:[Ri.cardId],references:[ae.id]})})),kL=hr(Ot,({many:t})=>({card:t(ae)})),qL=hr(xi,({one:t})=>({card:t(ae,{fields:[xi.cardId],references:[ae.id]})})),LL=hr(Zt,({one:t})=>({card:t(ae,{fields:[Zt.cardId],references:[ae.id]})})),jL=hr(pr,({one:t})=>({card:t(ae,{fields:[pr.cardId],references:[ae.id]}),tag:t(vr,{fields:[pr.tagId],references:[vr.id]})})),DL=hr(ft,({one:t})=>({card:t(ae,{fields:[ft.cardId],references:[ae.id]}),image:t(Ot,{fields:[ft.imageId],references:[Ot.id]})}));var FL=hr(yt,({one:t})=>({story:t(De,{fields:[yt.storyId],references:[De.id]})})),ML=hr(De,({many:t})=>({cardSources:t(yt)}));var Qo=je("cardsBooks",{id:Z({length:32}).primaryKey(),bookId:Z({length:32}).notNull().references(()=>Ti.id,{onDelete:"cascade"}),cardId:Z({length:32}).notNull().references(()=>ae.id,{onDelete:"cascade"})},t=>({uniqueCardTagCombo:Ns().on(t.bookId,t.cardId)}));var zL=hr(Qo,({one:t})=>({card:t(ae,{fields:[Qo.cardId],references:[ae.id]}),book:t(Ti,{fields:[Qo.bookId],references:[Ti.id]})})),BL=hr(Ti,({many:t})=>({cards:t(ae)}));var UL={cardAiConfigs:xi,cardImages:Ot,cardPresentations:Ri,cards:ae,starterPrompts:Zt,tags:vr,stories:De,storyProviderParameterConfigs:wr,books:Ti,cardTag:pr,cardBooks:Qo,storyCardSources:yt,cardCardImages:ft,bookRelations:BL,cardRelations:$L,cardsBooksRelations:zL,cardPresentationsRelations:NL,cardImagesRelations:kL,cardAiConfigsRelations:qL,storyCardSourcesRelations:FL,storyRelations:ML,starterPromptsRelations:LL,cardTagsRelations:jL,cardCardImagesRelations:DL};var Pi=class{static getLogPrefix(e,r=0){return"\x1B["+r+"m"+e+"\x1B[0m"}};var VL=require("fs"),GL=kt(require("path"));var ic=kt(require("fs"));function HL(t){return ic.default.existsSync(t)?!1:(ic.default.mkdirSync(t,{recursive:!0}),!0)}function sc(t,e=!1){return ic.default.existsSync(t)?(ic.default.rmSync(t,{recursive:e}),!0):!1}var kse=Pi.getLogPrefix("*[STARTUP PURGE]",35);function Pn(...t){console.log(kse,...t)}function vw(t){Pn(`- Deleting:
`,t),sc(t)&&Pn("-> Deleted!")}async function qse(t,e=!0){try{await VL.promises.rm(t,{recursive:!0,force:e}),Pn(`Folder deleted:
`,t)}catch(r){console.error(`Error deleting folder: ${r}`)}}function KL(){Pn("DB RESET: Starting"),vw(Tn),vw(Tn+"-shm"),vw(Tn+"-wal"),Pn("DB RESET: Complete")}async function WL(){Pn("CARD IMAGE PURGE: Starting");let t=GL.default.join(Jo,"cards");await qse(t),Pn("CARD IMAGE PURGE: Complete")}function ww(...t){console.log(Lse,...t)}sr.deleteDatabaseOnStartup&&KL();var Lse=Pi.getLogPrefix("*[DB]",31);HL(gw);ww(Tn);var _w=new JL.default(Tn,{});_w.pragma("journal_mode = WAL");_w.pragma("foreign_keys = ON");var G=nh({client:_w,schema:UL}),QL=()=>new Promise(t=>{ww("Starting database migration","Path:",bw),CL(G,{migrationsFolder:bw,migrationsSchema:IL}),ww("Migration complete"),t()});var YL=kt(require("path"));var ve=class{static withApiPrefix(e){return(sr.apiPrefix+"/"+e).replaceAll("//","/")}static toPublicAssetsUri(e,r){let i=/[^0-9a-zA-Z-]/g,s=e.split(i);return r=r.replaceAll("..","."),YL.default.posix.join(Jo,...s,r)}};function jse(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let c=0;c<e.length;c++)e[c]=255;for(let c=0;c<t.length;c++){let u=t.charAt(c),f=u.charCodeAt(0);if(e[f]!==255)throw new TypeError(u+" is ambiguous");e[f]=c}let r=t.length,i=t.charAt(0),s=Math.log(r)/Math.log(256),n=Math.log(256)/Math.log(r);function o(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let u=0,f=0,p=0,d=c.length;for(;p!==d&&c[p]===0;)p++,u++;let h=(d-p)*n+1>>>0,m=new Uint8Array(h);for(;p!==d;){let w=c[p],b=0;for(let y=h-1;(w!==0||b<f)&&y!==-1;y--,b++)w+=256*m[y]>>>0,m[y]=w%r>>>0,w=w/r>>>0;if(w!==0)throw new Error("Non-zero carry");f=b,p++}let v=h-f;for(;v!==h&&m[v]===0;)v++;let g=i.repeat(u);for(;v<h;++v)g+=t.charAt(m[v]);return g}function a(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let u=0,f=0,p=0;for(;c[u]===i;)f++,u++;let d=(c.length-u)*s+1>>>0,h=new Uint8Array(d);for(;c[u];){let w=e[c.charCodeAt(u)];if(w===255)return;let b=0;for(let y=d-1;(w!==0||b<p)&&y!==-1;y--,b++)w+=r*h[y]>>>0,h[y]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");p=b,u++}let m=d-p;for(;m!==d&&h[m]===0;)m++;let v=new Uint8Array(f+(d-m)),g=f;for(;m!==d;)v[g++]=h[m++];return v}function l(c){let u=a(c);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var XL=jse;var Dse="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ZL=XL(Dse);var It=[];for(let t=0;t<256;++t)It.push((t+256).toString(16).slice(1));function ej(t,e=0){return(It[t[e+0]]+It[t[e+1]]+It[t[e+2]]+It[t[e+3]]+"-"+It[t[e+4]]+It[t[e+5]]+"-"+It[t[e+6]]+It[t[e+7]]+"-"+It[t[e+8]]+It[t[e+9]]+"-"+It[t[e+10]]+It[t[e+11]]+It[t[e+12]]+It[t[e+13]]+It[t[e+14]]+It[t[e+15]]).toLowerCase()}var tj=require("crypto"),ch=new Uint8Array(256),lh=ch.length;function Sw(){return lh>ch.length-16&&((0,tj.randomFillSync)(ch),lh=0),ch.slice(lh,lh+=16)}var rj=require("crypto"),Ew={randomUUID:rj.randomUUID};function Fse(t,e,r){if(Ew.randomUUID&&!e&&!t)return Ew.randomUUID();t=t||{};let i=t.random??t.rng?.()??Sw();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let s=0;s<16;++s)e[r+s]=i[s];return e}return ej(i)}var nc=Fse;function dt(){let t=Buffer.alloc(16);return nc({},t),ZL.encode(t)}var xw=class{async createEmptyEntryForCardAsync(e){let r=dt(),i=await G.insert(Ri).values({id:r,cardId:e,description:"",shortDescription:"",shortName:""});return r}async updatePresentationByCardIdAsync(e,r){return(await G.update(Ri).set({description:r.description,shortDescription:r.shortDescription,shortName:r.shortName}).where(ie(Ri.cardId,e))).changes>0}toInsertableCardPresentation(e,r){return{id:dt(),cardId:e,description:r.description,shortDescription:r.shortDescription,shortName:r.shortName}}},qs=new xw;var Rw=class{async updateAiConfigByCardIdAsync(e,r){return(await G.update(xi).set({promptParts:JSON.stringify(r.promptParts)??"[]"}).where(ie(xi.cardId,e))).changes>0}async createEmptyEntryForCardAsync(e){return(await G.insert(xi).values({id:dt(),cardId:e,promptParts:"[]"})).lastInsertRowid}},Ls=new Rw;var Tw=(r=>(r[r.Summary=1]="Summary",r[r.Main=2]="Main",r))(Tw||{});var Pw={displayName:"Offline",id:"offline-user",jellyTokenBalance:0};function Aw(t){return{id:t.id,type:"card",visibility:t.visibility,createTime:t.createTime,updateTime:t.updateTime,name:t.name,user:Pw,presentation:t.presentation,images:zse(t.images),isDraft:!!t.isDraft,aiConfig:Bse(t.aiConfig),tags:Use(t.tags),starterPrompts:t.starterPrompts,apiSource:"offline-api",books:[]}}function Mse(t){let e=t.image;return{id:e.id,isDraft:!!e.isDraft,order:e.order,src:mw+e.src,type:e.type}}function zse(t){return t.map(e=>Mse(e))}function Bse(t){return{id:t.id,promptParts:JSON.parse(t.promptParts),postHistoryInstructions:t.postHistoryInstructions}}function Use(t){return t.map(e=>e.tag.tag)}function Cw(t){return{id:t.id,type:"story",user:Pw,apiSource:"offline-api",starterPrompt:t.starterPrompt,storyEntries:JSON.parse(t.storyEntriesJson),storyProvider:t.storyProvider,storySettings:JSON.parse(t.storySettingsJson),createTime:t.createTime,updateTime:t.updateTime,cardSources:t.cards}}var Ow={aiConfig:!0,starterPrompts:!0,images:{with:{image:!0}},presentation:!0,tags:{with:{tag:!0}}};var nj=kt(require("fs")),oj=kt(require("path")),aj=kt(require("sharp"));var oc=kt(require("path"));function ij(t){return oc.default.join(rc,"cards",t,"/")}function sj(t){let e=ij(t);return oc.default.join(ah,e)}function Iw(t,e){let r=ij(t),i=Hse(e);return oc.default.join(r,i).replaceAll("\\","/")}function $w(t,e){let r=Iw(t,e);return oc.default.join(ah,r)}function Hse(t){let e=t.replace(/[^a-zA-Z0-9-_\.]/g,"_");return e=e.replace(/\.+/g,"."),e=e.replace(/^\.|\.$/g,"_"),e+".webp"}var Nw=class{async saveAsync(e,r,i){let s=$w(e,r);await nj.default.promises.mkdir(oj.default.dirname(s),{recursive:!0}),await(0,aj.default)(i).toColorspace("srgb").webp({lossless:!1}).toFile(s)}delete(e,r){let i=$w(e,r);sc(i)}deleteAllCardEntries(e){let r=sj(e);sc(r,!0)}},Yo=new Nw;var kw=class{async addImageToCardAsync(e,r){if(!await this.getImageAsync(e))throw new Error("No such image "+e);await G.query.cardCardImages.findFirst({where:et(ie(ft.cardId,r),ie(ft.imageId,e))})||await G.insert(ft).values({id:dt(),cardId:r,imageId:e})}async deleteImagesAsync(e,r){await G.delete(ft).where(et(ie(ft.cardId,e),Ht(ft.imageId,r)))}async deleteAllCardImagesAsync(e){await G.delete(ft).where(ie(ft.cardId,e))}async undraftImagesAsync(e,r){let s=(await G.query.cardCardImages.findMany({where:et(ie(ft.cardId,e),Ht(ft.imageId,r))})).map(n=>n.imageId);await G.update(Ot).set({isDraft:0}).where(et(Ht(Ot.id,s)))}async insertAsync(e,r){let i=this.toInsertableImage(e,r);return await G.insert(Ot).values(i),await this.addImageToCardAsync(i.id,e),this.toImageFromDbResult(i)}async getImageAsync(e){let r=await G.query.cardImages.findFirst({where:ie(Ot.id,e)});if(r)return this.toImageFromDbResult(r)}async getCardImagesAsync(e,r){let i=[ie(Ot.type,r.imageType)];switch(r.include){case 1:i.push(ie(Ot.isDraft,1));break;case 0:i.push(ie(Ot.isDraft,0));break;default:case 2:break}let n=(await G.query.cardCardImages.findMany({where:ie(ft.cardId,e)})).map(a=>a.imageId);return(await G.query.cardImages.findMany({where:et(Ht(Ot.id,n),...i)})).map(a=>this.toImageFromDbResult(a))}toImageFromDbResult(e){return{id:e.id,src:e.src,order:e.order??1,type:e.type,isDraft:!!e.isDraft}}toInsertableImage(e,r){let i=dt(),s=Iw(e,i);return{id:i,order:r.order??1,type:r.imageType,isDraft:r.isDraft?1:0,src:s}}},_r=new kw;function Xo(t){return t.replace("-draft","")}function An(t){return Xo(t)+"-draft"}var qw=class{logPrefix=Pi.getLogPrefix("[CardService]",33);async createEmptyCardAsync(e){return e=await this.createEmptyCardEntryAsync(e),await qs.createEmptyEntryForCardAsync(e),await Ls.createEmptyEntryForCardAsync(e),e}async createEmptyDraftAsync(e){return e=An(e),await this.createEmptyCardAsync(e),await G.update(ae).set({isDraft:1}).where(ie(ae.id,e)),e}async getCardAsync(e){this.log("getCardAsync",e);let r=et(ie(ae.id,e));return await this.findFirst(r)}async getCardsAsync(e){this.log("getCardsAsync","["+e.join(", ")+"]");let r=et(Ht(ae.id,e));return await this.findMany(r)}async updateCardAsync(e,r){return(await G.update(ae).set({updateTime:new Date,name:r.name??""}).where(ie(ae.id,e))).changes>0}async deleteCardAsync(e){let r=Xo(e),i=An(e),s=[];e===r?s.push(r,i):s.push(e);for(let o of s)await _r.deleteAllCardImagesAsync(o),await this.deleteCardStoriesAsync(o),await G.delete(ae).where(ie(ae.id,o)),Yo.deleteAllCardEntries(o)}async deleteCardStoriesAsync(e){let i=(await G.query.storyCardSources.findMany({where:ie(yt.cardId,e)})).map(a=>a.storyId),n=(await G.query.storyCardSources.findMany({where:Ht(yt.storyId,i)})).reduce((a,l)=>(a[l.storyId]=a[l.storyId]||[],a[l.storyId].push(l.cardId),a),{}),o=Object.entries(n).filter(([a,l])=>l.length===1).map(([a])=>a);await G.delete(De).where(Ht(De.id,o)),await G.delete(yt).where(ie(yt.cardId,e))}async searchCardsAsync(e,r,i){return await this.findMany(ie(ae.isDraft,0))}async findFirst(e){let r=await G.query.cards.findFirst({with:Ow,where:e});return r?Aw(r):void 0}async findMany(e){return(await G.query.cards.findMany({with:Ow,where:e})).map(s=>Aw(s))}async createEmptyCardEntryAsync(e){e=e??dt();let r=new Date;return await G.insert(ae).values({id:e,createTime:r,updateTime:r,name:"New card",visibility:1}).catch(i=>{throw this.log("Problem inserting new empty card"),console.error(i),new Error("Failed to create card")}),e}log(...e){console.log(this.logPrefix,...e)}},lt=new qw;var Lw=class{async getTagIdsAsync(e){return e=this.toUniqueTagsArray(e),(await G.query.tags.findMany({columns:{id:!0},where:Ht(vr.tag,e)})).map(i=>i.id)}async setCardTagsAsync(e,r){await G.delete(pr).where(ie(pr.cardId,e)),r.length&&await this.addCardTagsAsync(e,r)}async removeTagsFromCardAsync(e,r){r=this.toUniqueTagsArray(r);let i=A`
      WITH tagsQuery as (
        SELECT ${vr.id} as tagId
        FROM ${vr}
        WHERE ${vr.tag} IN ${r}
      )
      DELETE FROM ${pr}
      WHERE ${pr.cardId} = ${e}
      AND ${pr.tagId} IN (SELECT tagId FROM tagsQuery)
    `;return G.run(i),!0}async addCardTagsAsync(e,r){if(r=this.toUniqueTagsArray(r),!r.length)return;await this.addTagsIfNotExistsAsync(r,1);let s=(await this.getTagIdsAsync(r)).map(n=>({id:dt(),cardId:e,tagId:n}));await G.insert(pr).values(s).onConflictDoNothing()}async addTagsIfNotExistsAsync(e,r){if(e=this.toUniqueTagsArray(e),!e.length)return;let i=e.map(s=>({id:dt(),tag:s,tagType:r}));await G.insert(vr).values(i).onConflictDoNothing()}toUniqueTagsArray(e){return Array.isArray(e)?Array.from(new Set(e)):[e]}},js=new Lw;var jw=class{async updateAllStarterPromptsAsync(e,r){let i=(await this.getPromptsByCardIdAsync(e)).map(s=>s.id);await G.transaction(async()=>{let s=i.map(o=>this.deleteStarterPromptAsync(e,o)),n=r.starterPrompts.map(o=>this.createStarterPromptAsync(e,o));await Promise.all(s),await Promise.all(n)})}async getPromptsByCardIdAsync(e){return(await G.query.starterPrompts.findMany({where:ie(Zt.cardId,e)})).map(i=>this.toIStarterPrompt(i))}toIStarterPrompt(e){return{id:e.id,initialAutoGenerate:e.initialAutoGenerate===1,prompt:e.prompt,summary:e.summary}}async deleteStarterPromptAsync(e,r){return(await G.delete(Zt).where(et(ie(Zt.id,r),ie(Zt.cardId,e)))).changes>0}async createStarterPromptAsync(e,r){let i=nc();return await G.insert(Zt).values({id:i,prompt:r.prompt,summary:r.summary,initialAutoGenerate:r.initialAutoGenerate?1:0,cardId:e}),i}async updateStarterPromptAsync(e,r,i){return await G.update(Zt).set({prompt:i.prompt,summary:i.summary,initialAutoGenerate:i.initialAutoGenerate?1:0}).where(et(Vl(Zt.id,r),Vl(Zt.cardId,e))),!0}},ts=new jw;var Dw=class{async importVirtualCardAsync(e){let r=await lt.createEmptyCardAsync();return await this.addCardDataAsync(r,e),r}async addCardDataAsync(e,r){await this.setPrimaryCardData(e,r),await this.setCardStarterPromptsAsync(e,r),await this.setCardAiConfigAsync(e,r),await this.setCardPresentationAsync(e,r)}async setPrimaryCardData(e,r){await lt.updateCardAsync(e,{name:r.name}),await this.setCardTagsAsync(e,r)}async setCardStarterPromptsAsync(e,r){let i=r.starterPrompts.map(s=>({id:dt(),summary:s.summary,prompt:s.prompt,initialAutoGenerate:s.initialAutoGenerate}));await ts.updateAllStarterPromptsAsync(e,{starterPrompts:i})}async setCardAiConfigAsync(e,r){let i=r.aiConfig.promptParts.map(s=>({label:s.label,type:s.type,value:s.value,description:s.description}));Ls.updateAiConfigByCardIdAsync(e,{promptParts:i,postHistoryInstructions:r.aiConfig.postHistoryInstructions??""})}async setCardPresentationAsync(e,r){await qs.updatePresentationByCardIdAsync(e,{description:r.presentation.description??"",shortDescription:r.presentation.shortDescription??"",shortName:r.presentation.shortName??"New card"})}async setCardTagsAsync(e,r){r.tags.length&&await js.addCardTagsAsync(e,r.tags)}},lj=new Dw;var Fw=class{async GetDraftAsync(e){var r=An(e);return await lt.getCardAsync(r)}async commitDraftAsync(e){var r=Xo(e),i=An(e),s=await lt.getCardAsync(i);if(!s)throw this.cardNotFoundException(i);await this.copyCardAsync(s,r),await lt.deleteCardAsync(i)}async createDraftAsync(e){var r=Xo(e),i=An(e),s=await lt.getCardAsync(r);if(!s)throw this.cardNotFoundException(r);await lt.deleteCardAsync(i);var n=await lt.createEmptyDraftAsync(i);if(n!=i)throw new Error("Wrong draft id created");return await this.copyCardAsync(s,i),i}async copyCardAsync(e,r){await Promise.all([this.copyCardMetaAsync(e,r),this.copyAiConfigAsync(e,r),this.copyPresentationAsync(e,r),this.copyStarterPromptsAsync(e,r),this.copyImagesAsync(e.id,r)])}async copyCardMetaAsync(e,r){await lt.updateCardAsync(r,{name:e.name}),js.setCardTagsAsync(r,e.tags)}async copyImagesAsync(e,r){var i=await lt.getCardAsync(r),s=await lt.getCardAsync(e);if(!i)throw new Error("Missing target card in copy operation");if(!s)throw new Error("Missing source card in copy operation");_r.deleteAllCardImagesAsync(r);for(let n of s.images)await _r.addImageToCardAsync(n.id,r)}async copyStarterPromptsAsync(e,r){var i={starterPrompts:e.starterPrompts.map(s=>({initialAutoGenerate:s.initialAutoGenerate,prompt:s.prompt,summary:s.summary}))};await ts.updateAllStarterPromptsAsync(r,i)}async copyPresentationAsync(e,r){let i={description:e.presentation.description??"",shortDescription:e.presentation.shortDescription??"",shortName:e.presentation.shortName??""};await qs.updatePresentationByCardIdAsync(r,i)}async copyAiConfigAsync(e,r){let i={promptParts:e.aiConfig.promptParts,postHistoryInstructions:e.aiConfig.postHistoryInstructions};await Ls.updateAiConfigByCardIdAsync(r,i)}cardNotFoundException(e){return new Error("Could not find the card "+e)}},Mw=new Fw;var zw=class{async postCommitDraftAsync(e,r){await Mw.commitDraftAsync(e.params.cardId)}async postDraftAsync(e,r){return{cardId:await Mw.createDraftAsync(e.params.cardId)}}async getCardAsync(e,r){let{cardId:i}=e.params,s=await lt.getCardAsync(i);if(!s)r.status(404).send();else return s}async getCardsAsync(e,r){let i=e.body;return await lt.getCardsAsync(i)}async postSearchCardsAsync(e,r){let{filters:i,pagination:s,order:n}=e.params;return await lt.searchCardsAsync(i,s,n)}async postCardAsync(e,r){let i=await lt.createEmptyCardAsync();r.send({cardId:i})}async postVirtualCardAsync(e,r){let i=await lj.importVirtualCardAsync(e.body);r.send({cardId:i})}async putCardAsync(e,r){let{cardId:i}=e.params;await lt.updateCardAsync(i,e.body)}async deleteCardAsync(e,r){let{cardId:i}=e.params;await lt.deleteCardAsync(i)}async updateAllStarterPromptsAsync(e,r){let{cardId:i}=e.params;await ts.updateAllStarterPromptsAsync(i,e.body)}async postStarterPromptAsync(e,r){let{cardId:i}=e.params,s=await ts.createStarterPromptAsync(i,e.body);r.send({promptId:s})}async putStarterPromptAsync(e,r){let{cardId:i,starterPromptId:s}=e.params;await ts.updateStarterPromptAsync(i,s,e.body)}async deleteStarterPromptAsync(e,r){let{cardId:i,starterPromptId:s}=e.params;await ts.deleteStarterPromptAsync(i,s)}async putAiConfigAsync(e,r){let{cardId:i}=e.params;await Ls.updateAiConfigByCardIdAsync(i,e.body)}async putPresentationAsync(e,r){let{cardId:i}=e.params;await qs.updatePresentationByCardIdAsync(i,e.body)}async deleteCardTagAsync(e,r){let{cardId:i}=e.params,{tags:s}=e.body;await js.removeTagsFromCardAsync(i,s)}async postCardTagAsync(e,r){let{cardId:i}=e.params,{tags:s}=e.body;await js.addCardTagsAsync(i,s)}async putCardTagAsync(e,r){let{cardId:i}=e.params,{tags:s}=e.body;await js.setCardTagsAsync(i,s)}},Ee=new zw;var cj="1.0.0";var Bw=class{async healthAsync(e,r){return{health:"Healthy",timestamp:new Date().toISOString(),uptime:process.uptime(),version:cj,message:"Service is running normally"}}},uj=new Bw;var Uw=class{async setImageIdsAsync(e,r,i){let s=await _r.getCardImagesAsync(e,{imageType:r,include:2}),n=s.filter(a=>i.includes(a.id)).map(a=>a.id),o=s.filter(a=>!i.includes(a.id)).map(a=>a.id);await G.transaction(async()=>{await _r.undraftImagesAsync(e,n),await _r.deleteImagesAsync(e,o),o.forEach(a=>{Yo.delete(e,a)})})}async putDraftAsync(e,r,i){let s={imageType:r,isDraft:!0},n="",o=await _r.getCardImagesAsync(e,{imageType:r,include:1}),a=await _r.insertAsync(e,s);n=a.id,await Yo.saveAsync(e,a.id,i);let l=o.map(c=>c.id);return await _r.deleteImagesAsync(e,l),l.forEach(c=>{Yo.delete(e,c)}),await _r.getImageAsync(n)}},Hw=new Uw;function fj(t,e){let r=e.toLowerCase();for(let i in t)if(Number.isNaN(Number(i))&&Object.prototype.hasOwnProperty.call(t,i)&&i.toLowerCase()===r)return t[i]}var Vw=class{async putDraftAsync(e,r){let{cardId:i}=e.params,s=this.getCardImageType(e),o=await(await e.file()).toBuffer(),a=await Hw.putDraftAsync(i,s,o);r.send(a)}async putImagesAsync(e,r){let{cardId:i}=e.params,s=this.getCardImageType(e),n=e.body.imageIds;await Hw.setImageIdsAsync(i,s,n)}getCardImageType(e){let r=fj(Tw,e.params.imageType);if(r===void 0)throw new Error('Invalid imageType "'+e.params.imageType+'"');return r}},ac=new Vw;var Gw=class{async getStoryProviderConfigurationsAsync(e){return(await G.query.storyProviderParameterConfigs.findMany({where:ie(wr.provider,e)})).map(i=>this.toIStoryProviderParamsConfig(i))}async getStoryProviderConfigurationAsync(e,r){let i=await G.query.storyProviderParameterConfigs.findFirst({where:et(ie(wr.id,e),ie(wr.provider,r))});return i&&this.toIStoryProviderParamsConfig(i)}async deleteStoryProviderConfigurationAsync(e,r){await G.delete(wr).where(et(ie(wr.id,e),ie(wr.provider,r)))}async createStoryProviderConfigurationAsync(e,r){let i=dt();return await G.insert(wr).values({id:i,provider:e,uiJson:this.toJsonString(r.uiJson),paramsJson:this.toJsonString(r.paramsJson)}),i}async updateStoryProviderConfigurationAsync(e,r,i){await G.update(wr).set({uiJson:this.toJsonString(i.uiJson),paramsJson:this.toJsonString(i.paramsJson)}).where(et(ie(wr.id,e),ie(wr.provider,r)))}toJsonString(e){return e?typeof e=="string"?e:JSON.stringify(e):"{}"}toIStoryProviderParamsConfig(e){return{id:e.id,storyProvider:e.provider,uiJson:JSON.parse(e.uiJson),paramsJson:JSON.parse(e.paramsJson)}}},Zo=new Gw;var Kw=class{async getParameterConfigsAsync(e,r){let i=await Zo.getStoryProviderConfigurationsAsync(e.params.storyProvider);r.send(i)}async getParameterConfigAsync(e,r){let i=await Zo.getStoryProviderConfigurationAsync(e.params.configId,e.params.storyProvider);i?r.send(i):r.status(404).send("Resource not found")}async postParameterConfigAsync(e,r){let i=await Zo.createStoryProviderConfigurationAsync(e.params.storyProvider,e.body);r.send({configurationId:i})}async putParameterConfigAsync(e,r){await Zo.updateStoryProviderConfigurationAsync(e.params.configId,e.params.storyProvider,e.body)}async deleteParameterConfigAsync(e,r){await Zo.deleteStoryProviderConfigurationAsync(e.params.configId,e.params.storyProvider)}},ei=new Kw;var Ww=class{async storyExistsAsync(e){return await G.query.stories.findFirst({where:ie(De.id,e),columns:{id:!0}})!==void 0}async getStoryAsync(e){let r=await G.query.stories.findFirst({where:ie(De.id,e),with:{cardSources:!0}});if(!r)return;let i=Cw(r);return await this.setCardReferencesAsync([i]),i}async getStoriesAsync(e){let r=e?Ht(De.id,e):void 0,s=(await G.query.stories.findMany({where:r,with:{cardSources:!0}})).map(n=>Cw(n));return await this.setCardReferencesAsync(s),s}async createStoryAsync(e){let r=dt(),i=new Date;return await G.transaction(async()=>{await G.insert(De).values({id:r,createTime:i,updateTime:i});let s=e.map(n=>{if(!n.apiSource)throw new Error("Card missing apiSource");if(!n.cardId)throw new Error("Card missing cardId");return{storyId:r,cardSource:n.apiSource,cardId:n.cardId}});await G.insert(yt).values(s)}),r}async updateStarterPromptAsync(e,r){await G.update(De).set({starterPrompt:r,updateTime:new Date}).where(ie(De.id,e))}async updateStoryEntriesAsync(e,r){await G.update(De).set({storyEntriesJson:JSON.stringify(r),updateTime:new Date}).where(ie(De.id,e))}async updateStorySettingsAsync(e,r){let s=JSON.stringify({...{streaming:!0,autoscroll:!0,autotrimUnfinishedContent:!0},...r});await G.update(De).set({storySettingsJson:s,updateTime:new Date}).where(ie(De.id,e))}async setStoryProviderAsync(e,r){await G.update(De).set({storyProvider:r,updateTime:new Date}).where(ie(De.id,e))}async deleteStoryAsync(e){await G.delete(yt).where(ie(yt.storyId,e)),await G.delete(De).where(ie(De.id,e))}async setCardReferencesAsync(e){let r=e.map(s=>s.id),i=await G.query.storyCardSources.findMany({where:Ht(yt.storyId,r)});e.forEach(s=>{let n=i.filter(o=>o.storyId===s.id);s.cardSources=n.map(o=>({apiSource:o.cardSource,cardId:o.cardId,type:"cardSource"}))})}},Fr=new Ww;var Jw=class{async getStoryAsync(e,r){let i=e.params.storyId,s=await Fr.getStoryAsync(i);r.send(s)}async getStoriesAsync(e,r){let i=await Fr.getStoriesAsync();r.send(i)}async postStoryAsync(e,r){let{cards:i,storyProvider:s,storySettings:n}=e.body;try{let o=await Fr.createStoryAsync(i);await Fr.setStoryProviderAsync(o,s),await Fr.updateStorySettingsAsync(o,n??{}),r.send({storyId:o})}catch(o){console.error(o),r.send(o)}}async putStarterPromptAsync(e,r){let i=e.params.storyId,{starterPrompt:s}=e.body;this.ensureResourceExistsAsync(r,i)&&await Fr.updateStarterPromptAsync(i,s)}async putStoryEntriesAsync(e,r){let i=e.params.storyId,s=e.body;this.ensureResourceExistsAsync(r,i)&&await Fr.updateStoryEntriesAsync(i,s)}async putStoryProviderAsync(e,r){let i=e.params.storyId,{storyProvider:s}=e.body;this.ensureResourceExistsAsync(r,i)&&await Fr.setStoryProviderAsync(i,s)}async putStorySettingsAsync(e,r){let i=e.params.storyId,{storySettings:s}=e.body;this.ensureResourceExistsAsync(r,i)&&await Fr.updateStorySettingsAsync(i,s)}async deleteStoryAsync(e,r){let i=e.params.storyId;await Fr.deleteStoryAsync(i)}async ensureResourceExistsAsync(e,r){return await Fr.storyExistsAsync(r)?!0:(e.status(404).send("No story found with id "+r),!1)}},$t=new Jw;var Kse=Pi.getLogPrefix("*[Routes]",34);function Wse(...t){console.log(Kse,...t)}var dj=async t=>{Wse("Registering routes"),t.get(ve.withApiPrefix("/status/health"),uj.healthAsync),t.post(ve.withApiPrefix("/stories"),$t.postStoryAsync.bind($t)),t.get(ve.withApiPrefix("/stories/:storyId"),$t.getStoryAsync.bind($t)),t.get(ve.withApiPrefix("/stories"),$t.getStoriesAsync.bind($t)),t.put(ve.withApiPrefix("/stories/:storyId/starterPrompt"),$t.putStarterPromptAsync.bind($t)),t.put(ve.withApiPrefix("/stories/:storyId/storyEntries"),$t.putStoryEntriesAsync.bind($t)),t.put(ve.withApiPrefix("/stories/:storyId/storyProvider"),$t.putStoryProviderAsync.bind($t)),t.put(ve.withApiPrefix("/stories/:storyId/settings"),$t.putStorySettingsAsync.bind($t)),t.delete(ve.withApiPrefix("/stories/:storyId"),$t.deleteStoryAsync.bind($t)),t.get(ve.withApiPrefix("/story-providers/:storyProvider/configurations"),ei.getParameterConfigsAsync.bind(ei)),t.get(ve.withApiPrefix("/story-providers/:storyProvider/configurations/:configId"),ei.getParameterConfigAsync.bind(ei)),t.post(ve.withApiPrefix("/story-providers/:storyProvider/configurations"),ei.postParameterConfigAsync.bind(ei)),t.put(ve.withApiPrefix("/story-providers/:storyProvider/configurations/:configId"),ei.putParameterConfigAsync.bind(ei)),t.delete(ve.withApiPrefix("/story-providers/:storyProvider/configurations/:configId"),ei.deleteParameterConfigAsync.bind(ei)),t.put(ve.withApiPrefix("/cards/:cardId/images/:imageType"),ac.putImagesAsync.bind(ac)),t.put(ve.withApiPrefix("/cards/:cardId/images/:imageType/draft"),ac.putDraftAsync.bind(ac)),t.post(ve.withApiPrefix("/cards/search"),Ee.postSearchCardsAsync.bind(Ee)),t.post(ve.withApiPrefix("/cards"),Ee.postCardAsync.bind(Ee)),t.post(ve.withApiPrefix("/cards/:cardId/draft"),Ee.postDraftAsync.bind(Ee)),t.post(ve.withApiPrefix("/cards/:cardId/draft/commit"),Ee.postCommitDraftAsync.bind(Ee)),t.post(ve.withApiPrefix("/cards/import/virtualcard"),Ee.postVirtualCardAsync.bind(Ee)),t.get(ve.withApiPrefix("/cards/:cardId"),Ee.getCardAsync.bind(Ee)),t.post(ve.withApiPrefix("/cards/get"),Ee.getCardsAsync.bind(Ee)),t.delete(ve.withApiPrefix("/cards/:cardId"),Ee.deleteCardAsync.bind(Ee)),t.put(ve.withApiPrefix("/cards/:cardId"),Ee.putCardAsync.bind(Ee)),t.put(ve.withApiPrefix("/cards/:cardId/aiconfig"),Ee.putAiConfigAsync.bind(Ee)),t.put(ve.withApiPrefix("/cards/:cardId/presentation"),Ee.putPresentationAsync.bind(Ee)),t.put(ve.withApiPrefix("/cards/:cardId/starterprompts"),Ee.updateAllStarterPromptsAsync.bind(Ee)),t.delete(ve.withApiPrefix("/cards/:cardId/starterprompts/:starterPromptId"),Ee.deleteStarterPromptAsync.bind(Ee)),t.post(ve.withApiPrefix("/cards/:cardId/tags"),Ee.postCardTagAsync.bind(Ee)),t.delete(ve.withApiPrefix("/cards/:cardId/tags"),Ee.deleteCardTagAsync.bind(Ee)),t.put(ve.withApiPrefix("/cards/:cardId/tags"),Ee.putCardTagAsync.bind(Ee))};var kj=kt(Nj());function qj(t){let e=["https://jellytest.rian-dev.no","https://jellytavern.ai"];sr.allowLocalWebsitePort&&typeof sr.allowLocalWebsitePort=="number"&&e.push("http://localhost:"+sr.allowLocalWebsitePort),t.register(kj.default,{origin:e,credentials:!1,methods:["GET","POST","PUT","DELETE"]})}var c2=kt(AD()),u2=kt(a2()),Us=(0,l2.default)({});qj(Us);Us.register(c2.fastifyMultipart,{limits:{fieldNameSize:100,fieldSize:100,fields:10,fileSize:1e7,files:1,headerPairs:2e3,parts:1e3}});Us.addHook("onRequest",async(t,e)=>{console.log(`${t.method} ${t.url}`)});Us.register(u2.fastifyStatic,{root:Jo,prefix:rc});Us.setErrorHandler((t,e,r)=>{console.error(t),r.status(500).send({error:t.message})});Us.get("/",(t,e)=>{e.send("To use the api, use uri: "+yw)});var aue=async()=>{let t=[dj(Us),QL()];sr.purgeCardImagesOnStartup&&t.push(WL()),await Promise.all(t);try{await Us.listen({port:sr.port,host:"0.0.0.0"}),console.log("*"),console.log("* API READY"),console.log("Server listening at",yw)}catch(e){console.error(e),process.exit(1)}};aue();process.once("SIGUSR2",function(){process.kill(process.pid,"SIGUSR2")});process.on("SIGINT",function(){process.kill(process.pid,"SIGINT")});
/*! Bundled license information:

@fastify/forwarded/index.js:
  (*!
   * forwarded
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2021 Fastify collaborators
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toad-cache/dist/toad-cache.cjs:
  (**
   * toad-cache
   *
   * @copyright 2024 Igor Savin <kibertoad@gmail.com>
   * @license MIT
   * @version 3.7.0
   *)

light-my-request/lib/form-data.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

escape-html/index.js:
  (*!
   * escape-html
   * Copyright(c) 2012-2013 TJ Holowaychuk
   * Copyright(c) 2015 Andreas Lubbe
   * Copyright(c) 2015 Tiancheng "Timothy" Gu
   * MIT Licensed
   *)

@fastify/send/lib/containsDotFile.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/contentRange.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/createHtmlDocument.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/lib/parseBytesRange.js:
  (*!
   * Based on range-parser
   *
   * Copyright(c) 2012-2014 TJ Holowaychuk
   * Copyright(c) 2015-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

depd/index.js:
  (*!
   * depd
   * Copyright(c) 2014-2018 Douglas Christopher Wilson
   * MIT Licensed
   *)

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toidentifier/index.js:
  (*!
   * toidentifier
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

http-errors/index.js:
  (*!
   * http-errors
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/send/index.js:
  (*!
   * send
   * Copyright(c) 2012 TJ Holowaychuk
   * Copyright(c) 2014-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

content-disposition/index.js:
  (*!
   * content-disposition
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
